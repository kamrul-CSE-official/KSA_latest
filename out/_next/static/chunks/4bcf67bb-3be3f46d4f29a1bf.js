(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8035],{19734:e=>{!function(){"use strict";let t,r,n,o,l,a;var i,s,d,c,m,u,f,g,p,h=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},b=function(e){return{eq:e}},v=b(function(e,t){return e===t}),y=function(e){return b(function(t,r){if(t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e.eq(t[o],r[o]))return!1;return!0})},C=function(e,t){var r,n;return r=y(e),n=function(e){return Array.prototype.slice.call(e).sort(t)},b(function(e,t){return r.eq(n(e),n(t))})},E=function(e){return b(function(t,r){var n=Object.keys(t),o=Object.keys(r);if(!C(v).eq(n,o))return!1;for(var l=n.length,a=0;a<l;a++){var i=n[a];if(!e.eq(t[i],r[i]))return!1}return!0})},x=b(function(e,t){if(e===t)return!0;var r=h(e);return r===h(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(r)?e===t:"array"===r?y(x).eq(e,t):"object"===r&&E(x).eq(e,t))});let _=Object.getPrototypeOf,w=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},S=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&w(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},k=e=>t=>S(t)===e,N=e=>t=>typeof t===e,R=e=>t=>e===t,A=(e,t)=>T(e)&&w(e,t,(e,t)=>_(e)===t),D=k("string"),T=k("object"),O=e=>A(e,Object),B=k("array"),P=R(null),L=N("boolean"),M=R(void 0),F=e=>null==e,I=e=>!F(e),U=N("function"),z=N("number"),j=(e,t)=>{if(B(e)){for(let r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1},H=()=>{},$=(e,t)=>(...r)=>e(t.apply(null,r)),q=(e,t)=>r=>e(t(r)),V=e=>()=>e,W=e=>e,K=(e,t)=>e===t;function Y(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}let G=e=>t=>!e(t),X=e=>()=>{throw Error(e)},Z=e=>e(),Q=e=>{e()},J=V(!1),ee=V(!0);class et{constructor(e,t){this.tag=e,this.value=t}static some(e){return new et(!0,e)}static none(){return et.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?et.some(e(this.value)):et.none()}bind(e){return this.tag?e(this.value):et.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:et.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return I(e)?et.some(e):et.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}et.singletonNone=new et(!1);let er=Array.prototype.slice,en=Array.prototype.indexOf,eo=Array.prototype.push,el=(e,t)=>en.call(e,t),ea=(e,t)=>{let r=el(e,t);return -1===r?et.none():et.some(r)},ei=(e,t)=>el(e,t)>-1,es=(e,t)=>{for(let r=0,n=e.length;r<n;r++)if(t(e[r],r))return!0;return!1},ed=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let r=e[o];n[o]=t(r,o)}return n},ec=(e,t)=>{for(let r=0,n=e.length;r<n;r++)t(e[r],r)},em=(e,t)=>{for(let r=e.length-1;r>=0;r--)t(e[r],r)},eu=(e,t)=>{let r=[],n=[];for(let o=0,l=e.length;o<l;o++){let l=e[o];(t(l,o)?r:n).push(l)}return{pass:r,fail:n}},ef=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];t(o,n)&&r.push(o)}return r},eg=(e,t,r)=>(em(e,(e,n)=>{r=t(r,e,n)}),r),ep=(e,t,r)=>(ec(e,(e,n)=>{r=t(r,e,n)}),r),eh=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let o=e[n];if(t(o,n))return et.some(o);if(r(o,n))break}return et.none()},eb=(e,t)=>eh(e,t,J),ev=(e,t)=>{for(let r=0,n=e.length;r<n;r++)if(t(e[r],r))return et.some(r);return et.none()},ey=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!B(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);eo.apply(t,e[r])}return t},eC=(e,t)=>ey(ed(e,t)),eE=(e,t)=>{for(let r=0,n=e.length;r<n;++r)if(!0!==t(e[r],r))return!1;return!0},ex=e=>{let t=er.call(e,0);return t.reverse(),t},e_=(e,t)=>ef(e,e=>!ei(t,e)),ew=(e,t)=>{let r={};for(let n=0,o=e.length;n<o;n++){let o=e[n];r[String(o)]=t(o,n)}return r},eS=(e,t)=>{let r=er.call(e,0);return r.sort(t),r},ek=(e,t)=>t>=0&&t<e.length?et.some(e[t]):et.none(),eN=e=>ek(e,0),eR=e=>ek(e,e.length-1),eA=U(Array.from)?Array.from:e=>er.call(e),eD=(e,t)=>{for(let r=0;r<e.length;r++){let n=t(e[r],r);if(n.isSome())return n}return et.none()},eT=(e,t)=>{let r=[],n=U(t)?e=>es(r,r=>t(r,e)):e=>ei(r,e);for(let t=0,o=e.length;t<o;t++){let o=e[t];n(o)||r.push(o)}return r},eO=Object.keys,eB=Object.hasOwnProperty,eP=(e,t)=>{let r=eO(e);for(let n=0,o=r.length;n<o;n++){let o=r[n];t(e[o],o)}},eL=(e,t)=>eM(e,(e,r)=>({k:r,v:t(e,r)})),eM=(e,t)=>{let r={};return eP(e,(e,n)=>{let o=t(e,n);r[o.k]=o.v}),r},eF=e=>(t,r)=>{e[r]=t},eI=(e,t,r,n)=>{eP(e,(e,o)=>{(t(e,o)?r:n)(e,o)})},eU=(e,t)=>{let r={},n={};return eI(e,t,eF(r),eF(n)),{t:r,f:n}},ez=(e,t)=>{let r={};return eI(e,t,eF(r),H),r},ej=(e,t)=>{let r=[];return eP(e,(e,n)=>{r.push(t(e,n))}),r},eH=e=>ej(e,W),e$=(e,t)=>eq(e,t)?et.from(e[t]):et.none(),eq=(e,t)=>eB.call(e,t),eV=(e,t)=>eq(e,t)&&void 0!==e[t]&&null!==e[t],eW=(e,t,r=x)=>E(r).eq(e,t),eK=e=>{let t={};return ec(e,e=>{t[e]={}}),eO(t)},eY=e=>void 0!==e.length,eG=Array.isArray,eX=(e,t,r)=>{if(!e)return!1;if(r=r||e,eY(e)){for(let n=0,o=e.length;n<o;n++)if(!1===t.call(r,e[n],n,e))return!1}else for(let n in e)if(eq(e,n)&&!1===t.call(r,e[n],n,e))return!1;return!0},eZ=(e,t)=>{let r=[];return eX(e,(n,o)=>{r.push(t(n,o,e))}),r},eQ=(e,t)=>{let r=[];return eX(e,(n,o)=>{(!t||t(n,o,e))&&r.push(n)}),r},eJ=(e,t,r,n)=>{let o=M(r)?e[0]:r;for(let r=0;r<e.length;r++)o=t.call(n,o,e[r],r);return o},e0=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e))return n;return -1},e1=e=>e[e.length-1],e2=e=>{let t,r=!1;return(...n)=>(r||(r=!0,t=e.apply(null,n)),t)},e3=(e,t,r,n)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),l=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),i=a||n("(pointer:coarse)"),s=o||!l&&a&&n("(min-device-width:768px)"),d=l||a&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:V(o),isiPhone:V(l),isTablet:V(s),isPhone:V(d),isTouch:V(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:V(c),isDesktop:V(!d&&!s&&!c)}},e8=(e,t)=>{for(let r=0;r<e.length;r++){let n=e[r];if(n.test(t))return n}},e5=(e,t)=>{let r=e8(e,t);if(!r)return{major:0,minor:0};let n=e=>Number(t.replace(r,"$"+e));return e9(n(1),n(2))},e6=()=>e9(0,0),e9=(e,t)=>({major:e,minor:t}),e4=(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?e6():e5(e,r)},e7=(e,t)=>eD(t.brands,t=>{let r=t.brand.toLowerCase();return eb(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:e9(parseInt(t.version,10),0)}))}),te=(e,t)=>{let r=String(t).toLowerCase();return eb(e,e=>e.search(r))},tt=(e,t)=>te(e,t).map(e=>{let r=e4(e.versionRegexes,t);return{current:e.name,version:r}}),tr=(e,t)=>te(e,t).map(e=>{let r=e4(e.versionRegexes,t);return{current:e.name,version:r}}),tn=(e,t)=>e.substring(t),to=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,tl=(e,t)=>ti(e,t)?tn(e,t.length):e,ta=(e,t,r=0,n)=>{let o=e.indexOf(t,r);return -1!==o&&(!!M(n)||o+t.length<=n)},ti=(e,t)=>to(e,t,0),ts=(e,t)=>to(e,t,e.length-t.length),td=e=>t=>t.replace(e,""),tc=td(/^\s+|\s+$/g),tm=td(/^\s+/g),tu=td(/\s+$/g),tf=e=>e.length>0,tg=e=>!tf(e),tp=(e,t)=>t<=0?"":Array(t+1).join(e),th=(e,t=10)=>{let r=parseInt(e,t);return isNaN(r)?et.none():et.some(r)},tb=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tv=e=>t=>ta(t,e),ty=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ta(e,"edge/")&&ta(e,"chrome")&&ta(e,"safari")&&ta(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tb],search:e=>ta(e,"chrome")&&!ta(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ta(e,"msie")||ta(e,"trident")},{name:"Opera",versionRegexes:[tb,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tv("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tv("firefox")},{name:"Safari",versionRegexes:[tb,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ta(e,"safari")||ta(e,"mobile/"))&&ta(e,"applewebkit")}],tC=[{name:"Windows",search:tv("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ta(e,"iphone")||ta(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tv("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tv("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tv("linux"),versionRegexes:[]},{name:"Solaris",search:tv("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tv("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tv("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tE={browsers:V(ty),oses:V(tC)},tx="Edge",t_="Chromium",tw="Opera",tS="Firefox",tk="Safari",tN=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(tx),isChromium:n(t_),isIE:n("IE"),isOpera:n(tw),isFirefox:n(tS),isSafari:n(tk)}},tR={unknown:()=>tN({current:void 0,version:e6()}),nu:tN,edge:V(tx),chromium:V(t_),ie:V("IE"),opera:V(tw),firefox:V(tS),safari:V(tk)},tA="Windows",tD="Android",tT="Linux",tO="macOS",tB="Solaris",tP="FreeBSD",tL="ChromeOS",tM=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(tA),isiOS:n("iOS"),isAndroid:n(tD),isMacOS:n(tO),isLinux:n(tT),isSolaris:n(tB),isFreeBSD:n(tP),isChromeOS:n(tL)}},tF={unknown:()=>tM({current:void 0,version:e6()}),nu:tM,windows:V(tA),ios:V("iOS"),android:V(tD),linux:V(tT),macos:V(tO),solaris:V(tB),freebsd:V(tP),chromeos:V(tL)},tI=(e,t,r)=>{let n=tE.browsers(),o=tE.oses(),l=t.bind(e=>e7(n,e)).orThunk(()=>tt(n,e)).fold(tR.unknown,tR.nu),a=tr(o,e).fold(tF.unknown,tF.nu),i=e3(a,l,e,r);return{browser:l,os:a,deviceType:i}},tU=e=>window.matchMedia(e).matches,tz=e2(()=>tI(window.navigator.userAgent,et.from(window.navigator.userAgentData),tU)),tj=()=>tz(),tH=window.navigator.userAgent,t$=tj(),tq=t$.browser,tV=t$.os,tW=t$.deviceType,tK=-1!==tH.indexOf("Windows Phone"),tY={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tq.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tq.isIE(),windowsPhone:tK,browser:{current:tq.current,version:tq.version,isChromium:tq.isChromium,isEdge:tq.isEdge,isFirefox:tq.isFirefox,isIE:tq.isIE,isOpera:tq.isOpera,isSafari:tq.isSafari},os:{current:tV.current,version:tV.version,isAndroid:tV.isAndroid,isChromeOS:tV.isChromeOS,isFreeBSD:tV.isFreeBSD,isiOS:tV.isiOS,isLinux:tV.isLinux,isMacOS:tV.isMacOS,isSolaris:tV.isSolaris,isWindows:tV.isWindows},deviceType:{isDesktop:tW.isDesktop,isiPad:tW.isiPad,isiPhone:tW.isiPhone,isPhone:tW.isPhone,isTablet:tW.isTablet,isTouch:tW.isTouch,isWebView:tW.isWebView}},tG=/^\s*|\s*$/g,tX=e=>F(e)?"":(""+e).replace(tG,""),tZ=function(e,t,r,n){n=n||this,e&&(r&&(e=e[r]),eX(e,(e,o)=>!1!==t.call(n,e,o,r)&&(tZ(e,t,r,n),!0)))},tQ={trim:tX,isArray:eG,is:(e,t)=>t?!!("array"===t&&eG(e))||typeof e===t:void 0!==e,toArray:e=>{if(eG(e))return e;{let t=[];for(let r=0,n=e.length;r<n;r++)t[r]=e[r];return t}},makeMap:(e,t,r={})=>{let n=D(e)?e.split(t||","):e||[],o=n.length;for(;o--;)r[n[o]]={};return r},each:eX,map:eZ,grep:eQ,inArray:(e,t)=>{if(e){for(let r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return -1},hasOwn:eq,extend:(e,...t)=>{for(let r=0;r<t.length;r++){let n=t[r];for(let t in n)if(eq(n,t)){let r=n[t];void 0!==r&&(e[t]=r)}}return e},walk:tZ,resolve:(e,t=window)=>{let r=e.split(".");for(let e=0,n=r.length;e<n&&(t=t[r[e]]);e++);return t},explode:(e,t)=>B(e)?e:""===e?[]:eZ(e.split(t||","),tX),_addCacheSuffix:e=>{let t=tY.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},tJ=(e,t,r=K)=>e.exists(e=>r(e,t)),t0=(e,t,r=K)=>t2(e,t,r).getOr(e.isNone()&&t.isNone()),t1=e=>{let t=[],r=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(r);return t},t2=(e,t,r)=>e.isSome()&&t.isSome()?et.some(r(e.getOrDie(),t.getOrDie())):et.none(),t3=(e,t,r,n)=>e.isSome()&&t.isSome()&&r.isSome()?et.some(n(e.getOrDie(),t.getOrDie(),r.getOrDie())):et.none(),t8=(e,t)=>e?et.some(t):et.none(),t5="undefined"!=typeof window?window:Function("return this;")(),t6=(e,t)=>{let r=null!=t?t:t5;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},t9=(e,t)=>t6(e.split("."),t),t4=(e,t)=>t9(e,t),t7=(e,t)=>{let r=t4(e,t);if(null==r)throw Error(e+" not available on this browser");return r},re=Object.getPrototypeOf,rt=e=>t7("HTMLElement",e),rr=e=>{let t=t9("ownerDocument.defaultView",e);return T(e)&&(rt(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(re(e).constructor.name))},rn=e=>e.dom.nodeName.toLowerCase(),ro=e=>e.dom.nodeType,rl=e=>t=>ro(t)===e,ra=e=>8===ro(e)||"#comment"===rn(e),ri=e=>rs(e)&&rr(e.dom),rs=rl(1),rd=rl(3),rc=rl(9),rm=rl(11),ru=e=>t=>rs(t)&&rn(t)===e,rf=(e,t,r)=>{if(D(r)||L(r)||z(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},rg=(e,t,r)=>{rf(e.dom,t,r)},rp=(e,t)=>{let r=e.dom;eP(t,(e,t)=>{rf(r,t,e)})},rh=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},rb=(e,t)=>et.from(rh(e,t)),rv=(e,t)=>{let r=e.dom;return!!r&&!!r.hasAttribute&&r.hasAttribute(t)},ry=(e,t)=>{e.dom.removeAttribute(t)},rC=e=>{let t=e.dom.attributes;return null==t||0===t.length},rE=e=>ep(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),rx=(e,t)=>{let r=rh(e,t);return void 0===r||""===r?[]:r.split(" ")},r_=(e,t,r)=>{let n=rx(e,t).concat([r]);return rg(e,t,n.join(" ")),!0},rw=(e,t,r)=>{let n=ef(rx(e,t),e=>e!==r);return n.length>0?rg(e,t,n.join(" ")):ry(e,t),!1},rS=e=>void 0!==e.dom.classList,rk=e=>rx(e,"class"),rN=(e,t)=>r_(e,"class",t),rR=(e,t)=>rw(e,"class",t),rA=(e,t)=>ei(rk(e),t)?rR(e,t):rN(e,t),rD=(e,t)=>{rS(e)?e.dom.classList.add(t):rN(e,t)},rT=e=>{0===(rS(e)?e.dom.classList:rk(e)).length&&ry(e,"class")},rO=(e,t)=>{rS(e)?e.dom.classList.remove(t):rR(e,t),rT(e)},rB=(e,t)=>{let r=rS(e)?e.dom.classList.toggle(t):rA(e,t);return rT(e),r},rP=(e,t)=>rS(e)&&e.dom.classList.contains(t),rL=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},rM={fromHtml:(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return rL(r.childNodes[0])},fromTag:(e,t)=>rL((t||document).createElement(e)),fromText:(e,t)=>rL((t||document).createTextNode(e)),fromDom:rL,fromPoint:(e,t,r)=>et.from(e.dom.elementFromPoint(t,r)).map(rL)},rF=(e,t)=>{let r=[],n=e=>(r.push(e),t(e)),o=t(e);do o=o.bind(n);while(o.isSome());return r},rI=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);else throw Error("Browser lacks native selectors")},rU=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,rz=(e,t)=>{let r=void 0===t?document:t.dom;return rU(r)?[]:ed(r.querySelectorAll(e),rM.fromDom)},rj=(e,t)=>{let r=void 0===t?document:t.dom;return rU(r)?et.none():et.from(r.querySelector(e)).map(rM.fromDom)},rH=(e,t)=>e.dom===t.dom,r$=(e,t)=>{let r=e.dom,n=t.dom;return r!==n&&r.contains(n)},rq=e=>rM.fromDom(e.dom.ownerDocument),rV=e=>rc(e)?e:rq(e),rW=e=>rM.fromDom(rV(e).dom.documentElement),rK=e=>rM.fromDom(rV(e).dom.defaultView),rY=e=>et.from(e.dom.parentNode).map(rM.fromDom),rG=e=>et.from(e.dom.parentElement).map(rM.fromDom),rX=(e,t)=>{let r=U(t)?t:J,n=e.dom,o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){let e=n.parentNode,t=rM.fromDom(e);if(o.push(t),!0===r(t))break;n=e}return o},rZ=e=>rY(e).map(r2).map(t=>ef(t,t=>!rH(e,t))).getOr([]),rQ=e=>et.from(e.dom.previousSibling).map(rM.fromDom),rJ=e=>et.from(e.dom.nextSibling).map(rM.fromDom),r0=e=>ex(rF(e,rQ)),r1=e=>rF(e,rJ),r2=e=>ed(e.dom.childNodes,rM.fromDom),r3=(e,t)=>{let r=e.dom.childNodes;return et.from(r[t]).map(rM.fromDom)},r8=e=>r3(e,0),r5=e=>r3(e,e.dom.childNodes.length-1),r6=e=>e.dom.childNodes.length,r9=e=>{let t=e.dom.head;if(null==t)throw Error("Head is not available yet");return rM.fromDom(t)},r4=e=>rm(e)&&I(e.dom.host),r7=e=>rM.fromDom(e.dom.getRootNode()),ne=e=>r4(e)?e:r9(rV(e)),nt=e=>r4(e)?e:rM.fromDom(rV(e).dom.body),nr=e=>{let t=r7(e);return r4(t)?et.some(t):et.none()},nn=e=>rM.fromDom(e.dom.host),no=e=>{if(I(e.target)){let t=rM.fromDom(e.target);if(rs(t)&&nl(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return eN(t)}}return et.from(e.target)},nl=e=>I(e.dom.shadowRoot),na=e=>{let t=rd(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return nr(rM.fromDom(t)).fold(()=>r.body.contains(t),q(na,nn))};var ni=(e,t,r,n,o)=>e(r,n)?et.some(r):U(o)&&o(r)?et.none():t(r,n,o);let ns=(e,t,r)=>{let n=e.dom,o=U(r)?r:J;for(;n.parentNode;){n=n.parentNode;let e=rM.fromDom(n);if(t(e))return et.some(e);if(o(e))break}return et.none()},nd=(e,t,r)=>ni((e,t)=>t(e),ns,e,t,r),nc=(e,t)=>{let r=e.dom;return r.parentNode?nm(rM.fromDom(r.parentNode),r=>!rH(e,r)&&t(r)):et.none()},nm=(e,t)=>eb(e.dom.childNodes,e=>t(rM.fromDom(e))).map(rM.fromDom),nu=(e,t)=>{let r=e=>{for(let n=0;n<e.childNodes.length;n++){let o=rM.fromDom(e.childNodes[n]);if(t(o))return et.some(o);let l=r(e.childNodes[n]);if(l.isSome())return l}return et.none()};return r(e.dom)},nf=(e,t,r)=>ns(e,e=>rI(e,t),r),ng=(e,t)=>rj(t,e),np=(e,t,r)=>ni((e,t)=>rI(e,t),nf,e,t,r),nh=e=>np(e,"[contenteditable]"),nb=(e,t=!1)=>na(e)?e.dom.isContentEditable:nh(e).fold(V(t),e=>"true"===nv(e)),nv=e=>e.dom.contentEditable,ny=(e,t)=>{e.dom.contentEditable=t?"true":"false"},nC=e=>void 0!==e.style&&U(e.style.getPropertyValue),nE=(e,t,r)=>{if(!D(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);nC(e)&&e.style.setProperty(t,r)},nx=(e,t)=>{nC(e)&&e.style.removeProperty(t)},n_=(e,t,r)=>{nE(e.dom,t,r)},nw=(e,t)=>{let r=e.dom;eP(t,(e,t)=>{nE(r,t,e)})},nS=(e,t)=>{let r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||na(e)?n:nk(r,t)},nk=(e,t)=>nC(e)?e.style.getPropertyValue(t):"",nN=(e,t)=>{let r=nk(e.dom,t);return et.from(r).filter(e=>e.length>0)},nR=e=>{let t={},r=e.dom;if(nC(r))for(let e=0;e<r.style.length;e++){let n=r.style.item(e);t[n]=r.style[n]}return t},nA=(e,t)=>{nx(e.dom,t),tJ(rb(e,"style").map(tc),"")&&ry(e,"style")},nD=e=>e.dom.offsetWidth,nT=(e,t)=>{rY(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},nO=(e,t)=>{rJ(e).fold(()=>{rY(e).each(e=>{nP(e,t)})},e=>{nT(e,t)})},nB=(e,t)=>{r8(e).fold(()=>{nP(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},nP=(e,t)=>{e.dom.appendChild(t.dom)},nL=(e,t)=>{nT(e,t),nP(t,e)},nM=(e,t)=>{ec(t,(r,n)=>{nO(0===n?e:t[n-1],r)})},nF=(e,t)=>{ec(t,t=>{nP(e,t)})},nI=e=>{e.dom.textContent="",ec(r2(e),e=>{nU(e)})},nU=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},nz=e=>{let t=r2(e);t.length>0&&nM(e,t),nU(e)},nj=(e,t)=>{let r=(t||document).createElement("div");return r.innerHTML=e,r2(rM.fromDom(r))},nH=e=>ed(e,rM.fromDom),n$=e=>e.dom.innerHTML,nq=(e,t)=>{let r=rq(e).dom,n=rM.fromDom(r.createDocumentFragment());nF(n,nj(t,r)),nI(e),nP(e,n)},nV=e=>{let t=rM.fromTag("div");return nP(t,rM.fromDom(e.dom.cloneNode(!0))),n$(t)},nW=(e,t,r,n,o,l,a)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:l,raw:a}),nK=e=>{let t=rM.fromDom(no(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=$(n,r);return nW(t,e.clientX,e.clientY,r,n,o,e)},nY=(e,t)=>r=>{e(r)&&t(nK(r))},nG=(e,t,r,n,o)=>{let l=nY(r,n);return e.dom.addEventListener(t,l,o),{unbind:Y(nZ,e,t,l,o)}},nX=(e,t,r,n)=>nG(e,t,r,n,!1),nZ=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},nQ=(e,t)=>({left:e,top:t,translate:(r,n)=>nQ(e+r,t+n)}),nJ=e=>{let t=e.getBoundingClientRect();return nQ(t.left,t.top)},n0=(e,t)=>void 0!==e?e:void 0!==t?t:0,n1=e=>{let t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return nQ(r.offsetLeft,r.offsetTop);let l=n0(null==n?void 0:n.pageYOffset,o.scrollTop),a=n0(null==n?void 0:n.pageXOffset,o.scrollLeft),i=n0(o.clientTop,r.clientTop),s=n0(o.clientLeft,r.clientLeft);return n2(e).translate(a-s,l-i)},n2=e=>{let t=e.dom,r=t.ownerDocument.body;return r===t?nQ(r.offsetLeft,r.offsetTop):na(e)?nJ(t):nQ(0,0)},n3=e=>{let t=void 0!==e?e.dom:document;return nQ(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},n8=(e,t,r)=>{let n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollTo(e,t)},n5=(e,t)=>{tj().browser.isSafari()&&U(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},n6=e=>{let t=void 0===e?window:e;return tj().browser.isFirefox()?et.none():et.from(t.visualViewport)},n9=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),n4=e=>{let t=void 0===e?window:e,r=t.document,n=n3(rM.fromDom(r));return n6(t).fold(()=>{let e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return n9(n.left,n.top,r,o)},e=>n9(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},n7=(e,t)=>ef(r2(e),t),oe=(e,t)=>{let r=[];return ec(r2(e),e=>{t(e)&&(r=r.concat([e])),r=r.concat(oe(e,t))}),r},ot=(e,t)=>rz(t,e),or=(e,t,r)=>ns(e,t,r).isSome(),on=(e,t)=>nc(e,t).isSome(),oo=(e,t)=>nu(e,t).isSome();class ol{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,r,n){if(e){if(!n&&e[t])return e[t];if(e!==this.rootNode){let t=e[r];if(t)return t;for(let n=e.parentNode;n&&n!==this.rootNode;n=n.parentNode)if(t=n[r])return t}}}findPreviousNode(e,t){if(e){let r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!t){for(let e=r.lastChild;e;e=e.lastChild)if(!e.lastChild)return e}return r}let n=e.parentNode;if(n&&n!==this.rootNode)return n}}}let oa=e=>"\uFEFF"===e,oi=/^[ \t\r\n]*$/,os=e=>oi.test(e),od=e=>{for(let t of e)if(!oa(t))return!1;return!0},oc=e=>-1!==" \f	\v".indexOf(e),om=e=>"\n"===e||"\r"===e,ou=(e,t)=>t<e.length&&t>=0&&om(e[t]),of=(e,t=4,r=!0,n=!0)=>{let o=tp(" ",t),l=e.replace(/\t/g,o);return ep(l,(e,t)=>oc(t)||"\xa0"===t?e.pcIsSpace||""===e.str&&r||e.str.length===l.length-1&&n||ou(l,e.str.length+1)?{pcIsSpace:!1,str:e.str+"\xa0"}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:om(t),str:e.str+t},{pcIsSpace:!1,str:""}).str},og=e=>t=>!!t&&t.nodeType===e,op=e=>!!e&&!Object.getPrototypeOf(e),oh=og(1),ob=e=>oh(e)&&ri(rM.fromDom(e)),ov=e=>oh(e)&&"http://www.w3.org/2000/svg"===e.namespaceURI,oy=e=>{let t=e.toLowerCase();return e=>I(e)&&e.nodeName.toLowerCase()===t},oC=e=>{let t=e.map(e=>e.toLowerCase());return e=>!!e&&!!e.nodeName&&ei(t,e.nodeName.toLowerCase())},oE=(e,t)=>{let r=t.toLowerCase().split(" ");return t=>{if(oh(t)){let n=t.ownerDocument.defaultView;if(n)for(let o=0;o<r.length;o++){let l=n.getComputedStyle(t,null);if((l?l.getPropertyValue(e):null)===r[o])return!0}}return!1}},ox=e=>oh(e)&&e.hasAttribute("data-mce-bogus"),o_=e=>oh(e)&&"all"===e.getAttribute("data-mce-bogus"),ow=e=>oh(e)&&"TABLE"===e.tagName,oS=e=>t=>!!ob(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e),ok=oC(["textarea","input"]),oN=og(3),oR=og(4),oA=og(7),oD=og(8),oT=og(9),oO=og(11),oB=oy("br"),oP=oy("img"),oL=oS("true"),oM=oS("false"),oF=e=>ob(e)&&e.isContentEditable&&I(e.parentElement)&&!e.parentElement.isContentEditable,oI=oC(["td","th"]),oU=oC(["td","th","caption"]),oz=oC(["video","audio","object","embed"]),oj=oy("li"),oH=oy("details"),o$=oy("summary"),oq={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},oV=(e,t,r)=>{let n=rM.fromDom(t),o=rM.fromDom(e),l=r.getWhitespaceElements();return or(o,e=>eq(l,rn(e)),Y(rH,n))},oW=e=>oh(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),oK=(e,t)=>oh(e)&&eq(t.getNonEmptyElements(),e.nodeName),oY=e=>oh(e)&&e.hasAttribute("data-mce-bookmark"),oG=e=>rG(rM.fromDom(e)).exists(e=>!nb(e)),oX=(e,t,r)=>os(e.data)&&!oV(e,t,r),oZ=(e,t,r,n)=>oN(e)&&!oX(e,t,r)&&(!n.includeZwsp||!od(e.data)),oQ=(e,t,r,n)=>U(n.isContent)&&n.isContent(t)||oK(t,e)||oY(t)||oW(t)||oZ(t,r,e,n)||oM(t)||oL(t)&&oG(t),oJ=(e,t,r)=>{let n={...oq,...r};if(n.checkRootAsContent&&oQ(e,t,t,n))return!1;let o=t.firstChild,l=0;if(!o)return!0;let a=new ol(o,t);do{if(n.skipBogus&&oh(o)){let e=o.getAttribute("data-mce-bogus");if(e){o=a.next("all"===e);continue}}if(oD(o)){o=a.next(!0);continue}if(oB(o)){l++,o=a.next();continue}if(oQ(e,o,t,n))return!1;o=a.next()}while(o);return l<=1},o0=(e,t,r)=>oJ(e,t.dom,{checkRootAsContent:!0,...r}),o1=(e,t,r)=>oQ(e,t,t,{includeZwsp:oq.includeZwsp,...r}),o2=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},o3=e=>{let t=o2(et.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(et.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(et.some(e))}}},o8=e=>{let t=o2(et.none()),r=()=>t.get().each(e=>clearInterval(e));return{clear:()=>{r(),t.set(et.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:n=>{r(),t.set(et.some(setInterval(n,e)))}}},o5=()=>{let e=o3(H);return{...e,on:t=>e.get().each(t)}},o6=e=>{let t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":"html"},o9=e=>"html"!==o6(e),o4=e=>o9(e.nodeName),o7=e=>o6(e.nodeName),le=["svg","math"],lt=()=>{let e=o5(),t=()=>e.get().map(o7).getOr("html");return{track:r=>(o4(r)?e.set(r):e.get().exists(e=>!e.contains(r))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},lr="data-mce-block",ln=e=>ef(eO(e),e=>!/[A-Z]/.test(e)),lo=e=>ed(ln(e),e=>{let t=CSS.escape(e);return`${t}:`+ed(le,e=>`not(${e} ${t})`).join(":")}).join(","),ll=(e,t)=>I(t.querySelector(e))?(t.setAttribute(lr,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(lr),!1),la=(e,t)=>{let r=lo(e.getTransparentElements()),n=lo(e.getBlockElements());return ef(t.querySelectorAll(r),e=>ll(n,e))},li=(e,t,r)=>{var n;let o=r?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(oJ(e,r,{checkRootAsContent:!0})){null===(n=r.parentNode)||void 0===n||n.removeChild(r);return}},ls=(e,t,r)=>{let n=document.createRange(),o=t.parentNode;if(o){n.setStartBefore(t),n.setEndBefore(r);let l=n.extractContents();li(e,l,!0),n.setStartAfter(r),n.setEndAfter(t);let a=n.extractContents();li(e,a,!1),oJ(e,l,{checkRootAsContent:!0})||o.insertBefore(l,t),oJ(e,r,{checkRootAsContent:!0})||o.insertBefore(r,t),oJ(e,a,{checkRootAsContent:!0})||o.insertBefore(a,t),o.removeChild(t)}},ld=(e,t,r)=>{let n=e.getBlockElements(),o=rM.fromDom(t),l=e=>rn(e)in n,a=e=>rH(e,o);ec(nH(r),t=>{ns(t,l,a).each(r=>{let n=n7(t,t=>l(t)&&!e.isValidChild(rn(r),rn(t)));if(n.length>0){let t=rG(r);ec(n,t=>{ns(t,l,a).each(r=>{ls(e,r.dom,t.dom)})}),t.each(t=>la(e,t.dom))}})})},lc=(e,t,r)=>{ec([...r,...lb(e,t)?[t]:[]],t=>ec(ot(rM.fromDom(t),t.nodeName.toLowerCase()),t=>{lv(e,t.dom)&&nz(t)}))},lm=(e,t)=>{let r=la(e,t);ld(e,t,r),lc(e,t,r)},lu=(e,t)=>{lh(e,t)&&ll(lo(e.getBlockElements()),t)},lf=(e,t,r)=>{let n=rX(rM.fromDom(r),e=>rH(e,rM.fromDom(t)));ek(n,n.length-2).filter(rs).fold(()=>lm(e,t),t=>lm(e,t.dom))},lg=e=>e.hasAttribute(lr),lp=(e,t)=>eq(e.getTransparentElements(),t),lh=(e,t)=>oh(t)&&lp(e,t.nodeName),lb=(e,t)=>lh(e,t)&&lg(t),lv=(e,t)=>lh(e,t)&&!lg(t),ly=(e,t)=>1===t.type&&lp(e,t.name)&&D(t.attr(lr)),lC=tj().browser,lE=e=>eb(e,rs),lx=e=>lC.isFirefox()&&"table"===rn(e)?lE(r2(e)).filter(e=>"caption"===rn(e)).bind(e=>lE(r1(e)).map(t=>{let r=t.dom.offsetTop,n=e.dom.offsetTop,o=e.dom.offsetHeight;return r<=n?-o:0})).getOr(0):0,l_=(e,t)=>e.children&&ei(e.children,t),lw=(e,t,r)=>{let n=0,o=0,l=e.ownerDocument;if(r=r||e,t){if(r===e&&t.getBoundingClientRect&&"static"===nS(rM.fromDom(e),"position")){let r=t.getBoundingClientRect();return{x:n=r.left+(l.documentElement.scrollLeft||e.scrollLeft)-l.documentElement.clientLeft,y:o=r.top+(l.documentElement.scrollTop||e.scrollTop)-l.documentElement.clientTop}}let a=t;for(;a&&a!==r&&a.nodeType&&!l_(a,r);){let e=a;n+=e.offsetLeft||0,o+=e.offsetTop||0,a=e.offsetParent}for(a=t.parentNode;a&&a!==r&&a.nodeType&&!l_(a,r);)n-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode;o+=lx(rM.fromDom(t))}return{x:n,y:o}},lS=(e,t={})=>{let r=0,n={},o=rM.fromDom(e),l=rV(o),a=e=>{nP(ne(o),e)},i=e=>{ng(ne(o),"#"+e).each(nU)},s=e=>e$(n,e).getOrThunk(()=>({id:"mce-u"+r++,passed:[],failed:[],count:0})),d=e=>new Promise((r,o)=>{let i;let d=tQ._addCacheSuffix(e),c=s(d);n[d]=c,c.count++;let m=(e,t)=>{ec(e,Q),c.status=t,c.passed=[],c.failed=[],i&&(i.onload=null,i.onerror=null,i=null)},u=()=>m(c.passed,2),f=()=>m(c.failed,3);if(r&&c.passed.push(r),o&&c.failed.push(o),1===c.status)return;if(2===c.status){u();return}if(3===c.status){f();return}c.status=1;let g=rM.fromTag("link",l.dom);rp(g,{rel:"stylesheet",type:"text/css",id:c.id}),t.contentCssCors&&rg(g,"crossOrigin","anonymous"),t.referrerPolicy&&rg(g,"referrerpolicy",t.referrerPolicy),(i=g.dom).onload=u,i.onerror=f,a(g),rg(g,"href",d)}),c=e=>{let t=tQ._addCacheSuffix(e);e$(n,t).each(e=>{0==--e.count&&(delete n[t],i(e.id))})};return{load:d,loadRawCss:(e,t)=>{let r=s(e);n[e]=r,r.count++;let o=rM.fromTag("style",l.dom);rp(o,{rel:"stylesheet",type:"text/css",id:r.id,"data-mce-key":e}),o.dom.innerHTML=t,a(o)},loadAll:e=>Promise.allSettled(ed(e,e=>d(e).then(V(e)))).then(e=>{let t=eu(e,e=>"fulfilled"===e.status);return t.fail.length>0?Promise.reject(ed(t.fail,e=>e.reason)):ed(t.pass,e=>e.value)}),unload:c,unloadRawCss:e=>{e$(n,e).each(t=>{0==--t.count&&(delete n[e],i(t.id))})},unloadAll:e=>{ec(e,e=>{c(e)})},_setReferrerPolicy:e=>{t.referrerPolicy=e},_setContentCssCors:e=>{t.contentCssCors=e}}},lk=(()=>{let e=new WeakMap;return{forElement:(t,r)=>{let n=r7(t).dom;return et.from(e.get(n)).getOrThunk(()=>{let t=lS(n,r);return e.set(n,t),t})}}})(),lN=e=>"span"===e.nodeName.toLowerCase(),lR=(e,t)=>I(e)&&(o1(t,e)||t.isInline(e.nodeName.toLowerCase())),lA=(e,t,r)=>{let n=new ol(e,t).prev(!1),o=new ol(e,t).next(!1),l=M(n)||lR(n,r),a=M(o)||lR(o,r);return l&&a},lD=e=>lN(e)&&"bookmark"===e.getAttribute("data-mce-type"),lT=(e,t,r)=>oN(e)&&e.data.length>0&&lA(e,t,r),lO=e=>!!oh(e)&&e.childNodes.length>0,lB=e=>oO(e)||oT(e),lP=(e,t,r,n)=>{var o;let l=n||t;if(oh(t)&&lD(t))return t;let a=t.childNodes;for(let t=a.length-1;t>=0;t--)lP(e,a[t],r,l);if(oh(t)){let e=t.childNodes;1===e.length&&lD(e[0])&&(null===(o=t.parentNode)||void 0===o||o.insertBefore(e[0],t))}return lB(t)||o1(r,t)||lO(t)||lT(t,l,r)||e.remove(t),t},lL=tQ.makeMap,lM=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lF=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lI=/[<>&\"\']/g,lU=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,lz={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},lj={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},lH={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},l$=e=>{let t=rM.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},lq=(e,t)=>{let r={};if(e){let n=e.split(",");t=t||10;for(let e=0;e<n.length;e+=2){let o=String.fromCharCode(parseInt(n[e],t));if(!lj[o]){let t="&"+n[e+1]+";";r[o]=t,r[t]=o}}return r}},lV=lq("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),lW=(e,t)=>e.replace(t?lM:lF,e=>lj[e]||e),lK=(e,t)=>e.replace(t?lM:lF,e=>e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":lj[e]||"&#"+e.charCodeAt(0)+";"),lY=(e,t,r)=>{let n=r||lV;return e.replace(t?lM:lF,e=>lj[e]||n[e]||e)},lG={encodeRaw:lW,encodeAllRaw:e=>(""+e).replace(lI,e=>lj[e]||e),encodeNumeric:lK,encodeNamed:lY,getEncodeFunc:(e,t)=>{let r=lq(t)||lV,n=lL(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?lM:lF,e=>void 0!==lj[e]?lj[e]:void 0!==r[e]?r[e]:e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):n.named?t?(e,t)=>lY(e,t,r):lY:n.numeric?lK:lW},decode:e=>e.replace(lU,(e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?String.fromCharCode(55296+((t-=65536)>>10),56320+(1023&t)):lz[t]||String.fromCharCode(t):lH[e]||lV[e]||l$(e))},lX=(e,t)=>(e=tQ.trim(e))?e.split(t||" "):[],lZ=e=>RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),lQ=e=>T(e)&&e.source&&"[object RegExp]"===Object.prototype.toString.call(e),lJ=e=>{let t=e=>B(e)?ed(e,t):lQ(e)?new RegExp(e.source,e.flags):T(e)?eL(e,t):e;return t(e)},l0=e=>{let t=/^(~)?(.+)$/;return eC(lX(e,","),e=>{let r=t.exec(e);return r?[{cloneName:"~"===r[1]?"span":"div",name:r[2]}]:[]})},l1=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==e?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==e?["xml:lang"]:[]]),l2=e=>{let t,r;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",r+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==e&&(r=[r,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));let n=[t,r].join(" ");return{blockContent:t,phrasingContent:r,flowContent:n}},l3=e=>{let{blockContent:t,phrasingContent:r,flowContent:n}=l2(e),o=e=>Object.freeze(e.split(" "));return Object.freeze({blockContent:o(t),phrasingContent:o(r),flowContent:o(n)})},l8={html4:e2(()=>l3("html4")),html5:e2(()=>l3("html5")),"html5-strict":e2(()=>l3("html5-strict"))},l5=(e,t)=>{let{blockContent:r,phrasingContent:n,flowContent:o}=l8[e]();return"blocks"===t?et.some(r):"phrasing"===t?et.some(n):"flow"===t?et.some(o):et.none()},l6=e=>{let t=l1(e),{phrasingContent:r,flowContent:n}=l2(e),o={},l=(e,t,r)=>{o[e]={attributes:ew(t,V({})),attributesOrder:t,children:ew(r,V({}))}},a=(e,r="",n="")=>{let o=lX(n),a=lX(e),i=a.length,s=[...t,...lX(r)];for(;i--;)l(a[i],s.slice(),o)},i=(e,t)=>{let r=lX(e),n=lX(t),l=r.length;for(;l--;){let e=o[r[l]];for(let t=0,r=n.length;t<r;t++)e.attributes[n[t]]={},e.attributesOrder.push(n[t])}};return"html5-strict"!==e&&(ec(lX("acronym applet basefont big font strike tt"),e=>{a(e,"",r)}),ec(lX("center dir isindex noframes"),e=>{a(e,"",n)})),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",n),a("dd div","",n),a("address dt caption","","html4"===e?r:n),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),a("blockquote","cite",n),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",n),a("dl","","dt dd"),a("a","href target rel media hreflang type","html4"===e?r:n),a("q","cite",r),a("ins del","cite datetime",n),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",n),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[n,"param"].join(" ")),a("param","name value"),a("map","name",[n,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",n),a("th","colspan rowspan headers scope abbr",n),a("form","accept-charset action autocomplete enctype method name novalidate target",n),a("fieldset","disabled form name",[n,"legend"].join(" ")),a("label","form for",r),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?n:r),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[n,"li"].join(" ")),a("noscript","",n),"html4"!==e&&(a("wbr"),a("ruby","",[r,"rt rp"].join(" ")),a("figcaption","",n),a("mark rt rp bdi","",r),a("summary","",[r,"h1 h2 h3 h4 h5 h6"].join(" ")),a("canvas","width height",n),a("data","value",r),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[n,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[n,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[r,"option"].join(" ")),a("article section nav aside main header footer","",n),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[n,"figcaption"].join(" ")),a("time","datetime",r),a("dialog","open",n),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",r),a("progress","value max",r),a("meter","value min max low high optimum",r),a("details","open",[n,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==e&&ec([o.video,o.audio],e=>{delete e.children.audio,delete e.children.video}),ec(lX("a form meter progress dfn"),e=>{o[e]&&delete o[e].children[e]}),delete o.caption.children.table,delete o.script,o},l9=e=>"-"===e?"remove":"add",l4=e=>et.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(e=>({preset:"@"===e[1],name:e[2]})),l7=e=>{let t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return eC(lX(e,","),e=>{let r=t.exec(e);if(!r)return[];{let e=r[1],t=e?l9(e):"replace";return[{operation:t,name:r[2],validChildren:eC(lX(r[3],"|"),e=>l4(e).toArray())}]}})},ae=(e,t)=>{let r=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,n=/[*?+]/,{attributes:o,attributesOrder:l}=t;return ec(lX(e,"|"),e=>{let a=r.exec(e);if(a){let e={},r=a[1],i=a[2].replace(/[\\:]:/g,":"),s=a[3],d=a[4];if("!"===r&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(i),e.required=!0),"-"===r){delete o[i],l.splice(tQ.inArray(l,i),1);return}s&&("="===s?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:i,value:d}),e.defaultValue=d):"~"===s?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:i,value:d}),e.forcedValue=d):"<"===s&&(e.validValues=tQ.makeMap(d,"?"))),n.test(i)?(t.attributePatterns=t.attributePatterns||[],e.pattern=lZ(i),t.attributePatterns.push(e)):(o[i]||l.push(i),o[i]=e)}})},at=(e,t)=>{eP(e.attributes,(e,r)=>{t.attributes[r]=e}),t.attributesOrder.push(...e.attributesOrder)},ar=(e,t)=>{let r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return eC(lX(t,","),t=>{let n=r.exec(t);if(!n)return[];{let t=n[1],r=n[2],o=n[3],l=n[4],a=n[5],i={attributes:{},attributesOrder:[]};if(e.each(e=>at(e,i)),"#"===t?i.paddEmpty=!0:"-"===t&&(i.removeEmpty=!0),"!"===l&&(i.removeEmptyAttrs=!0),a&&ae(a,i),o&&(i.outputName=r),"@"===r){if(!e.isNone())return[];e=et.some(i)}return[o?{name:r,element:i,aliasName:o}:{name:r,element:i}]}})},an={},ao=tQ.makeMap,al=tQ.each,aa=tQ.extend,ai=tQ.explode,as=(e,t={})=>aa(ao(e," ",ao(e.toUpperCase()," ")),t),ad=e=>as("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ac=(e,t)=>{if(e){let r={};return D(e)&&(e={"*":e}),al(e,(e,n)=>{r[n]=r[n.toUpperCase()]="map"===t?ao(e,/[, ]/):ai(e,/[, ]/)}),r}},am=(e={})=>{var t;let r={},n={},o=[],l={},a={},i=(t,r,n)=>{let o=e[t];if(o)return ao(o,/[, ]/,ao(o.toUpperCase(),/[, ]/));{let e=an[t];return e||(e=as(r,n),an[t]=e),e}},s=null!==(t=e.schema)&&void 0!==t?t:"html5",d=l6(s);!1===e.verify_html&&(e.valid_elements="*[*]");let c=ac(e.valid_styles),m=ac(e.invalid_styles,"map"),u=ac(e.valid_classes,"map"),f=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre svg textarea summary",p),y=i("move_caret_before_on_enter_elements",b+" table",p),C="h1 h2 h3 h4 h5 h6",E=i("text_block_elements",C+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",E),_=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),w=i("transparent_elements","a ins del canvas map"),S=i("wrap_block_elements","pre "+C);al("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{a[e]=RegExp("</"+e+"[^>]*>","gi")});let k=e=>{let t=et.from(r["@"]),n=/[*?+]/;ec(ar(t,null!=e?e:""),({name:e,element:t,aliasName:l})=>{l&&(r[l]=t),n.test(e)?(t.pattern=lZ(e),o.push(t)):r[e]=t})},N=e=>{o=[],ec(eO(r),e=>{delete r[e]}),k(e)},R=(e,t)=>{var o,a;delete an.text_block_elements,delete an.block_elements;let i=!!t.extends&&!ee(t.extends),d=t.extends;if(n[e]=d?n[d]:{},l[e]=null!=d?d:e,v[e.toUpperCase()]={},v[e]={},i||(x[e.toUpperCase()]={},x[e]={}),d&&!r[e]&&r[d]){let t=lJ(r[d]);delete t.removeEmptyAttrs,delete t.removeEmpty,r[e]=t}else r[e]={attributesOrder:[],attributes:{}};if(B(t.attributes)){let n=e=>{l.attributesOrder.push(e),l.attributes[e]={}},l=null!==(o=r[e])&&void 0!==o?o:{};delete l.attributesDefault,delete l.attributesForced,delete l.attributePatterns,delete l.attributesRequired,l.attributesOrder=[],l.attributes={},ec(t.attributes,e=>{let t=l1(s);l4(e).each(({preset:e,name:r})=>{e?"global"===r&&ec(t,n):n(r)})}),r[e]=l}if(L(t.padEmpty)){let n=null!==(a=r[e])&&void 0!==a?a:{};n.paddEmpty=t.padEmpty,r[e]=n}if(B(t.children)){let r={},o=e=>{r[e]={}},l=e=>{l5(s,e).each(e=>{ec(e,o)})};ec(t.children,e=>{l4(e).each(({preset:e,name:t})=>{e?l(t):o(t)})}),n[e]=r}d&&eP(n,(t,r)=>{t[d]&&(n[r]=t=aa({},n[r]),t[e]=t[d])})},A=e=>{ec(l0(null!=e?e:""),({name:e,cloneName:t})=>{R(e,{extends:t})})},O=e=>{T(e)?eP(e,(e,t)=>R(t,e)):D(e)&&A(e)},P=e=>{ec(l7(null!=e?e:""),({operation:e,name:t,validChildren:r})=>{let o="replace"===e?{"#comment":{}}:n[t],l=t=>{"remove"===e?delete o[t]:o[t]={}},a=e=>{l5(s,e).each(e=>{ec(e,l)})};ec(r,({preset:e,name:t})=>{e?a(t):l(t)}),n[t]=o})},M=e=>{let t=r[e];if(t)return t;let n=o.length;for(;n--;){let t=o[n];if(t.pattern.test(e))return t}},F=V(c),I=V(m),U=V(u),z=V(h),j=V(x),H=V(E),$=V(_),q=V(Object.seal(p)),W=V(g),K=V(v),Y=V(y),G=V(f),X=V(w),Z=V(S),Q=V(Object.seal(a)),J=(e,t)=>{let r=M(e);if(r){if(!t)return!0;{if(r.attributes[t])return!0;let e=r.attributePatterns;if(e){let r=e.length;for(;r--;)if(e[r].pattern.test(t))return!0}}}return!1},ee=e=>eq(j(),e),er=e=>!ti(e,"#")&&J(e)&&!ee(e),en=V(l);return e.valid_elements?(N(e.valid_elements),al(d,(e,t)=>{n[t]=e.children})):(al(d,(e,t)=>{r[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[t]=e.children}),al(lX("strong/b em/i"),e=>{let t=lX(e,"/");r[t[1]].outputName=t[0]}),al(_,(t,n)=>{r[n]&&(e.padd_empty_block_inline_children&&(r[n].paddInEmptyBlock=!0),r[n].removeEmpty=!0)}),al(lX("ol ul blockquote a table tbody"),e=>{r[e]&&(r[e].removeEmpty=!0)}),al(lX("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),e=>{r[e]&&(r[e].paddEmpty=!0)}),al(lX("span"),e=>{r[e].removeEmptyAttrs=!0})),delete r.svg,O(e.custom_elements),P(e.valid_children),k(e.extended_valid_elements),P("+ol[ul|ol],+ul[ul|ol]"),al({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{r[t]&&(r[t].parentsRequired=lX(e))}),e.invalid_elements&&al(ai(e.invalid_elements),e=>{r[e]&&delete r[e]}),M("span")||k("span[!data-mce-type|*]"),{type:s,children:n,elements:r,getValidStyles:F,getValidClasses:U,getBlockElements:j,getInvalidStyles:I,getVoidElements:q,getTextBlockElements:H,getTextInlineElements:$,getBoolAttrs:z,getElementRule:M,getSelfClosingElements:W,getNonEmptyElements:K,getMoveCaretBeforeOnEnterElements:Y,getWhitespaceElements:G,getTransparentElements:X,getSpecialElements:Q,isValidChild:(e,t)=>{let r=n[e.toLowerCase()];return!!(r&&r[t.toLowerCase()])},isValid:J,isBlock:ee,isInline:er,isWrapper:e=>eq(Z(),e)||er(e),getCustomElements:en,addValidElements:k,setValidElements:N,addCustomElements:O,addValidChildren:P}},au=e=>({value:af(e)}),af=e=>tl(e,"#").toUpperCase(),ag=e=>{let t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},ap=e=>au(ag(e.red)+ag(e.green)+ag(e.blue)),ah=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,ab=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,av=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),ay=(e,t,r,n)=>{let o=parseInt(e,10),l=parseInt(t,10);return av(o,l,parseInt(r,10),parseFloat(n))},aC=e=>ah.test(e)?"rgb":ab.test(e)?"rgba":"other",aE=e=>{let t=ah.exec(e);if(null!==t)return et.some(ay(t[1],t[2],t[3],"1"));let r=ab.exec(e);return null!==r?et.some(ay(r[1],r[2],r[3],r[4])):et.none()},ax=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,a_=e=>aE(e).map(ap).map(e=>"#"+e.value).getOr(e),aw=(e={},t)=>{let r,n;let o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,i={};t&&(r=t.getValidStyles(),n=t.getInvalidStyles());let s="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let e=0;e<s.length;e++)i[s[e]]="\uFEFF"+e,i["\uFEFF"+e]=s[e];let d={parse:t=>{let r={},n=!1,s=e.url_converter,c=e.url_converter_scope||d,m=(e,t,n)=>{let o=r[e+"-top"+t];if(!o)return;let l=r[e+"-right"+t];if(!l)return;let a=r[e+"-bottom"+t];if(!a)return;let i=r[e+"-left"+t];if(!i)return;let s=[o,l,a,i],d=s.length-1;for(;d--&&s[d]===s[d+1];);(!(d>-1)||!n)&&(r[e+t]=-1===d?s[0]:s.join(" "),delete r[e+"-top"+t],delete r[e+"-right"+t],delete r[e+"-bottom"+t],delete r[e+"-left"+t])},u=e=>{let t=r[e];if(!t)return;let n=t.indexOf(",")>-1?[t]:t.split(" "),o=n.length;for(;o--;)if(n[o]!==n[0])return!1;return r[e]=n[0],!0},f=e=>(n=!0,i[e]),g=(e,t)=>(n&&(e=e.replace(/\uFEFF[0-9]/g,e=>i[e])),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),p=e=>String.fromCharCode(parseInt(e.slice(1),16)),h=e=>e.replace(/\\[0-9a-f]+/gi,p),b=(t,r,n,o,l,a)=>{if(l=l||a)return"'"+(l=g(l)).replace(/\'/g,"\\'")+"'";if(r=g(r||n||o||""),!e.allow_script_urls){let t=r.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return s&&(r=s.call(c,r,"style")),"url('"+r.replace(/\'/g,"\\'")+"')"};if(t){var v,y,C;let i;for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,f));i=l.exec(t);){l.lastIndex=i.index+i[0].length;let t=i[1].replace(a,"").toLowerCase(),s=i[2].replace(a,"");if(t&&s){if(t=h(t),s=h(s),-1!==t.indexOf("\uFEFF")||-1!==t.indexOf('"')||!e.allow_script_urls&&("behavior"===t||/expression\s*\(|\/\*|\*\//.test(s)))continue;"font-weight"===t&&"700"===s?s="bold":("color"===t||"background-color"===t)&&(s=s.toLowerCase()),"rgb"===aC(s)&&aE(s).each(e=>{s=a_(ax(e)).toLowerCase()}),s=s.replace(o,b),r[t]=n?g(s,!0):s}}m("border","",!0),m("border","-width"),m("border","-color"),m("border","-style"),m("padding",""),m("margin",""),y="border-style",C="border-color",u(v="border-width")&&u(y)&&u(C)&&(r.border=r[v]+" "+r[y]+" "+r[C],delete r[v],delete r[y],delete r[C]),"medium none"===r.border&&delete r.border,"none"===r["border-image"]&&delete r["border-image"]}return r},serialize:(e,t)=>{let o="",l=(t,r)=>{let n=r[t];if(n)for(let t=0,r=n.length;t<r;t++){let r=n[t],l=e[r];l&&(o+=(o.length>0?" ":"")+r+": "+l+";")}},a=(e,t)=>{if(!n||!t)return!0;let r=n["*"];return(!r||!r[e])&&!((r=n[t])&&r[e])};return t&&r?(l("*",r),l(t,r)):eP(e,(e,r)=>{e&&a(r,t)&&(o+=(o.length>0?" ":"")+r+": "+e+";")}),o}};return d},aS={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ak=e=>e instanceof Event||U(e.initEvent),aN=e=>e.isDefaultPrevented===ee||e.isDefaultPrevented===J,aR=e=>F(e.preventDefault)||ak(e),aA=(e,t)=>{let r=null!=t?t:{};for(let t in e)eq(aS,t)||(r[t]=e[t]);return I(e.composedPath)&&(r.composedPath=()=>e.composedPath()),I(e.getModifierState)&&(r.getModifierState=t=>e.getModifierState(t)),I(e.getTargetRanges)&&(r.getTargetRanges=()=>e.getTargetRanges()),r},aD=(e,t,r,n)=>{var o;let l=aA(t,n);return l.type=e,F(l.target)&&(l.target=null!==(o=l.srcElement)&&void 0!==o?o:r),aR(t)&&(l.preventDefault=()=>{l.defaultPrevented=!0,l.isDefaultPrevented=ee,U(t.preventDefault)&&t.preventDefault()},l.stopPropagation=()=>{l.cancelBubble=!0,l.isPropagationStopped=ee,U(t.stopPropagation)&&t.stopPropagation()},l.stopImmediatePropagation=()=>{l.isImmediatePropagationStopped=ee,l.stopPropagation()},aN(l)||(l.isDefaultPrevented=!0===l.defaultPrevented?ee:J,l.isPropagationStopped=!0===l.cancelBubble?ee:J,l.isImmediatePropagationStopped=J)),l},aT=/^(?:mouse|contextmenu)|click/,aO=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},aB=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},aP=e=>I(e)&&aT.test(e.type),aL=(e,t)=>{let r=aD(e.type,e,document,t);if(aP(e)&&M(e.pageX)&&!M(e.clientX)){let t=r.target.ownerDocument||document,n=t.documentElement,o=t.body;r.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),r.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}return r},aM=(e,t,r)=>{let n=e.document,o={type:"ready"};if(r.domLoaded){t(o);return}let l=()=>{aB(e,"DOMContentLoaded",l),aB(e,"load",l),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?l():aO(e,"DOMContentLoaded",l),r.domLoaded||aO(e,"load",l)};class aF{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,r,n){let o,l;let a=this,i=window,s=e=>{a.executeHandlers(aL(e||i.event),l)};if(!e||oN(e)||oD(e))return r;e[a.expando]?l=e[a.expando]:(l=a.count++,e[a.expando]=l,a.events[l]={}),n=n||e;let d=t.split(" "),c=d.length;for(;c--;){let t=d[c],m=s,u=!1,f=!1;if("DOMContentLoaded"===t&&(t="ready"),a.domLoaded&&"ready"===t&&"complete"===e.readyState){r.call(n,aL({type:t}));continue}a.hasFocusIn||"focusin"!==t&&"focusout"!==t||(u=!0,f="focusin"===t?"focus":"blur",m=e=>{let t=aL(e||i.event);t.type="focus"===t.type?"focusin":"focusout",a.executeHandlers(t,l)}),(o=a.events[l][t])?"ready"===t&&a.domLoaded?r(aL({type:t})):o.push({func:r,scope:n}):(a.events[l][t]=o=[{func:r,scope:n}],o.fakeName=f,o.capture=u,o.nativeHandler=m,"ready"===t?aM(e,m,a):aO(e,f||t,m,u))}return e=o=null,r}unbind(e,t,r){if(!e||oN(e)||oD(e))return this;let n=e[this.expando];if(n){let o=this.events[n];if(t){let n=t.split(" "),l=n.length;for(;l--;){let t=n[l],a=o[t];if(a){if(r){let e=a.length;for(;e--;)if(a[e].func===r){let r=a.nativeHandler,n=a.fakeName,l=a.capture,i=a.slice(0,e).concat(a.slice(e+1));i.nativeHandler=r,i.fakeName=n,i.capture=l,o[t]=i}}r&&0!==a.length||(delete o[t],aB(e,a.fakeName||t,a.nativeHandler,a.capture))}}}else eP(o,(t,r)=>{aB(e,t.fakeName||r,t.nativeHandler,t.capture)}),o={};for(let e in o)if(eq(o,e))return this;delete this.events[n];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(!e||oN(e)||oD(e))return this;let n=aL({type:t,target:e},r);do{let t=e[this.expando];t&&this.executeHandlers(n,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return this}clean(e){if(!e||oN(e)||oD(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);let t=e.getElementsByTagName("*"),r=t.length;for(;r--;)(e=t[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){let r=this.events[t],n=r&&r[e.type];if(n)for(let t=0,r=n.length;t<r;t++){let r=n[t];if(r&&!1===r.func.call(r.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}aF.Event=new aF;let aI=tQ.each,aU=tQ.grep,az="data-mce-style",aj=tQ.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),aH=(e,t,r)=>{F(r)||""===r?ry(e,t):rg(e,t,r)},a$=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),aq=(e,t)=>{let r=0;if(e)for(let n=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){let e=o.nodeType;(!(t&&oN(o))||e!==n&&o.data.length)&&(r++,n=e)}return r},aV=(e,t)=>{let r=rh(t,"style"),n=e.serialize(e.parse(r),rn(t));aH(t,az,n)},aW=(e,t)=>z(e)?eq(aj,t)?e+"":e+"px":e,aK=(e,t,r)=>{let n=a$(t);F(r)||""===r?nA(e,n):n_(e,n,aW(r,n))},aY=(e,t,r)=>{let n=t.keep_values,o={set:(e,n,o)=>{let l=rM.fromDom(e);U(t.url_converter)&&I(n)&&(n=t.url_converter.call(t.url_converter_scope||r(),String(n),o,e)),aH(l,"data-mce-"+o,n),aH(l,o,n)},get:(e,t)=>{let r=rM.fromDom(e);return rh(r,"data-mce-"+t)||rh(r,t)}},l={style:{set:(t,r)=>{let o=rM.fromDom(t);n&&aH(o,az,r),ry(o,"style"),D(r)&&nw(o,e.parse(r))},get:t=>{let r=rM.fromDom(t),n=rh(r,az)||rh(r,"style");return e.serialize(e.parse(n),rn(r))}}};return n&&(l.href=l.src=o),l},aG=(e,t={})=>{let r={},n=window,o={},l=0,a=lk.forElement(rM.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),i=[],s=t.schema?t.schema:am({}),d=aw({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),c=t.ownEvents?new aF:aF.Event,m=s.getBlockElements(),u=t=>t&&e&&D(t)?e.getElementById(t):t,f=e=>{let t=u(e);return I(t)?rM.fromDom(t):null},g=(e,t,r="")=>{let n;let o=f(e);if(I(o)&&rs(o)){let e=Y[t];n=e&&e.get?e.get(o.dom,t):rh(o,t)}return I(n)?n:r},p=e=>{let t=u(e);return F(t)?[]:t.attributes},h=(e,r,n)=>{S(e,e=>{if(oh(e)){let o=rM.fromDom(e),l=""===n?null:n,a=rh(o,r),i=Y[r];i&&i.set?i.set(o.dom,l,r):aH(o,r,l),a!==l&&t.onSetAttrib&&t.onSetAttrib({attrElm:o.dom,attrName:r,attrValue:l})}})},b=()=>t.root_element||e.body,v=(t,r)=>lw(e.body,u(t),r),y=(e,t,r)=>{let n=u(e);return!F(n)&&(ob(n)||ov(n))?r?nS(rM.fromDom(n),a$(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),n.style?n.style[t]:void 0):void 0},C=e=>{let t=u(e);if(!t)return{w:0,h:0};let r=y(t,"width"),n=y(t,"height");return r&&-1!==r.indexOf("px")||(r="0"),n&&-1!==n.indexOf("px")||(n="0"),{w:parseInt(r,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},E=(e,t)=>!!e&&es(B(e)?e:[e],e=>rI(rM.fromDom(e),t)),x=(e,t,r,n)=>{let o=[],l=u(e);n=void 0===n;let a=r||("BODY"!==b().nodeName?b().parentNode:null);if(D(t)){if("*"===t)t=oh;else{let e=t;t=t=>E(t,e)}}for(;l&&!(l===a||F(l.nodeType)||oT(l)||oO(l));){if(!t||t(l)){if(!n)return[l];o.push(l)}l=l.parentNode}return n?o:null},_=(e,t,r)=>{let n=t;if(e){D(t)&&(n=e=>E(e,t));for(let t=e[r];t;t=t[r])if(U(n)&&n(t))return t}return null},w=e=>U(e.querySelectorAll),S=function(e,t,r){let n=null!=r?r:this;if(B(e)){let r=[];return aI(e,(e,o)=>{let l=u(e);l&&r.push(t.call(n,l,o))}),r}{let r=u(e);return!!r&&t.call(n,r)}},k=(e,t)=>{S(e,e=>{eP(t,(t,r)=>{h(e,r,t)})})},N=(e,t)=>{S(e,e=>{nq(rM.fromDom(e),t)})},R=(t,r,n,o,l)=>S(t,t=>{let a=D(r)?e.createElement(r):r;return I(n)&&k(a,n),o&&(!D(o)&&o.nodeType?a.appendChild(o):D(o)&&N(a,o)),l?a:t.appendChild(a)}),A=(t,r,n)=>R(e.createElement(t),t,r,n,!0),T=lG.decode,P=lG.encodeAllRaw,L=(e,t)=>S(e,e=>{let r=rM.fromDom(e);return t&&ec(r2(r),e=>{rd(e)&&0===e.dom.length?nU(e):nT(r,e)}),nU(r),r.dom}),M=(e,t,r)=>{S(e,e=>{if(oh(e)){let n=rM.fromDom(e);ec(t.split(" "),e=>{I(r)?(r?rD:rO)(n,e):rB(n,e)})}})},z=(e,t,r)=>S(t,n=>{var o;let l=B(t)?e.cloneNode(!0):e;return r&&aI(aU(n.childNodes),e=>{l.appendChild(e)}),null===(o=n.parentNode)||void 0===o||o.replaceChild(l,n),n}),j=()=>e.createRange(),$=(r,o,l,a)=>{if(!B(r))return t.collect&&(r===e||r===n)&&i.push([r,o,l,a]),c.bind(r,o,l,a||K);{let e=r.length,t=[];for(;e--;)t[e]=$(r[e],o,l,a);return t}},q=(t,r,o)=>{if(B(t)){let e=t.length,n=[];for(;e--;)n[e]=q(t[e],r,o);return n}if(i.length>0&&(t===e||t===n)){let e=i.length;for(;e--;){let[n,l,a]=i[e];t!==n||r&&r!==l||o&&o!==a||c.unbind(n,l,a)}}return c.unbind(t,r,o)},W=e=>{if(!(e&&ob(e)))return null;{let t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}},K={doc:e,settings:t,win:n,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:s,events:c,isBlock:e=>D(e)?eq(m,e):oh(e)&&(eq(m,e.nodeName)||lb(s,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:b,getViewPort:e=>{let t=n4(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{let t=u(e),r=v(t),n=C(t);return{x:r.x,y:r.y,w:n.w,h:n.h}},getSize:C,getParent:(e,t,r)=>{let n=x(e,t,r,!1);return n&&n.length>0?n[0]:null},getParents:x,get:u,getNext:(e,t)=>_(e,t,"nextSibling"),getPrev:(e,t)=>_(e,t,"previousSibling"),select:(r,n)=>{var o,l;let a=null!==(l=null!==(o=u(n))&&void 0!==o?o:t.root_element)&&void 0!==l?l:e;return w(a)?eA(a.querySelectorAll(r)):[]},is:E,add:R,create:A,createHTML:(e,t,r="")=>{let n="<"+e;for(let e in t)eV(t,e)&&(n+=" "+e+'="'+P(t[e])+'"');return tg(r)&&eq(s.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:t=>{let r;let n=e.createElement("div"),o=e.createDocumentFragment();for(o.appendChild(n),t&&(n.innerHTML=t);r=n.firstChild;)o.appendChild(r);return o.removeChild(n),o},remove:L,setStyle:(e,r,n)=>{S(e,e=>{let o=rM.fromDom(e);aK(o,r,n),t.update_styles&&aV(d,o)})},getStyle:y,setStyles:(e,r)=>{S(e,e=>{let n=rM.fromDom(e);eP(r,(e,t)=>{aK(n,t,e)}),t.update_styles&&aV(d,n)})},removeAllAttribs:e=>S(e,e=>{let t=e.attributes;for(let r=t.length-1;r>=0;r--)e.removeAttributeNode(t.item(r))}),setAttrib:h,setAttribs:k,getAttrib:g,getPos:v,parseStyle:e=>d.parse(e),serializeStyle:(e,t)=>d.serialize(e,t),addStyle:t=>{if(K!==aG.DOM&&e===document){if(r[t])return;r[t]=!0}let n=e.getElementById("mceDefaultStyles");if(!n){(n=e.createElement("style")).id="mceDefaultStyles",n.type="text/css";let t=e.head;t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(e.createTextNode(t))},loadCSS:e=>{e||(e=""),ec(e.split(","),e=>{o[e]=!0,a.load(e).catch(H)})},addClass:(e,t)=>{M(e,t,!0)},removeClass:(e,t)=>{M(e,t,!1)},hasClass:(e,t)=>{let r=f(e),n=t.split(" ");return I(r)&&eE(n,e=>rP(r,e))},toggleClass:M,show:e=>{S(e,e=>nA(rM.fromDom(e),"display"))},hide:e=>{S(e,e=>n_(rM.fromDom(e),"display","none"))},isHidden:e=>{let t=f(e);return I(t)&&tJ(nN(t,"display"),"none")},uniqueId:e=>(e||"mce_")+l++,setHTML:N,getOuterHTML:e=>{let t=f(e);return I(t)?oh(t.dom)?t.dom.outerHTML:nV(t):""},setOuterHTML:(e,t)=>{S(e,e=>{oh(e)&&(e.outerHTML=t)})},decode:T,encode:P,insertAfter:(e,t)=>{let r=u(t);return S(e,e=>{let t=null==r?void 0:r.parentNode,n=null==r?void 0:r.nextSibling;return t&&(n?t.insertBefore(e,n):t.appendChild(e)),e})},replace:z,rename:(e,t)=>{if(e.nodeName===t.toUpperCase())return e;{let r=A(t);return aI(p(e),t=>{h(r,t.nodeName,g(e,t.nodeName))}),z(r,e,!0),r}},findCommonAncestor:(e,t)=>{let r=e;for(;r;){let e=t;for(;e&&r!==e;)e=e.parentNode;if(r===e)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:S,getAttribs:p,isEmpty:(e,t,r)=>O(t)?oJ(s,e,{...r,isContent:e=>!!t[e.nodeName.toLowerCase()]}):oJ(s,e,r),createRng:j,nodeIndex:aq,split:(e,t,r)=>{let n,o,l=j();if(e&&t&&e.parentNode&&t.parentNode){let a=e.parentNode;return l.setStart(a,aq(e)),l.setEnd(t.parentNode,aq(t)),n=l.extractContents(),(l=j()).setStart(t.parentNode,aq(t)+1),l.setEnd(a,aq(e)+1),o=l.extractContents(),a.insertBefore(lP(K,n,s),e),r?a.insertBefore(r,e):a.insertBefore(t,e),a.insertBefore(lP(K,o,s),e),L(e),r||t}},bind:$,unbind:q,fire:(e,t,r)=>c.dispatch(e,t,r),dispatch:(e,t,r)=>c.dispatch(e,t,r),getContentEditable:W,getContentEditableParent:e=>{let t=b(),r=null;for(let n=e;n&&n!==t&&null===(r=W(n));n=n.parentNode);return r},isEditable:e=>{if(!I(e))return!1;{let t=oh(e)?e:e.parentElement;return I(t)&&ob(t)&&nb(rM.fromDom(t))}},destroy:()=>{if(i.length>0){let e=i.length;for(;e--;){let[t,r,n]=i[e];c.unbind(t,r,n)}}eP(o,(e,t)=>{a.unload(t),delete o[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},Y=aY(d,t,V(K));return K};aG.DOM=aG(document),aG.nodeIndex=aq;let aX=aG.DOM;class aZ{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((t,r)=>{let n;let o=()=>{aX.remove(l),n&&(n.onerror=n.onload=n=null)},l=aX.uniqueId();(n=document.createElement("script")).id=l,n.type="text/javascript",n.src=tQ._addCacheSuffix(e),this.settings.referrerPolicy&&aX.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{o(),t()},n.onerror=()=>{o(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){let t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise((r,n)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:r,reject:n})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){let e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){let t=this,r=(e,r)=>{e$(t.scriptLoadedCallbacks,r).each(t=>{ec(t,t=>t[e](r))}),delete t.scriptLoadedCallbacks[r]},n=e=>{let t=ef(e,e=>"rejected"===e.status);return t.length>0?Promise.reject(eC(t,({reason:e})=>B(e)?e:[e])):Promise.resolve()},o=e=>Promise.allSettled(ed(e,e=>2===t.states[e]?(r("resolve",e),Promise.resolve()):3===t.states[e]?(r("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then(()=>{t.states[e]=2,r("resolve",e);let l=t.queue;return l.length>0?(t.queue=[],o(l).then(n)):Promise.resolve()},()=>(t.states[e]=3,r("reject",e),Promise.reject(e)))))),l=e=>(t.loading=!0,o(e).then(e=>{t.loading=!1;let r=t.queueLoadedCallbacks.shift();return et.from(r).each(Q),n(e)})),a=eK(e);return t.loading?new Promise((e,r)=>{t.queueLoadedCallbacks.push(()=>{l(a).then(e,r)})}):l(a)}}aZ.ScriptLoader=new aZ;let aQ=(e,t)=>{let r=e.indexOf(t);return -1!==r&&e.indexOf(t,r+1)>r},aJ=e=>T(e)&&eq(e,"raw"),a0=e=>B(e)&&e.length>1,a1={},a2=o2("en"),a3=()=>e$(a1,a2.get()),a8={getData:()=>eL(a1,e=>({...e})),setCode:e=>{e&&a2.set(e)},getCode:()=>a2.get(),add:(e,t)=>{let r=a1[e];r||(a1[e]=r={});let n=ed(eO(t),e=>e.toLowerCase());eP(t,(e,o)=>{let l=o.toLowerCase();l!==o&&aQ(n,l)?(eq(t,l)||(r[l]=e),r[o]=e):r[l]=e})},translate:e=>{let t=a3().getOr({}),r=e=>U(e)?Object.prototype.toString.call(e):n(e)?"":""+e,n=e=>""===e||null==e,o=e=>{let n=r(e);return eq(t,n)?r(t[n]):e$(t,n.toLowerCase()).map(r).getOr(n)},l=e=>e.replace(/{context:\w+}$/,"");if(n(e))return"";if(aJ(e))return r(e.raw);if(a0(e)){let t=e.slice(1);return l(o(e[0]).replace(/\{([0-9]+)\}/g,(e,n)=>eq(t,n)?r(t[n]):e))}return l(o(e))},isRtl:()=>a3().bind(e=>e$(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>eq(a1,e)},a5=()=>{let e=[],t={},r={},n=[],o=(e,t)=>{ec(ef(n,r=>r.name===e&&r.state===t),e=>e.resolve())},l=e=>eq(t,e),a=e=>eq(r,e),i=(e,r)=>{let n=a8.getCode();n&&(!r||-1!==(","+(r||"")+",").indexOf(","+n+","))&&aZ.ScriptLoader.add(t[e]+"/langs/"+n+".js")},s=(e,t="added")=>"added"===t&&a(e)?Promise.resolve():"loaded"===t&&l(e)?Promise.resolve():new Promise(r=>{n.push({name:e,state:t,resolve:r})});return{items:e,urls:t,lookup:r,get:e=>{if(r[e])return r[e].instance},requireLangPack:(e,t)=>{!1!==a5.languageLoad&&(l(e)?i(e,t):s(e,"loaded").then(()=>i(e,t)))},add:(t,n)=>(e.push(n),r[t]={instance:n},o(t,"added"),n),remove:e=>{delete t[e],delete r[e]},createUrl:(e,t)=>D(t)?D(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,n)=>{if(t[e])return Promise.resolve();let l=D(n)?n:n.prefix+n.resource+n.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=a5.baseURL+"/"+l),t[e]=l.substring(0,l.lastIndexOf("/"));let a=()=>(o(e,"loaded"),Promise.resolve());return r[e]?a():aZ.ScriptLoader.add(l).then(a)},waitFor:s}};a5.languageLoad=!0,a5.baseURL="",a5.PluginManager=a5(),a5.ThemeManager=a5(),a5.ModelManager=a5();let a6=(e,t)=>{let r=null;return{cancel:()=>{P(r)||(clearTimeout(r),r=null)},throttle:(...n)=>{P(r)&&(r=setTimeout(()=>{r=null,e.apply(null,n)},t))}}},a9=(e,t)=>{let r=null,n=()=>{P(r)||(clearTimeout(r),r=null)};return{cancel:n,throttle:(...o)=>{n(),r=setTimeout(()=>{r=null,e.apply(null,o)},t)}}},a4=(e,t,r)=>nf(e,t,r).isSome(),a7=V("mce-annotation"),ie=V("data-mce-annotation"),it=V("data-mce-annotation-uid"),ir=V("data-mce-annotation-active"),io=V("data-mce-annotation-classes"),il=V("data-mce-annotation-attrs"),ia=e=>t=>rH(t,e),ii=(e,t)=>{let r=e.selection.getRng(),n=rM.fromDom(r.startContainer),o=rM.fromDom(e.getBody()),l=t.fold(()=>"."+a7(),e=>`[${ie()}="${e}"]`);return np(r3(n,r.startOffset).getOr(n),l,ia(o)).bind(t=>rb(t,`${it()}`).bind(r=>rb(t,`${ie()}`).map(t=>{let n=ic(e,r);return{uid:r,name:t,elements:n}})))},is=e=>rs(e)&&rP(e,a7()),id=(e,t)=>rv(e,"data-mce-bogus")||a4(e,'[data-mce-bogus="all"]',ia(t)),ic=(e,t)=>{let r=rM.fromDom(e.getBody());return ef(ot(r,`[${it()}="${t}"]`),e=>!id(e,r))},im=(e,t)=>{let r=rM.fromDom(e.getBody()),n=ot(r,`[${ie()}="${t}"]`),o={};return ec(n,e=>{if(!id(e,r)){let t=rh(e,it()),r=e$(o,t).getOr([]);o[t]=r.concat([e])}}),o},iu=(e,t)=>{let r=o2({}),n=()=>({listeners:[],previous:o5()}),o=(e,t)=>{l(e,e=>(t(e),e))},l=(e,t)=>{let o=r.get(),l=t(e$(o,e).getOrThunk(n));o[e]=l,r.set(o)},a=(e,t,r)=>{o(e,n=>{ec(n.listeners,n=>n(!0,e,{uid:t,nodes:ed(r,e=>e.dom)}))})},i=e=>{o(e,t=>{ec(t.listeners,t=>t(!1,e))})},s=(t,r)=>{ec(ic(e,t),e=>{r?rg(e,ir(),"true"):ry(e,ir())})},d=a9(()=>{ec(eS(t.getNames()),t=>{l(t,r=>{let n=r.previous.get();return ii(e,et.some(t)).fold(()=>{n.each(e=>{i(t),r.previous.clear(),s(e,!1)})},({uid:e,name:t,elements:o})=>{tJ(n,e)||(n.each(e=>s(e,!1)),a(t,e,o),r.previous.set(e),s(e,!0))}),{previous:r.previous,listeners:r.listeners}})})},30);return e.on("remove",()=>{d.cancel()}),e.on("NodeChange",()=>{d.throttle()}),{addListener:(e,t)=>{l(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}},ig=(e,t)=>{let r=ie(),n=e=>et.from(e.attr(r)).bind(t.lookup),o=e=>{var t,r;e.attr(it(),null),e.attr(ie(),null),e.attr(ir(),null);let n=et.from(e.attr(il())).map(e=>e.split(",")).getOr([]),o=et.from(e.attr(io())).map(e=>e.split(",")).getOr([]);ec(n,t=>e.attr(t,null));let l=e_(null!==(r=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==r?r:[],[a7()].concat(o));e.attr("class",l.length>0?l.join(" "):null),e.attr(io(),null),e.attr(il(),null)};e.serializer.addTempAttr(ir()),e.serializer.addAttributeFilter(r,e=>{for(let t of e)n(t).each(e=>{!1===e.persistent&&("span"===t.name?t.unwrap():o(t))})})},ip=()=>{let e={};return{register:(t,r)=>{e[t]={name:t,settings:r}},lookup:t=>e$(e,t).map(e=>e.settings),getNames:()=>eO(e)}},ih=(e,t,r)=>Math.min(Math.max(e,t),r),ib=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/0xffffffff,iv=0,iy=e=>{let t=new Date().getTime();return e+"_"+Math.floor(1e9*ib())+ ++iv+String(t)},iC=(e,t)=>{ec(t,t=>{rD(e,t)})},iE=(e,t)=>{ec(t,t=>{rO(e,t)})},ix=(e,t)=>rM.fromDom(e.dom.cloneNode(t)),i_=e=>ix(e,!1),iw=e=>ix(e,!0),iS=(e,t)=>{let r=rM.fromTag(t);return rp(r,rE(e)),r},ik=(e,t)=>{let r=iS(e,t);return nO(e,r),nF(r,r2(e)),nU(e),r},iN=(e,t,r=J)=>{let n=new ol(e,t),o=e=>{let t;do t=n[e]();while(t&&!oN(t)&&!r(t));return et.from(t).filter(oN)};return{current:()=>et.from(n.current()).filter(oN),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},iR=(e,t)=>{let r=t||(t=>e.isBlock(t)||oB(t)||oM(t)),n=(e,t,r,o)=>{if(oN(e)){let r=o(e,t,e.data);if(-1!==r)return et.some({container:e,offset:r})}return r().bind(e=>n(e.container,e.offset,r,o))};return{backwards:(t,o,l,a)=>{let i=iN(t,null!=a?a:e.getRoot(),r);return n(t,o,()=>i.prev().map(e=>({container:e,offset:e.length})),l).getOrNull()},forwards:(t,o,l,a)=>{let i=iN(t,null!=a?a:e.getRoot(),r);return n(t,o,()=>i.next().map(e=>({container:e,offset:0})),l).getOrNull()}}},iA=((e,t)=>{let r=t=>e(t)?et.from(t.dom.nodeValue):et.none();return{get:n=>{if(!e(n))throw Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},getOption:r,set:(r,n)=>{if(!e(r))throw Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=n}}})(rd,"text"),iD=e=>iA.get(e),iT=e=>iA.getOption(e),iO=(e,t)=>iA.set(e,t),iB=e=>{let t;return r=>eq(t=t||ew(e,ee),rn(r))},iP=e=>"table"===rn(e),iL=e=>rs(e)&&"br"===rn(e),iM=iB(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),iF=iB(["ul","ol","dl"]),iI=iB(["li","dd","dt"]),iU=iB(["thead","tbody","tfoot"]),iz=iB(["td","th"]),ij=iB(["pre","script","textarea","style"]),iH=e=>{let t=[],r=e.dom;for(;r;)t.push(rM.fromDom(r)),r=r.lastChild;return t},i$=e=>{let t=ot(e,"br"),r=ef(iH(e).slice(-1),iL);t.length===r.length&&ec(r,nU)},iq=()=>{let e=rM.fromTag("br");return rg(e,"data-mce-bogus","1"),e},iV=e=>{nI(e),nP(e,iq())},iW=(e,t)=>{r5(e).each(r=>{rQ(r).each(n=>{t.isBlock(rn(e))&&iL(r)&&t.isBlock(rn(n))&&nU(r)})})},iK=e=>e.replace(/\uFEFF/g,""),iY=e=>e.insertContent("\uFEFF",{preserve_zwsp:!0}),iG=e=>(oN(e)&&(e=e.parentNode),oh(e)&&e.hasAttribute("data-mce-caret")),iX=e=>oN(e)&&oa(e.data),iZ=e=>iG(e)||iX(e),iQ=e=>e.firstChild!==e.lastChild||!oB(e.firstChild),iJ=(e,t)=>{var r;let n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode("\uFEFF"),o=e.parentNode;if(t){let t=e.previousSibling;if(oN(t)){if(iZ(t))return t;if(i8(t))return t.splitText(t.data.length-1)}null==o||o.insertBefore(n,e)}else{let t=e.nextSibling;if(oN(t)){if(iZ(t))return t;if(i3(t))return t.splitText(1),t}e.nextSibling?null==o||o.insertBefore(n,e.nextSibling):null==o||o.appendChild(n)}return n},i0=e=>{let t=e.container();return!!oN(t)&&("\uFEFF"===t.data.charAt(e.offset())||e.isAtStart()&&iX(t.previousSibling))},i1=e=>{let t=e.container();return!!oN(t)&&("\uFEFF"===t.data.charAt(e.offset()-1)||e.isAtEnd()&&iX(t.nextSibling))},i2=(e,t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createElement(e);o.setAttribute("data-mce-caret",r?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(iq().dom);let l=t.parentNode;return r?null==l||l.insertBefore(o,t):t.nextSibling?null==l||l.insertBefore(o,t.nextSibling):null==l||l.appendChild(o),o},i3=e=>oN(e)&&"\uFEFF"===e.data[0],i8=e=>oN(e)&&"\uFEFF"===e.data[e.data.length-1],i5=e=>{var t;let r=e.getElementsByTagName("br"),n=r[r.length-1];ox(n)&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n))},i6=e=>e&&e.hasAttribute("data-mce-caret")?(i5(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,i9=e=>iG(e.startContainer),i4=Math.round,i7=e=>e?{left:i4(e.left),top:i4(e.top),bottom:i4(e.bottom),right:i4(e.right),width:i4(e.width),height:i4(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},se=(e,t)=>(e=i7(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),st=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,sr=(e,t,r)=>e>=0&&e<=Math.min(t.height,r.height)/2,sn=(e,t)=>{let r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&sr(t.top-e.bottom,e,t)},so=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&sr(t.bottom-e.top,e,t),sl=(e,t,r)=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom,sa=e=>ep(e,(e,t)=>e.fold(()=>et.some(t),e=>{let r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.right,e.right),l=Math.max(t.bottom,e.bottom);return et.some({top:n,right:o,bottom:l,left:r,width:o-r,height:l-n})}),et.none()),si=(e,t,r)=>{let n=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-o)*(r-o))},ss=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),sd=e=>{let t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},sc=(e,t)=>{if(!(oh(e)&&e.hasChildNodes()))return e;{let r=e.childNodes,n=ih(t,0,r.length-1);return r[n]}},sm=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),su=e=>D(e)&&e.charCodeAt(0)>=768&&sm.test(e),sf=oC(["script","style","textarea"]),sg=oC(["img","input","textarea","hr","iframe","video","audio","object","embed"]),sp=oC(["table"]),sh=e=>!iZ(e)&&(oN(e)?!sf(e.parentNode):sg(e)||oB(e)||sp(e)||sv(e)),sb=e=>oh(e)&&"true"===e.getAttribute("unselectable"),sv=e=>!sb(e)&&oM(e),sy=(e,t)=>{for(let r=e.parentNode;r&&r!==t;r=r.parentNode){if(sv(r))return!1;if(oL(r))break}return!0},sC=e=>!!sv(e)&&!ep(eA(e.getElementsByTagName("*")),(e,t)=>e||oL(t),!1),sE=(e,t)=>sh(e)&&sy(e,t),sx=oE("display","block table"),s_=((...e)=>t=>{for(let r=0;r<e.length;r++)if(!e[r](t))return!1;return!0})(oh,sh,G(oE("float","left right"))),sw=G(oE("white-space","pre pre-line pre-wrap")),sS=aG.nodeIndex,sk=(e,t)=>{if(!(t<0&&oh(e)&&e.hasChildNodes()))return sc(e,t)},sN=e=>e?e.createRange():aG.DOM.createRng(),sR=e=>D(e)&&/[\r\n\t ]/.test(e),sA=e=>!!e.setStart&&!!e.setEnd,sD=e=>{let t=e.startContainer,r=e.startOffset;if(sR(e.toString())&&sw(t.parentNode)&&oN(t)){let e=t.data;if(sR(e[r-1])||sR(e[r+1]))return!0}return!1},sT=e=>{let t=e.ownerDocument,r=sN(t),n=t.createTextNode("\xa0"),o=e.parentNode;o.insertBefore(n,e),r.setStart(n,0),r.setEnd(n,1);let l=i7(r.getBoundingClientRect());return o.removeChild(n),l},sO=e=>{let t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;if(!(t===r&&oN(r))||0!==n||1!==o)return null;{let t=e.cloneRange();return t.setEndAfter(r),sP(t)}},sB=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,sP=e=>{var t;let r;let n=e.getClientRects();return(r=n.length>0?i7(n[0]):i7(e.getBoundingClientRect()),!sA(e)&&oB(e)&&sB(r))?sT(e):sB(r)&&sA(e)&&null!==(t=sO(e))&&void 0!==t?t:r},sL=(e,t)=>{let r=se(e,t);return r.width=1,r.right=r.left+1,r},sM=e=>{let t=[],r=e=>{!(0===e.height||t.length>0&&st(e,t[t.length-1]))&&t.push(e)},n=(e,t)=>{let n=sN(e.ownerDocument);if(t<e.data.length){if(su(e.data[t]))return;if(su(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!sD(n))){r(sL(sP(n),!1));return}}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),sD(n)||r(sL(sP(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),sD(n)||r(sL(sP(n),!0)))},o=e.container(),l=e.offset();if(oN(o))return n(o,l),t;if(oh(o)){if(e.isAtEnd()){let e=sk(o,l);oN(e)&&n(e,e.data.length),s_(e)&&!oB(e)&&r(sL(sP(e),!1))}else{let a=sk(o,l);if(oN(a)&&n(a,0),s_(a)&&e.isAtEnd())return r(sL(sP(a),!1)),t;let i=sk(e.container(),e.offset()-1);s_(i)&&!oB(i)&&(sx(i)||sx(a)||!s_(a))&&r(sL(sP(i),!1)),s_(a)&&r(sL(sP(a),!0))}}return t},sF=(e,t,r)=>{let n=()=>(r||(r=sM(sF(e,t))),r);return{container:V(e),offset:V(t),toRange:()=>{let r=sN(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:n,isVisible:()=>n().length>0,isAtStart:()=>(oN(e),0===t),isAtEnd:()=>oN(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>sk(e,r?t-1:t)}};sF.fromRangeStart=e=>sF(e.startContainer,e.startOffset),sF.fromRangeEnd=e=>sF(e.endContainer,e.endOffset),sF.after=e=>sF(e.parentNode,sS(e)+1),sF.before=e=>sF(e.parentNode,sS(e)),sF.isAbove=(e,t)=>t2(eN(t.getClientRects()),eR(e.getClientRects()),sn).getOr(!1),sF.isBelow=(e,t)=>t2(eR(t.getClientRects()),eN(e.getClientRects()),so).getOr(!1),sF.isAtStart=e=>!!e&&e.isAtStart(),sF.isAtEnd=e=>!!e&&e.isAtEnd(),sF.isTextPosition=e=>!!e&&oN(e.container()),sF.isElementPosition=e=>!sF.isTextPosition(e);let sI=(e,t)=>{oN(t)&&0===t.data.length&&e.remove(t)},sU=(e,t,r)=>{t.insertNode(r),sI(e,r.previousSibling),sI(e,r.nextSibling)},sz=(e,t,r)=>{let n=et.from(r.firstChild),o=et.from(r.lastChild);t.insertNode(r),n.each(t=>sI(e,t.previousSibling)),o.each(t=>sI(e,t.nextSibling))},sj=(e,t,r)=>{oO(r)?sz(e,t,r):sU(e,t,r)},sH=aG.nodeIndex,s$=e=>{let t=e.parentNode;return ox(t)?s$(t):t},sq=e=>e?eJ(e.childNodes,(e,t)=>(ox(t)&&"BR"!==t.nodeName?e=e.concat(sq(t)):e.push(t),e),[]):[],sV=(e,t)=>{let r=e;for(;(r=r.previousSibling)&&oN(r);)t+=r.data.length;return t},sW=e=>t=>e===t,sK=e=>{let t,r;r=e0(t=sq(s$(e)),sW(e),e);let n=eJ(t=t.slice(0,r+1),(e,r,n)=>(oN(r)&&oN(t[n-1])&&e++,e),0);return(r=e0(t=eQ(t,oC([e.nodeName])),sW(e),e))-n},sY=e=>(oN(e)?"text()":e.nodeName.toLowerCase())+"["+sK(e)+"]",sG=(e,t,r)=>{let n=[];for(let o=t.parentNode;o&&o!==e&&!(r&&r(o));o=o.parentNode)n.push(o);return n},sX=(e,t)=>{let r,n=[],o=t.container(),l=t.offset();if(oN(o))r=sV(o,l);else{let e=o.childNodes;l>=e.length?(r="after",l=e.length-1):r="before",o=e[l]}n.push(sY(o));let a=sG(e,o);return a=eQ(a,G(ox)),(n=n.concat(eZ(a,e=>sY(e)))).reverse().join("/")+","+r},sZ=(e,t,r)=>{let n=sq(e);return n=eQ(n,(e,t)=>!oN(e)||!oN(n[t-1])),(n=eQ(n,oC([t])))[r]},sQ=(e,t)=>{let r=e,n=0;for(;oN(r);){let o=r.data.length;if(t>=n&&t<=n+o){e=r,t-=n;break}if(!oN(r.nextSibling)){e=r,t=o;break}n+=o,r=r.nextSibling}return oN(e)&&t>e.data.length&&(t=e.data.length),sF(e,t)},sJ=(e,t)=>{if(!t)return null;let r=t.split(","),n=r[0].split("/"),o=r.length>1?r[1]:"before",l=eJ(n,(e,t)=>{let r=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return r?("text()"===r[1]&&(r[1]="#text"),sZ(e,r[1],parseInt(r[2],10))):null},e);if(!l)return null;if(!oN(l)&&l.parentNode){let e;return e="after"===o?sH(l)+1:sH(l),sF(l.parentNode,e)}return sQ(l,parseInt(o,10))},s0=(e,t,r)=>{let n=e(t.data.slice(0,r)).length;for(let r=t.previousSibling;r&&oN(r);r=r.previousSibling)n+=e(r.data).length;return n},s1=(e,t,r,n,o)=>{let l=o?n.startContainer:n.endContainer,a=o?n.startOffset:n.endOffset,i=[],s=e.getRoot();if(oN(l))i.push(r?s0(t,l,a):a);else{let t=0,n=l.childNodes;a>=n.length&&n.length&&(t=1,a=Math.max(0,n.length-1)),i.push(e.nodeIndex(n[a],r)+t)}for(let t=l;t&&t!==s;t=t.parentNode)i.push(e.nodeIndex(t,r));return i},s2=(e,t,r,n)=>{let o=t.dom,l=s1(o,e,r,n,!0),a=t.isForward(),i=i9(n)?{isFakeCaret:!0}:{};return t.isCollapsed()?{start:l,forward:a,...i}:{start:l,end:s1(o,e,r,n,!1),forward:a,...i}},s3=(e,t,r)=>{let n=0;return tQ.each(e.select(t),e=>{if("all"!==e.getAttribute("data-mce-bogus")){if(e===r)return!1;n++}}),n},s8=(e,t)=>{let r=t?e.startContainer:e.endContainer,n=t?e.startOffset:e.endOffset;if(oh(r)&&"TR"===r.nodeName){let o=r.childNodes;(r=o[Math.min(t?n:n-1,o.length-1)])&&(n=t?0:r.childNodes.length,t?e.setStart(r,n):e.setEnd(r,n))}},s5=e=>(s8(e,!0),s8(e,!1),e),s6=(e,t)=>{if(oh(e)&&oM(e=sc(e,t)))return e;if(iZ(e)){oN(e)&&iG(e)&&(e=e.parentNode);let t=e.previousSibling;if(oM(t)||oM(t=e.nextSibling))return t}},s9=e=>s6(e.startContainer,e.startOffset)||s6(e.endContainer,e.endOffset),s4=(e,t,r)=>{let n=r.getNode(),o=r.getRng();if("IMG"===n.nodeName||oM(n)){let e=n.nodeName;return{name:e,index:s3(r.dom,e,n)}}let l=s9(o);if(l){let e=l.tagName;return{name:e,index:s3(r.dom,e,l)}}return s2(e,r,t,o)},s7=e=>{let t=e.getRng();return{start:sX(e.dom.getRoot(),sF.fromRangeStart(t)),end:sX(e.dom.getRoot(),sF.fromRangeEnd(t)),forward:e.isForward()}},de=e=>({rng:e.getRng(),forward:e.isForward()}),dt=(e,t,r)=>{let n={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",n,"&#xFEFF;"):e.create("span",n)},dr=(e,t)=>{let r=e.dom,n=e.getRng(),o=r.uniqueId(),l=e.isCollapsed(),a=e.getNode(),i=a.nodeName,s=e.isForward();if("IMG"===i)return{name:i,index:s3(r,i,a)};let d=s5(n.cloneRange());if(!l){d.collapse(!1);let e=dt(r,o+"_end",t);sj(r,d,e)}(n=s5(n)).collapse(!0);let c=dt(r,o+"_start",t);return sj(r,n,c),e.moveToBookmark({id:o,keep:!0,forward:s}),{id:o,forward:s}},dn=(e,t,r=!1)=>2===t?s4(iK,r,e):3===t?s7(e):t?de(e):dr(e,!1),dl=Y(s4,W,!0),da={value:e=>{let t=t=>t(e),r=V(e),n=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:ee,isError:J,map:t=>da.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:r,or:n,getOrThunk:r,orThunk:n,getOrDie:r,each:t=>{t(e)},toOptional:()=>et.some(e)};return o},error:e=>{let t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:J,isError:ee,map:t,mapError:t=>da.error(t(e)),bind:t,exists:J,forall:ee,getOr:W,or:W,getOrThunk:Z,orThunk:Z,getOrDie:X(String(e)),each:H,toOptional:et.none};return r}},di=e=>{if(!B(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],r={};return ec(e,(n,o)=>{let l=eO(n);if(1!==l.length)throw Error("one and only one name per case");let a=l[0],i=n[a];if(void 0!==r[a])throw Error("duplicate key detected:"+a);if("cata"===a)throw Error("cannot have a case named cata (sorry)");if(!B(i))throw Error("case arguments must be an array");t.push(a),r[a]=(...r)=>{let n=r.length;if(n!==i.length)throw Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+n);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[o].apply(null,r)},match:e=>{let n=eO(e);if(t.length!==n.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!eE(t,e=>ei(n,e)))throw Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:e=>{console.log(e,{constructors:t,constructor:a,params:r})}}}}),r};di([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let ds=e=>{let t=[],r=[];return ec(e,e=>{e.fold(e=>{t.push(e)},e=>{r.push(e)})}),{errors:t,values:r}},dd=e=>"inline-command"===e.type||"inline-format"===e.type,dc=e=>"block-command"===e.type||"block-format"===e.type,dm=(e,t)=>("block-command"===e.type||"block-format"===e.type)&&e.trigger===t,du=e=>{var t;let r=t=>da.error({message:t,pattern:e}),n=(t,n,o)=>{if(void 0!==e.format){let o;if(B(e.format)){if(!eE(e.format,D))return r(t+" pattern has non-string items in the `format` array");o=e.format}else{if(!D(e.format))return r(t+" pattern has non-string `format` parameter");o=[e.format]}return da.value(n(o))}return void 0===e.cmd?r(t+" pattern is missing both `format` and `cmd` parameters"):D(e.cmd)?da.value(o(e.cmd,e.value)):r(t+" pattern has non-string `cmd` parameter")};if(!T(e))return r("Raw pattern is not an object");if(!D(e.start))return r("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!D(e.end))return r("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return r("Inline pattern has empty `start` and `end` parameters");let t=e.start,o=e.end;return 0===o.length&&(o=t,t=""),n("Inline",e=>({type:"inline-format",start:t,end:o,format:e}),(e,r)=>({type:"inline-command",start:t,end:o,cmd:e,value:r}))}if(void 0!==e.replacement)return D(e.replacement)?0===e.start.length?r("Replacement pattern has empty `start` parameter"):da.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):r("Replacement pattern has non-string `replacement` parameter");{let o=null!==(t=e.trigger)&&void 0!==t?t:"space";return 0===e.start.length?r("Block pattern has empty `start` parameter"):n("Block",t=>({type:"block-format",start:e.start,format:t[0],trigger:o}),(t,r)=>({type:"block-command",start:e.start,cmd:t,value:r,trigger:o}))}},df=e=>ef(e,dc),dg=e=>ef(e,dd),dp=(e,t)=>({inlinePatterns:dg(e),blockPatterns:df(e),dynamicPatternsLookup:t}),dh=(e,t)=>({...e,blockPatterns:ef(e.blockPatterns,e=>dm(e,t))}),db=e=>{let t=ds(ed(e,du));return ec(t.errors,e=>console.error(e.message,e.pattern)),t.values},dv=e=>t=>db(e(t)),dy=(e,t)=>e.dispatch("PreProcess",t),dC=(e,t)=>e.dispatch("PostProcess",t),dE=e=>{e.dispatch("remove")},dx=e=>{e.dispatch("detach")},d_=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},dw=(e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})},dS=(e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})},dk=e=>{e.dispatch("PreInit")},dN=e=>{e.dispatch("PostRender")},dR=e=>{e.dispatch("Init")},dA=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},dD=(e,t,r)=>{e.dispatch(t,r)},dT=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},dO=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},dB=(e,t)=>e.dispatch("BeforeSetContent",t),dP=(e,t)=>e.dispatch("SetContent",t),dL=(e,t)=>e.dispatch("BeforeGetContent",t),dM=(e,t)=>e.dispatch("GetContent",t),dF=(e,t)=>{e.dispatch("AutocompleterStart",t)},dI=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},dU=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},dz=e=>{e.dispatch("AutocompleterEnd")},dj=(e,t,r)=>e.dispatch("PastePreProcess",{content:t,internal:r}),dH=(e,t,r)=>e.dispatch("PastePostProcess",{node:t,internal:r}),d$=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),dq=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),dV=(e,t)=>e.dispatch("DisabledStateChange",{state:t}),dW=tj().deviceType,dK=dW.isTouch(),dY=aG.DOM,dG=e=>ep(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),(e,t)=>{let r=t.split("="),n=r[0],o=r.length>1?r[1]:n;return e[tc(n)]=tc(o),e},{}),dX=e=>A(e,RegExp),dZ=e=>t=>t.options.get(e),dQ=e=>D(e)||T(e),dJ=(e,t="")=>r=>{let n=D(r);return n?-1!==r.indexOf("=")?{value:e$(dG(r),e.id).getOr(t),valid:n}:{value:r,valid:n}:{valid:!1,message:"Must be a string."}},d0=e=>{let t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:dJ(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:dJ(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{let t=D(e)&&tf(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{let t=ei(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>L(e)?{valid:!0,value:e}:D(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{let t=!1===e||D(e)||j(e,D);return t?D(e)?{value:ed(e.split(","),tc),valid:t}:B(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:cz(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{let t=D(e)||j(e,D);return t?{value:B(e)?e:ed(e.split(","),tc),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("extended_mathml_attributes",{processor:"string[]"}),t("extended_mathml_elements",{processor:"string[]"}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{let t=L(e)||D(e);return t?!1===e||dW.isiPhone()||dW.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!dK}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("onboarding",{processor:"boolean",default:!0}),t("tiny_cloud_entry_url",{processor:"string"}),t("theme",{processor:e=>!1===e||D(e)||U(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{let t=!1===e||D(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("disabled",{processor:t=>L(t)?(e.initialized&&mB(e)!==t&&Promise.resolve().then(()=>{dV(e,t)}),{valid:!0,value:t}):{valid:!1,message:"The value must be a boolean."},default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("allow_mathml_annotation_encodings",{processor:e=>{let t=j(e,D);return t?{value:e,valid:t}:{valid:!1,message:"Must be an array of strings."}},default:[]}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:dQ}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:dQ}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:dQ}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:dQ}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>D(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>j(e,T)||!1===e?{value:db(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:e=>U(e)?{value:dv(e),valid:!0}:{valid:!1,message:"Must be a single function"},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>j(e,dX)?{value:e,valid:!0}:dX(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:e=>{let t=ei(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:e=>{let t=ei(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:a8.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:dY.getAttrib(e.getElement(),"placeholder")})})},d1=dZ("iframe_attrs"),d2=dZ("doctype"),d3=dZ("document_base_url"),d8=dZ("body_id"),d5=dZ("body_class"),d6=dZ("content_security_policy"),d9=dZ("br_in_pre"),d4=dZ("forced_root_block"),d7=dZ("forced_root_block_attrs"),ce=dZ("newline_behavior"),ct=dZ("br_newline_selector"),cr=dZ("no_newline_selector"),cn=dZ("keep_styles"),co=dZ("end_container_on_empty_block"),cl=dZ("automatic_uploads"),ca=dZ("images_reuse_filename"),ci=dZ("images_replace_blob_uris"),cs=dZ("icons"),cd=dZ("icons_url"),cc=dZ("images_upload_url"),cm=dZ("images_upload_base_path"),cu=dZ("images_upload_credentials"),cf=dZ("images_upload_handler"),cg=dZ("content_css_cors"),cp=dZ("referrer_policy"),ch=dZ("language"),cb=dZ("language_url"),cv=dZ("indent_use_margin"),cy=dZ("indentation"),cC=dZ("content_css"),cE=dZ("content_style"),cx=dZ("font_css"),c_=dZ("directionality"),cw=dZ("inline_boundaries_selector"),cS=dZ("object_resizing"),ck=dZ("resize_img_proportional"),cN=dZ("placeholder"),cR=dZ("event_root"),cA=dZ("service_message"),cD=dZ("theme"),cT=dZ("theme_url"),cO=dZ("model"),cB=dZ("model_url"),cP=dZ("inline_boundaries"),cL=dZ("formats"),cM=dZ("preview_styles"),cF=dZ("format_empty_lines"),cI=dZ("format_noneditable_selector"),cU=dZ("custom_ui_selector"),cz=dZ("inline"),cj=dZ("hidden_input"),cH=dZ("submit_patch"),c$=dZ("add_form_submit_trigger"),cq=dZ("add_unload_trigger"),cV=dZ("custom_undo_redo_levels"),cW=dZ("disable_nodechange"),cK=dZ("readonly"),cY=dZ("editable_root"),cG=dZ("content_css_cors"),cX=dZ("plugins"),cZ=dZ("external_plugins"),cQ=dZ("block_unsupported_drop"),cJ=dZ("visual"),c0=dZ("visual_table_class"),c1=dZ("visual_anchor_class"),c2=dZ("iframe_aria_text"),c3=dZ("setup"),c8=dZ("init_instance_callback"),c5=dZ("urlconverter_callback"),c6=dZ("auto_focus"),c9=dZ("browser_spellcheck"),c4=dZ("protect"),c7=dZ("paste_block_drop"),me=dZ("paste_data_images"),mt=dZ("paste_preprocess"),mr=dZ("paste_postprocess"),mn=dZ("newdocument_content"),mo=dZ("paste_webkit_styles"),ml=dZ("paste_remove_styles_if_webkit"),ma=dZ("paste_merge_formats"),mi=dZ("smart_paste"),ms=dZ("paste_as_text"),md=dZ("paste_tab_spaces"),mc=dZ("allow_html_data_urls"),mm=dZ("text_patterns"),mu=dZ("text_patterns_lookup"),mf=dZ("noneditable_class"),mg=dZ("editable_class"),mp=dZ("noneditable_regexp"),mh=dZ("preserve_cdata"),mb=dZ("highlight_on_focus"),mv=dZ("xss_sanitization"),my=dZ("init_content_sync"),mC=e=>e.options.isSet("text_patterns_lookup"),mE=e=>tQ.explode(e.options.get("font_size_style_values")),mx=e=>tQ.explode(e.options.get("font_size_classes")),m_=e=>"xml"===e.options.get("encoding"),mw=e=>tQ.explode(e.options.get("images_file_types")),mS=dZ("table_tab_navigation"),mk=dZ("details_initial_state"),mN=dZ("details_serialized_state"),mR=dZ("sandbox_iframes"),mA=e=>e.options.get("sandbox_iframes_exclusions"),mD=dZ("convert_unsafe_embeds"),mT=dZ("license_key"),mO=dZ("api_key"),mB=dZ("disabled"),mP=e=>{let t=e.parentNode;t&&t.removeChild(e)},mL=e=>{let t=iK(e);return{count:e.length-t.length,text:t}},mM=e=>{let t;for(;-1!==(t=e.data.lastIndexOf("\uFEFF"));)e.deleteData(t,1)},mF=(e,t)=>(m$(e),t),mI=(e,t)=>{let r=mL(e.data.substr(0,t.offset())),n=mL(e.data.substr(t.offset()));return(r.text+n.text).length>0?(mM(e),sF(e,t.offset()-r.count)):t},mU=(e,t)=>{let r=t.container(),n=ea(eA(r.childNodes),e).map(e=>e<t.offset()?sF(r,t.offset()-1):t).getOr(t);return m$(e),n},mz=(e,t)=>oN(e)&&t.container()===e?mI(e,t):mF(e,t),mj=(e,t)=>t.container()===e.parentNode?mU(e,t):mF(e,t),mH=(e,t)=>sF.isTextPosition(t)?mz(e,t):mj(e,t),m$=e=>{oh(e)&&iZ(e)&&(iQ(e)?e.removeAttribute("data-mce-caret"):mP(e)),oN(e)&&(mM(e),0===e.data.length&&mP(e))},mq=(e,t,r)=>{let n,o;let l=se(t.getBoundingClientRect(),r);if("BODY"===e.tagName){let t=e.ownerDocument.documentElement;n=e.scrollLeft||t.scrollLeft,o=e.scrollTop||t.scrollTop}else{let t=e.getBoundingClientRect();n=e.scrollLeft-t.left,o=e.scrollTop-t.top}l.left+=n,l.right+=n,l.top+=o,l.bottom+=o,l.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(r&&(a*=-1),l.left+=a,l.right+=a),l},mV=e=>{var t,r;let n=ot(rM.fromDom(e),"*[contentEditable=false],video,audio,embed,object");for(let e=0;e<n.length;e++){let o=n[e].dom,l=o.previousSibling;if(i8(l)){let e=l.data;1===e.length?null===(t=l.parentNode)||void 0===t||t.removeChild(l):l.deleteData(e.length-1,1)}i3(l=o.nextSibling)&&(1===l.data.length?null===(r=l.parentNode)||void 0===r||r.removeChild(l):l.deleteData(0,1))}},mW=(e,t,r,n)=>{let o,l;let a=o5(),i=d4(e),s=e.dom,d=()=>{mV(t),l&&(m$(l),l=null),a.on(e=>{s.remove(e.caret),a.clear()}),o&&(clearInterval(o),o=void 0)},c=()=>{o=window.setInterval(()=>{a.on(e=>{n()?s.toggleClass(e.caret,"mce-visual-caret-hidden"):s.addClass(e.caret,"mce-visual-caret-hidden")})},500)};return{show:(e,n)=>{let o;if(d(),oI(n))return null;if(r(n)){let r=i2(i,n,e),d=mq(t,n,e);s.setStyle(r,"top",d.top),s.setStyle(r,"caret-color","transparent"),l=r;let m=s.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});s.setStyles(m,{...d}),s.add(t,m),a.set({caret:m,element:n,before:e}),e&&s.addClass(m,"mce-visual-caret-before"),c(),(o=n.ownerDocument.createRange()).setStart(r,0),o.setEnd(r,0)}else l=iJ(n,e),o=n.ownerDocument.createRange(),mY(l.nextSibling)?(o.setStart(l,0),o.setEnd(l,0)):(o.setStart(l,1),o.setEnd(l,1));return o},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(e=>{let r=mq(t,e.element,e.before);s.setStyles(e.caret,{...r})})},destroy:()=>clearInterval(o)}},mK=()=>tY.browser.isFirefox(),mY=e=>oM(e)||oz(e),mG=e=>(mY(e)||ow(e)&&mK())&&rG(rM.fromDom(e)).exists(nb),mX=oE("display","block table table-cell table-row table-caption list-item"),mZ=e=>1===e,mQ=e=>-1===e,mJ=(e,t)=>{let r;for(;r=e(t);)if(!iG(r))return r;return null},m0=(e,t,r,n,o)=>{let l;let a=new ol(e,n),i=oM(e)||iG(e);if(mQ(t)){if(i&&r(l=mJ(a.prev.bind(a),!0)))return l;for(;l=mJ(a.prev.bind(a),o);)if(r(l))return l}if(mZ(t)){if(i&&r(l=mJ(a.next.bind(a),!0)))return l;for(;l=mJ(a.next.bind(a),o);)if(r(l))return l}return null},m1=(e,t)=>ns(rM.fromDom(e),e=>oL(e.dom),e=>e.dom===t).map(e=>e.dom).getOr(t),m2=(e,t)=>{for(;e&&e!==t;){if(mX(e))return e;e=e.parentNode}return null},m3=(e,t,r)=>m2(e.container(),r)===m2(t.container(),r),m8=(e,t)=>{if(!t)return et.none();let r=t.container(),n=t.offset();return oh(r)?et.from(r.childNodes[n+e]):et.none()},m5=(e,t)=>{var r;let n=(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},m6=(e,t,r)=>m2(t,e)===m2(r,e),m9=(e,t,r)=>{let n=e?"previousSibling":"nextSibling",o=r;for(;o&&o!==t;){let e=o[n];if(e&&iZ(e)&&(e=e[n]),oM(e)||oz(e)){if(m6(t,e,o))return e;break}if(sh(e))break;o=o.parentNode}return null},m4=Y(m5,!0),m7=Y(m5,!1),ue=(e,t,r)=>{let n;let o=Y(m9,!0,t),l=Y(m9,!1,t),a=r.startContainer,i=r.startOffset;if(iG(a)){let e=oN(a)?a.parentNode:a,t=e.getAttribute("data-mce-caret");if("before"===t&&mG(n=e.nextSibling))return m4(n);if("after"===t&&mG(n=e.previousSibling))return m7(n)}if(!r.collapsed)return r;if(oN(a)){if(iZ(a)){if(1===e){if(n=l(a))return m4(n);if(n=o(a))return m7(n)}if(-1===e){if(n=o(a))return m7(n);if(n=l(a))return m4(n)}return r}if(i8(a)&&i>=a.data.length-1)return 1===e&&(n=l(a))?m4(n):r;if(i3(a)&&i<=1)return -1===e&&(n=o(a))?m7(n):r;if(i===a.data.length)return(n=l(a))?m4(n):r;if(0===i&&(n=o(a)))return m7(n)}return r},ut=(e,t)=>m8(e?0:-1,t).filter(oM),ur=(e,t,r)=>{let n=ue(e,t,r);return -1===e?sF.fromRangeStart(n):sF.fromRangeEnd(n)},un=e=>et.from(e.getNode()).map(rM.fromDom),uo=e=>et.from(e.getNode(!0)).map(rM.fromDom),ul=(e,t)=>{let r=t;for(;(r=e(r))&&!r.isVisible(););return r},ua=(e,t)=>{let r=m3(e,t);return!!(!r&&oB(e.getNode()))||r},ui=e=>sg(e)||sC(e),us=(e,t)=>{let r=[],n=e;for(;n&&n!==t;)r.push(n),n=n.parentNode;return r},ud=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,uc=(e,t)=>{if(mZ(e)){if(sh(t.previousSibling)&&!oN(t.previousSibling))return sF.before(t);if(oN(t))return sF(t,0)}if(mQ(e)){if(sh(t.nextSibling)&&!oN(t.nextSibling))return sF.after(t);if(oN(t))return sF(t,t.data.length)}return mQ(e)?oB(t)?sF.before(t):sF.after(t):sF.before(t)},um=(e,t)=>{let r=t.nextSibling;return r&&sh(r)?oN(r)?sF(r,0):sF.before(r):uu(1,sF.after(t),e)},uu=(e,t,r)=>{let n,o,l,a;if(!oh(r)||!t)return null;if(t.isEqual(sF.after(r))&&r.lastChild){if(a=sF.after(r.lastChild),mQ(e)&&sh(r.lastChild)&&oh(r.lastChild))return oB(r.lastChild)?sF.before(r.lastChild):a}else a=t;let i=a.container(),s=a.offset();if(oN(i)){if(mQ(e)&&s>0)return sF(i,--s);if(mZ(e)&&s<i.length)return sF(i,++s);n=i}else{if(mQ(e)&&s>0&&sh(o=ud(i,s-1)))return!ui(o)&&(l=m0(o,e,sE,o))?oN(l)?sF(l,l.data.length):sF.after(l):oN(o)?sF(o,o.data.length):sF.before(o);if(mZ(e)&&s<i.childNodes.length&&sh(o=ud(i,s)))return oB(o)?um(r,o):!ui(o)&&(l=m0(o,e,sE,o))?oN(l)?sF(l,0):sF.before(l):oN(o)?sF(o,0):sF.after(o);n=o||a.getNode()}if(n&&(mZ(e)&&a.isAtEnd()||mQ(e)&&a.isAtStart())&&sE(n=m0(n,e,ee,r,!0),r))return uc(e,n);o=n?m0(n,e,sE,r):n;let d=e1(ef(us(i,r),oM));return!d||o&&d.contains(o)?o?uc(e,o):null:a=mZ(e)?sF.after(d):sF.before(d)},uf=e=>({next:t=>uu(1,t,e),prev:t=>uu(-1,t,e)}),ug=(e,t,r)=>{let n=e?sF.before(r):sF.after(r);return uE(e,t,n)},up=e=>oB(e)?sF.before(e):sF.after(e),uh=e=>sF.isTextPosition(e)?0===e.offset():sh(e.getNode()),ub=e=>{if(!sF.isTextPosition(e))return sh(e.getNode(!0));{let t=e.container();return e.offset()===t.data.length}},uv=(e,t)=>!sF.isTextPosition(e)&&!sF.isTextPosition(t)&&e.getNode()===t.getNode(!0),uy=e=>!sF.isTextPosition(e)&&oB(e.getNode()),uC=(e,t,r)=>e?!uv(t,r)&&!uy(t)&&ub(t)&&uh(r):!uv(r,t)&&uh(t)&&ub(r),uE=(e,t,r)=>{let n=uf(t);return et.from(e?n.next(r):n.prev(r))},ux=(e,t,r)=>uE(e,t,r).bind(n=>m3(r,n,t)&&uC(e,r,n)?uE(e,t,n):et.some(n)),u_=(e,t,r,n)=>ux(e,t,r).bind(r=>n(r)?u_(e,t,r,n):et.some(r)),uw=(e,t)=>{let r=e?t.firstChild:t.lastChild;return oN(r)?et.some(sF(r,e?0:r.data.length)):r?sh(r)?et.some(e?sF.before(r):up(r)):ug(e,t,r):et.none()},uS=Y(uE,!0),uk=Y(uE,!1),uN=Y(uw,!0),uR=Y(uw,!1),uA="_mce_caret",uD=e=>oh(e)&&e.id===uA,uT=(e,t)=>{let r=t;for(;r&&r!==e;){if(uD(r))return r;r=r.parentNode}return null},uO=e=>D(e.start),uB=e=>eq(e,"rng"),uP=e=>eq(e,"id"),uL=e=>eq(e,"name"),uM=e=>tQ.isArray(e.start),uF=e=>!(!uL(e)&&L(e.forward))||e.forward,uI=(e,t)=>(oh(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),uU=(e,t)=>t2(et.from(sJ(e.getRoot(),t.start)),et.from(sJ(e.getRoot(),t.end)),(r,n)=>{let o=e.createRng();return o.setStart(r.container(),r.offset()),o.setEnd(n.container(),n.offset()),{range:o,forward:uF(t)}}),uz=(e,t)=>{var r;let n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode("\uFEFF");e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},uj=e=>!e.hasChildNodes(),uH=(e,t)=>uR(e).fold(J,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),u$=(e,t,r)=>!!(uj(t)&&uT(e,t))&&(uz(t,r),!0),uq=(e,t,r,n)=>{let o=r[t?"start":"end"],l=e.getRoot();if(o){let e=l,r=o[0];for(let t=o.length-1;e&&t>=1;t--){let r=e.childNodes;if(u$(l,e,n))return!0;if(o[t]>r.length-1){if(u$(l,e,n))return!0;return uH(e,n)}e=r[o[t]]}oN(e)&&(r=Math.min(o[0],e.data.length)),oh(e)&&(r=Math.min(o[0],e.childNodes.length)),t?n.setStart(e,r):n.setEnd(e,r)}return!0},uV=e=>oN(e)&&e.data.length>0,uW=(e,t,r)=>{let n=e.get(r.id+"_"+t),o=null==n?void 0:n.parentNode,l=r.keep;if(!n||!o)return et.none();{let a,i;if("start"===t?l?n.hasChildNodes()?(a=n.firstChild,i=1):uV(n.nextSibling)?(a=n.nextSibling,i=0):uV(n.previousSibling)?(a=n.previousSibling,i=n.previousSibling.data.length):(a=o,i=e.nodeIndex(n)+1):(a=o,i=e.nodeIndex(n)):l?n.hasChildNodes()?(a=n.firstChild,i=1):uV(n.previousSibling)?(a=n.previousSibling,i=n.previousSibling.data.length):(a=o,i=e.nodeIndex(n)):(a=o,i=e.nodeIndex(n)),!l){let o;let l=n.previousSibling,s=n.nextSibling;for(tQ.each(tQ.grep(n.childNodes),e=>{oN(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});o=e.get(r.id+"_"+t);)e.remove(o,!0);if(oN(s)&&oN(l)&&!tY.browser.isOpera()){let t=l.data.length;l.appendData(s.data),e.remove(s),a=l,i=t}}return et.some(sF(a,i))}},uK=(e,t)=>{let r=e.createRng();return uq(e,!0,t,r)&&uq(e,!1,t,r)?et.some({range:r,forward:uF(t)}):et.none()},uY=(e,t)=>{let r=uW(e,"start",t);return t2(r,uW(e,"end",t).or(r),(r,n)=>{let o=e.createRng();return o.setStart(uI(e,r.container()),r.offset()),o.setEnd(uI(e,n.container()),n.offset()),{range:o,forward:uF(t)}})},uG=(e,t)=>et.from(e.select(t.name)[t.index]).map(t=>{let r=e.createRng();return r.selectNode(t),{range:r,forward:!0}}),uX=(e,t)=>{let r=e.dom;if(t){if(uM(t))return uK(r,t);if(uO(t))return uU(r,t);if(uP(t))return uY(r,t);else if(uL(t))return uG(r,t);else if(uB(t))return et.some({range:t.rng,forward:uF(t)})}return et.none()},uZ=(e,t,r)=>dn(e,t,r),uQ=(e,t)=>{uX(e,t).each(({range:t,forward:r})=>{e.setRng(t,r)})},uJ=e=>oh(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),u0=e=>"\xa0"===e,u1=e=>""!==e&&-1!==" \f\n\r	\v".indexOf(e),u2=e=>!u1(e)&&!u0(e)&&!oa(e),u3=e=>{let t=[];if(e)for(let r=0;r<e.rangeCount;r++)t.push(e.getRangeAt(r));return t},u8=e=>eC(e,e=>{let t=sd(e);return t?[rM.fromDom(t)]:[]}),u5=e=>u3(e).length>1,u6=e=>ef(u8(e),iz),u9=e=>ot(e,"td[data-mce-selected],th[data-mce-selected]"),u4=(e,t)=>{let r=u9(t);return r.length>0?r:u6(e)},u7=e=>u4(u3(e.selection.getSel()),rM.fromDom(e.getBody())),fe=(e,t)=>nf(e,"table",t),ft=e=>{let t=e.startContainer,r=e.startOffset;return oN(t)?0===r?et.some(rM.fromDom(t)):et.none():et.from(t.childNodes[r]).map(rM.fromDom)},fr=e=>{let t=e.endContainer,r=e.endOffset;return oN(t)?r===t.data.length?et.some(rM.fromDom(t)):et.none():et.from(t.childNodes[r-1]).map(rM.fromDom)},fn=e=>r8(e).fold(V([e]),t=>[e].concat(fn(t))),fo=e=>r5(e).fold(V([e]),t=>"br"===rn(t)?rQ(t).map(t=>[e].concat(fo(t))).getOr([]):[e].concat(fo(t))),fl=(e,t)=>t2(ft(t),fr(t),(t,r)=>{let n=eb(fn(e),Y(rH,t)),o=eb(fo(e),Y(rH,r));return n.isSome()&&o.isSome()}).getOr(!1),fa=(e,t,r,n)=>{let o=new ol(r,r),l=ez(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!ei(["td","th","table"],t.toLowerCase())),a=r;do{if(oN(a)&&0!==tQ.trim(a.data).length){n?t.setStart(a,0):t.setEnd(a,a.data.length);return}if(l[a.nodeName]){n?t.setStartBefore(a):"BR"===a.nodeName?t.setEndBefore(a):t.setEndAfter(a);return}}while(a=n?o.next():o.prev());"BODY"===r.nodeName&&(n?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},fi=e=>{let t=e.selection.getSel();return I(t)&&t.rangeCount>0},fs=(e,t)=>{let r=u7(e);r.length>0?ec(r,r=>{let n=r.dom,o=e.dom.createRng();o.setStartBefore(n),o.setEndAfter(n),t(o,!0)}):t(e.selection.getRng(),!1)},fd=(e,t,r)=>{let n=dr(e,t);r(n),e.moveToBookmark(n)},fc=e=>z(null==e?void 0:e.nodeType),fm=e=>oh(e)&&!uJ(e)&&!uD(e)&&!ox(e),fu=(e,t)=>{if(!fm(t)||/^(TD|TH)$/.test(t.nodeName))return!1;{let r=parseInt(e.getAttrib(t,"data-mce-selected"),10);return!isNaN(r)&&r>0}},ff=(e,t,r)=>{let{selection:n,dom:o}=e,l=n.getNode(),a=oM(l);fd(n,!0,()=>{t()}),a&&oM(l)&&o.isChildOf(l,e.getBody())?e.selection.select(l):r(n.getStart())&&fg(o,n)},fg=(e,t)=>{var r,n;let o=t.getRng(),{startContainer:l,startOffset:a}=o;if(!fu(e,t.getNode())&&oh(l)){let i;let s=l.childNodes,d=e.getRoot();if(a<s.length){let t=s[a];i=new ol(t,null!==(r=e.getParent(t,e.isBlock))&&void 0!==r?r:d)}else{let t=s[s.length-1];(i=new ol(t,null!==(n=e.getParent(t,e.isBlock))&&void 0!==n?n:d)).next(!0)}for(let r=i.current();r;r=i.next()){if("false"===e.getContentEditable(r))return;if(oN(r)&&!fv(r)){o.setStart(r,0),t.setRng(o);return}}}},fp=(e,t,r)=>{if(e){let n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(oh(e)||!fv(e))return e}},fh=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||lb(e,t),fb=(e,t,r)=>e.schema.isValidChild(t,r),fv=(e,t=!1)=>!!(I(e)&&oN(e))&&os(t?e.data.replace(/ /g,"\xa0"):e.data),fy=e=>I(e)&&oN(e)&&0===e.length,fC=(e,t)=>{let r="[data-mce-cef-wrappable]",n=cI(e),o=tg(n)?r:`${r},${n}`;return rI(rM.fromDom(t),o)},fE=(e,t)=>{let r=e.dom;return fm(t)&&"false"===r.getContentEditable(t)&&fC(e,t)&&0===r.select('[contenteditable="true"]',t).length},fx=(e,t)=>U(e)?e(t):(I(t)&&(e=e.replace(/%(\w+)/g,(e,r)=>t[r]||e)),e),f_=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),fw=(e,t)=>{if(F(e))return null;{let r=String(e);return("color"===t||"backgroundColor"===t)&&(r=a_(r)),"fontWeight"===t&&700===e&&(r="bold"),"fontFamily"===t&&(r=r.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),r}},fS=(e,t,r)=>fw(e.getStyle(t,r),r),fk=(e,t)=>{let r;return e.getParent(t,t=>!!oh(t)&&!!(r=e.getStyle(t,"text-decoration"))&&"none"!==r),r},fN=(e,t,r)=>e.getParents(t,r,e.getRoot()),fR=(e,t,r)=>{let n=e.formatter.get(t);return I(n)&&es(n,r)},fA=(e,t)=>fR(e,t,e=>{let t=e=>U(e)||e.length>1&&"%"===e.charAt(0);return es(["styles","attributes"],r=>e$(e,r).exists(e=>es(B(e)?e:eH(e),t)))}),fD=(e,t,r)=>{let n=["inline","block","selector","attributes","styles","classes"],o=e=>ez(e,(e,t)=>es(n,e=>e===t));return fR(e,t,t=>{let n=o(t);return fR(e,r,e=>eW(n,o(e)))})},fT=e=>eV(e,"block"),fO=e=>fT(e)&&!0===e.wrapper,fB=e=>fT(e)&&!0!==e.wrapper,fP=e=>eV(e,"selector"),fL=e=>eV(e,"inline"),fM=e=>fP(e)&&fL(e)&&tJ(e$(e,"mixed"),!0),fF=e=>fP(e)&&!1!==e.expand&&!fL(e),fI=e=>{let t=[],r=e;for(;r;){if(oN(r)&&"\uFEFF"!==r.data||r.childNodes.length>1)return[];oh(r)&&t.push(r),r=r.firstChild}return t},fU=e=>fI(e).length>0,fz=e=>uD(e.dom)&&fU(e.dom),fj=e=>oB(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,fH=(e,t)=>{let r=t;for(;r;){if(oh(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},f$=(e,t,r,n)=>{let o=t.data;if(e){for(let e=r;e>0;e--)if(n(o.charAt(e-1)))return e}else for(let e=r;e<o.length;e++)if(n(o.charAt(e)))return e;return -1},fq=(e,t,r)=>f$(e,t,r,e=>u0(e)||u1(e)),fV=(e,t,r)=>f$(e,t,r,u2),fW=(e,t,r,n,o,l)=>{let a;let i=e.getParent(r,t=>oF(t)||e.isBlock(t)),s=I(i)?i:t,d=(t,r,n)=>{let l=iR(e),i=o?l.backwards:l.forwards;return et.from(i(t,r,(e,t)=>uJ(e.parentNode)?-1:(a=e,n(o,e,t)),s))};return d(r,n,fq).bind(e=>l?d(e.container,e.offset+(o?-1:0),fV):et.some(e)).orThunk(()=>a?et.some({container:a,offset:o?0:a.length}):et.none())},fK=(e,t,r,n,o)=>{let l=n[o];oN(n)&&tg(n.data)&&l&&(n=l);let a=fN(e,n);for(let n=0;n<a.length;n++)for(let o=0;o<t.length;o++){let l=t[o];if((!I(l.collapsed)||l.collapsed===r.collapsed)&&fP(l)&&e.is(a[n],l.selector))return a[n]}return n},fY=(e,t,r,n)=>{var o;let l=r,a=e.getRoot(),i=t[0];if(fT(i)&&(l=i.wrapper?null:e.getParent(r,i.block,a)),!l){let t=null!==(o=e.getParent(r,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:a;l=e.getParent(oN(r)?r.parentNode:r,t=>t!==a&&fh(e.schema,t),t)}if(l&&fT(i)&&i.wrapper&&(l=fN(e,l,"ul,ol").reverse()[0]||l),!l)for(l=r;l&&l[n]&&!e.isBlock(l[n])&&!f_(l=l[n],"br"););return l||r},fG=(e,t,r,n)=>{let o=r.parentNode;return!I(r[n])&&(!!(o===t||F(o)||e.isBlock(o))||fG(e,t,o,n))},fX=(e,t,r,n,o,l)=>{let a=r,i=o?"previousSibling":"nextSibling",s=e.getRoot();if(oN(r)&&!fv(r)&&(o?n>0:n<r.data.length))return r;for(;a&&!oF(a);){if(!t[0].block_expand&&e.isBlock(a))return l?a:r;for(let t=a[i];t;t=t[i]){let r=oN(t)&&!fG(e,s,t,i);if(!uJ(t)&&!fj(t)&&!fv(t,r))return a}if(a===s||a.parentNode===s){r=a;break}a=a.parentNode}return r},fZ=e=>uJ(e.parentNode)||uJ(e),fQ=(e,t,r,n={})=>{let{includeTrailingSpace:o=!1,expandToBlock:l=!0}=n,a=e.getParent(t.commonAncestorContainer,e=>oF(e)),i=I(a)?a:e.getRoot(),{startContainer:s,startOffset:d,endContainer:c,endOffset:m}=t,u=r[0];return oh(s)&&s.hasChildNodes()&&oN(s=sc(s,d))&&(d=0),oh(c)&&c.hasChildNodes()&&oN(c=sc(c,t.collapsed?m:m-1))&&(m=c.data.length),s=fH(e,s),c=fH(e,c),fZ(s)&&(s=uJ(s)?s:s.parentNode,oN(s=t.collapsed?s.previousSibling||s:s.nextSibling||s)&&(d=t.collapsed?s.length:0)),fZ(c)&&(c=uJ(c)?c:c.parentNode,oN(c=t.collapsed?c.nextSibling||c:c.previousSibling||c)&&(m=t.collapsed?0:c.length)),t.collapsed&&(fW(e,i,s,d,!0,o).each(({container:e,offset:t})=>{s=e,d=t}),fW(e,i,c,m,!1,o).each(({container:e,offset:t})=>{c=e,m=t})),(fL(u)||u.block_expand)&&(fL(u)&&oN(s)&&0!==d||(s=fX(e,r,s,d,!0,l)),fL(u)&&oN(c)&&m!==c.data.length||(c=fX(e,r,c,m,!1,l))),fF(u)&&(s=fK(e,r,t,s,"previousSibling"),c=fK(e,r,t,c,"nextSibling")),(fT(u)||fP(u))&&(s=fY(e,r,s,"previousSibling"),c=fY(e,r,c,"nextSibling"),fT(u)&&(!e.isBlock(s)&&oN(s=fX(e,r,s,d,!0,l))&&(d=0),!e.isBlock(c)&&oN(c=fX(e,r,c,m,!1,l))&&(m=c.data.length))),oh(s)&&s.parentNode&&(d=e.nodeIndex(s),s=s.parentNode),oh(c)&&c.parentNode&&(m=e.nodeIndex(c)+1,c=c.parentNode),{startContainer:s,startOffset:d,endContainer:c,endOffset:m}},fJ=(e,t,r)=>{var n;let o=t.startOffset,l=sc(t.startContainer,o),a=t.endOffset,i=sc(t.endContainer,a-1),s=e=>{let t=e[0];oN(t)&&t===l&&o>=t.data.length&&e.splice(0,1);let r=e[e.length-1];return 0===a&&e.length>0&&r===i&&oN(r)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{let n=[];for(;e&&e!==r;e=e[t])n.push(e);return n},c=(t,r)=>e.getParent(t,e=>e.parentNode===r,r),m=(e,t,n)=>{let o=n?"nextSibling":"previousSibling";for(let l=e,a=l.parentNode;l&&l!==t;l=a){a=l.parentNode;let t=d(l===e?l:l[o],o);t.length&&(n||t.reverse(),r(s(t)))}};if(l===i)return r(s([l]));let u=null!==(n=e.findCommonAncestor(l,i))&&void 0!==n?n:e.getRoot();if(e.isChildOf(l,i))return m(l,u,!0);if(e.isChildOf(i,l))return m(i,u);let f=c(l,u)||l,g=c(i,u)||i;m(l,f,!0);let p=d(f===l?f:f.nextSibling,"nextSibling",g===i?g.nextSibling:g);p.length&&r(s(p)),m(i,g)},f0=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],f1=e=>rd(e)&&"\uFEFF"===iD(e),f2=(e,t,r,n)=>rG(t).fold(()=>"skipping",o=>{if("br"===n||f1(t))return"valid";if(is(t))return"existing";if(uD(t.dom))return"caret";if(es(f0,e=>rI(t,e)))return"valid-block";if(!fb(e,r,n)||!fb(e,rn(o),r))return"invalid-child";else return"valid"}),f3=(e,t)=>{let r=fQ(e.dom,t,[{inline:"span"}]);t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)},f8=(e,t,r,n,o,l)=>{let{uid:a=t,...i}=r;rD(e,a7()),rg(e,`${it()}`,a),rg(e,`${ie()}`,n);let{attributes:s={},classes:d=[]}=o(a,i);if(rp(e,s),iC(e,d),l){d.length>0&&rg(e,`${io()}`,d.join(","));let t=eO(s);t.length>0&&rg(e,`${il()}`,t.join(","))}},f5=e=>{rO(e,a7()),ry(e,`${it()}`),ry(e,`${ie()}`),ry(e,`${ir()}`);let t=rb(e,`${il()}`).map(e=>e.split(",")).getOr([]),r=rb(e,`${io()}`).map(e=>e.split(",")).getOr([]);ec(t,t=>ry(e,t)),iE(e,r),ry(e,`${io()}`),ry(e,`${il()}`)},f6=(e,t,r,n,o)=>{let l=rM.fromTag("span",e);return f8(l,t,r,n,o,!1),l},f9=(e,t,r,n,o,l)=>{let a=[],i=f6(e.getDoc(),r,l,n,o),s=o5(),d=()=>{s.clear()},c=()=>s.get().getOrThunk(()=>{let e=i_(i);return a.push(e),s.set(e),e}),m=e=>{ec(e,u)},u=t=>{switch(f2(e,t,"span",rn(t))){case"invalid-child":d(),m(r2(t)),d();break;case"valid-block":d(),f8(t,r,l,n,o,!0);break;case"valid":nL(t,c())}},f=e=>{m(ed(e,rM.fromDom))};return fJ(e.dom,t,e=>{d(),f(e)}),a},f4=(e,t,r,n)=>{e.undoManager.transact(()=>{let o=e.selection,l=o.getRng(),a=u7(e).length>0,i=iy("mce-annotation");if(l.collapsed&&!a&&f3(e,l),o.getRng().collapsed&&!a){let l=f6(e.getDoc(),i,n,t,r.decorate);nq(l,"\xa0"),o.getRng().insertNode(l.dom),o.select(l.dom)}else fd(o,!1,()=>{fs(e,o=>{f9(e,o,i,t,r.decorate,n)})})})},f7=e=>{let t=ip();ig(e,t);let r=iu(e,t),n=ru("span"),o=e=>{ec(e,e=>{n(e)?nz(e):f5(e)})};return{register:(e,r)=>{t.register(e,r)},annotate:(r,n)=>{t.lookup(r).each(t=>{f4(e,r,t,n)})},annotationChanged:(e,t)=>{r.addListener(e,t)},remove:t=>{ii(e,et.some(t)).each(({elements:t})=>{let r=e.selection.getBookmark();o(t),e.selection.moveToBookmark(r)})},removeAll:t=>{let r=e.selection.getBookmark();eP(im(e,t),(e,t)=>{o(e)}),e.selection.moveToBookmark(r)},getAll:t=>eL(im(e,t),e=>ed(e,e=>e.dom))}},ge=e=>({getBookmark:Y(uZ,e),moveToBookmark:Y(uQ,e)});ge.isBookmarkNode=uJ;let gt=(e,t,r)=>!r.collapsed&&es(r.getClientRects(),r=>sl(r,e,t)),gr=()=>rM.fromDom(document),gn=(e,t=!1)=>e.dom.focus({preventScroll:t}),go=e=>{let t=r7(e).dom;return e.dom===t.activeElement},gl=(e=gr())=>et.from(e.dom.activeElement).map(rM.fromDom),ga=e=>gl(r7(e)).filter(t=>e.dom.contains(t.dom)),gi=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),gs=di([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),gd=gs.before,gc={before:gd,on:gs.on,after:gs.after,getStart:e=>e.fold(W,W,W)},gm=di([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gu=e=>e.match({domRange:e=>rM.fromDom(e.startContainer),relative:(e,t)=>gc.getStart(e),exact:(e,t,r,n)=>e}),gf=(gm.domRange,gm.relative),gg=gm.exact,gp=e=>rK(gu(e)),gh=(e,t)=>{let r=rd(t)?iD(t).length:r2(t).length+1;return e>r?r:e<0?0:e},gb=e=>gi(e.start,gh(e.soffset,e.start),e.finish,gh(e.foffset,e.finish)),gv=(e,t)=>!op(t.dom)&&(r$(e,t)||rH(e,t)),gy=e=>t=>gv(e,t.start)&&gv(e,t.finish),gC=e=>e.inline||tY.browser.isFirefox(),gE=e=>gi(rM.fromDom(e.startContainer),e.startOffset,rM.fromDom(e.endContainer),e.endOffset),gx=e=>{let t=e.getSelection();return(t&&0!==t.rangeCount?et.from(t.getRangeAt(0)):et.none()).map(gE)},g_=e=>gx(rK(e).dom).filter(gy(e)),gw=(e,t)=>et.from(t).filter(gy(e)).map(gb),gS=e=>{let t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),et.some(t)}catch(e){return et.none()}},gk=e=>{let t=gC(e)?g_(rM.fromDom(e.getBody())):et.none();e.bookmark=t.isSome()?t:e.bookmark},gN=e=>(e.bookmark?e.bookmark:et.none()).bind(t=>gw(rM.fromDom(e.getBody()),t)).bind(gS),gR=e=>{gN(e).each(t=>e.selection.setRng(t))},gA={isEditorUIElement:e=>{let t=e.className.toString();return -1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},gD=(e,t)=>(z(t)||(t=0),window.setTimeout(e,t)),gT=(e,t)=>(z(t)||(t=0),window.setInterval(e,t)),gO={setEditorTimeout:(e,t,r)=>gD(()=>{e.removed||t()},r),setEditorInterval:(e,t,r)=>{let n=gT(()=>{e.removed?window.clearInterval(n):t()},r);return n}},gB=e=>"nodechange"===e.type&&e.selectionChange,gP=(e,t)=>{let r=()=>{t.throttle()};aG.DOM.bind(document,"mouseup",r),e.on("remove",()=>{aG.DOM.unbind(document,"mouseup",r)})},gL=(e,t)=>{e.on("mouseup touchend",e=>{t.throttle()})},gM=(e,t)=>{gL(e,t),e.on("keyup NodeChange AfterSetSelectionRange",t=>{gB(t)||gk(e)})},gF=e=>{let t=a6(()=>{gk(e)},0);e.on("init",()=>{e.inline&&gP(e,t),gM(e,t)}),e.on("remove",()=>{t.cancel()})},gI=aG.DOM,gU=e=>oh(e)&&gA.isEditorUIElement(e),gz=e=>{let t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},gj=(e,t)=>{let r=cU(e);return null!==gI.getParent(t,t=>gU(t)||!!r&&e.dom.is(t,r))},gH=e=>{try{let t=r7(rM.fromDom(e.getElement()));return gl(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}},g$=(e,r)=>{let n=r.editor;gF(n);let o=(e,t)=>{mb(e)&&!0!==e.inline&&t(rM.fromDom(e.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{let t=e.focusedEditor;gz(gH(n))&&o(n,rD),t!==n&&(t&&t.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:t}),n.focus(!0))}),n.on("focusout",()=>{gO.setEditorTimeout(n,()=>{let t=e.focusedEditor;gz(gH(n))&&t===n||o(n,rO),gj(n,gH(n))||t!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),t||(t=t=>{let r=e.activeEditor;r&&no(t).each(t=>{t.ownerDocument!==document||t===document.body||gj(r,t)||e.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},gI.bind(document,"focusin",t))},gq=(e,r)=>{e.focusedEditor===r.editor&&(e.focusedEditor=null),!e.activeEditor&&t&&(gI.unbind(document,"focusin",t),t=null)},gV=e=>{e.on("AddEditor",Y(g$,e)),e.on("RemoveEditor",Y(gq,e))},gW=(e,t)=>e.dom.getParent(t,t=>"true"===e.dom.getContentEditable(t)),gK=(e,t)=>null!==e.dom.getParent(t,t=>"false"===e.dom.getContentEditable(t)),gY=e=>e.collapsed?et.from(sc(e.startContainer,e.startOffset)).map(rM.fromDom):et.none(),gG=(e,t)=>gY(t).bind(t=>iU(t)?et.some(t):r$(e,t)?et.none():et.some(e)),gX=(e,t)=>{gG(rM.fromDom(e.getBody()),t).bind(e=>uN(e.dom)).fold(()=>{e.selection.normalize()},t=>e.selection.setRng(t.toRange()))},gZ=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},gQ=e=>go(e)||ga(e).isSome(),gJ=e=>I(e.iframeElement)&&go(rM.fromDom(e.iframeElement)),g0=e=>{let t=e.getBody();return t&&gQ(rM.fromDom(t))},g1=e=>gl(r7(rM.fromDom(e.getElement()))).filter(t=>!gz(t.dom)&&gj(e,t.dom)).isSome(),g2=e=>e.inline?g0(e):gJ(e),g3=e=>g2(e)||g1(e),g8=e=>{let t=e.selection,r=e.getBody(),n=t.getRng();e.quirks.refreshContentEditable();let o=e=>{gN(e).each(t=>{e.selection.setRng(t),n=t})};!g2(e)&&e.hasEditableRoot()&&o(e);let l=gW(e,t.getNode());if(l&&e.dom.isChildOf(l,r)){gK(e,l)||gZ(r),gZ(l),e.hasEditableRoot()||o(e),gX(e,n),g5(e);return}e.inline||(tY.browser.isOpera()||gZ(r),e.getWin().focus()),(tY.browser.isFirefox()||e.inline)&&(gZ(r),gX(e,n)),g5(e)},g5=e=>e.editorManager.setActive(e),g6=(e,t)=>{!e.removed&&(t?g5(e):g8(e))},g9={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||g9.metaKeyPressed(e),metaKeyPressed:e=>tY.os.isMacOS()||tY.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},g4="data-mce-selected",g7=Math.abs,pe=Math.round,pt={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},pr=e=>"longpress"===e.type||0===e.type.indexOf("touch"),pn=(e,t)=>{let r,n,o,l,a,i,s,d,c,m,u,f,g,p,h;let b=t.dom,v=t.getDoc(),y=document,C=t.getBody(),E=e=>I(e)&&(oP(e)||b.is(e,"figure.image")),x=e=>oz(e)||b.hasClass(e,"mce-preview-object"),_=(e,t)=>{if(!pr(e))return E(e.target)&&!gt(e.clientX,e.clientY,t);{let r=e.touches[0];return E(e.target)&&!gt(r.clientX,r.clientY,t)}},w=e=>{let r=e.target;_(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(r)},S=e=>b.hasClass(e,"mce-preview-object")&&I(e.firstElementChild)?[e,e.firstElementChild]:b.is(e,"figure.image")?[e.querySelector("img")]:[e],k=e=>{let r=cS(t);return!(!r||t.mode.isReadOnly())&&"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&(b.hasClass(e,"mce-preview-object")&&I(e.firstElementChild)?rI(rM.fromDom(e.firstElementChild),r):rI(rM.fromDom(e),r))},N=(e,t)=>{if(x(t))return e.create("img",{src:tY.transparentSrc});if(!ow(t))return t.cloneNode(!0);{let r=ti(l.name,"n"),n=t.cloneNode(!0);return(r?eN:eR)(e.select("tr",n)).each(t=>{let r=e.select("td,th",t);e.setStyle(t,"height",null),ec(r,t=>e.setStyle(t,"height",null))}),n}},R=(e,r,n)=>{I(n)&&ec(S(e),e=>{e.style[r]||!t.schema.isValid(e.nodeName.toLowerCase(),r)?b.setStyle(e,r,n):b.setAttrib(e,r,""+n)})},A=(e,t,r)=>{R(e,"width",t),R(e,"height",r)},D=e=>{let a,v,y,_,w;a=e.screenX-i,v=e.screenY-s,f=a*l[2]+d,g=v*l[3]+c,f=f<5?5:f,g=g<5?5:g,((E(r)||x(r))&&!1!==ck(t)?!g9.modifierPressed(e):g9.modifierPressed(e))&&(g7(a)>g7(v)?(g=pe(f*m),f=pe(g/m)):(f=pe(g/m),g=pe(f*m))),A(n,f,g),_=l.startPos.x+a,w=l.startPos.y+v,_=_>0?_:0,w=w>0?w:0,b.setStyles(o,{left:_,top:w,display:"block"}),o.innerHTML=f+" &times; "+g,(a=C.scrollWidth-p)+(v=C.scrollHeight-h)!=0&&b.setStyles(o,{left:_-a,top:w-v}),u||(dw(t,r,d,c,"corner-"+l.name),u=!0)},T=()=>{let e=u;u=!1,e&&(R(r,"width",f),R(r,"height",g)),b.unbind(v,"mousemove",D),b.unbind(v,"mouseup",T),y!==v&&(b.unbind(y,"mousemove",D),b.unbind(y,"mouseup",T)),b.remove(n),b.remove(o),b.remove(a),O(r),e&&(dS(t,r,f,g,"corner-"+l.name),b.setAttrib(r,"style",b.getAttrib(r,"style"))),t.nodeChanged()},O=e=>{F();let u=b.getPos(e,C),E=u.x,x=u.y,_=e.getBoundingClientRect(),w=_.width||_.right-_.left,R=_.height||_.bottom-_.top;r!==e&&(P(),r=e,f=g=0);let O=t.dispatch("ObjectSelected",{target:e});k(e)&&!O.isDefaultPrevented()?eP(pt,(e,t)=>{let u=u=>{let f=S(r)[0];i=u.screenX,s=u.screenY,d=f.clientWidth,m=(c=f.clientHeight)/d,(l=e).name=t,l.startPos={x:w*e[0]+E,y:R*e[1]+x},p=C.scrollWidth,h=C.scrollHeight,a=b.add(C,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),b.setStyles(a,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),n=N(b,r),b.addClass(n,"mce-clonedresizable"),b.setAttrib(n,"data-mce-bogus","all"),n.contentEditable="false",b.setStyles(n,{left:E,top:x,margin:0}),A(n,w,R),n.removeAttribute(g4),C.appendChild(n),b.bind(v,"mousemove",D),b.bind(v,"mouseup",T),y!==v&&(b.bind(y,"mousemove",D),b.bind(y,"mouseup",T)),o=b.add(C,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+c)},f=b.get("mceResizeHandle"+t);f&&b.remove(f),f=b.add(C,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),b.bind(f,"mousedown",e=>{e.stopImmediatePropagation(),e.preventDefault(),u(e)}),e.elm=f,b.setStyles(f,{left:w*e[0]+E-f.offsetWidth/2,top:R*e[1]+x-f.offsetHeight/2})}):P(!1)},B=a6(O,0),P=(e=!0)=>{B.cancel(),F(),r&&e&&r.removeAttribute(g4),eP(pt,(e,t)=>{let r=b.get("mceResizeHandle"+t);r&&(b.unbind(r),b.remove(r))})},L=(e,t)=>b.isChildOf(e,t),M=r=>{if(u||t.removed||t.composing)return;let n="mousedown"===r.type?r.target:e.getNode(),o=np(rM.fromDom(n),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(e=>e.dom).filter(e=>b.isEditable(e.parentElement)||"IMG"===e.nodeName&&b.isEditable(e)).getOrUndefined(),l=I(o)?b.getAttrib(o,g4,"1"):"1";if(ec(b.select(`img[${g4}],hr[${g4}]`),e=>{e.removeAttribute(g4)}),I(o)&&L(o,C)&&g3(t)&&(U(),L(e.getStart(!0),o)&&L(e.getEnd(!0),o))){b.setAttrib(o,g4,l),B.throttle(o);return}P()},F=()=>{eP(pt,e=>{e.elm&&(b.unbind(e.elm),delete e.elm)})},U=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return t.on("init",()=>{U(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",M),t.on("keyup compositionend",e=>{r&&"TABLE"===r.nodeName&&M(e)}),t.on("hide blur",P),t.on("contextmenu longpress",w,!0)}),t.on("remove",F),{isResizable:k,showResizeRect:O,hideResizeRect:P,updateResizeRect:M,destroy:()=>{B.cancel(),r=n=a=null}}},po=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,r)=>{e.setStart(t.dom,r)},t=>{e.setStartAfter(t.dom)})},pl=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,r)=>{e.setEnd(t.dom,r)},t=>{e.setEndAfter(t.dom)})},pa=(e,t,r)=>{let n=e.document.createRange();return po(n,t),pl(n,r),n},pi=(e,t,r,n,o)=>{let l=e.document.createRange();return l.setStart(t.dom,r),l.setEnd(n.dom,o),l},ps=di([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pd=(e,t,r)=>t(rM.fromDom(r.startContainer),r.startOffset,rM.fromDom(r.endContainer),r.endOffset),pc=(e,t)=>t.match({domRange:e=>({ltr:V(e),rtl:et.none}),relative:(t,r)=>({ltr:e2(()=>pa(e,t,r)),rtl:e2(()=>et.some(pa(e,r,t)))}),exact:(t,r,n,o)=>({ltr:e2(()=>pi(e,t,r,n,o)),rtl:e2(()=>et.some(pi(e,n,o,t,r)))})}),pm=(e,t)=>{let r=t.ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>ps.rtl(rM.fromDom(e.endContainer),e.endOffset,rM.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>pd(e,ps.ltr,r)):pd(e,ps.ltr,r)},pu=(e,t)=>{let r=pc(e,t);return pm(e,r)};ps.ltr,ps.rtl;let pf=(e,t,r)=>{var n;return et.from(null===(n=e.caretPositionFromPoint)||void 0===n?void 0:n.call(e,t,r)).bind(t=>{if(null===t.offsetNode)return et.none();let r=e.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),et.some(r)})},pg=(e,t,r)=>{var n;return et.from(null===(n=e.caretRangeFromPoint)||void 0===n?void 0:n.call(e,t,r))},pp=(e,t,r)=>e.caretPositionFromPoint?pf(e,t,r):e.caretRangeFromPoint?pg(e,t,r):et.none(),ph=(e,t,r)=>pp(e.document,t,r).map(e=>gi(rM.fromDom(e.startContainer),e.startOffset,rM.fromDom(e.endContainer),e.endOffset)),pb=(e,t)=>{let r=rn(e);return"input"===r?gc.after(e):ei(["br","img"],r)?0===t?gc.before(e):gc.after(e):gc.on(e,t)},pv=(e,t)=>{let r=e.fold(gc.before,pb,gc.after);return gf(r,t.fold(gc.before,pb,gc.after))},py=(e,t,r,n)=>{let o=pb(e,t);return gf(o,pb(r,n))},pC=e=>e.match({domRange:e=>{let t=rM.fromDom(e.startContainer),r=rM.fromDom(e.endContainer);return py(t,e.startOffset,r,e.endOffset)},relative:pv,exact:py}),pE=(e,t)=>{let r=(t||document).createDocumentFragment();return ec(e,e=>{r.appendChild(e.dom)}),rM.fromDom(r)},px=e=>{let t=gp(e).dom,r=(e,r,n,o)=>pi(t,e,r,n,o);return pu(t,pC(e)).match({ltr:r,rtl:r})},p_=(e,t,r)=>ph(e,t,r),pw=(e,t,r)=>p_(rK(rM.fromDom(r)).dom,e,t).map(e=>{let t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined(),pS=(e,t)=>I(e)&&I(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,pk=(e,t,r)=>{let n=e;for(;n&&n!==t;){if(r(n))return n;n=n.parentNode}return null},pN=(e,t,r)=>null!==pk(e,t,r),pR=(e,t,r)=>pN(e,t,e=>e.nodeName===r),pA=(e,t)=>iZ(e)&&!pN(e,t,uD),pD=(e,t,r)=>{let n=t.parentNode;if(n){let o;let l=new ol(t,e.getParent(n,e.isBlock)||e.getRoot());for(;o=l[r?"prev":"next"]();)if(oB(o))return!0}return!1},pT=(e,t)=>{var r;return(null===(r=e.previousSibling)||void 0===r?void 0:r.nodeName)===t},pO=(e,t)=>{let r=t;for(;r&&r!==e;){if(oM(r))return!0;r=r.parentNode}return!1},pB=(e,t,r,n,o)=>{let l,a;let i=e.getRoot(),s=e.schema.getNonEmptyElements(),d=o.parentNode;if(!d)return et.none();let c=e.getParent(d,e.isBlock)||i;if(n&&oB(o)&&t&&e.isEmpty(c))return et.some(sF(d,e.nodeIndex(o)));let m=new ol(o,c);for(;a=m[n?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||pA(a,i))return et.none();if(oN(a)&&a.data.length>0){if(!pR(a,i,"A"))return et.some(sF(a,n?a.data.length:0));return et.none()}if(e.isBlock(a)||s[a.nodeName.toLowerCase()])return et.none();l=a}return oD(l)?et.none():r&&l?et.some(sF(l,0)):et.none()},pP=(e,t,r,n)=>{let o;let l=e.getRoot(),a=!1,i=r?n.startContainer:n.endContainer,s=r?n.startOffset:n.endOffset,d=oh(i)&&s===i.childNodes.length,c=e.schema.getNonEmptyElements(),m=r;if(iZ(i))return et.none();if(oh(i)&&s>i.childNodes.length-1&&(m=!1),oT(i)&&(i=l,s=0),i===l){if(m&&(o=i.childNodes[s>0?s-1:0])&&(iZ(o)||c[o.nodeName]||ow(o)))return et.none();if(i.hasChildNodes()){if(s=Math.min(!m&&s>0?s-1:s,i.childNodes.length-1),s=oN(i=i.childNodes[s])&&d?i.data.length:0,!t&&i===l.lastChild&&ow(i)||pO(l,i)||iZ(i)||oH(i))return et.none();if(i.hasChildNodes()&&!ow(i)){o=i;let t=new ol(i,l);do{if(oM(o)||iZ(o)){a=!1;break}if(oN(o)&&o.data.length>0){s=m?0:o.data.length,i=o,a=!0;break}if(c[o.nodeName.toLowerCase()]&&!oU(o)){s=e.nodeIndex(o),i=o.parentNode,!m&&s++,a=!0;break}}while(o=m?t.next():t.prev())}}}return t&&(oN(i)&&0===s&&pB(e,d,t,!0,i).each(e=>{i=e.container(),s=e.offset(),a=!0}),oh(i)&&((o=i.childNodes[s])||(o=i.childNodes[s-1]),o&&oB(o)&&!pT(o,"A")&&!pD(e,o,!1)&&!pD(e,o,!0)&&pB(e,d,t,!0,o).each(e=>{i=e.container(),s=e.offset(),a=!0}))),m&&!t&&oN(i)&&s===i.data.length&&pB(e,d,t,!1,i).each(e=>{i=e.container(),s=e.offset(),a=!0}),a&&i?et.some(sF(i,s)):et.none()},pL=(e,t)=>{let r=t.collapsed,n=t.cloneRange(),o=sF.fromRangeStart(t);return pP(e,r,!0,n).each(e=>{r&&sF.isAbove(o,e)||n.setStart(e.container(),e.offset())}),r||pP(e,r,!1,n).each(e=>{n.setEnd(e.container(),e.offset())}),r&&n.collapse(!0),pS(t,n)?et.none():et.some(n)},pM=(e,t)=>e.splitText(t),pF=e=>{let t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;if(t===n&&oN(t)){if(r>0&&r<t.data.length){if(t=(n=pM(t,r)).previousSibling,o>r){let e=pM(n,o-=r).previousSibling;t=n=e,o=e.data.length,r=0}else o=0}}else if(oN(t)&&r>0&&r<t.data.length&&(t=pM(t,r),r=0),oN(n)&&o>0&&o<n.data.length){let e=pM(n,o).previousSibling;n=e,o=e.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},pI=e=>({walk:(t,r)=>fJ(e,t,r),split:pF,expand:(t,r={type:"word"})=>{if("word"===r.type){let r=fQ(e,t,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),n=e.createRng();return n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset),n}return t},normalize:t=>pL(e,t).fold(J,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))});pI.compareRanges=pS,pI.getCaretRangeFromPoint=pw,pI.getSelectedNode=sd,pI.getNode=sc;let pU=((e,t)=>{let r=r=>{let n=t(r);return n<=0||null===n?parseFloat(nS(r,e))||0:n},n=(e,t)=>ep(t,(t,r)=>{let n=nS(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o},0);return{set:(t,r)=>{if(!z(r)&&!r.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+r);let n=t.dom;nC(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{let o=n(e,r);return t>o?t-o:0}}})("height",e=>{let t=e.dom;return na(e)?t.getBoundingClientRect().height:t.offsetHeight}),pz=e=>pU.get(e),pj=(e,t)=>e.view(t).fold(V([]),t=>{let r=e.owner(t);return[t].concat(pj(e,r))}),pH=(e,t)=>{let r=t.owner(e);return pj(t,r)};var p$=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?et.none():et.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(rM.fromDom)},owner:e=>rV(e)});let pq=e=>{let t=n3(gr()),r=pH(e,p$),n=n2(e),o=eg(r,(e,t)=>{let r=n2(t);return{left:e.left+r.left,top:e.top+r.top}},{left:0,top:0});return nQ(o.left+n.left+t.left,o.top+n.top+t.top)},pV=e=>"textarea"===rn(e),pW=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),pK=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},pY=(e,t)=>{let r=r2(e);if(0===r.length||pV(e))return{element:e,offset:t};if(t<r.length&&!pV(r[t]))return{element:r[t],offset:0};{let n=r[r.length-1];return pV(n)?{element:e,offset:t}:"img"===rn(n)?{element:n,offset:1}:rd(n)?{element:n,offset:iD(n).length}:{element:n,offset:r2(n).length}}},pG=(e,t)=>{let r=n1(e),n=pz(e);return{element:e,bottom:r.top+n,height:n,pos:r,cleanup:t}},pX=(e,t)=>{let r=pY(e,t),n=rM.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return nT(r.element,n),pG(n,()=>nU(n))},pZ=e=>pG(rM.fromDom(e),H),pQ=(e,t,r,n)=>{p2(e,(o,l)=>p0(e,t,r,n),r)},pJ=(e,t,r,n,o)=>{let l={elm:n.element.dom,alignToTop:o};if(pW(e,l))return;let a=n3(t).top;r(e,t,a,n,o),pK(e,l)},p0=(e,t,r,n)=>{let o=rM.fromDom(e.getBody()),l=rM.fromDom(e.getDoc());nD(o);let a=pX(rM.fromDom(r.startContainer),r.startOffset);pJ(e,l,t,a,n),a.cleanup()},p1=(e,t,r,n)=>{let o=rM.fromDom(e.getDoc());pJ(e,o,r,pZ(t),n)},p2=(e,t,r)=>{let n=r.startContainer,o=r.startOffset,l=r.endContainer,a=r.endOffset;t(rM.fromDom(n),rM.fromDom(l));let i=e.dom.createRng();i.setStart(n,o),i.setEnd(l,a),e.selection.setRng(r)},p3=(e,t,r,n,o)=>{let l=t.pos;if(n)n8(l.left,Math.max(0,l.top-30),o);else{let n=l.top-r+t.height+30;n8(-e.getBody().getBoundingClientRect().left,n,o)}},p8=(e,t,r,n,o,l)=>{let a=n+r,i=o.pos.top,s=o.bottom,d=s-i>=n;i<r?p3(e,o,n,!1!==l,t):i>a?p3(e,o,n,d?!1!==l:!0===l,t):s>a&&!d&&p3(e,o,n,!0===l,t)},p5=(e,t,r,n,o)=>{let l=rK(t).dom.innerHeight;p8(e,t,r,l,n,o)},p6=(e,t,r,n,o)=>{let l=rK(t).dom.innerHeight;p8(e,t,r,l,n,o);let a=pq(n.element),i=n4(window);a.top<i.y?n5(n.element,!1!==o):a.top>i.bottom&&n5(n.element,!0===o)},p9=(e,t,r)=>pQ(e,p5,t,r),p4=(e,t,r)=>p1(e,t,p5,r),p7=(e,t,r)=>pQ(e,p6,t,r),he=(e,t,r)=>p1(e,t,p6,r),ht=(e,t,r)=>{(e.inline?p4:he)(e,t,r)},hr=(e,t,r)=>{(e.inline?p9:p7)(e,t,r)},hn=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),ho=(e,t,r,n,o)=>{let l=r?t.startContainer:t.endContainer,a=r?t.startOffset:t.endOffset;return et.from(l).map(rM.fromDom).map(e=>n&&t.collapsed?e:r3(e,o(e,a)).getOr(e)).bind(e=>rs(e)?et.some(e):rY(e).filter(rs)).map(e=>e.dom).getOr(e)},hl=(e,t,r=!1)=>ho(e,t,!0,r,(e,t)=>Math.min(r6(e),t)),ha=(e,t,r=!1)=>ho(e,t,!1,r,(e,t)=>t>0?t-1:t),hi=(e,t)=>{let r=e;for(;e&&oN(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},hs=(e,t)=>{if(!t)return e;let r=t.startContainer,n=t.endContainer,o=t.startOffset,l=t.endOffset,a=t.commonAncestorContainer;!t.collapsed&&(r===n&&l-o<2&&r.hasChildNodes()&&(a=r.childNodes[o]),oN(r)&&oN(n)&&(r=r.length===o?hi(r.nextSibling,!0):r.parentNode,n=0===l?hi(n.previousSibling,!1):n.parentNode,r&&r===n&&(a=r)));let i=oN(a)?a.parentNode:a;return ob(i)?i:e},hd=(e,t,r,n)=>{let o=[],l=e.getRoot(),a=e.getParent(r||hl(l,t,t.collapsed),e.isBlock),i=e.getParent(n||ha(l,t,t.collapsed),e.isBlock);if(a&&a!==l&&o.push(a),a&&i&&a!==i){let t;let r=new ol(a,l);for(;(t=r.next())&&t!==i;)e.isBlock(t)&&o.push(t)}return i&&a!==i&&i!==l&&o.push(i),o},hc=(e,t,r)=>et.from(t).bind(t=>et.from(t.parentNode).map(n=>{let o=e.nodeIndex(t),l=e.createRng();return l.setStart(n,o),l.setEnd(n,o+1),r&&(fa(e,l,t,!0),fa(e,l,t,!1)),l})),hm=(e,t)=>ed(t,t=>{let r=e.dispatch("GetSelectionRange",{range:t});return r.range!==t?r.range:t}),hu={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},hf=(e,t,r)=>{let n=r?"lastChild":"firstChild",o=r?"prev":"next";if(e[n])return e[n];if(e!==t){let r=e[o];if(r)return r;for(let n=e.parent;n&&n!==t;n=n.parent)if(r=n[o])return r}},hg=e=>{var t;let r=null!==(t=e.value)&&void 0!==t?t:"";if(!os(r))return!1;let n=e.parent;return!(n&&("span"!==n.name||n.attr("style"))&&/^[ ]+$/.test(r))},hp=e=>{let t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class hh{static create(e,t){let r=new hh(e,hu[e]||1);return t&&eP(t,(e,t)=>{r.attr(t,e)}),r}constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}replace(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this}attr(e,t){let r=this;if(!D(e))return I(e)&&eP(e,(e,t)=>{r.attr(t,e)}),r;let n=r.attributes;if(n){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];let t=n.length;for(;t--;)if(n[t].name===e){n.splice(t,1);break}}return r}if(e in n.map){let r=n.length;for(;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}}clone(){let e=new hh(this.name,this.type),t=this.attributes;if(t){let r=[];r.map={};for(let e=0,n=t.length;e<n;e++){let n=t[e];"id"!==n.name&&(r[r.length]={name:n.name,value:n.value},r.map[n.name]=n.value)}e.attributes=r}return e.value=this.value,e}wrap(e){return this.parent&&(this.parent.insert(e,this),e.append(this)),this}unwrap(){for(let e=this.firstChild;e;){let t=e.next;this.insert(e,this,!0),e=t}this.remove()}remove(){let e=this.parent,t=this.next,r=this.prev;return e&&(e.firstChild===this?(e.firstChild=t,t&&(t.prev=null)):r&&(r.next=t),e.lastChild===this?(e.lastChild=r,r&&(r.next=null)):t&&(t.prev=r),this.parent=this.next=this.prev=null),this}append(e){e.parent&&e.remove();let t=this.lastChild;return t?(t.next=e,e.prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e}insert(e,t,r){e.parent&&e.remove();let n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=n,e}getAll(e){let t=[];for(let r=this.firstChild;r;r=hf(r,this))r.name===e&&t.push(r);return t}children(){let e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){if(this.firstChild){let e=[];for(let t=this.firstChild;t;t=hf(t,this))e.push(t);let t=e.length;for(;t--;){let r=e[t];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return this.firstChild=this.lastChild=null,this}isEmpty(e,t={},r){var n;let o=this.firstChild;if(hp(this))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(e[o.name]||hp(o))return!1}if(8===o.type||3===o.type&&!hg(o)||3===o.type&&o.parent&&t[o.parent.name]&&os(null!==(n=o.value)&&void 0!==n?n:"")||r&&r(o))return!1}while(o=hf(o,this));return!0}walk(e){return hf(this,null,e)}}let hb=tQ.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),hv=e=>D(e.nodeValue)&&e.nodeValue.includes("\uFEFF"),hy=e=>`${0===e.length?"":`${ed(e,e=>`[${e}]`).join(",")},`}[data-mce-bogus="all"]`,hC=(e,t)=>t.querySelectorAll(hy(e)),hE=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,e=>hv(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),hx=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,e=>{if(!hv(e))return NodeFilter.FILTER_SKIP;{let t=e.parentNode;return t&&eq(hb,t.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}}),h_=e=>null!==hE(e).nextNode(),hw=e=>null!==hx(e).nextNode(),hS=(e,t)=>null!==t.querySelector(hy(e)),hk=(e,t)=>{ec(hC(e,t),t=>{let r=rM.fromDom(t);"all"===rh(r,"data-mce-bogus")?nU(r):ec(e,e=>{rv(r,e)&&ry(r,e)})})},hN=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},hR=$(hN,hE),hA=$(hN,hx),hD=(e,t)=>{let r=[{condition:Y(hS,t),action:Y(hk,t)},{condition:h_,action:hR},{condition:hw,action:hA}],n=e,o=!1;return ec(r,({condition:t,action:r})=>{t(n)&&(o||(n=e.cloneNode(!0),o=!0),r(n))}),n},hT=e=>{ec(ot(e,"[data-mce-bogus]"),e=>{"all"===rh(e,"data-mce-bogus")?nU(e):iL(e)?(nT(e,rM.fromText("\uFEFF")),nU(e)):nz(e)})},hO=e=>{ec(ot(e,"input"),e=>{ry(e,"name")})},hB=(e,t)=>{let r=d4(e),n=RegExp(`^(<${r}[^>]*>(&nbsp;|&#160;|\\s|\u00a0|<br \\/>|)<\\/${r}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(n,"")},hP=(e,t)=>{let r=e.getDoc(),n=r7(rM.fromDom(e.getBody())),o=rM.fromTag("div",r);rg(o,"data-mce-bogus","all"),nw(o,{position:"fixed",left:"-9999999px",top:"0"}),nq(o,t.innerHTML),hT(o),hO(o),nP(nt(n),o);let l=iK(o.dom.innerText);return nU(o),l},hL=(e,t,r)=>{let n;return n="raw"===t.format?tQ.trim(iK(hD(r,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?hP(e,r):"tree"===t.format?e.serializer.serialize(r,t):hB(e,e.serializer.serialize(r,t)),"text"!==t.format&&!ij(rM.fromDom(r))&&D(n)?tQ.trim(n):n},hM=(e,t)=>et.from(e.getBody()).fold(V("tree"===t.format?new hh("body",11):""),r=>hL(e,t,r)),hF=tQ.makeMap,hI=e=>{let t=[],r=(e=e||{}).indent,n=hF(e.indent_before||""),o=hF(e.indent_after||""),l=lG.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="xhtml"!==e.element_format;return{start:(e,i,s)=>{if(r&&n[e]&&t.length>0){let e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}if(t.push("<",e),i)for(let e=0,r=i.length;e<r;e++){let r=i[e];t.push(" ",r.name,'="',l(r.value,!0),'"')}if(!s||a?t[t.length]=">":t[t.length]=" />",s&&r&&o[e]&&t.length>0){let e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}},end:e=>{let n;t.push("</",e,">"),r&&o[e]&&t.length>0&&(n=t[t.length-1]).length>0&&"\n"!==n&&t.push("\n")},text:(e,r)=>{e.length>0&&(t[t.length]=r?e:l(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,n)=>{n?t.push("<?",e," ",l(n),"?>"):t.push("<?",e,"?>"),r&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",r?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},hU=(e={},t=am())=>{let r=hI(e);return e.validate=!("validate"in e)||e.validate,{serialize:n=>{let o=e.validate,l={3:e=>{var t;r.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;r.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{r.pi(e.name,e.value)},10:e=>{var t;r.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;r.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{let t=e;if(t=t.firstChild)do a(t);while(t=t.next)}};r.reset();let a=e=>{var n;let i=l[e.type];if(i)i(e);else{let l=e.name,i=l in t.getVoidElements(),s=e.attributes;if(o&&s&&s.length>1){let r=[];r.map={};let n=t.getElementRule(e.name);if(n){for(let e=0,t=n.attributesOrder.length;e<t;e++){let t=n.attributesOrder[e];if(t in s.map){let e=s.map[t];r.map[t]=e,r.push({name:t,value:e})}}for(let e=0,t=s.length;e<t;e++){let t=s[e].name;if(!(t in r.map)){let e=s.map[t];r.map[t]=e,r.push({name:t,value:e})}}s=r}}if(r.start(l,s,i),o9(l))D(e.value)&&r.text(e.value,!0),r.end(l);else if(!i){let t=e.firstChild;if(t){("pre"===l||"textarea"===l)&&3===t.type&&(null===(n=t.value)||void 0===n?void 0:n[0])==="\n"&&r.text("\n",!0);do a(t);while(t=t.next)}r.end(l)}}};return 1!==n.type||e.inner?3===n.type?l[3](n):l[11](n):a(n),r.getContent()}}},hz=new Set;ec(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{hz.add(e)});let hj=new Set;ec(["background-color"],e=>{hj.add(e)});let hH=["font","text-decoration","text-emphasis"],h$=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),hq=(e,t)=>eO(h$(e,t)),hV=e=>hz.has(e),hW=e=>hj.has(e),hK=(e,t)=>es(hq(e,t),e=>hV(e)),hY=(e,t)=>hK(e,t)&&es(hq(e,t),e=>hW(e)),hG=e=>ef(e,e=>es(hH,t=>ti(e,t))),hX=(e,t,r)=>{let n=hq(e,t),o=hq(e,r),l=n=>{var o,l;let a=null!==(o=e.getStyle(t,n))&&void 0!==o?o:"",i=null!==(l=e.getStyle(r,n))&&void 0!==l?l:"";return tf(a)&&tf(i)&&a!==i};return es(n,e=>{let t=t=>es(t,t=>t===e);return!t(o)&&t(hH)?es(hG(o),l):l(e)})},hZ=(e,t,r)=>et.from(r.container()).filter(oN).exists(n=>t(n.data.charAt(r.offset()+(e?0:-1)))),hQ=Y(hZ,!0,u1),hJ=Y(hZ,!1,u1),h0=e=>{let t=e.container();return oN(t)&&(0===t.data.length||oa(t.data)&&ge.isBookmarkNode(t.parentNode))},h1=(e,t)=>r=>m8(e?0:-1,r).filter(t).isSome(),h2=e=>oP(e)&&"block"===nS(rM.fromDom(e),"display"),h3=e=>oM(e)&&!o_(e),h8=h1(!0,h2),h5=h1(!1,h2),h6=h1(!0,oz),h9=h1(!1,oz),h4=h1(!0,ow),h7=h1(!1,ow),be=h1(!0,h3),bt=h1(!1,h3),br=e=>e.slice(0,-1),bn=(e,t,r)=>r$(t,e)?br(rX(e,e=>r(e)||rH(e,t))):[],bo=(e,t)=>bn(e,t,J),bl=(e,t)=>[e].concat(bo(e,t)),ba=(e,t,r)=>u_(e,t,r,h0),bi=e=>t=>e.isBlock(rn(t)),bs=(e,t,r)=>eb(bl(rM.fromDom(t.container()),e),bi(r)),bd=(e,t,r,n)=>ba(e,t.dom,r).forall(e=>bs(t,r,n).fold(()=>!m3(e,r,t.dom),n=>!m3(e,r,t.dom)&&r$(n,rM.fromDom(e.container())))),bc=(e,t,r,n)=>bs(t,r,n).fold(()=>ba(e,t.dom,r).forall(e=>!m3(e,r,t.dom)),t=>ba(e,t.dom,r).isNone()),bm=Y(bc,!1),bu=Y(bc,!0),bf=Y(bd,!1),bg=Y(bd,!0),bp=e=>un(e).exists(iL),bh=(e,t,r,n)=>uE(e,eN(ef(bl(rM.fromDom(r.container()),t),e=>n.isBlock(rn(e)))).getOr(t).dom,r).filter(bp),bb=(e,t,r)=>un(t).exists(iL)||bh(!0,e,t,r).isSome(),bv=(e,t,r)=>uo(t).exists(iL)||bh(!1,e,t,r).isSome(),by=Y(bh,!1),bC=Y(bh,!0),bE=e=>sF.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),bx=(e,t,r)=>eN(ef(bl(rM.fromDom(t.container()),e),e=>r.isBlock(rn(e)))).getOr(e),b_=(e,t,r)=>bE(t)?hJ(t):hJ(t)||uk(bx(e,t,r).dom,t).exists(hJ),bw=(e,t,r)=>bE(t)?hQ(t):hQ(t)||uS(bx(e,t,r).dom,t).exists(hQ),bS=e=>ei(["pre","pre-wrap"],e),bk=e=>un(e).bind(e=>nd(e,rs)).exists(e=>bS(nS(e,"white-space"))),bN=(e,t)=>uk(e.dom,t).isNone(),bR=(e,t)=>uS(e.dom,t).isNone(),bA=(e,t,r)=>bN(e,t)||bR(e,t)||bm(e,t,r)||bu(e,t,r)||bv(e,t,r)||bb(e,t,r),bD=e=>I(e)&&oM(e)&&mX(e),bT=(e,t)=>r=>bD(new ol(r,e)[t]()),bO=(e,t)=>{let r=uS(e.dom,t).getOr(t),n=bT(e.dom,"next");return t.isAtEnd()&&(n(t.container())||n(r.container()))},bB=(e,t)=>{let r=uk(e.dom,t).getOr(t),n=bT(e.dom,"prev");return t.isAtStart()&&(n(t.container())||n(r.container()))},bP=(e,t,r)=>!bk(t)&&(bA(e,t,r)||b_(e,t,r)||bw(e,t,r)),bL=(e,t,r)=>!bk(t)&&(bm(e,t,r)||bf(e,t,r)||bv(e,t,r)||b_(e,t,r)||bB(e,t)),bM=e=>{let t=e.container(),r=e.offset();return oN(t)&&r<t.data.length?sF(t,r+1):e},bF=(e,t,r)=>!bk(t)&&(bu(e,t,r)||bg(e,t,r)||bb(e,t,r)||bw(e,t,r)||bO(e,t)),bI=(e,t,r)=>bL(e,t,r)||bF(e,bM(t),r),bU=(e,t)=>u0(e.charAt(t)),bz=(e,t)=>u1(e.charAt(t)),bj=e=>{let t=e.container();return oN(t)&&ta(t.data,"\xa0")},bH=e=>{let t=e.split("");return ed(t,(e,r)=>u0(e)&&r>0&&r<t.length-1&&u2(t[r-1])&&u2(t[r+1])?" ":e).join("")},b$=(e,t,r,n)=>{let o=t.data,l=sF(t,0);return!r&&bU(o,0)&&!bI(e,l,n)?(t.data=" "+o.slice(1),!0):!!(r&&bz(o,0)&&bL(e,l,n))&&(t.data="\xa0"+o.slice(1),!0)},bq=e=>{let t=e.data,r=bH(t);return r!==t&&(e.data=r,!0)},bV=(e,t,r,n)=>{let o=t.data,l=sF(t,o.length-1);return!r&&bU(o,o.length-1)&&!bI(e,l,n)?(t.data=o.slice(0,-1)+" ",!0):!!(r&&bz(o,o.length-1)&&bF(e,l,n))&&(t.data=o.slice(0,-1)+"\xa0",!0)},bW=(e,t,r)=>{let n=t.container();return oN(n)?bj(t)?t8(b$(e,n,!1,r)||bq(n)||bV(e,n,!1,r),t):bI(e,t,r)?t8(b$(e,n,!0,r)||bV(e,n,!0,r),t):et.none():et.none()},bK=e=>{let t=rM.fromDom(e.getBody());e.selection.isCollapsed()&&bW(t,sF.fromRangeStart(e.selection.getRng()),e.schema).each(t=>{e.selection.setRng(t.toRange())})},bY=(e,t,r,n)=>{if(0===r)return;let o=rM.fromDom(e),l=ns(o,e=>n.isBlock(rn(e))).getOr(o),a=e.data.slice(t,t+r),i=t+r>=e.data.length&&bF(l,sF(e,e.data.length),n),s=0===t&&bL(l,sF(e,0),n);e.replaceData(t,r,of(a,4,s,i))},bG=(e,t,r)=>{let n=e.data.slice(t);bY(e,t,n.length-tm(n).length,r)},bX=(e,t,r)=>{let n=e.data.slice(0,t),o=n.length-tu(n).length;bY(e,t-o,o,r)},bZ=(e,t,r,n,o=!0)=>{let l=tu(e.data).length,a=o?e:t,i=o?t:e;return o?a.appendData(i.data):a.insertData(0,i.data),nU(rM.fromDom(i)),n&&bG(a,l,r),a},bQ=(e,t)=>{let r=e.container(),n=e.offset();return!sF.isTextPosition(e)&&r===t.parentNode&&n>sF.before(t).offset()},bJ=(e,t)=>bQ(t,e)?sF(t.container(),t.offset()-1):t,b0=e=>oN(e)?sF(e,0):sF.before(e),b1=e=>oN(e)?sF(e,e.data.length):sF.after(e),b2=e=>sh(e.previousSibling)?et.some(b1(e.previousSibling)):e.previousSibling?uR(e.previousSibling):et.none(),b3=e=>sh(e.nextSibling)?et.some(b0(e.nextSibling)):e.nextSibling?uN(e.nextSibling):et.none(),b8=(e,t)=>et.from(t.previousSibling?t.previousSibling:t.parentNode).bind(t=>uk(e,sF.before(t))).orThunk(()=>uS(e,sF.after(t))),b5=(e,t)=>uS(e,sF.after(t)).orThunk(()=>uk(e,sF.before(t))),b6=(e,t)=>b2(t).orThunk(()=>b3(t)).orThunk(()=>b8(e,t)),b9=(e,t)=>b3(t).orThunk(()=>b2(t)).orThunk(()=>b5(e,t)),b4=(e,t,r)=>e?b9(t,r):b6(t,r),b7=(e,t,r)=>b4(e,t,r).map(Y(bJ,r)),ve=(e,t,r)=>{r.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},vt=e=>t=>t.dom===e,vr=(e,t)=>t&&eq(e.schema.getBlockElements(),rn(t)),vn=(e,t,r)=>{if(!o0(e,t))return et.none();{let e=rM.fromHtml('<br data-mce-bogus="1">');return r?ec(r2(t),e=>{fz(e)||nU(e)}):nI(t),nP(t,e),et.some(sF.before(e.dom))}},vo=(e,t,r,n)=>{let o=rQ(e).filter(rd),l=rJ(e).filter(rd);return nU(e),t3(o,l,t,(e,t,o)=>{let l=e.dom,a=t.dom,i=l.data.length;return bZ(l,a,r,n),o.container()===a?sF(l,i):o}).orThunk(()=>(n&&(o.each(e=>bX(e.dom,e.dom.length,r)),l.each(e=>bG(e.dom,0,r))),t))},vl=(e,t)=>eq(e.schema.getTextInlineElements(),rn(t)),va=(e,t,r,n=!0,o=!1)=>{let l=b7(t,e.getBody(),r.dom),a=ns(r,Y(vr,e),vt(e.getBody())),i=vo(r,l,e.schema,vl(e,r));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(t=>vn(e.schema,t,o)).fold(()=>{n&&ve(e,t,i)},r=>{n&&ve(e,t,et.some(r))})},vi=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,vs=e=>vi.test(e),vd=(e,t)=>rI(rM.fromDom(t),cw(e))&&!lb(e.schema,t)&&e.dom.isEditable(t),vc=e=>{var t;return"rtl"===aG.DOM.getStyle(e,"direction",!0)||vs(null!==(t=e.textContent)&&void 0!==t?t:"")},vm=(e,t,r)=>ef(aG.DOM.getParents(r.container(),"*",t),e),vu=(e,t,r)=>{let n=vm(e,t,r);return et.from(n[n.length-1])},vf=(e,t,r)=>{let n=m2(t,e),o=m2(r,e);return I(n)&&n===o},vg=e=>i0(e)||i1(e),vp=(e,t)=>{let r=t.container(),n=t.offset();return e?iX(r)?oN(r.nextSibling)?sF(r.nextSibling,0):sF.after(r):i0(t)?sF(r,n+1):t:iX(r)?oN(r.previousSibling)?sF(r.previousSibling,r.previousSibling.data.length):sF.before(r):i1(t)?sF(r,n-1):t},vh=Y(vp,!0),vb=Y(vp,!1),vv=(e,t)=>{let r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},vy=e=>{e.execCommand("delete")},vC=e=>vv(e,"Delete"),vE=e=>vv(e,"ForwardDelete"),vx=e=>t=>tJ(rY(t),e,rH),v_=e=>iM(e)||iI(e),vw=(e,t)=>r$(e,t)?nd(t,v_,vx(e)):et.none(),vS=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},vk=(e,t,r)=>t2(uN(r),uR(r),(n,o)=>{let l=vp(!0,n),a=vp(!1,o),i=vp(!1,t);return e?uS(r,i).exists(e=>e.isEqual(a)&&t.isEqual(l)):uk(r,i).exists(e=>e.isEqual(l)&&t.isEqual(a))}).getOr(!0),vN=e=>(ra(e)?rQ(e):r5(e)).bind(vN).orThunk(()=>et.some(e)),vR=(e,t,r,n=!0)=>{var o;t.deleteContents();let l=vN(r).getOr(r),a=rM.fromDom(null!==(o=e.dom.getParent(l.dom,e.dom.isBlock))&&void 0!==o?o:r.dom);a.dom===e.getBody()?vS(e,n):o0(e.schema,a,{checkRootAsContent:!1})&&(iV(a),n&&e.selection.setCursorLocation(a.dom,0)),rH(r,a)||ec((tJ(rY(a),r)?[]:rZ(a)).concat(r2(r)),t=>{!rH(t,a)&&!r$(t,a)&&o0(e.schema,t)&&nU(t)})},vA=e=>t=>rH(e,t),vD=e=>ot(e,"td,th"),vT=(e,t)=>fe(rM.fromDom(e),t),vO=e=>t2(e.startTable,e.endTable,(t,r)=>{let n=oo(t,e=>rH(e,r)),o=oo(r,e=>rH(e,t));return n||o?{...e,startTable:n?et.none():e.startTable,endTable:o?et.none():e.endTable,isSameTable:!1,isMultiTable:!1}:e}).getOr(e),vB=e=>vO(e),vP=(e,t)=>{let r=vT(e.startContainer,t),n=vT(e.endContainer,t),o=r.isSome(),l=n.isSome(),a=t2(r,n,rH).getOr(!1),i=!a&&o&&l;return vB({startTable:r,endTable:n,isStartInTable:o,isEndInTable:l,isSameTable:a,isMultiTable:i})},vL=(e,t)=>({start:e,end:t}),vM=(e,t,r)=>({rng:e,table:t,cells:r}),vF=di([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),vI=(e,t)=>np(rM.fromDom(e),"td,th",t),vU=e=>!rH(e.start,e.end),vz=(e,t)=>fe(e.start,t).bind(r=>fe(e.end,t).bind(e=>t8(rH(r,e),r))),vj=(e,t)=>!vU(e)&&vz(e,t).exists(e=>{let t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}),vH=(e,t)=>t2(vI(e.startContainer,t),vI(e.endContainer,t),vL),v$=e=>t=>fe(t,e).bind(e=>eR(vD(e)).map(e=>vL(t,e))),vq=e=>t=>fe(t,e).bind(e=>eN(vD(e)).map(e=>vL(e,t))),vV=e=>t=>vz(t,e).map(e=>vM(t,e,vD(e))),vW=(e,t,r,n)=>{if(r.collapsed||!e.forall(vU))return et.none();if(t.isSameTable){let t=e.bind(vV(n));return et.some({start:t,end:t})}{let e=vI(r.startContainer,n),t=vI(r.endContainer,n),o=e.bind(v$(n)).bind(vV(n)),l=t.bind(vq(n)).bind(vV(n));return et.some({start:o,end:l})}},vK=(e,t)=>ev(e,e=>rH(e,t)),vY=e=>t2(vK(e.cells,e.rng.start),vK(e.cells,e.rng.end),(t,r)=>e.cells.slice(t,r+1)),vG=(e,t,r)=>e.exists(e=>vj(e,r)&&fl(e.start,t)),vX=(e,t)=>{let{startTable:r,endTable:n}=t,o=e.cloneRange();return r.each(e=>o.setStartAfter(e.dom)),n.each(e=>o.setEndBefore(e.dom)),o},vZ=(e,t,r,n)=>vW(e,t,r,n).bind(({start:e,end:t})=>e.or(t)).bind(e=>{let{isSameTable:n}=t,o=vY(e).getOr([]);if(n&&e.cells.length===o.length)return et.some(vF.fullTable(e.table));if(!(o.length>0))return et.none();if(n)return et.some(vF.partialTable(o,et.none()));{let e=vX(r,t);return et.some(vF.partialTable(o,et.some({...t,rng:e})))}}),vQ=(e,t,r,n)=>vW(e,t,r,n).bind(({start:e,end:n})=>{let o=e.bind(vY).getOr([]),l=n.bind(vY).getOr([]);if(!(o.length>0)||!(l.length>0))return et.none();{let e=vX(r,t);return et.some(vF.multiTable(o,l,e))}}),vJ=(e,t)=>{let r=vA(e),n=vH(t,r),o=vP(t,r);return vG(n,t,r)?n.map(e=>vF.singleCellTable(t,e.start)):o.isMultiTable?vQ(n,o,t,r):vZ(n,o,t,r)},v0=e=>ec(e,e=>{ry(e,"contenteditable"),iV(e)}),v1=(e,t)=>et.from(e.dom.getParent(t,e.dom.isBlock)).map(rM.fromDom),v2=(e,t,r)=>{r.each(r=>{t?nU(r):(iV(r),e.selection.setCursorLocation(r.dom,0))})},v3=(e,t,r,n)=>{let o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),v9(e,o,t,!1).each(e=>e())},v8=e=>{let t=u7(e),r=rM.fromDom(e.selection.getNode());oI(r.dom)&&o0(e.schema,r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),t.length>1&&es(t,e=>rH(e,r))&&rg(r,"data-mce-selected","1")},v5=(e,t,r)=>et.some(()=>{let n=e.selection.getRng();v0(r.bind(({rng:r,isStartInTable:o})=>{let l=v1(e,o?r.endContainer:r.startContainer);r.deleteContents(),v2(e,o,l.filter(Y(o0,e.schema)));let a=o?t[0]:t[t.length-1];return(v3(e,a,n,o),o0(e.schema,a))?et.none():et.some(o?t.slice(1):t.slice(0,-1))}).getOr(t)),v8(e)}),v6=(e,t,r,n)=>et.some(()=>{let o=e.selection.getRng(),l=t[0],a=r[r.length-1];v3(e,l,o,!0),v3(e,a,o,!1);let i=o0(e.schema,l)?t:t.slice(1),s=o0(e.schema,a)?r:r.slice(0,-1);v0(i.concat(s)),n.deleteContents(),v8(e)}),v9=(e,t,r,n=!0)=>et.some(()=>{vR(e,t,r,n)}),v4=(e,t)=>et.some(()=>va(e,!1,t)),v7=(e,t,r)=>vJ(t,r).bind(t=>t.fold(Y(v9,e),Y(v4,e),Y(v5,e),Y(v6,e))),ye=(e,t)=>ya(e,t),yt=(e,t,r,n)=>yo(t,n).fold(()=>v7(e,t,r),t=>ye(e,t)),yr=(e,t,r)=>{let n=rM.fromDom(e.getBody()),o=e.selection.getRng();return 0!==r.length?v5(e,r,et.none()):yt(e,n,o,t)},yn=(e,t)=>eb(bl(t,e),iz),yo=(e,t)=>eb(bl(t,e),ru("caption")),yl=(e,t,r,n,o)=>ux(r,e.getBody(),o).bind(e=>yn(t,rM.fromDom(e.getNode())).bind(e=>rH(e,n)?et.none():et.some(H))),ya=(e,t)=>et.some(()=>{iV(t),e.selection.setCursorLocation(t.dom,0)}),yi=(e,t,r,n)=>uN(e.dom).bind(o=>uR(e.dom).map(e=>t?r.isEqual(o)&&n.isEqual(e):r.isEqual(e)&&n.isEqual(o))).getOr(!0),ys=(e,t)=>ya(e,t),yd=(e,t,r)=>yo(e,rM.fromDom(r.getNode())).fold(()=>et.some(H),e=>t8(!rH(e,t),H)),yc=(e,t,r,n,o)=>ux(r,e.getBody(),o).fold(()=>et.some(H),l=>yi(n,r,o,l)?ys(e,n):yd(t,n,l)),ym=(e,t,r,n)=>{let o=sF.fromRangeStart(e.selection.getRng());return yn(r,n).bind(n=>o0(e.schema,n,{checkRootAsContent:!1})?ya(e,n):yl(e,r,t,n,o))},yu=(e,t,r,n)=>{let o=sF.fromRangeStart(e.selection.getRng());return o0(e.schema,n)?ya(e,n):yc(e,r,t,n,o)},yf=(e,t)=>e?h4(t):h7(t),yg=(e,t)=>{let r=sF.fromRangeStart(e.selection.getRng());return yf(t,r)||uE(t,e.getBody(),r).exists(e=>yf(t,e))},yp=(e,t,r)=>{let n=rM.fromDom(e.getBody());return yo(n,r).fold(()=>ym(e,t,n,r).orThunk(()=>t8(yg(e,t),H)),r=>yu(e,t,n,r))},yh=(e,t)=>{let r=rM.fromDom(e.selection.getStart(!0)),n=u7(e);return e.selection.isCollapsed()&&0===n.length?yp(e,t,r):yr(e,r,n)},yb=(e,t)=>{let r=t;for(;r&&r!==e;){if(oL(r)||oM(r))return r;r=r.parentNode}return null},yv=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],yy=tQ.each,yC=e=>{let t=e.dom,r=new Set(e.serializer.getTempAttrs()),n=e=>es(yv,t=>ti(e,t))||r.has(e);return{compare:(e,r)=>{if(e.nodeName!==r.nodeName||e.nodeType!==r.nodeType)return!1;let o=e=>{let r={};return yy(t.getAttribs(e),o=>{let l=o.nodeName.toLowerCase();"style"===l||n(l)||(r[l]=t.getAttrib(e,l))}),r},l=(e,t)=>{for(let r in e)if(eq(e,r)){let n=t[r];if(M(n)||e[r]!==n)return!1;delete t[r]}for(let e in t)if(eq(t,e))return!1;return!0};return(!(oh(e)&&oh(r))||!!l(o(e),o(r))&&!!l(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(r,"style"))))&&!uJ(e)&&!uJ(r)},isAttributeInternal:n}},yE=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),yx=e=>"summary"===e.name,y_=(e,t)=>{let r=e;for(;r=r.walk();)t(r)},yw=(e,t,r,n)=>{let o=r.name;for(let t=0,l=e.length;t<l;t++){let l=e[t];if(l.name===o){let e=n.nodes[o];e?e.nodes.push(r):n.nodes[o]={filter:l,nodes:[r]}}}if(r.attributes)for(let e=0,o=t.length;e<o;e++){let o=t[e],l=o.name;if(l in r.attributes.map){let e=n.attributes[l];e?e.nodes.push(r):n.attributes[l]={filter:o,nodes:[r]}}}},yS=(e,t,r)=>{let n={nodes:{},attributes:{}};return r.firstChild&&y_(r,r=>{yw(e,t,r,n)}),n},yk=(e,t)=>{let r=(e,r)=>{eP(e,e=>{let n=eA(e.nodes);ec(e.filter.callbacks,o=>{for(let t=n.length-1;t>=0;t--){let o=n[t];(!(r?void 0!==o.attr(e.filter.name):o.name===e.filter.name)||F(o.parent))&&n.splice(t,1)}n.length>0&&o(n,e.filter.name,t)})})};r(e.nodes,!1),r(e.attributes,!0)},yN=(e,t,r,n={})=>{yk(yS(e,t,r),n)},yR=(e,t,r,n)=>{if((e.pad_empty_with_br||t.insert)&&r(n)){let e=new hh("br",1);t.insert&&e.attr("data-mce-bogus","1"),n.empty().append(e)}else n.empty().append(new hh("#text",3)).value="\xa0"},yA=e=>{var t;return yD(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)==="\xa0"},yD=(e,t)=>{let r=null==e?void 0:e.firstChild;return I(r)&&r===e.lastChild&&r.name===t},yT=(e,t)=>{let r=e.getElementRule(t.name);return(null==r?void 0:r.paddEmpty)===!0},yO=(e,t,r,n)=>n.isEmpty(t,r,t=>yT(e,t)),yB=(e,t)=>I(e)&&(t(e)||"br"===e.name),yP=e=>{let t;for(let r=e;r;r=r.parent){let e=r.attr("contenteditable");if("false"===e)break;"true"===e&&(t=r)}return et.from(t)},yL=(e,t,r=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{for(let n of e.children())r&&!t.isValidChild(r.name,n.name)&&yL(n,t,r);e.unwrap()}},yM=(e,t,r,n=H)=>{let o=t.getTextBlockElements(),l=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=tQ.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),s=new Set,d=e=>e!==r&&!i[e.name];for(let r=0;r<e.length;r++){let i,c,m;let u=e[r];if(!u.parent||s.has(u))continue;if(o[u.name]&&"li"===u.parent.name){let e=u.next;for(;e&&o[e.name];)e.name="li",s.add(e),u.parent.insert(e,u.parent),e=e.next;u.unwrap();continue}let f=[u];for(i=u.parent;i&&!t.isValidChild(i.name,u.name)&&d(i);i=i.parent)f.push(i);if(i&&f.length>1){if(yI(t,u,i))yL(u,t);else{f.reverse(),n(c=f[0].clone());let e=c;for(let r=0;r<f.length-1;r++){t.isValidChild(e.name,f[r].name)&&r>0?(n(m=f[r].clone()),e.append(m)):m=e;for(let e=f[r].firstChild;e&&e!==f[r+1];){let t=e.next;m.append(e),e=t}e=m}yO(t,l,a,c)?i.insert(u,f[0],!0):(i.insert(c,f[0],!0),i.insert(u,c)),(yO(t,l,a,i=f[0])||yD(i,"br"))&&i.empty().remove()}}else if(u.parent){if("li"===u.name){let e=u.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(u);continue}if((e=u.next)&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(u,e.firstChild,!0);continue}let t=new hh("ul",1);n(t),u.wrap(t);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){let e=new hh("div",1);n(e),u.wrap(e)}else yL(u,t)}}},yF=(e,t)=>{let r=e;for(;r;){if(r.name===t)return!0;r=r.parent}return!1},yI=(e,t,r=t.parent)=>!!r&&(!!(e.children[t.name]&&!e.isValidChild(r.name,t.name)||"a"===t.name&&yF(r,"a"))||!!(yx(r)&&yE(t))&&((null==r?void 0:r.firstChild)!==t||(null==r?void 0:r.lastChild)!==t)),yU=(e,t,r,n)=>{let o=document.createRange();return o.setStart(e,t),o.setEnd(r,n),o},yz=e=>{let t=sF.fromRangeStart(e),r=sF.fromRangeEnd(e),n=e.commonAncestorContainer;return uE(!1,n,r).map(o=>!m3(t,r,n)&&m3(t,o,n)?yU(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},yj=e=>e.collapsed?e:yz(e),yH=e=>I(e.firstChild)&&e.firstChild===e.lastChild,y$=e=>"br"===e.name||"\xa0"===e.value,yq=(e,t)=>e.getBlockElements()[t.name]&&yH(t)&&y$(t.firstChild),yV=(e,t)=>{let r=e.getNonEmptyElements();return I(t)&&(t.isEmpty(r)||yq(e,t))},yW=(e,t)=>{let r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),yV(e,n)&&(n=null==n?void 0:n.prev),!!r&&r===n&&("ul"===r.name||"ol"===r.name)},yK=e=>{var t,r;let n=e.firstChild,o=e.lastChild;return n&&"META"===n.nodeName&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),o&&"mce_marker"===o.id&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),e},yY=(e,t,r)=>{let n=t.serialize(r);return yK(e.createFragment(n))},yG=e=>{var t;return ef(null!==(t=null==e?void 0:e.childNodes)&&void 0!==t?t:[],e=>"LI"===e.nodeName)},yX=e=>"\xa0"===e.data||oB(e),yZ=e=>I(null==e?void 0:e.firstChild)&&e.firstChild===e.lastChild&&yX(e.firstChild),yQ=e=>!e.firstChild||yZ(e),yJ=e=>e.length>0&&yQ(e[e.length-1])?e.slice(0,-1):e,y0=(e,t)=>{let r=e.getParent(t,e.isBlock);return r&&"LI"===r.nodeName?r:null},y1=(e,t)=>!!y0(e,t),y2=(e,t)=>{let r=t.cloneRange(),n=t.cloneRange();return r.setStartBefore(e),n.setEndAfter(e),[r.cloneContents(),n.cloneContents()]},y3=(e,t)=>{let r=sF.before(e),n=uf(t).next(r);return n?n.toRange():null},y8=(e,t)=>{let r=sF.after(e),n=uf(t).prev(r);return n?n.toRange():null},y5=(e,t,r,n)=>{let o=y2(e,n),l=e.parentNode;return l&&(l.insertBefore(o[0],e),tQ.each(t,t=>{l.insertBefore(t,e)}),l.insertBefore(o[1],e),l.removeChild(e)),y8(t[t.length-1],r)},y6=(e,t,r)=>{let n=e.parentNode;return n&&tQ.each(t,t=>{n.insertBefore(t,e)}),y3(e,r)},y9=(e,t,r,n)=>(n.insertAfter(t.reverse(),e),y8(t[0],r)),y4=(e,t,r,n)=>{let o=yY(t,e,n),l=y0(t,r.startContainer),a=yJ(yG(o.firstChild)),i=t.getRoot(),s=e=>{let n=sF.fromRangeStart(r),o=uf(t.getRoot()),a=1===e?o.prev(n):o.next(n),i=null==a?void 0:a.getNode();return!i||y0(t,i)!==l};return l?s(1)?y6(l,a,i):s(2)?y9(l,a,i,t):y5(l,a,i,r):null},y7=["pre"],Ce=(e,t,r,n)=>{var o;let l=t.firstChild,a=t.lastChild,i=l===("bookmark"===a.attr("data-mce-type")?a.prev:a),s=ei(y7,l.name);if(!i||!s)return!1;{let t="false"!==l.attr("contenteditable"),a=(null===(o=e.getParent(r,e.isBlock))||void 0===o?void 0:o.nodeName.toLowerCase())===l.name,i=et.from(yb(n,r)).forall(oL);return t&&a&&i}},Ct=(e,t,r)=>!!I(r)&&r===e.getParent(t.endContainer,oI)&&fl(rM.fromDom(r),t),Cr=(e,t)=>{if(!(e.isBlock(t)&&e.isEditable(t)))return!1;{let e=t.childNodes;return 1===e.length&&oB(e[0])||0===e.length}},Cn=(e,t,r)=>{var n;"all"===r.getAttribute("data-mce-bogus")?null===(n=r.parentNode)||void 0===n||n.insertBefore(e.dom.createFragment(t),r):Cr(e.dom,r)?e.dom.setHTML(r,t):e.selection.setContent(t,{no_events:!0})},Co=(e,t,r)=>{et.from(e.getParent(t,"td,th")).map(rM.fromDom).each(e=>iW(e,r))},Cl=(e,t)=>{let r=e.schema.getTextInlineElements(),n=e.dom;if(t){let t=e.getBody(),o=yC(e),l="*[data-mce-fragment]",a=n.select(l);tQ.each(a,e=>{let a=e=>I(r[e.nodeName.toLowerCase()]),i=e=>1===e.childNodes.length;if(!(hK(n,e)||hY(n,e))&&a(e)&&i(e)){let r=hq(n,e),s=(e,t)=>eE(e,e=>ei(t,e)),d=t=>i(e)&&n.is(t,l)&&a(t)&&(t.nodeName===e.nodeName&&s(r,hq(n,t))||d(t.children[0])),c=r=>I(r)&&r!==t&&(o.compare(e,r)||c(r.parentElement)),m=r=>I(r)&&r!==t&&n.is(r,l)&&(hX(n,e,r)||m(r.parentElement));(d(e.children[0])||c(e.parentElement)&&!m(e.parentElement))&&n.remove(e,!0)}})}},Ca=e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},Ci=e=>{tQ.each(e.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")})},Cs=e=>!!e.getAttribute("data-mce-fragment"),Cd=(e,t)=>I(t)&&!e.schema.getVoidElements()[t.nodeName],Cc=(e,t)=>{var r,n,o,l;let a;let i=e.dom,s=e.selection;if(!t)return;s.scrollIntoView(t);let d=yb(e.getBody(),t);if(d&&"false"===i.getContentEditable(d)){i.remove(t),s.select(d);return}let c=i.createRng(),m=t.previousSibling;if(oN(m)){c.setStart(m,null!==(n=null===(r=m.nodeValue)||void 0===r?void 0:r.length)&&void 0!==n?n:0);let e=t.nextSibling;oN(e)&&(m.appendData(e.data),null===(o=e.parentNode)||void 0===o||o.removeChild(e))}else c.setStartBefore(t),c.setEndBefore(t);let u=i.getParent(t,i.isBlock);if(i.remove(t),u&&i.isEmpty(u)){let t;let r=oI(u);nI(rM.fromDom(u)),c.setStart(u,0),c.setEnd(u,0),!r&&!Cs(u)&&(l=c,t=sF.fromRangeStart(l),a=null==(t=uf(e.getBody()).next(t))?void 0:t.toRange())?(c=a,i.remove(u)):i.add(u,i.create("br",r?{}:{"data-mce-bogus":"1"}))}s.setRng(c)},Cm=e=>{let t=e.dom,r=yj(e.selection.getRng());e.selection.setRng(r);let n=t.getParent(r.startContainer,oI);Ct(t,r,n)?v9(e,r,rM.fromDom(n)):r.startContainer===r.endContainer&&r.endOffset-r.startOffset==1&&oN(r.startContainer.childNodes[r.startOffset])?r.deleteContents():e.getDoc().execCommand("Delete",!1)},Cu=e=>{for(let t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return et.some(t);return et.none()},Cf=(e,t,r)=>{var n;return es(r.children(),yE)&&(null===(n=e.getParent(t,e.isBlock))||void 0===n?void 0:n.nodeName)==="SUMMARY"},Cg=(e,t,r)=>{var n,o;let l=e.selection,a=e.dom,i=e.parser,s=r.merge,d=hU({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';r.preserve_zwsp||(t=iK(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);let m=l.getRng(),u=m.startContainer,f=e.getBody();u===f&&l.isCollapsed()&&a.isBlock(f.firstChild)&&Cd(e,f.firstChild)&&a.isEmpty(f.firstChild)&&((m=a.createRng()).setStart(f.firstChild,0),m.setEnd(f.firstChild,0),l.setRng(m)),l.isCollapsed()||Cm(e);let g=l.getNode(),p={context:g.nodeName.toLowerCase(),data:r.data,insert:!0},h=i.parse(t,p);if(!0===r.paste&&yW(e.schema,h)&&y1(a,g))return(m=y4(d,a,l.getRng(),h))&&l.setRng(m),t;!0===r.paste&&Ce(a,h,g,e.getBody())&&(null===(n=h.firstChild)||void 0===n||n.unwrap()),Ca(h);let b=h.lastChild;if(b&&"mce_marker"===b.attr("id")){let t=b;for(b=b.prev;b&&"table"!==b.name;b=b.walk(!0))if(3===b.type||!a.isBlock(b.name)){b.parent&&e.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(t,b,"br"===b.name);break}}if(e._selectionOverrides.showBlockCaretContainer(g),p.invalid||Cf(a,g,h)){let r;e.selection.setContent(c);let n=l.getNode(),s=e.getBody();for(oT(n)?n=r=s:r=n;r&&r!==s;)n=r,r=r.parentNode;t=n===s?s.innerHTML:a.getOuterHTML(n);let m=i.parse(t),u=Cu(m),f=u.bind(yP).getOr(m);u.each(e=>e.replace(h));let g=h.children(),p=null!==(o=h.parent)&&void 0!==o?o:m;h.unwrap(),yM(ef(g,t=>yI(e.schema,t,p)),e.schema,f),yN(i.getNodeFilters(),i.getAttributeFilters(),m),t=d.serialize(m),n===s?a.setHTML(s,t):a.setOuterHTML(n,t)}else Cn(e,t=d.serialize(h),g);return Cl(e,s),Cc(e,a.get("mce_marker")),Ci(e.getBody()),Co(a,l.getStart(),e.schema),lf(e.schema,e.getBody(),l.getStart()),t},Cp=e=>e instanceof hh,Ch=e=>{g2(e)&&uN(e.getBody()).each(t=>{let r=t.getNode(),n=ow(r)?uN(r).getOr(t):t;e.selection.setRng(n.toRange())})},Cb=(e,t,r)=>{e.dom.setHTML(e.getBody(),t),!0!==r&&Ch(e)},Cv=(e,t,r,n)=>{if(0===(r=iK(r)).length||/^\s+$/.test(r)){let o='<br data-mce-bogus="1">';"TABLE"===t.nodeName?r="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(r="<li>"+o+"</li>");let l=d4(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),l.toLowerCase())?(r=o,r=e.dom.createHTML(l,d7(e),r)):r||(r=o),Cb(e,r,n.no_selection),{content:r,html:r}}{"raw"!==n.format&&(r=hU({validate:!1},e.schema).serialize(e.parser.parse(r,{isRootContent:!0,insert:!0})));let o=ij(rM.fromDom(t))?r:tQ.trim(r);return Cb(e,o,n.no_selection),{content:o,html:o}}},Cy=(e,t,r,n)=>{yN(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),r);let o=hU({validate:!1},e.schema).serialize(r),l=iK(ij(rM.fromDom(t))?o:tQ.trim(o));return Cb(e,l,n.no_selection),{content:r,html:l}},CC=(e,t,r)=>et.from(e.getBody()).map(n=>Cp(t)?Cy(e,n,t,r):Cv(e,n,t,r)).getOr({content:t,html:Cp(r.content)?"":r.content}),CE=e=>U(e)?e:J,Cx=(e,t,r)=>{let n=e.dom,o=CE(r);for(;n.parentNode;){n=n.parentNode;let e=rM.fromDom(n),r=t(e);if(r.isSome())return r;if(o(e))break}return et.none()},C_=(e,t,r)=>{let n=t(e),o=CE(r);return n.orThunk(()=>o(e)?et.none():Cx(e,t,o))},Cw=(e,t,r)=>{let n=e.formatter.get(r);if(n)for(let r=0;r<n.length;r++){let o=n[r];if(fP(o)&&!1===o.inherit&&e.dom.is(t,o.selector))return!0}return!1},CS=(e,t,r,n,o)=>{let l=e.dom.getRoot();if(t===l)return!1;let a=e.dom.getParent(t,t=>!!Cw(e,t,r)||t.parentNode===l||!!CR(e,t,r,n,!0));return!!CR(e,a,r,n,o)},Ck=(e,t,r)=>!!(fL(r)&&f_(t,r.inline)||fT(r)&&f_(t,r.block))||!!fP(r)&&oh(t)&&e.is(t,r.selector),CN=(e,t,r,n,o,l)=>{let a=r[n],i="attributes"===n;if(U(r.onmatch))return r.onmatch(t,r,n);if(a){if(eY(a))for(let r=0;r<a.length&&(i?!e.getAttrib(t,a[r]):!fS(e,t,a[r]));r++);else for(let n in a)if(eq(a,n)){let s=i?e.getAttrib(t,n):fS(e,t,n),d=fx(a[n],l),c=F(s)||tg(s);if(c&&F(d))continue;if(o&&c&&!r.exact||(!o||r.exact)&&!f_(s,fw(d,n)))return!1}}return!0},CR=(e,t,r,n,o)=>{let l=e.formatter.get(r),a=e.dom;if(l&&oh(t))for(let r=0;r<l.length;r++){let i=l[r];if(Ck(e.dom,t,i)&&CN(a,t,i,"attributes",o,n)&&CN(a,t,i,"styles",o,n)){let r=i.classes;if(r){for(let o=0;o<r.length;o++)if(!e.dom.hasClass(t,fx(r[o],n)))return}return i}}},CA=(e,t,r,n,o)=>{if(n)return CS(e,n,t,r,o);if(n=e.selection.getNode(),CS(e,n,t,r,o))return!0;let l=e.selection.getStart();return!!(l!==n&&CS(e,l,t,r,o))},CD=(e,t,r)=>{let n=[],o={},l=e.selection.getStart();return e.dom.getParent(l,l=>{for(let a=0;a<t.length;a++){let i=t[a];!o[i]&&CR(e,l,i,r)&&(o[i]=!0,n.push(i))}},e.dom.getRoot()),n},CT=(e,t)=>{let r=t=>rH(t,rM.fromDom(e.getBody())),n=(t,r)=>CR(e,t.dom,r)?et.some(r):et.none();return et.from(e.selection.getStart(!0)).bind(e=>C_(rM.fromDom(e),e=>eD(t,t=>n(e,t)),r)).getOrNull()},CO=(e,t)=>{let r=e.formatter.get(t),n=e.dom;if(r&&e.selection.isEditable()){let t=fN(n,e.selection.getStart());for(let e=r.length-1;e>=0;e--){let o=r[e];if(!fP(o))return!0;for(let e=t.length-1;e>=0;e--)if(n.is(t[e],o.selector))return!0}}return!1},CB=(e,t,r)=>ep(r,(r,n)=>{let o=fA(e,n);return e.formatter.matchNode(t,n,{},o)?r.concat([n]):r},[]),CP=(e,t)=>e.importNode(t,!0),CL=e=>{if(e){let t=new ol(e,e);for(let e=t.current();e;e=t.next())if(oN(e))return e}return null},CM=e=>{let t=rM.fromTag("span");return rp(t,{id:uA,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&nP(t,rM.fromText("\uFEFF")),t},CF=e=>{let t=CL(e);return t&&"\uFEFF"===t.data.charAt(0)&&t.deleteData(0,1),t},CI=(e,t,r)=>{let n=e.dom,o=e.selection;if(fU(t))va(e,!1,rM.fromDom(t),r,!0);else{let e=o.getRng(),r=n.getParent(t,n.isBlock),l=e.startContainer,a=e.startOffset,i=e.endContainer,s=e.endOffset,d=CF(t);n.remove(t,!0),l===d&&a>0&&e.setStart(d,a-1),i===d&&s>0&&e.setEnd(d,s-1),r&&n.isEmpty(r)&&iV(rM.fromDom(r)),o.setRng(e)}},CU=(e,t,r)=>{let n=e.dom,o=e.selection;if(t)CI(e,t,r);else if(!(t=uT(e.getBody(),o.getStart())))for(;t=n.get(uA);)CI(e,t,r)},Cz=(e,t,r)=>{var n,o;let l=e.dom,a=l.getParent(r,Y(fh,e.schema));a&&l.isEmpty(a)?null===(n=r.parentNode)||void 0===n||n.replaceChild(t,r):(i$(rM.fromDom(r)),l.isEmpty(r)?null===(o=r.parentNode)||void 0===o||o.replaceChild(t,r):l.insertAfter(t,r))},Cj=(e,t)=>(e.appendChild(t),t),CH=(e,t)=>{var r;let n=eg(e,(e,t)=>Cj(e,t.cloneNode(!1)),t),o=null!==(r=n.ownerDocument)&&void 0!==r?r:document;return Cj(n,o.createTextNode("\uFEFF"))},C$=(e,t,r,n,o,l)=>{let a=e.formatter,i=e.dom,s=CB(e,r,ef(eO(a.get()),e=>e!==n&&!ta(e,"removeformat")));if(!(ef(s,t=>!fD(e,t,n)).length>0))return et.none();{let e=r.cloneNode(!1);return i.add(t,e),a.remove(n,o,e,l),i.remove(e),et.some(e)}},Cq=e=>iO(e,iD(e).replace(RegExp(`\xa0$`)," ")),CV=(e,t)=>{let r=()=>{null===t||e.dom.isEmpty(t)||rQ(rM.fromDom(t)).each(e=>{rd(e)?Cq(e):nu(e,e=>rd(e)).each(e=>{rd(e)&&Cq(e)})})};e.once("input",t=>{t.data&&!u1(t.data)&&(t.isComposing?e.once("compositionend",()=>{r()}):r())})},CW=(e,t,r)=>{let n;let o=e.selection,l=e.formatter.get(t);if(!l)return;let a=o.getRng(),i=a.startOffset,s=a.startContainer.nodeValue;n=uT(e.getBody(),o.getStart());let d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(s&&i>0&&i<s.length&&d.test(s.charAt(i))&&d.test(s.charAt(i-1))){let n=o.getBookmark();a.collapse(!0);let i=fQ(e.dom,a,l);i=pF(i),e.formatter.apply(t,r,i),o.moveToBookmark(n)}else{let l=n?CL(n):null;n&&(null==l?void 0:l.data)==="\uFEFF"||(l=(n=CP(e.getDoc(),CM(!0).dom)).firstChild,a.insertNode(n),i=1,CV(e,n)),e.formatter.apply(t,r,n),o.setCursorLocation(l,i)}},CK=(e,t,r,n)=>{let o;let l=e.dom,a=e.selection,i=!1,s=e.formatter.get(t);if(!s)return;let d=a.getRng(),c=d.startContainer,m=d.startOffset,u=c;oN(c)&&(m!==c.data.length&&(i=!0),u=u.parentNode);let f=[];for(;u;){if(CR(e,u,t,r,n)){o=u;break}u.nextSibling&&(i=!0),f.push(u),u=u.parentNode}if(o){if(i){let o=a.getBookmark();d.collapse(!0);let i=fQ(l,d,s,{includeTrailingSpace:!0});i=pF(i),e.formatter.remove(t,r,i,n),a.moveToBookmark(o)}else{let i=uT(e.getBody(),o),s=I(i)?l.getParents(o.parentNode,ee,i):[],d=CM(!1).dom;Cz(e,d,null!=i?i:o);let c=CH([...f,...C$(e,d,o,t,r,n).toArray(),...s],d);i&&CI(e,i,I(i)),a.setCursorLocation(c,1),CV(e,d),l.isEmpty(o)&&l.remove(o)}}},CY=(e,t,r)=>{let n=e.selection,o=e.getBody();CU(e,null,r),(8===t||46===t)&&n.isCollapsed()&&"\uFEFF"===n.getStart().innerHTML&&CU(e,uT(o,n.getStart()),!0),(37===t||39===t)&&CU(e,uT(o,n.getStart()),!0)},CG=e=>oN(e)&&ts(e.data,"\xa0"),CX=e=>{e.on("mouseup keydown",t=>{CY(e,t.keyCode,CG(e.selection.getRng().endContainer))})},CZ=e=>{let t=CM(!1),r=CH(e,t.dom);return{caretContainer:t,caretPosition:sF(r,0)}},CQ=(e,t)=>{let{caretContainer:r,caretPosition:n}=CZ(t);return nT(rM.fromDom(e),r),nU(rM.fromDom(e)),n},CJ=(e,t)=>{let{caretContainer:r,caretPosition:n}=CZ(t);return e.insertNode(r.dom),n},C0=(e,t)=>!uD(t.dom)&&eq(e.schema.getTextInlineElements(),rn(t))&&!uD(t.dom)&&!ox(t.dom),C1={},C2=oC(["pre"]),C3=(e,t)=>{eq(C1,e)&&ec(C1[e],e=>{e(t)})};C1.pre||(C1.pre=[]),C1.pre.push(e=>{let t=e.selection.getRng(),r=(e,t)=>{let r=rM.fromDom(t),n=rV(r).dom;nU(r),nF(rM.fromDom(e),[rM.fromTag("br",n),rM.fromTag("br",n),...r2(r)])};if(!t.collapsed){let t=e.selection.getSelectedBlocks();ec(ef(ef(t,C2),e=>{let r=e.previousSibling;return C2(r)&&ei(t,r)}),e=>{r(e.previousSibling,e)})}});let C8=["fontWeight","fontStyle","color","fontSize","fontFamily"],C5=e=>T(e.styles)&&es(eO(e.styles),e=>ei(C8,e)),C6=e=>eb(e,e=>fL(e)&&"span"===e.inline&&C5(e)),C9=(e,t)=>{let r=e.get(t);return B(r)?C6(r):et.none()},C4=(e,t)=>uk(t,sF.fromRangeStart(e)).isNone(),C7=(e,t)=>!1===uS(t,sF.fromRangeEnd(e)).exists(e=>!oB(e.getNode())||uS(t,e).isSome()),Ee=e=>t=>oj(t)&&e.isEditable(t),Et=e=>{let t=e.getSelectedBlocks(),r=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return C4(r,t[0])&&C7(r,t[0])?t:[];{let e=eN(t).filter(e=>C4(r,e)).toArray(),n=eR(t).filter(e=>C7(r,e)).toArray(),o=t.slice(1,-1);return e.concat(o).concat(n)}},Er=e=>ef(Et(e),Ee(e.dom)),En=e=>ef(e.getSelectedBlocks(),Ee(e.dom)),Eo=tQ.each,El=e=>oh(e)&&!uJ(e)&&!uD(e)&&!ox(e),Ea=(e,t)=>{for(let r=e;r&&!(oN(r)&&tf(r.data));r=r[t])if(oh(r)&&!uJ(r))return r;return e},Ei=(e,t,r)=>{let n=yC(e),o=ob(t)&&e.dom.isEditable(t),l=ob(r)&&e.dom.isEditable(r);if(o&&l){let o=Ea(t,"previousSibling"),l=Ea(r,"nextSibling");if(n.compare(o,l)){for(let e=o.nextSibling;e&&e!==l;){let t=e;e=e.nextSibling,o.appendChild(t)}return e.dom.remove(l),tQ.each(tQ.grep(l.childNodes),e=>{o.appendChild(e)}),o}}return r},Es=(e,t,r,n)=>{var o;if(n&&!1!==t.merge_siblings){let t=null!==(o=Ei(e,fp(n),n))&&void 0!==o?o:n;Ei(e,t,fp(t,!0))}},Ed=(e,t,r)=>{if(t.clear_child_styles){let n=t.links?"*:not(a)":"*";Eo(e.select(n,r),r=>{El(r)&&e.isEditable(r)&&Eo(t.styles,(t,n)=>{e.setStyle(r,n,"")})})}},Ec=(e,t,r)=>{Eo(e.childNodes,e=>{El(e)&&(t(e)&&r(e),e.hasChildNodes()&&Ec(e,t,r))})},Em=(e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},Eu=(e,t)=>r=>!!(r&&fS(e,r,t)),Ef=(e,t,r)=>n=>{e.setStyle(n,t,r),""===n.getAttribute("style")&&n.removeAttribute("style"),Em(e,n)},Eg=di([{keep:[]},{rename:["name"]},{removed:[]}]),Ep=/^(src|href|style)$/,Eh=tQ.each,Eb=e=>/^(TR|TH|TD)$/.test(e.nodeName),Ev=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),Ey=(e,t,r)=>{let n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(oh(n)){let e=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>e?e:o]}return oN(n)&&r&&o>=n.data.length&&(n=new ol(n,e.getBody()).next()||n),oN(n)&&!r&&0===o&&(n=new ol(n,e.getBody()).prev()||n),n},EC=(e,t)=>{let r=t?"firstChild":"lastChild",n=e[r];return Eb(e)&&n?"TR"===e.nodeName&&n[r]||n:e},EE=(e,t,r,n)=>{var o;let l=e.create(r,n);return null===(o=t.parentNode)||void 0===o||o.insertBefore(l,t),l.appendChild(t),l},Ex=(e,t,r,n,o)=>{let l=rM.fromDom(t),a=rM.fromDom(e.create(n,o));return nF(a,r?r1(l):r0(l)),r?(nT(l,a),nB(a,l)):(nO(l,a),nP(a,l)),a.dom},E_=(e,t)=>t.links&&"A"===e.nodeName,Ew=(e,t,r)=>{let n;let o=t.parentNode,l=e.dom,a=d4(e);!fT(r)||o!==l.getRoot()||r.list_block&&f_(t,r.list_block)||ec(eA(t.childNodes),t=>{fb(e,a,t.nodeName.toLowerCase())?n?n.appendChild(t):(n=EE(l,t,a),l.setAttribs(n,d7(e))):n=null}),(!fM(r)||f_(r.inline,t))&&l.remove(t,!0)},ES=(e,t,r)=>z(e)?{name:t,value:null}:{name:e,value:fx(t,r)},Ek=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},EN=(e,t,r,n,o)=>{let l=!1;Eh(r.styles,(a,i)=>{let{name:s,value:d}=ES(i,a,n),c=fw(d,s);(r.remove_similar||P(d)||!oh(o)||f_(fS(e,o,s),c))&&e.setStyle(t,s,""),l=!0}),l&&Ek(e,t)},ER=(e,t,r)=>{"removeformat"===t?ec(En(e.selection),t=>{ec(C8,r=>e.dom.setStyle(t,r,"")),Ek(e.dom,t)}):C9(e.formatter,t).each(t=>{ec(En(e.selection),n=>EN(e.dom,n,t,r,null))})},EA=(e,t,r,n,o)=>{let l=e.dom,a=yC(e),i=e.schema;if(fL(t)&&lp(i,t.inline)&&lb(i,n)&&n.parentElement===e.getBody())return Ew(e,n,t),Eg.removed();if(!t.ceFalseOverride&&n&&"false"===l.getContentEditableParent(n)||n&&!Ck(l,n,t)&&!E_(n,t))return Eg.keep();let s=t.preserve_attributes;if(fL(t)&&"all"===t.remove&&B(s)){let e=ef(l.getAttribs(n),e=>ei(s,e.name.toLowerCase()));if(l.removeAllAttribs(n),ec(e,e=>l.setAttrib(n,e.name,e.value)),e.length>0)return Eg.rename("span")}if("all"!==t.remove){EN(l,n,t,r,o),Eh(t.attributes,(e,a)=>{let{name:i,value:s}=ES(a,e,r);if(t.remove_similar||P(s)||!oh(o)||f_(l.getAttrib(o,i),s)){if("class"===i){let e=l.getAttrib(n,i);if(e){let t="";if(ec(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t){l.setAttrib(n,i,t);return}}}if(Ep.test(i)&&n.removeAttribute("data-mce-"+i),"style"===i&&oC(["li"])(n)&&"none"===l.getStyle(n,"list-style-type")){n.removeAttribute(i),l.setStyle(n,"list-style-type","none");return}"class"===i&&n.removeAttribute("className"),n.removeAttribute(i)}}),Eh(t.classes,e=>{e=fx(e,r),(!oh(o)||l.hasClass(o,e))&&l.removeClass(n,e)});let e=l.getAttribs(n);for(let t=0;t<e.length;t++){let r=e[t].nodeName;if(!a.isAttributeInternal(r))return Eg.keep()}}return"none"!==t.remove?(Ew(e,n,t),Eg.removed()):Eg.keep()},ED=(e,t,r,n,o)=>{let l;return t.parentNode&&ec(fN(e.dom,t.parentNode).reverse(),t=>{if(!l&&oh(t)&&"_start"!==t.id&&"_end"!==t.id){let a=CR(e,t,r,n,o);a&&!1!==a.split&&(l=t)}}),l},ET=(e,t,r,n)=>EA(e,t,r,n,n).fold(V(n),t=>(e.dom.createFragment().appendChild(n),e.dom.rename(n,t)),V(null)),EO=(e,t,r,n,o,l,a,i)=>{var s,d;let c,m;let u=e.dom;if(r){let f=r.parentNode;for(let r=n.parentNode;r&&r!==f;r=r.parentNode){let n=u.clone(r,!1);for(let r=0;r<t.length&&null!==(n=ET(e,t[r],i,n));r++);n&&(c&&n.appendChild(c),m||(m=n),c=n)}!l||a.mixed&&u.isBlock(r)||(n=null!==(s=u.split(r,n))&&void 0!==s?s:n),c&&m&&(null===(d=o.parentNode)||void 0===d||d.insertBefore(c,o),m.appendChild(o),fL(a)&&Es(e,a,i,c))}return n},EB=(e,t,r,n,o)=>{let l=e.formatter.get(t),a=l[0],i=e.dom,s=e.selection,d=n=>{let i=ED(e,n,t,r,o);return EO(e,l,i,n,n,!0,a,r)},c=e=>uJ(e)&&oh(e)&&("_start"===e.id||"_end"===e.id),m=t=>es(l,n=>EL(e,n,r,t,t)),u=t=>{let r=eA(t.childNodes),n=m(t)||es(l,e=>Ck(i,t,e)),o=t.parentNode;if(!n&&I(o)&&fF(a)&&m(o),a.deep&&r.length)for(let e=0;e<r.length;e++)u(r[e]);ec(["underline","line-through","overline"],r=>{oh(t)&&e.dom.getStyle(t,"text-decoration")===r&&t.parentNode&&fk(i,t.parentNode)===r&&EL(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:r}},void 0,t)})},f=e=>{let t=i.get(e?"_start":"_end");if(!t)return null;{let r=t[e?"firstChild":"lastChild"];return c(r)&&(r=r[e?"firstChild":"lastChild"]),oN(r)&&0===r.data.length&&(r=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),i.remove(t,!0),r}},g=t=>{let r,n;let o=fQ(i,t,l,{includeTrailingSpace:t.collapsed});if(a.split){if((r=Ey(e,o=pF(o),!0))!==(n=Ey(e,o))){if(Ev(i,r=EC(r,!0),n=EC(n,!1))){d(Ex(i,et.from(r.firstChild).getOr(r),!0,"span",{id:"_start","data-mce-type":"bookmark"})),f(!0);return}if(Ev(i,n,r)){d(Ex(i,et.from(n.lastChild).getOr(n),!1,"span",{id:"_end","data-mce-type":"bookmark"})),f(!1);return}r=EE(i,r,"span",{id:"_start","data-mce-type":"bookmark"}),n=EE(i,n,"span",{id:"_end","data-mce-type":"bookmark"});let e=i.createRng();e.setStartAfter(r),e.setEndBefore(n),fJ(i,e,e=>{ec(e,e=>{uJ(e)||uJ(e.parentNode)||d(e)})}),d(r),d(n),r=f(!0),n=f()}else r=n=d(r);o.startContainer=r.parentNode?r.parentNode:r,o.startOffset=i.nodeIndex(r),o.endContainer=n.parentNode?n.parentNode:n,o.endOffset=i.nodeIndex(n)+1}fJ(i,o,e=>{ec(e,u)})};if(n){if(fc(n)){let e=i.createRng();e.setStartBefore(n),e.setEndAfter(n),g(e)}else g(n);dO(e,t,n,r);return}s.isCollapsed()&&fL(a)&&!u7(e).length?CK(e,t,r,o):(ff(e,()=>fs(e,g),n=>fL(a)&&CA(e,t,r,n)),e.nodeChanged()),ER(e,t,r),dO(e,t,n,r)},EP=(e,t,r,n,o)=>{(n||e.selection.isEditable())&&EB(e,t,r,n,o)},EL=(e,t,r,n,o)=>EA(e,t,r,n,o).fold(J,t=>(e.dom.rename(n,t),!0),ee),EM=tQ.each,EF=(e,t,r,n)=>{let o=t=>{if(ob(t)&&oh(t.parentNode)&&e.isEditable(t)){let r=fk(e,t.parentNode);e.getStyle(t,"color")&&r?e.setStyle(t,"text-decoration",r):e.getStyle(t,"text-decoration")===r&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(tQ.walk(n,o,"childNodes"),o(n))},EI=(e,t,r,n)=>{if(t.styles&&t.styles.backgroundColor){let o=Eu(e,"fontSize");Ec(n,t=>o(t)&&e.isEditable(t),Ef(e,"backgroundColor",fx(t.styles.backgroundColor,r)))}},EU=(e,t,r,n)=>{if(fL(t)&&("sub"===t.inline||"sup"===t.inline)){let r=Eu(e,"fontSize");Ec(n,t=>r(t)&&e.isEditable(t),Ef(e,"fontSize",""));let o=ef(e.select("sup"===t.inline?"sub":"sup",n),e.isEditable);e.remove(o,!0)}},Ez=(e,t,r,n)=>{EM(t,t=>{fL(t)&&EM(e.dom.select(t.inline,n),n=>{El(n)&&EL(e,t,r,n,t.exact?n:null)}),Ed(e.dom,t,n)})},Ej=(e,t,r,n,o)=>{let l=o.parentNode;!(CR(e,l,r,n)&&EL(e,t,n,o))&&t.merge_with_parents&&l&&e.dom.getParent(l,l=>!!CR(e,l,r,n)&&(EL(e,t,n,o),!0))},EH=tQ.each,E$=(e,t,r,n)=>{if(!(cF(e)&&fL(t))||!r.parentNode)return!1;{let t=ad(e.schema),o=on(rM.fromDom(r),e=>uD(e.dom));return eV(t,n)&&oJ(e.schema,r.parentNode,{skipBogus:!1,includeZwsp:!0})&&!o}},Eq=(e,t,r,n)=>{if(EH(r.styles,(r,o)=>{e.setStyle(t,o,fx(r,n))}),r.styles){let r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},EV=(e,t,r,n)=>{let o=e.formatter.get(t),l=o[0],a=!n&&e.selection.isCollapsed(),i=e.dom,s=e.selection,d=(e,t=l)=>{U(t.onformat)&&t.onformat(e,t,r,n),Eq(i,e,t,r),EH(t.attributes,(t,n)=>{i.setAttrib(e,n,fx(t,r))}),EH(t.classes,t=>{let n=fx(t,r);i.hasClass(e,n)||i.addClass(e,n)})},c=(e,t)=>{let r=!1;return EH(e,e=>!!fP(e)&&(!!("false"===i.getContentEditable(t)&&!e.ceFalseOverride||I(e.collapsed)&&e.collapsed!==a)||!i.is(t,e.selector)||!!uD(t)||(d(t,e),r=!0,!1))),r},m=e=>{if(!D(e))return null;{let t=i.create(e);return d(t),t}},u=(n,a,i)=>{let s=[],u=!0,f=l.inline||l.block,g=m(f),p=n=>fO(l)&&CR(e,n,t,r),h=(t,r,n)=>{let o=fB(l)&&fh(e.schema,t)&&fb(e,r,f);return n&&o},b=(t,r,o,a)=>{let s=fb(e,f,t.nodeName.toLowerCase())&&fb(e,r,f),d=!i&&oN(t)&&oa(t.data),c=uD(t),m=!fL(l)||!n.isBlock(t);return(o||a)&&s&&!d&&!c&&m};fJ(n,a,t=>{let r;let a=t=>{let i=!1,m=u,v=!1,y=t.parentNode,C=y.nodeName.toLowerCase(),E=n.getContentEditable(t);I(E)&&(m=u,u="true"===E,i=!0,v=fE(e,t));let x=u&&!i;if(oB(t)&&!E$(e,l,t,C)){r=null,fT(l)&&n.remove(t);return}if(p(t)){r=null;return}if(h(t,C,x)){let e=n.rename(t,f);d(e),s.push(e),r=null;return}if(fP(l)){let e=c(o,t);if(!e&&I(y)&&fF(l)&&(e=c(o,y)),!fL(l)||e){r=null;return}}I(g)&&b(t,C,x,v)?(r||(r=n.clone(g,!1),y.insertBefore(r,t),s.push(r)),v&&i&&(u=m),r.appendChild(t)):(r=null,ec(eA(t.childNodes),a),i&&(u=m),r=null)};ec(t,a)}),!0===l.links&&ec(s,e=>{let t=e=>{"A"===e.nodeName&&d(e,l),ec(eA(e.childNodes),t)};t(e)}),ec(s,a=>{let i;let c=(i=0,ec(a.childNodes,e=>{!fy(e)&&!uJ(e)&&i++}),i);if((s.length>1||!n.isBlock(a))&&0===c){n.remove(a,!0);return}if(fL(l)||fT(l)&&l.wrapper){if(!l.exact&&1===c){var m;a=eb((m=a).childNodes,fm).filter(e=>"false"!==n.getContentEditable(e)&&Ck(n,e,l)).map(e=>{let t=n.clone(e,!1);return d(t),n.replace(t,m,!0),n.remove(e,!0),t}).getOr(m)}Ez(e,o,r,a),Ej(e,l,t,r,a),EI(n,l,r,a),EF(n,l,r,a),EU(n,l,r,a),Es(e,l,r,a)}})},f=fc(n)?n:s.getNode();if("false"===i.getContentEditable(f)&&!fE(e,f)){c(o,n=f),dT(e,t,n,r);return}if(l){if(n){if(fc(n)){if(!c(o,n)){let e=i.createRng();e.setStartBefore(n),e.setEndAfter(n),u(i,fQ(i,e,o),!0)}}else u(i,n,!0)}else a&&fL(l)&&!u7(e).length?CW(e,t,r):(s.setRng(yj(s.getRng())),ff(e,()=>{fs(e,(e,t)=>{let r=t?e:fQ(i,e,o);u(i,r,!1)})},ee),e.nodeChanged()),C9(e.formatter,t).each(t=>{ec(Er(e.selection),e=>Eq(i,e,t,r))});C3(t,e)}dT(e,t,n,r)},EW=(e,t,r,n)=>{(n||e.selection.isEditable())&&EV(e,t,r,n)},EK=e=>eq(e,"vars"),EY=(e,t)=>{e.set({}),t.on("NodeChange",r=>{EQ(t,r.element,e.get())}),t.on("FormatApply FormatRemove",r=>{let n=et.from(r.node).map(e=>fc(e)?e:e.startContainer).bind(e=>oh(e)?et.some(e):et.from(e.parentElement)).getOrThunk(()=>EG(t));EQ(t,n,e.get())})},EG=e=>e.selection.getStart(),EX=(e,t,r,n,o)=>eh(t,t=>!M(e.formatter.matchNode(t,r,null!=o?o:{},n)),t=>!!Cw(e,t,r)||!n&&I(e.formatter.matchNode(t,r,o,!0))),EZ=(e,t)=>{let r=null!=t?t:EG(e);return ef(fN(e.dom,r),e=>oh(e)&&!ox(e))},EQ=(e,t,r)=>{let n=EZ(e,t);eP(r,(r,o)=>{let l=r=>{let l=EX(e,n,o,r.similar,EK(r)?r.vars:void 0),a=l.isSome();if(r.state.get()!==a){r.state.set(a);let e=l.getOr(t);EK(r)?r.callback(a,{node:e,format:o,parents:n}):ec(r.callbacks,t=>t(a,{node:e,format:o,parents:n}))}};ec([r.withSimilar,r.withoutSimilar],l),ec(r.withVars,l)})},EJ=(e,t,r,n,o,l)=>{let a=t.get();ec(r.split(","),t=>{let r=e$(a,t).getOrThunk(()=>{let e={withSimilar:{state:o2(!1),similar:!0,callbacks:[]},withoutSimilar:{state:o2(!1),similar:!1,callbacks:[]},withVars:[]};return a[t]=e,e}),i=()=>{let r=EZ(e);return EX(e,r,t,o,l).isSome()};if(M(l)){let e=o?r.withSimilar:r.withoutSimilar;e.callbacks.push(n),1===e.callbacks.length&&e.state.set(i())}else r.withVars.push({state:o2(i()),similar:o,vars:l,callback:n})}),t.set(a)},E0=(e,t,r)=>{let n=e.get();ec(t.split(","),e=>e$(n,e).each(t=>{n[e]={withSimilar:{...t.withSimilar,callbacks:ef(t.withSimilar.callbacks,e=>e!==r)},withoutSimilar:{...t.withoutSimilar,callbacks:ef(t.withoutSimilar.callbacks,e=>e!==r)},withVars:ef(t.withVars,e=>e.callback!==r)}})),e.set(n)},E1=(e,t,r,n,o,l)=>(EJ(e,t,r,n,o,l),{unbind:()=>E0(t,r,n)}),E2=(e,t,r,n)=>{let o=e.formatter.get(t);o&&(!CA(e,t,r,n)||"toggle"in o[0]&&!o[0].toggle?EW(e,t,r,n):EP(e,t,r,n))},E3=tQ.explode,E8=()=>{let e={};return{addFilter:(t,r)=>{ec(E3(t),t=>{eq(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(r)})},getFilters:()=>eH(e),removeFilter:(t,r)=>{ec(E3(t),t=>{if(eq(e,t)){if(I(r)){let n=e[t],o=ef(n.callbacks,e=>e!==r);o.length>0?n.callbacks=o:delete e[t]}else delete e[t]}})}}},E5=(e,t)=>{ec(t,t=>{e.attr(t,null)})},E6=(e,t,r)=>{e.addNodeFilter("font",e=>{ec(e,e=>{let n=t.parse(e.attr("style")),o=e.attr("color"),l=e.attr("face"),a=e.attr("size");o&&(n.color=o),l&&(n["font-family"]=l),a&&th(a).each(e=>{n["font-size"]=r[e-1]}),e.name="span",e.attr("style",t.serialize(n)),E5(e,["color","face","size"])})})},E9=(e,t,r)=>{e.addNodeFilter("strike",e=>{let n="html4"!==t.type;ec(e,e=>{if(n)e.name="s";else{let t=r.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",r.serialize(t))}})})},E4=(e,t,r)=>{var n;let o=aw();t.convert_fonts_to_spans&&E6(e,o,tQ.explode(null!==(n=t.font_size_legacy_values)&&void 0!==n?n:"")),E9(e,r,o)},E7=(e,t,r)=>{t.inline_styles&&E4(e,t,r)},xe=e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),xt=e=>{let t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},xr=e=>{try{return decodeURIComponent(e)}catch(t){return e}},xn=e=>{let[t,...r]=e.split(","),n=r.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(!o)return et.none();{let e=";base64"===o[2],t=xr(n),r=e?xt(t):t;return et.some({type:o[1],data:r,base64Encoded:e})}},xo=(e,t,r=!0)=>{let n=t;if(r)try{n=atob(t)}catch(e){return et.none()}let o=new Uint8Array(n.length);for(let e=0;e<o.length;e++)o[e]=n.charCodeAt(e);return et.some(new Blob([o],{type:e}))},xl=e=>new Promise((t,r)=>{xn(e).bind(({type:e,data:t,base64Encoded:r})=>xo(e,t,r)).fold(()=>r("Invalid data URI"),t)}),xa=e=>ti(e,"blob:")?xe(e):ti(e,"data:")?xl(e):Promise.reject("Unknown URI format"),xi=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{t(n.result)},n.onerror=()=>{var e;r(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(e)}),xs=0,xd=e=>(e||"blobid")+xs++,xc=(e,t,r)=>xn(e).bind(({data:e,type:n,base64Encoded:o})=>t&&!o?et.none():r(o?e:btoa(e),n)),xm=(e,t,r)=>{let n=e.create(xd(),t,r);return e.add(n),n},xu=(e,t,r=!1)=>xc(t,r,(t,r)=>et.from(e.getByData(t,r)).orThunk(()=>xo(r,t).map(r=>xm(e,r,t)))),xf=(e,t)=>{let r=()=>Promise.reject("Invalid data URI");if(ti(t,"blob:")){let n=e.getByUri(t);return I(n)?Promise.resolve(n):xa(t).then(t=>xi(t).then(n=>xc(n,!1,r=>et.some(xm(e,t,r))).getOrThunk(r)))}return ti(t,"data:")?xu(e,t).fold(r,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")},xg=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,xp=e=>et.from(e.match(xg)).bind(e=>ek(e,1)).map(e=>ti(e,"www.")?e.substring(4):e),xh=(e,t)=>{et.from(e.attr("src")).bind(xp).forall(e=>!ei(t,e))&&e.attr("sandbox","")},xb=(e,t)=>ti(e,`${t}/`),xv=e=>M(e)?"iframe":xb(e,"image")?"img":xb(e,"video")?"video":xb(e,"audio")?"audio":"iframe",xy=({type:e,src:t,width:r,height:n}={},o,l)=>{let a=xv(e),i=new hh(a,1);return i.attr("audio"===a?{src:t}:{src:t,width:r,height:n}),("audio"===a||"video"===a)&&i.attr("controls",""),"iframe"===a&&o&&xh(i,l),i},xC=e=>I(e.attr("data-mce-bogus")),xE=e=>e.attr("src")===tY.transparentSrc||I(e.attr("data-mce-placeholder")),xx=(e,t)=>{let{blob_cache:r}=t;if(r){let t=e=>{let t=e.attr("src");!(xE(e)||xC(e)||F(t))&&xu(r,t,!0).each(t=>{e.attr("src",t.blobUri())})};e.addAttributeFilter("src",e=>ec(e,t))}},x_=(e,t)=>{var r,n;let o=e.schema;e.addAttributeFilter("href",e=>{let r=e.length,n=e=>e.split(" ").filter(e=>e.length>0).concat(["noopener"]).sort().join(" "),o=e=>{let t=e?tQ.trim(e):"";return/\b(noopener)\b/g.test(t)?t:n(t)};if(!t.allow_unsafe_link_target)for(;r--;){let t=e[r];"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",o(t.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t=e.length,r,n,o,l;for(;t--;)if("a"===(l=e[t]).name&&l.firstChild&&!l.attr("href"))for(o=l.parent,r=l.lastChild;r&&o;)n=r.prev,o.insert(r,l),r=n}),t.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t=e.length,r,n;for(;t--;)if((n=(r=e[t]).parent)&&("ul"===n.name||"ol"===n.name)){if(r.prev&&"li"===r.prev.name)r.prev.append(r);else{let e=new hh("li",1);e.attr("style","list-style-type: none"),r.wrap(e)}}});let l=o.getValidClasses();t.validate&&l&&e.addAttributeFilter("class",e=>{var t;let r=e.length;for(;r--;){let n=e[r],o=null!==(t=n.attr("class"))&&void 0!==t?t:"",a=tQ.explode(o," "),i="";for(let e=0;e<a.length;e++){let t=a[e],r=!1,o=l["*"];o&&o[t]&&(r=!0),o=l[n.name],!r&&o&&o[t]&&(r=!0),r&&(i&&(i+=" "),i+=t)}i.length||(i=null),n.attr("class",i)}}),xx(e,t);let a=null!==(r=t.sandbox_iframes)&&void 0!==r&&r,i=eT(null!==(n=t.sandbox_iframes_exclusions)&&void 0!==n?n:[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",e=>ec(e,e=>{e.replace(xy({type:e.attr("type"),src:"object"===e.name?e.attr("data"):e.attr("src"),width:e.attr("width"),height:e.attr("height")},a,i))})),a&&e.addNodeFilter("iframe",e=>ec(e,e=>xh(e,i)))},{entries:xw,setPrototypeOf:xS,isFrozen:xk,getPrototypeOf:xN,getOwnPropertyDescriptor:xR}=Object,{freeze:xA,seal:xD,create:xT}=Object,{apply:xO,construct:xB}="undefined"!=typeof Reflect&&Reflect;xA||(xA=function(e){return e}),xD||(xD=function(e){return e}),xO||(xO=function(e,t,r){return e.apply(t,r)}),xB||(xB=function(e,t){return new e(...t)});let xP=xY(Array.prototype.forEach),xL=xY(Array.prototype.lastIndexOf),xM=xY(Array.prototype.pop),xF=xY(Array.prototype.push),xI=xY(Array.prototype.splice),xU=xY(String.prototype.toLowerCase),xz=xY(String.prototype.toString),xj=xY(String.prototype.match),xH=xY(String.prototype.replace),x$=xY(String.prototype.indexOf),xq=xY(String.prototype.trim),xV=xY(Object.prototype.hasOwnProperty),xW=xY(RegExp.prototype.test),xK=(i=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return xB(i,t)});function xY(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return xO(e,t,n)}}function xG(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xU;xS&&xS(e,null);let n=t.length;for(;n--;){let o=t[n];if("string"==typeof o){let e=r(o);e!==o&&(xk(t)||(t[n]=e),o=e)}e[o]=!0}return e}function xX(e){let t=xT(null);for(let[r,n]of xw(e))xV(e,r)&&(Array.isArray(n)?t[r]=function(e){for(let t=0;t<e.length;t++)xV(e,t)||(e[t]=null);return e}(n):n&&"object"==typeof n&&n.constructor===Object?t[r]=xX(n):t[r]=n);return t}function xZ(e,t){for(;null!==e;){let r=xR(e,t);if(r){if(r.get)return xY(r.get);if("function"==typeof r.value)return xY(r.value)}e=xN(e)}return function(){return null}}let xQ=xA(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),xJ=xA(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),x0=xA(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),x1=xA(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),x2=xA(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),x3=xA(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),x8=xA(["#text"]),x5=xA(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),x6=xA(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),x9=xA(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),x4=xA(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),x7=xD(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_e=xD(/<%[\w\W]*|[\w\W]*%>/gm),_t=xD(/\$\{[\w\W]*/gm),_r=xD(/^data-[\-\w.\u00B7-\uFFFF]+$/),_n=xD(/^aria-[\-\w]+$/),_o=xD(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_l=xD(/^(?:\w+script|data):/i),_a=xD(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_i=xD(/^html$/i);var _s=Object.freeze({__proto__:null,ARIA_ATTR:_n,ATTR_WHITESPACE:_a,CUSTOM_ELEMENT:xD(/^[a-z][.\w]*(-[.\w]+)+$/i),DATA_ATTR:_r,DOCTYPE_NAME:_i,ERB_EXPR:_e,IS_ALLOWED_URI:_o,IS_SCRIPT_OR_DATA:_l,MUSTACHE_EXPR:x7,TMPLIT_EXPR:_t});let _d={element:1,text:3,progressingInstruction:7,comment:8,document:9},_c=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null,n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(r=t.getAttribute(n));let o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}},_m=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};var _u=function e(){let t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,n=t=>e(t);if(n.version="3.2.4",n.removed=[],!r||!r.document||r.document.nodeType!==_d.document||!r.Element)return n.isSupported=!1,n;let{document:o}=r,l=o,a=l.currentScript,{DocumentFragment:i,HTMLTemplateElement:s,Node:d,Element:c,NodeFilter:m,NamedNodeMap:u=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:f,DOMParser:g,trustedTypes:p}=r,h=c.prototype,b=xZ(h,"cloneNode"),v=xZ(h,"remove"),y=xZ(h,"nextSibling"),C=xZ(h,"childNodes"),E=xZ(h,"parentNode");if("function"==typeof s){let e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let x="",{implementation:_,createNodeIterator:w,createDocumentFragment:S,getElementsByTagName:k}=o,{importNode:N}=l,R=_m();n.isSupported="function"==typeof xw&&"function"==typeof E&&_&&void 0!==_.createHTMLDocument;let{MUSTACHE_EXPR:A,ERB_EXPR:D,TMPLIT_EXPR:T,DATA_ATTR:O,ARIA_ATTR:B,IS_SCRIPT_OR_DATA:P,ATTR_WHITESPACE:L,CUSTOM_ELEMENT:M}=_s,{IS_ALLOWED_URI:F}=_s,I=null,U=xG({},[...xQ,...xJ,...x0,...x2,...x8]),z=null,j=xG({},[...x5,...x6,...x9,...x4]),H=Object.seal(xT(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,q=null,V=!0,W=!0,K=!1,Y=!0,G=!1,X=!0,Z=!1,Q=!1,J=!1,ee=!1,et=!1,er=!1,en=!0,eo=!1,el=!0,ea=!1,ei={},es=null,ed=xG({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ec=null,em=xG({},["audio","video","img","source","image","track"]),eu=null,ef=xG({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eg="http://www.w3.org/1998/Math/MathML",ep="http://www.w3.org/2000/svg",eh="http://www.w3.org/1999/xhtml",eb=eh,ev=!1,ey=null,eC=xG({},[eg,ep,eh],xz),eE=xG({},["mi","mo","mn","ms","mtext"]),ex=xG({},["annotation-xml"]),e_=xG({},["title","style","font","a","script"]),ew=null,eS=["application/xhtml+xml","text/html"],ek=null,eN=null,eR=o.createElement("form"),eA=function(e){return e instanceof RegExp||e instanceof Function},eD=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!eN||eN!==e){if(e&&"object"==typeof e||(e={}),e=xX(e),ek="application/xhtml+xml"===(ew=-1===eS.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?xz:xU,I=xV(e,"ALLOWED_TAGS")?xG({},e.ALLOWED_TAGS,ek):U,z=xV(e,"ALLOWED_ATTR")?xG({},e.ALLOWED_ATTR,ek):j,ey=xV(e,"ALLOWED_NAMESPACES")?xG({},e.ALLOWED_NAMESPACES,xz):eC,eu=xV(e,"ADD_URI_SAFE_ATTR")?xG(xX(ef),e.ADD_URI_SAFE_ATTR,ek):ef,ec=xV(e,"ADD_DATA_URI_TAGS")?xG(xX(em),e.ADD_DATA_URI_TAGS,ek):em,es=xV(e,"FORBID_CONTENTS")?xG({},e.FORBID_CONTENTS,ek):ed,$=xV(e,"FORBID_TAGS")?xG({},e.FORBID_TAGS,ek):{},q=xV(e,"FORBID_ATTR")?xG({},e.FORBID_ATTR,ek):{},ei=!!xV(e,"USE_PROFILES")&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,W=!1!==e.ALLOW_DATA_ATTR,K=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,G=e.SAFE_FOR_TEMPLATES||!1,X=!1!==e.SAFE_FOR_XML,Z=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,et=e.RETURN_DOM_FRAGMENT||!1,er=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,en=!1!==e.SANITIZE_DOM,eo=e.SANITIZE_NAMED_PROPS||!1,el=!1!==e.KEEP_CONTENT,ea=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||_o,eb=e.NAMESPACE||eh,eE=e.MATHML_TEXT_INTEGRATION_POINTS||eE,ex=e.HTML_INTEGRATION_POINTS||ex,H=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&eA(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&eA(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&(W=!1),et&&(ee=!0),ei&&(I=xG({},x8),z=[],!0===ei.html&&(xG(I,xQ),xG(z,x5)),!0===ei.svg&&(xG(I,xJ),xG(z,x6),xG(z,x4)),!0===ei.svgFilters&&(xG(I,x0),xG(z,x6),xG(z,x4)),!0===ei.mathMl&&(xG(I,x2),xG(z,x9),xG(z,x4))),e.ADD_TAGS&&(I===U&&(I=xX(I)),xG(I,e.ADD_TAGS,ek)),e.ADD_ATTR&&(z===j&&(z=xX(z)),xG(z,e.ADD_ATTR,ek)),e.ADD_URI_SAFE_ATTR&&xG(eu,e.ADD_URI_SAFE_ATTR,ek),e.FORBID_CONTENTS&&(es===ed&&(es=xX(es)),xG(es,e.FORBID_CONTENTS,ek)),el&&(I["#text"]=!0),Z&&xG(I,["html","head","body"]),I.table&&(xG(I,["tbody"]),delete $.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw xK('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw xK('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=(t=e.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===t&&(t=_c(p,a)),null!==t&&"string"==typeof x&&(x=t.createHTML(""));xA&&xA(e),eN=e}},eT=xG({},[...xJ,...x0,...x1]),eO=xG({},[...x2,...x3]),eB=function(e){let t=E(e);t&&t.tagName||(t={namespaceURI:eb,tagName:"template"});let r=xU(e.tagName),n=xU(t.tagName);return!!ey[e.namespaceURI]&&(e.namespaceURI===ep?t.namespaceURI===eh?"svg"===r:t.namespaceURI===eg?"svg"===r&&("annotation-xml"===n||eE[n]):!!eT[r]:e.namespaceURI===eg?t.namespaceURI===eh?"math"===r:t.namespaceURI===ep?"math"===r&&ex[n]:!!eO[r]:e.namespaceURI===eh?(t.namespaceURI!==ep||!!ex[n])&&(t.namespaceURI!==eg||!!eE[n])&&!eO[r]&&(e_[r]||!eT[r]):"application/xhtml+xml"===ew&&!!ey[e.namespaceURI])},eP=function(e){xF(n.removed,{element:e});try{E(e).removeChild(e)}catch(t){v(e)}},eL=function(e,t){try{xF(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){xF(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e){if(ee||et)try{eP(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}},eM=function(e){let r=null,n=null;if(J)e="<remove></remove>"+e;else{let t=xj(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ew&&eb===eh&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let l=t?t.createHTML(e):e;if(eb===eh)try{r=new g().parseFromString(l,ew)}catch(e){}if(!r||!r.documentElement){r=_.createDocument(eb,"template",null);try{r.documentElement.innerHTML=ev?x:l}catch(e){}}let a=r.body||r.documentElement;return(e&&n&&a.insertBefore(o.createTextNode(n),a.childNodes[0]||null),eb===eh)?k.call(r,Z?"html":"body")[0]:Z?r.documentElement:a},eF=function(e){return w.call(e.ownerDocument||e,e,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT|m.SHOW_PROCESSING_INSTRUCTION|m.SHOW_CDATA_SECTION,null)},eI=function(e){return e instanceof f&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},eU=function(e){return"function"==typeof d&&e instanceof d};function ez(e,t,r){xP(e,e=>{e.call(n,t,r,eN)})}let ej=function(e){let t=null;if(ez(R.beforeSanitizeElements,e,null),eI(e))return eP(e),!0;let r=ek(e.nodeName);if(ez(R.uponSanitizeElement,e,{tagName:r,allowedTags:I}),e.hasChildNodes()&&!eU(e.firstElementChild)&&xW(/<[/\w]/g,e.innerHTML)&&xW(/<[/\w]/g,e.textContent)||e.nodeType===_d.progressingInstruction||X&&e.nodeType===_d.comment&&xW(/<[/\w]/g,e.data))return eP(e),!0;if(!I[r]||$[r]){if(!$[r]&&e$(r)&&(H.tagNameCheck instanceof RegExp&&xW(H.tagNameCheck,r)||H.tagNameCheck instanceof Function&&H.tagNameCheck(r)))return!1;if(el&&!es[r]){let t=E(e)||e.parentNode,r=C(e)||e.childNodes;if(r&&t){let n=r.length;for(let o=n-1;o>=0;--o){let n=b(r[o],!0);n.__removalCount=(e.__removalCount||0)+1,t.insertBefore(n,y(e))}}}return eP(e),!0}return e instanceof c&&!eB(e)||("noscript"===r||"noembed"===r||"noframes"===r)&&xW(/<\/no(script|embed|frames)/i,e.innerHTML)?(eP(e),!0):(G&&e.nodeType===_d.text&&(t=e.textContent,xP([A,D,T],e=>{t=xH(t,e," ")}),e.textContent!==t&&(xF(n.removed,{element:e.cloneNode()}),e.textContent=t)),ez(R.afterSanitizeElements,e,null),!1)},eH=function(e,t,r){if(en&&("id"===t||"name"===t)&&(r in o||r in eR))return!1;if(W&&!q[t]&&xW(O,t));else if(V&&xW(B,t));else if(!z[t]||q[t]){if(!(e$(e)&&(H.tagNameCheck instanceof RegExp&&xW(H.tagNameCheck,e)||H.tagNameCheck instanceof Function&&H.tagNameCheck(e))&&(H.attributeNameCheck instanceof RegExp&&xW(H.attributeNameCheck,t)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(t))||"is"===t&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&xW(H.tagNameCheck,r)||H.tagNameCheck instanceof Function&&H.tagNameCheck(r))))return!1}else if(eu[t]);else if(xW(F,xH(r,L,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===x$(r,"data:")&&ec[e]);else if(K&&!xW(P,xH(r,L,"")));else if(r)return!1;return!0},e$=function(e){return"annotation-xml"!==e&&xj(e,M)},eq=function(e){ez(R.beforeSanitizeAttributes,e,null);let{attributes:r}=e;if(!r||eI(e))return;let o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0},l=r.length;for(;l--;){let{name:a,namespaceURI:i,value:s}=r[l],d=ek(a),c="value"===a?s:xq(s),m=c;if(o.attrName=d,o.attrValue=c,o.keepAttr=!0,o.forceKeepAttr=void 0,ez(R.uponSanitizeAttribute,e,o),c=o.attrValue,eo&&("id"===d||"name"===d)&&(eL(a,e),c="user-content-"+c),X&&xW(/((--!?|])>)|<\/(style|title)/i,c)){eL(a,e);continue}if(o.forceKeepAttr)continue;if(!o.keepAttr||!Y&&xW(/\/>/i,c)){eL(a,e);continue}G&&xP([A,D,T],e=>{c=xH(c,e," ")});let u=ek(e.nodeName);if(!eH(u,d,c)){eL(a,e);continue}if(t&&"object"==typeof p&&"function"==typeof p.getAttributeType){if(i);else switch(p.getAttributeType(u,d)){case"TrustedHTML":c=t.createHTML(c);break;case"TrustedScriptURL":c=t.createScriptURL(c)}}if(c!==m)try{i?e.setAttributeNS(i,a,c):e.setAttribute(a,c),eI(e)?eP(e):xM(n.removed)}catch(e){}}ez(R.afterSanitizeAttributes,e,null)},eV=function e(t){let r=null,n=eF(t);for(ez(R.beforeSanitizeShadowDOM,t,null);r=n.nextNode();)ez(R.uponSanitizeShadowNode,r,null),ej(r),eq(r),r.content instanceof i&&e(r.content);ez(R.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null,a=null,s=null,c=null;if((ev=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!eU(e)){if("function"==typeof e.toString){if("string"!=typeof(e=e.toString()))throw xK("dirty is not a string, aborting")}else throw xK("toString is not a function")}if(!n.isSupported)return e;if(Q||eD(r),n.removed=[],"string"==typeof e&&(ea=!1),ea){if(e.nodeName){let t=ek(e.nodeName);if(!I[t]||$[t])throw xK("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof d)(a=(o=eM("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType===_d.element&&"BODY"===a.nodeName?o=a:"HTML"===a.nodeName?o=a:o.appendChild(a);else{if(!ee&&!G&&!Z&&-1===e.indexOf("<"))return t&&er?t.createHTML(e):e;if(!(o=eM(e)))return ee?null:er?x:""}o&&J&&eP(o.firstChild);let m=eF(ea?e:o);for(;s=m.nextNode();)ej(s),eq(s),s.content instanceof i&&eV(s.content);if(ea)return e;if(ee){if(et)for(c=S.call(o.ownerDocument);o.firstChild;)c.appendChild(o.firstChild);else c=o;return(z.shadowroot||z.shadowrootmode)&&(c=N.call(l,c,!0)),c}let u=Z?o.outerHTML:o.innerHTML;return Z&&I["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&xW(_i,o.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+u),G&&xP([A,D,T],e=>{u=xH(u,e," ")}),t&&er?t.createHTML(u):u},n.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eD(e),Q=!0},n.clearConfig=function(){eN=null,Q=!1},n.isValidAttribute=function(e,t,r){return eN||eD({}),eH(ek(e),ek(t),r)},n.addHook=function(e,t){"function"==typeof t&&xF(R[e],t)},n.removeHook=function(e,t){if(void 0!==t){let r=xL(R[e],t);return -1===r?void 0:xI(R[e],r,1)[0]}return xM(R[e])},n.removeHooks=function(e){R[e]=[]},n.removeAllHooks=function(){R=_m()},n}();let _f=tQ.each,_g=tQ.trim,_p=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_h={ftp:21,http:80,https:443,mailto:25},_b=["img","video"],_v=(e,t)=>I(e)?!e:!I(t)||!ei(_b,t),_y=e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}},_C=(e,t,r)=>{let n=_y(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(n)||!e.allow_html_data_urls&&(/^data:image\//i.test(n)?_v(e.allow_svg_data_urls,r)&&/^data:image\/svg\+xml/i.test(n):/^data:/i.test(n)))};class _E{static parseDataUri(e){let t;let r=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(r[0]);return n&&(t=n[1]),{type:t,data:r[1]}}static isDomSafe(e,t,r={}){return!!r.allow_script_urls||!_C(r,lG.decode(e).replace(/[\s\u0000-\u001F]+/g,""),t)}static getDocumentBaseUrl(e){var t;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,t={}){this.path="",this.directory="",e=_g(e),this.settings=t;let r=t.base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){n.source=e;return}let o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){let t=r?r.path:new _E(document.location.href).directory;if((null==r?void 0:r.protocol)==="")e="//mce_host"+n.toAbsPath(t,e);else{let o=/([^#?]*)([#?]?.*)/.exec(e);o&&(e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(t,o[1])+o[2])}}e=e.replace(/@@/g,"(mce_at)");let l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);l&&_f(_p,(e,t)=>{let r=l[t];r&&(r=r.replace(/\(mce_at\)/g,"@@")),n[e]=r}),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}setPath(e){let t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;let t=new _E(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();let r=this.getURI(),n=t.getURI();if(r===n||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===n)return r;let o=this.toRelPath(this.path,t.path);return t.query&&(o+="?"+t.query),t.anchor&&(o+="#"+t.anchor),o}toAbsolute(e,t){let r=new _E(e,{base_uri:this});return r.getURI(t&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;let t=this.protocol?_h[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let r=0,n="",o,l,a=e.substring(0,e.lastIndexOf("/")).split("/"),i=t.split("/");if(a.length>=i.length){for(o=0,l=a.length;o<l;o++)if(o>=i.length||a[o]!==i[o]){r=o+1;break}}if(a.length<i.length){for(o=0,l=i.length;o<l;o++)if(o>=a.length||a[o]!==i[o]){r=o+1;break}}if(1===r)return t;for(o=0,l=a.length-(r-1);o<l;o++)n+="../";for(o=r-1,l=i.length;o<l;o++)o!==r-1?n+="/"+i[o]:n+=i[o];return n}toAbsPath(e,t){let r,n=0,o=/\/$/.test(t)?"/":"",l=e.split("/"),a=t.split("/"),i=[];_f(l,e=>{e&&i.push(e)});let s=[];for(let e=a.length-1;e>=0;e--)if(0!==a[e].length&&"."!==a[e]){if(".."===a[e]){n++;continue}if(n>0){n--;continue}s.push(a[e])}let d=i.length-n;return 0!==(r=d<=0?ex(s).join("/"):i.slice(0,d).join("/")+"/"+ex(s).join("/")).indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r}getURI(e=!1){let t;return(!this.source||e)&&(t="",!e&&(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}let _x=tQ.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),__="data-mce-type",_w=0,_S=(e,t,r,n,o)=>{var l,a,i,s;let d=t.validate,c=r.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(l=e.nodeValue)&&void 0!==l?l:"")&&(e.nodeValue=" "+e.nodeValue);let m=null!==(a=null==o?void 0:o.tagName)&&void 0!==a?a:e.nodeName.toLowerCase();if("html"!==n&&r.isValid(n)){I(o)&&(o.allowedTags[m]=!0);return}if(1!==e.nodeType||"body"===m)return;let u=rM.fromDom(e),f=rv(u,__),g=rh(u,"data-mce-bogus");if(!f&&D(g)){"all"===g?nU(u):nz(u);return}let p=r.getElementRule(m);if(d&&!p){eq(c,m)?nU(u):nz(u);return}if(I(o)&&(o.allowedTags[m]=!0),d&&p&&!f){if(ec(null!==(i=p.attributesForced)&&void 0!==i?i:[],e=>{rg(u,e.name,"{$uid}"===e.value?`mce_${_w++}`:e.value)}),ec(null!==(s=p.attributesDefault)&&void 0!==s?s:[],e=>{rv(u,e.name)||rg(u,e.name,"{$uid}"===e.value?`mce_${_w++}`:e.value)}),p.attributesRequired&&!es(p.attributesRequired,e=>rv(u,e))||p.removeEmptyAttrs&&rC(u)){nz(u);return}p.outputName&&p.outputName!==m&&ik(u,p.outputName)}},_k=(e,t,r,n,o)=>{let l=e.tagName.toLowerCase(),{attrName:a,attrValue:i}=o;o.keepAttr=_N(t,r,n,l,a,i),o.keepAttr?(o.allowedAttributes[a]=!0,_A(a,r)&&(o.attrValue=a),t.allow_svg_data_urls&&ti(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):_R(e,a)&&(o.forceKeepAttr=!0)},_N=(e,t,r,n,o,l)=>!("html"===r||o9(n))||!(o in _x&&_C(e,l,n))&&(!e.validate||t.isValid(n,o)||ti(o,"data-")||ti(o,"aria-")),_R=(e,t)=>e.hasAttribute(__)&&("id"===t||"class"===t||"style"===t),_A=(e,t)=>e in t.getBoolAttrs(),_D=(e,t,r,n)=>{let{attributes:o}=e;for(let l=o.length-1;l>=0;l--){let a=o[l],i=a.name,s=a.value;_N(t,r,n,e.tagName.toLowerCase(),i,s)||_R(e,i)?_A(i,r)&&e.setAttribute(i,i):e.removeAttribute(i)}},_T=(e,t,r)=>{let n=_u();return n.addHook("uponSanitizeElement",(n,o)=>{_S(n,e,t,r.track(n),o)}),n.addHook("uponSanitizeAttribute",(n,o)=>{_k(n,e,t,r.current(),o)}),n},_O=(e,t)=>{let r={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},_B=e=>{let t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(e=>`xlink:${e}`);_u().sanitize(e,{IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t})},_P=(e,t)=>{let r=_u(),n=t.allow_mathml_annotation_encodings,o=B(n)&&n.length>0,l=e=>{let t=e.getAttribute("encoding");return o&&D(t)&&ei(n,t)},a=(e,r)=>o&&"semantics"===r?et.some(!0):"annotation"===r?et.some(oh(e)&&l(e)):B(t.extended_mathml_elements)?t.extended_mathml_elements.includes(r)?et.from(!0):et.none():et.none();r.addHook("uponSanitizeElement",(e,r)=>{var n;let o=null!==(n=r.tagName)&&void 0!==n?n:e.nodeName.toLowerCase();a(e,o).each(n=>{r.allowedTags[o]=n,!n&&t.sanitize&&oh(e)&&e.remove()})}),r.addHook("uponSanitizeAttribute",(e,r)=>{B(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(r.attrName)&&(r.forceKeepAttr=!0)}),r.sanitize(e,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})},_L=e=>t=>{let r=o7(t);if("svg"===r)_B(t);else if("math"===r)_P(t,e);else throw Error("Not a namespace element")},_M=(e,t)=>{let r=lt();if(!e.sanitize)return{sanitizeHtmlElement:(n,o)=>{let l;let a=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);for(;l=a.nextNode();){let n=r.track(l);_S(l,e,t,n),oh(l)&&_D(l,e,t,n)}r.reset()},sanitizeNamespaceElement:H};{let n=_T(e,t,r);return{sanitizeHtmlElement:(t,o)=>{n.sanitize(t,_O(e,o)),n.removed=[],r.reset()},sanitizeNamespaceElement:_L(e)}}},_F=tQ.makeMap,_I=tQ.extend,_U=(e,t,r,n)=>{let o=e.name,l=o in r&&"title"!==o&&"textarea"!==o&&"noscript"!==o,a=t.childNodes;for(let t=0,o=a.length;t<o;t++){let o=a[t],i=new hh(o.nodeName.toLowerCase(),o.nodeType);if(oh(o)){let e=o.attributes;for(let t=0,r=e.length;t<r;t++){let r=e[t];i.attr(r.name,r.value)}o9(i.name)&&(n(o),i.value=o.innerHTML)}else oN(o)?(i.value=o.data,l&&(i.raw=!0)):(oD(o)||oR(o)||oA(o))&&(i.value=o.data);o9(i.name)||_U(i,o,r,n),e.append(i)}},_z=(e,t,r)=>{let n=[];for(let r=e,o=r;r;o=r,r=r.walk()){let l=r;ec(t,e=>e(l)),F(l.parent)&&l!==e?r=o:n.push(l)}for(let e=n.length-1;e>=0;e--){let t=n[e];ec(r,e=>e(t))}},_j=(e,t,r,n)=>{let o=r.validate,l=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=_I(_F("script,style,head,html,body,title,meta,param"),t.getBlockElements()),s=ad(t),d=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,u=e=>{let t=e.parent;for(;I(t);){if(t.name in a)return!0;t=t.parent}return!1},f=e=>{let r=e;for(;I(r);){if(r.name in s)return yO(t,l,a,r);r=r.parent}return!1},g=r=>r.name in i||ly(t,r)||o9(r.name)&&r.parent===e,p=(t,r)=>!(I(r?t.prev:t.next)||F(t.parent))&&g(t.parent)&&(t.parent!==e||!0===n.isRootContent);return[e=>{var t;if(3===e.type&&!u(e)){let r=null!==(t=e.value)&&void 0!==t?t:"";r=r.replace(d," "),(yB(e.prev,g)||p(e,!0))&&(r=r.replace(c,"")),0===r.length?e.remove():" "===r&&e.prev&&8===e.prev.type&&e.next&&8===e.next.type?e.remove():e.value=r}},e=>{var i;if(1===e.type){let i=t.getElementRule(e.name);if(o&&i){let o=yO(t,l,a,e);i.paddInEmptyBlock&&o&&f(e)?yR(r,n,g,e):i.removeEmpty&&o?g(e)?e.remove():e.unwrap():i.paddEmpty&&(o||yA(e))&&yR(r,n,g,e)}}else if(3===e.type&&!u(e)){let t=null!==(i=e.value)&&void 0!==i?i:"";(e.next&&g(e.next)||p(e,!1))&&(t=t.replace(m,"")),0===t.length?e.remove():e.value=t}}]},_H=(e,t)=>{var r;let n=null!==(r=t.forced_root_block)&&void 0!==r?r:e.forced_root_block;return!1===n?"":!0===n?"p":n},_$=(e={},t=am())=>{let r=E8(),n=E8(),o={validate:!0,root_name:"body",sanitize:!0,...e},l=new DOMParser,a=_M(o,t),i=(e,r,n="html")=>{let o="xhtml"===n?"application/xhtml+xml":"text/html",i=eq(t.getSpecialElements(),r.toLowerCase()),s=i?`<${r}>${e}</${r}>`:e,d=l.parseFromString("xhtml"===n?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${s}</body></html>`:/^[\s]*<head/i.test(e)||/^[\s]*<html/i.test(e)||/^[\s]*<!DOCTYPE/i.test(e)?`<html>${s}</html>`:`<body>${s}</body>`,o).body;return a.sanitizeHtmlElement(d,o),i?d.firstChild:d},s=r.addFilter,d=r.getFilters,c=r.removeFilter,m=n.addFilter,u=n.getFilters,f=n.removeFilter,g=(e,r)=>{yI(t,e)&&r.push(e)},p=(e,r)=>{let n=D(r.attr(__)),o=1===r.type&&!eq(e,r.name)&&!ly(t,r)&&!o9(r.name);return 3===r.type||o&&!n},h=(e,r)=>{let n=_I(_F("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=/^[ \t\r\n]+/,a=/[ \t\r\n]+$/,i=e.firstChild,s=null,d=e=>{var t,r;e&&((i=e.firstChild)&&3===i.type&&(i.value=null===(t=i.value)||void 0===t?void 0:t.replace(l,"")),(i=e.lastChild)&&3===i.type&&(i.value=null===(r=i.value)||void 0===r?void 0:r.replace(a,"")))};if(t.isValidChild(e.name,r.toLowerCase())){for(;i;){let t=i.next;p(n,i)?(s||((s=new hh(r,1)).attr(o.forced_root_block_attrs),e.insert(s,i)),s.append(i)):(d(s),s=null),i=t}d(s)}},b={schema:t,addAttributeFilter:m,getAttributeFilters:u,removeAttributeFilter:f,addNodeFilter:s,getNodeFilters:d,removeNodeFilter:c,parse:(e,r={})=>{var n;let l=o.validate,s=null!==(n=r.context)&&void 0!==n?n:o.root_name,c=i(e,s,r.format);lm(t,c);let m=new hh(s,11);_U(m,c,t.getSpecialElements(),a.sanitizeNamespaceElement),c.innerHTML="";let[f,p]=_j(m,t,o,r),b=[],v={nodes:{},attributes:{}},y=e=>yw(d(),u(),e,v);if(_z(m,[f,y],[p,l?e=>g(e,b):H]),b.reverse(),l&&b.length>0){if(r.context){let{pass:e,fail:n}=eu(b,e=>e.parent===m);yM(n,t,m,y),r.invalid=e.length>0}else yM(b,t,m,y)}let C=_H(o,r);return C&&("body"===m.name||r.isRootContent)&&h(m,C),r.invalid||yk(v,r),m}};return x_(b,o),E7(b,o,t),b},_q=e=>Cp(e)?hU({validate:!1}).serialize(e):e,_V=(e,t,r)=>{let n=_q(e),o=t(n);if(o.isDefaultPrevented()||!Cp(e))return o;if(o.content===n)return{...o,content:e};{let t=_$({validate:!1,forced_root_block:!1,...r}).parse(o.content,{context:e.name});return{...o,content:t}}},_W=e=>({sanitize:mv(e),sandbox_iframes:mR(e),sandbox_iframes_exclusions:mA(e)}),_K=(e,t)=>{if(t.no_events)return da.value(t);{let r=dL(e,t);return r.isDefaultPrevented()?da.error(dM(e,{content:"",...r}).content):da.value(r)}},_Y=(e,t,r)=>r.no_events?t:_V(t,t=>dM(e,{...r,content:t}),_W(e)).content,_G=(e,t)=>{if(t.no_events)return da.value(t);{let r=_V(t.content,r=>dB(e,{...t,content:r}),_W(e));return r.isDefaultPrevented()?(dP(e,r),da.error(void 0)):da.value(r)}},_X=(e,t,r)=>{r.no_events||dP(e,{...r,content:t})},_Z=(e,t,r)=>({element:e,width:t,rows:r}),_Q=(e,t)=>({element:e,cells:t}),_J=(e,t)=>({x:e,y:t}),_0=(e,t)=>rb(e,t).bind(th).getOr(1),_1=(e,t,r,n,o)=>{let l=_0(o,"rowspan"),a=_0(o,"colspan"),i=e.rows;for(let e=r;e<r+l;e++){i[e]||(i[e]=_Q(iw(n),[]));for(let n=t;n<t+a;n++)i[e].cells[n]=e===r&&n===t?o:i_(o)}},_2=(e,t,r)=>{let n=e.rows;return!!(n[r]?n[r].cells:[])[t]},_3=(e,t,r)=>{for(;_2(e,t,r);)t++;return t},_8=e=>ep(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),_5=(e,t)=>{let r=e.rows;for(let e=0;e<r.length;e++){let n=r[e].cells;for(let r=0;r<n.length;r++)if(rH(n[r],t))return et.some(_J(r,e))}return et.none()},_6=(e,t,r,n,o)=>{let l=[],a=e.rows;for(let e=r;e<=o;e++){let r=a[e].cells,o=t<n?r.slice(t,n+1):r.slice(n,t+1);l.push(_Q(a[e].element,o))}return l},_9=(e,t,r)=>{let n=t.x,o=t.y,l=r.x,a=r.y,i=o<a?_6(e,n,o,l,a):_6(e,n,a,l,o);return _Z(e.element,_8(i),i)},_4=(e,t)=>{let r=i_(e.element),n=rM.fromTag("tbody");return nF(n,t),nP(r,n),r},_7=e=>ed(e.rows,e=>{let t=ed(e.cells,e=>{let t=iw(e);return ry(t,"colspan"),ry(t,"rowspan"),t}),r=i_(e.element);return nF(r,t),r}),we=e=>{let t=_Z(i_(e),0,[]);return ec(ot(e,"tr"),(e,r)=>{ec(ot(e,"td,th"),(n,o)=>{_1(t,_3(t,o,r),r,e,n)})}),_Z(t.element,_8(t.rows),t.rows)},wt=e=>_4(e,_7(e)),wr=(e,t,r)=>_5(e,t).bind(t=>_5(e,r).map(r=>_9(e,t,r))),wn=e=>eb(e,e=>"ul"===rn(e)||"ol"===rn(e)),wo=(e,t)=>eb(e,e=>"li"===rn(e)&&fl(e,t)).fold(V([]),t=>wn(e).map(e=>{let t=rM.fromTag(rn(e));return nw(t,ez(nR(e),(e,t)=>ti(t,"list-style"))),[rM.fromTag("li"),t]}).getOr([])),wl=(e,t)=>{let r=ep(t,(e,t)=>(nP(t,e),t),e);return t.length>0?pE([r]):r},wa=e=>iI(e)?rY(e).filter(iF).fold(V([]),t=>[e,t]):iF(e)?[e]:[],wi=(e,t,r)=>{let n=rM.fromDom(t.commonAncestorContainer),o=bl(n,e),l=ef(o,e=>r.isWrapper(rn(e))),a=wo(o,t);return ed(l.concat(a.length?a:wa(n)),i_)},ws=()=>pE([]),wd=(e,t,r)=>wl(rM.fromDom(t.cloneContents()),wi(e,t,r)),wc=(e,t)=>nf(t,"table",Y(rH,e)),wm=(e,t)=>wc(e,t[0]).bind(e=>{let r=t[0],n=t[t.length-1];return wr(we(e),r,n).map(e=>pE([wt(e)]))}).getOrThunk(ws),wu=(e,t,r)=>t.length>0&&t[0].collapsed?ws():wd(e,t[0],r),wf=(e,t,r)=>{let n=u4(t,e);return n.length>0?wm(e,n):wu(e,t,r)},wg=(e,t)=>t>=0&&t<e.length&&u1(e.charAt(t)),wp=e=>iK(e.innerText),wh=e=>e.map(e=>e.nodeName).getOr("div").toLowerCase(),wb=e=>et.from(e.selection.getRng()).map(t=>{var r;let n=et.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),l=wh(n),a=rM.fromDom(t.cloneContents());hT(a),hO(a);let i=e.dom.add(o,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),s=wp(i),d=iK(null!==(r=i.textContent)&&void 0!==r?r:"");if(e.dom.remove(i),!(wg(d,0)||wg(d,d.length-1)))return s;{let e=wp(n.getOr(o)),t=e.indexOf(s);if(-1===t)return s;{let r=wg(e,t-1),n=wg(e,t+s.length);return(r?" ":"")+s+(n?" ":"")}}}).getOr(""),wv=(e,t)=>{let r=e.selection.getRng(),n=e.dom.create("body"),o=e.selection.getSel(),l=hm(e,u3(o)),a=t.contextual?wf(rM.fromDom(e.getBody()),l,e.schema).dom:r.cloneContents();return a&&n.appendChild(a),e.selection.serializer.serialize(n,t)},wy=(e,t)=>{if("text"===t.format)return wb(e);{let r=wv(e,t);return"tree"===t.format?r:e.selection.isCollapsed()?"":r}},wC=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),wE=(e,t,r={})=>_K(e,wC(r,t)).fold(W,t=>{let r=wy(e,t);return _Y(e,r,t)}),wx=(e,t)=>{let r=e.length+t.length+2,n=Array(r),o=Array(r),l=(e,t,r)=>({start:e,end:t,diag:r}),a=(r,n,o,l,i)=>{let d=s(r,n,o,l);if(null===d||d.start===n&&d.diag===n-l||d.end===r&&d.diag===r-o){let a=r,s=o;for(;a<n||s<l;)a<n&&s<l&&e[a]===t[s]?(i.push([0,e[a]]),++a,++s):n-r>l-o?(i.push([2,e[a]]),++a):(i.push([1,t[s]]),++s)}else{a(r,d.start,o,d.start-d.diag,i);for(let t=d.start;t<d.end;++t)i.push([0,e[t]]);a(d.end,n,d.end-d.diag,l,i)}},i=(r,n,o,a)=>{let i=r;for(;i-n<a&&i<o&&e[i]===t[i-n];)++i;return l(r,i,n)},s=(r,l,a,s)=>{let d,c,m,u,f;let g=l-r,p=s-a;if(0===g||0===p)return null;let h=g-p,b=p+g,v=(b%2==0?b:b+1)/2;for(d=0,n[1+v]=r,o[1+v]=l+1;d<=v;++d){for(c=-d;c<=d;c+=2){for(m=c+v,c===-d||c!==d&&n[m-1]<n[m+1]?n[m]=n[m+1]:n[m]=n[m-1]+1,f=(u=n[m])-r+a-c;u<l&&f<s&&e[u]===t[f];)n[m]=++u,++f;if(h%2!=0&&h-d<=c&&c<=h+d&&o[m-h]<=n[m])return i(o[m-h],c+r-a,l,s)}for(c=h-d;c<=h+d;c+=2){for(m=c+v-h,c===h-d||c!==h+d&&o[m+1]<=o[m-1]?o[m]=o[m+1]-1:o[m]=o[m-1],f=(u=o[m]-1)-r+a-c;u>=r&&f>=a&&e[u]===t[f];)o[m]=u--,f--;if(h%2==0&&-d<=c&&c<=d&&o[m]<=n[m+h])return i(o[m],c+r-a,l,s)}}return null},d=[];return a(0,e.length,0,t.length,d),d},w_=e=>oh(e)?e.outerHTML:oN(e)?lG.encodeRaw(e.data,!1):oD(e)?"\x3c!--"+e.data+"--\x3e":"",ww=e=>{let t;let r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n},wS=(e,t,r)=>{let n=ww(t);if(e.hasChildNodes()&&r<e.childNodes.length){let t=e.childNodes[r];e.insertBefore(n,t)}else e.appendChild(n)},wk=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){let r=e.childNodes[t];e.removeChild(r)}},wN=(e,t)=>{let r=0;ec(e,e=>{0===e[0]?r++:1===e[0]?(wS(t,e[1],r),r++):2===e[0]&&wk(t,r)})},wR=(e,t)=>ef(ed(eA(e.childNodes),t?$(iK,w_):w_),e=>e.length>0),wA=(e,t)=>(wN(wx(ed(eA(t.childNodes),w_),e),t),t),wD=e2(()=>document.implementation.createHTMLDocument("undo")),wT=e=>null!==e.querySelector("iframe"),wO=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),wB=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),wP=e=>{let t=e.serializer.getTempAttrs(),r=hD(e.getBody(),t);return wT(r)?wO(wR(r,!0)):wB(iK(r.innerHTML))},wL=(e,t,r)=>{let n=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?wA(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!(I(n)&&uM(n))||!n.isFakeCaret}),n&&(e.selection.moveToBookmark(n),e.selection.scrollIntoView())},wM=e=>"fragmented"===e.type?e.fragments.join(""):e.content,wF=e=>{let t=rM.fromTag("body",wD());return nq(t,wM(e)),ec(ot(t,"*[data-mce-bogus]"),nz),n$(t)},wI=(e,t)=>wM(e)===wM(t),wU=(e,t)=>wF(e)===wF(t),wz=(e,t)=>!!e&&!!t&&(!!wI(e,t)||wU(e,t)),wj=e=>0===e.get(),wH=(e,t,r)=>{wj(r)&&(e.typing=t)},w$=(e,t)=>{e.typing&&(wH(e,!1,t),e.add())},wq=e=>{e.typing&&(e.typing=!1,e.add())},wV=(e,t,r)=>{wj(t)&&r.set(dl(e.selection))},wW=(e,t,r,n,o,l,a)=>{let i=wP(e),s=tQ.extend(l||{},i);if(!wj(n)||e.removed)return null;let d=t.data[r.get()];if(e.dispatch("BeforeAddUndo",{level:s,lastLevel:d,originalEvent:a}).isDefaultPrevented()||d&&wz(d,s))return null;t.data[r.get()]&&o.get().each(e=>{t.data[r.get()].beforeBookmark=e});let c=cV(e);if(c&&t.data.length>c){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,r.set(t.data.length)}s.bookmark=dl(e.selection),r.get()<t.data.length-1&&(t.data.length=r.get()+1),t.data.push(s),r.set(t.data.length-1);let m={level:s,lastLevel:d,originalEvent:a};return r.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",m),e.dispatch("change",m)):e.dispatch("AddUndo",m),s},wK=(e,t,r)=>{t.data=[],r.set(0),t.typing=!1,e.dispatch("ClearUndos")},wY=(e,t,r,n,o)=>{if(t.transact(n)){let n=t.data[r.get()].bookmark;wL(e,t.data[r.get()-1],!0),t.transact(o)&&(t.data[r.get()-1].beforeBookmark=n)}},wG=(e,t,r)=>{let n;return t.get()<r.length-1&&(t.set(t.get()+1),wL(e,n=r[t.get()],!1),e.setDirty(!0),e.dispatch("Redo",{level:n})),n},wX=(e,t,r,n)=>{let o;return t.typing&&(t.add(),t.typing=!1,wH(t,!1,r)),n.get()>0&&(n.set(n.get()-1),wL(e,o=t.data[n.get()],!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},wZ=e=>{e.clear(),e.add()},wQ=(e,t,r)=>r.get()>0||t.typing&&t.data[0]&&!wz(wP(e),t.data[0]),wJ=(e,t)=>t.get()<e.data.length-1&&!e.typing,w0=(e,t,r)=>(w$(e,t),e.beforeChange(),e.ignore(r),e.add()),w1=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},w2=(e,t)=>{let r=e.dom,n=I(t)?t:e.getBody();ec(r.select("table,a",n),t=>{switch(t.nodeName){case"TABLE":let n=c0(e),o=r.getAttrib(t,"border");(!o||"0"===o)&&e.hasVisual?r.addClass(t,n):r.removeClass(t,n);break;case"A":if(!r.getAttrib(t,"href")){let n=r.getAttrib(t,"name")||t.id,o=c1(e);n&&e.hasVisual?r.addClass(t,o):r.removeClass(t,o)}}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},w3=e=>({init:{bindEvents:H},undoManager:{beforeChange:(t,r)=>wV(e,t,r),add:(t,r,n,o,l,a)=>wW(e,t,r,n,o,l,a),undo:(t,r,n)=>wX(e,t,r,n),redo:(t,r)=>wG(e,t,r),clear:(t,r)=>wK(e,t,r),reset:e=>wZ(e),hasUndo:(t,r)=>wQ(e,t,r),hasRedo:(e,t)=>wJ(e,t),transact:(e,t,r)=>w0(e,t,r),ignore:(e,t)=>w1(e,t),extra:(t,r,n,o)=>wY(e,t,r,n,o)},formatter:{match:(t,r,n,o)=>CA(e,t,r,n,o),matchAll:(t,r)=>CD(e,t,r),matchNode:(t,r,n,o)=>CR(e,t,r,n,o),canApply:t=>CO(e,t),closest:t=>CT(e,t),apply:(t,r,n)=>EW(e,t,r,n),remove:(t,r,n,o)=>EP(e,t,r,n,o),toggle:(t,r,n)=>E2(e,t,r,n),formatChanged:(t,r,n,o,l)=>E1(e,t,r,n,o,l)},editor:{getContent:t=>hM(e,t),setContent:(t,r)=>CC(e,t,r),insertContent:(t,r)=>Cg(e,t,r),addVisual:t=>w2(e,t)},selection:{getContent:(t,r)=>wE(e,t,r)},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:()=>et.none()}}),w8=e=>{let t=e=>T(e)?e:{},{init:r,undoManager:n,formatter:o,editor:l,selection:a,autocompleter:i,raw:s}=e;return{init:{bindEvents:r.bindEvents},undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:(e,t,r)=>n.transact(r),ignore:(e,t)=>n.ignore(t),extra:(e,t,r,o)=>n.extra(r,o)},formatter:{match:(e,r,n,l)=>o.match(e,t(r),l),matchAll:o.matchAll,matchNode:o.matchNode,canApply:e=>o.canApply(e),closest:e=>o.closest(e),apply:(e,r,n)=>o.apply(e,t(r)),remove:(e,r,n,l)=>o.remove(e,t(r)),toggle:(e,r,n)=>o.toggle(e,t(r)),formatChanged:(e,t,r,n,l)=>o.formatChanged(t,r,n,l)},editor:{getContent:e=>l.getContent(e),setContent:(e,t)=>({content:l.setContent(e,t),html:""}),insertContent:(e,t)=>(l.insertContent(e),""),addVisual:l.addVisual},selection:{getContent:(e,t)=>a.getContent(t)},autocompleter:{addDecoration:i.addDecoration,removeDecoration:i.removeDecoration},raw:{getModel:()=>et.some(s.getRawModel())}}},w5=()=>{let e=V(null),t=V("");return{init:{bindEvents:H},undoManager:{beforeChange:H,add:e,undo:e,redo:e,clear:H,reset:H,hasUndo:J,hasRedo:J,transact:e,ignore:H,extra:H},formatter:{match:J,matchAll:V([]),matchNode:V(void 0),canApply:J,closest:t,apply:H,remove:H,toggle:H,formatChanged:V({unbind:H})},editor:{getContent:t,setContent:V({content:"",html:""}),insertContent:V(""),addVisual:H},selection:{getContent:t},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:V(et.none())}}},w6=e=>eq(e.plugins,"rtc"),w9=e=>e$(e.plugins,"rtc").bind(e=>et.from(e.setup)),w4=e=>w9(e).fold(()=>(e.rtcInstance=w3(e),et.none()),t=>(e.rtcInstance=w5(),et.some(()=>t().then(t=>(e.rtcInstance=w8(t),t.rtc.isRemote))))),w7=e=>e.rtcInstance?e.rtcInstance:w3(e),Se=e=>{let t=e.rtcInstance;if(t)return t;throw Error("Failed to get RTC instance not yet initialized.")},St=(e,t,r)=>{Se(e).undoManager.beforeChange(t,r)},Sr=(e,t,r,n,o,l,a)=>Se(e).undoManager.add(t,r,n,o,l,a),Sn=(e,t,r,n)=>Se(e).undoManager.undo(t,r,n),So=(e,t,r)=>Se(e).undoManager.redo(t,r),Sl=(e,t,r)=>{Se(e).undoManager.clear(t,r)},Sa=(e,t)=>{Se(e).undoManager.reset(t)},Si=(e,t,r)=>Se(e).undoManager.hasUndo(t,r),Ss=(e,t,r)=>Se(e).undoManager.hasRedo(t,r),Sd=(e,t,r,n)=>Se(e).undoManager.transact(t,r,n),Sc=(e,t,r)=>{Se(e).undoManager.ignore(t,r)},Sm=(e,t,r,n,o)=>{Se(e).undoManager.extra(t,r,n,o)},Su=(e,t,r,n,o)=>Se(e).formatter.match(t,r,n,o),Sf=(e,t,r)=>Se(e).formatter.matchAll(t,r),Sg=(e,t,r,n,o)=>Se(e).formatter.matchNode(t,r,n,o),Sp=(e,t)=>Se(e).formatter.canApply(t),Sh=(e,t)=>Se(e).formatter.closest(t),Sb=(e,t,r,n)=>{Se(e).formatter.apply(t,r,n)},Sv=(e,t,r,n,o)=>{Se(e).formatter.remove(t,r,n,o)},Sy=(e,t,r,n)=>{Se(e).formatter.toggle(t,r,n)},SC=(e,t,r,n,o,l)=>Se(e).formatter.formatChanged(t,r,n,o,l),SE=(e,t)=>w7(e).editor.getContent(t),Sx=(e,t,r)=>w7(e).editor.setContent(t,r),S_=(e,t,r)=>w7(e).editor.insertContent(t,r),Sw=(e,t,r)=>Se(e).selection.getContent(t,r),SS=(e,t)=>Se(e).editor.addVisual(t),Sk=e=>Se(e).init.bindEvents(),SN=(e,t={})=>Sw(e,t.format?t.format:"html",t),SR=e=>0===e.dom.length?(nU(e),et.none()):et.some(e),SA=(e,t)=>e.filter(e=>ge.isBookmarkNode(e.dom)).bind(t?rJ:rQ),SD=(e,t,r,n,o)=>{let l=e.dom,a=t.dom,i=n?l.length:a.length;n?(bZ(l,a,o,!1,!n),r.setStart(a,i)):(bZ(a,l,o,!1,!n),r.setEnd(a,i))},ST=(e,t,r)=>{rY(e).each(n=>{let o=e.dom;t&&bL(n,sF(o,0),r)?bG(o,0,r):!t&&bF(n,sF(o,o.length),r)&&bX(o,o.length,r)})},SO=(e,t,r,n,o)=>{e.bind(e=>((n?bX:bG)(e.dom,n?e.dom.length:0,o),t.filter(rd).map(t=>SD(e,t,r,n,o)))).orThunk(()=>SA(t,n).or(t).filter(rd).map(e=>ST(e,n,o)))},SB=(e,t,r)=>{let n=et.from(t.firstChild).map(rM.fromDom),o=et.from(t.lastChild).map(rM.fromDom);e.deleteContents(),e.insertNode(t);let l=n.bind(rQ).filter(rd).bind(SR),a=o.bind(rJ).filter(rd).bind(SR);SO(l,n,e,!0,r),SO(a,o,e,!1,r),e.collapse(!1)},SP=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),SL=(e,t)=>{if("raw"===t.format)return t.content;{let r=e.selection.getRng(),n=e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock),o=n?{context:n.nodeName.toLowerCase()}:{},l=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return hU({validate:!1},e.schema).serialize(l)}},SM=(e,t,r={})=>{_G(e,SP(r,t)).each(t=>{let r=SL(e,t),n=e.selection.getRng();SB(n,n.createContextualFragment(r),e.schema),e.selection.setRng(n),hr(e,n),_X(e,r,t)})},SF=(e,t,r)=>{if(eq(e,t)){let n=ef(e[t],e=>e!==r);0===n.length?delete e[t]:e[t]=n}};var SI=(e,t)=>{let r,n;let o=(t,r)=>eb(r,r=>e.is(r,t)),l=t=>e.getParents(t,void 0,e.getRoot()),a=()=>{r={},n={},t.on("NodeChange",e=>{let t=e.element,a=l(t),i={};eP(r,(e,t)=>{o(t,a).each(r=>{n[t]||(ec(e,e=>{e(!0,{node:r,selector:t,parents:a})}),n[t]=e),i[t]=e})}),eP(n,(e,r)=>{i[r]||(delete n[r],ec(e,e=>{e(!1,{node:t,selector:r,parents:a})}))})})};return{selectorChangedWithUnbind:(e,i)=>(r||a(),r[e]||(r[e]=[]),r[e].push(i),o(e,l(t.selection.getStart())).each(()=>{n[e]=r[e]}),{unbind:()=>{SF(r,e,i),SF(n,e,i)}})}};let SU=e=>!!(e&&e.ownerDocument)&&r$(rM.fromDom(e.ownerDocument),rM.fromDom(e)),Sz=e=>!!e&&SU(e.startContainer)&&SU(e.endContainer),Sj=(e,t,r,n)=>{let o,l;let{selectorChangedWithUnbind:a}=SI(e,n),i=(e,t)=>SM(n,e,t),s=e=>{let t=c();t.collapse(!!e),m(t)},d=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{let r;let a=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return -1}},i=t.document;if(I(n.bookmark)&&!g2(n)){let e=gN(n);if(e.isSome())return e.map(e=>hm(n,[e])[0]).getOr(i.createRange())}try{let e=d();e&&!op(e.anchorNode)&&(r=e.rangeCount>0?e.getRangeAt(0):i.createRange(),r=hm(n,[r])[0])}catch(e){}if(r||(r=i.createRange()),oT(r.startContainer)&&r.collapsed){let t=e.getRoot();r.setStart(t,0),r.setEnd(t,0)}return o&&l&&(0===a(r.START_TO_START,r,o)&&0===a(r.END_TO_END,r,o)?r=l:(o=null,l=null)),r},m=(e,t)=>{if(!Sz(e))return;let r=d();if(e=n.dispatch("SetSelectionRange",{range:e,forward:t}).range,r){l=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),o=r.rangeCount>0?r.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==r?void 0:r.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){let t=e.startContainer.childNodes[e.startOffset];t&&"IMG"===t.nodeName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),(r.anchorNode!==e.startContainer||r.focusNode!==e.endContainer)&&r.setBaseAndExtent(t,0,t,1))}n.dispatch("AfterSetSelectionRange",{range:e,forward:t})},u=()=>{let t=d(),r=null==t?void 0:t.anchorNode,n=null==t?void 0:t.focusNode;if(!t||!r||!n||op(r)||op(n))return!0;let o=e.createRng(),l=e.createRng();try{o.setStart(r,t.anchorOffset),o.collapse(!0),l.setStart(n,t.focusOffset),l.collapse(!0)}catch(e){return!0}return 0>=o.compareBoundaryPoints(o.START_TO_START,l)},f={dom:e,win:t,serializer:r,editor:n,expand:(t={type:"word"})=>m(pI(e).expand(c(),t)),collapse:s,setCursorLocation:(t,r)=>{let o=e.createRng();I(t)&&I(r)?(o.setStart(t,r),o.setEnd(t,r),m(o),s(!1)):(fa(e,o,n.getBody(),!0),m(o))},getContent:e=>SN(n,e),setContent:i,getBookmark:(e,t)=>g.getBookmark(e,t),moveToBookmark:e=>g.moveToBookmark(e),select:(t,r)=>(hc(e,t,r).each(m),t),isCollapsed:()=>{let e=c(),t=d();return!!e&&!e.item&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{if(n.mode.isReadOnly())return!1;let t=c(),r=n.getBody().querySelectorAll('[data-mce-selected="1"]');return r.length>0?eE(r,t=>e.isEditable(t.parentElement)):hn(e,t)},isForward:u,setNode:t=>(i(e.getOuterHTML(t)),t),getNode:()=>hs(n.getBody(),c()),getSel:d,setRng:m,getRng:c,getStart:e=>hl(n.getBody(),c(),e),getEnd:e=>ha(n.getBody(),c(),e),getSelectedBlocks:(t,r)=>hd(e,c(),t,r),normalize:()=>{let t=c();if(!u5(d())&&fi(n)){let r=pL(e,t);return r.each(e=>{m(e,u())}),r.getOr(t)}return t},selectorChanged:(e,t)=>(a(e,t),f),selectorChangedWithUnbind:a,getScrollContainer:()=>{let t;let r=e.getRoot();for(;r&&"BODY"!==r.nodeName;){if(r.scrollHeight>r.clientHeight){t=r;break}r=r.parentNode}return t},scrollIntoView:(e,t)=>{I(e)?ht(n,e,t):hr(n,c(),t)},placeCaretAt:(e,t)=>m(pw(e,t,n.getDoc())),getBoundingClientRect:()=>{let e=c();return e.collapsed?sF.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=o=l=null,p.destroy()}},g=ge(f),p=pn(f,n);return f.bookmarkManager=g,f.controlSelection=p,f},SH=(e,t,r)=>{t.addNodeFilter("br",(t,n,o)=>{let l=tQ.extend({},r.getBlockElements()),a=r.getNonEmptyElements(),i=r.getWhitespaceElements();l.body=1;let s=e=>e.name in l||ly(r,e);for(let n=0,d=t.length;n<d;n++){let d=t[n],c=d.parent;if(c&&s(c)&&d===c.lastChild){let t=d.prev;for(;t;){let e=t.name;if("span"!==e||"bookmark"!==t.attr("data-mce-type")){"br"===e&&(d=null);break}t=t.prev}if(d&&(d.remove(),yO(r,a,i,c))){let t=r.getElementRule(c.name);t&&(t.removeEmpty?c.remove():t.paddEmpty&&yR(e,o,s,c))}}else{let e=d;for(;c&&c.firstChild===e&&c.lastChild===e&&(e=c,!l[c.name]);)c=c.parent;if(e===c){let e=new hh("#text",3);e.value="\xa0",d.replace(e)}}}})},S$=(e,t,r)=>{e.addAttributeFilter("data-mce-tabindex",(e,t)=>{let r=e.length;for(;r--;){let n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}}),e.addAttributeFilter("src,href,style",(e,n)=>{let o="data-mce-"+n,l=t.url_converter,a=t.url_converter_scope,i=e.length;for(;i--;){let t=e[i],s=t.attr(o);void 0!==s?(t.attr(n,s.length>0?s:null),t.attr(o,null)):(s=t.attr(n),"style"===n?s=r.serializeStyle(r.parseStyle(s),t.name):l&&(s=l.call(a,s,n,t.name)),t.attr(n,s.length>0?s:null))}}),e.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){let r=e[t],n=r.attr("class");n&&(n=n.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",n.length>0?n:null))}}),e.addAttributeFilter("data-mce-type",(e,t,r)=>{let n=e.length;for(;n--;){let t=e[n];"bookmark"!==t.attr("data-mce-type")||r.cleanup||(et.from(t.firstChild).exists(e=>{var t;return!oa(null!==(t=e.value)&&void 0!==t?t:"")})?t.unwrap():t.remove())}}),e.addNodeFilter("script,style",(e,r)=>{var n;let o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),l=e.length;for(;l--;){let a=e[l],i=a.firstChild,s=null!==(n=null==i?void 0:i.value)&&void 0!==n?n:"";if("script"===r){let e=a.attr("type");e&&a.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i&&s.length>0&&(i.value="// <![CDATA[\n"+o(s)+"\n// ]]>")}else"xhtml"===t.element_format&&i&&s.length>0&&(i.value="\x3c!--\n"+o(s)+"\n--\x3e")}}),e.addNodeFilter("#comment",e=>{let n=e.length;for(;n--;){let o=e[n],l=o.value;t.preserve_cdata&&(null==l?void 0:l.indexOf("[CDATA["))===0?(o.name="#cdata",o.type=4,o.value=r.decode(l.replace(/^\[CDATA\[|\]\]$/g,""))):(null==l?void 0:l.indexOf("mce:protected "))===0&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(l).substr(14))}}),e.addNodeFilter("xml:namespace,input",(e,t)=>{let r=e.length;for(;r--;){let n=e[r];7===n.type?n.remove():1!==n.type||"input"!==t||n.attr("type")||n.attr("type","text")}}),e.addAttributeFilter("data-mce-type",t=>{ec(t,t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.remove_trailing_brs&&SH(t,e,e.schema)},Sq=e=>{let t=e=>(null==e?void 0:e.name)==="br",r=e.lastChild;if(t(r)){let e=r.prev;t(e)&&(r.remove(),e.remove())}},SV=(e,t,r)=>{let n;let o=e.dom,l=t.cloneNode(!0),a=document.implementation;if(a.createHTMLDocument){let e=a.createHTMLDocument("");tQ.each("BODY"===l.nodeName?l.childNodes:[l],t=>{e.body.appendChild(e.importNode(t,!0))}),l="BODY"!==l.nodeName?e.body.firstChild:e.body,n=o.doc,o.doc=e}return dy(e,{...r,node:l}),n&&(o.doc=n),l},SW=(e,t)=>I(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,SK=(e,t,r)=>SW(e,r)?SV(e,t,r):t,SY=(e,t,r)=>{-1===tQ.inArray(t,r)&&(e.addAttributeFilter(r,(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.push(r))},SG=(e,t,r)=>!t.no_events&&e?dC(e,{...t,content:r}).content:r,SX=(e,t,r)=>{let n=iK(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||ij(rM.fromDom(t))?n:tQ.trim(n)},SZ=(e,t,r)=>{let n=r.selection?{forced_root_block:!1,...r}:r,o=e.parse(t,n);return Sq(o),o},SQ=(e,t,r)=>hU(e,t).serialize(r),SJ=(e,t,r,n,o)=>SG(e,o,SQ(t,r,n)),S0=(e,t)=>{let r=["data-mce-selected"],n={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:aG.DOM,l=t&&t.schema?t.schema:am(n),a=_$(n,l);return S$(a,n,o),{schema:l,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(e,r={})=>{let i={format:"html",...r},s=SZ(a,SX(o,SK(t,e,i),i),i);return"tree"===i.format?s:SJ(t,n,l,s,i)},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:Y(SY,a,r),getTempAttrs:V(r),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},S1=(e,t)=>{let r=S0(e,t);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs,getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},S2=(e,t)=>({...e,format:t,get:!0,getInner:!0}),S3=(e,t={})=>{let r=t.format?t.format:"html";return _K(e,S2(t,r)).fold(W,t=>{let r=SE(e,t);return _Y(e,r,t)})},S8=(e,t)=>({format:"html",...e,set:!0,content:t}),S5=(e,t,r={})=>_G(e,S8(r,t)).map(t=>{let r=Sx(e,t.content,t);return _X(e,r.html,t),r.content}).getOr(t),S6="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),S9=[],S4="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),S7=[],ke=(e,t)=>eS(ef(t,t=>eq(e,t))),kt=e=>{let t=ke(e,S6),r=e.forced_root_block;return(!1===r||""===r)&&t.push("forced_root_block (false only)"),eS(t)},kr=e=>ke(e,S9),kn=(e,t)=>{let r=tQ.makeMap(e.plugins," ");return eS(ef(t,e=>eq(r,e)))},ko=e=>kn(e,S4),kl=e=>kn(e,S7.map(e=>e.name)),ka=(e,t)=>{let r=kt(e),n=ko(t),o=n.length>0,l=r.length>0,a="mobile"===t.theme;(o||l||a)&&console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+(a?`

Themes:
- mobile`:"")+(o?`

Plugins:
- ${n.join("\n- ")}`:"")+(l?`

Options:
- ${r.join("\n- ")}`:""))},ki=e=>eb(S7,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),ks=(e,t)=>{let r=kr(e),n=kl(t),o=n.length>0,l=r.length>0;(o||l)&&console.warn("The following deprecated features are currently enabled but will be removed soon."+(o?`

Plugins:
- ${n.map(ki).join("\n- ")}`:"")+(l?`

Options:
- ${r.join("\n- ")}`:""))},kd=(e,t)=>{ka(e,t),ks(e,t)},kc=aG.DOM,km=e=>{kc.setStyle(e.id,"display",e.orgDisplay)},ku=e=>et.from(e).each(e=>e.destroy()),kf=e=>{e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null;let t=e.selection;t&&(e.selection=t.win=t.dom=t.dom.doc=null)},kg=e=>{let t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),kc.unbind(t,"submit reset",e.formEventDelegate))},kp=e=>{if(!e.removed){let{_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),o=e.getElement();n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&I(null==o?void 0:o.nextSibling)&&kc.remove(o.nextSibling),dE(e),e.editorManager.remove(e),!e.inline&&n&&km(e),dx(e),kc.remove(e.getContainer()),ku(t),ku(r),e.destroy()}},kh=(e,t)=>{let{selection:r,dom:n}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),ku(r),ku(n)),kg(e),kf(e),e.destroyed=!0}},kb=(()=>{let e={};return{add:(t,r)=>{e[t]=r},get:t=>e[t]?e[t]:{icons:{}},has:t=>eq(e,t)}})(),kv=a5.ModelManager,ky=(e,t)=>t.dom[e],kC=(e,t)=>parseInt(nS(t,e),10),kE=Y(ky,"clientWidth"),kx=Y(ky,"clientHeight"),k_=Y(kC,"margin-top"),kw=Y(kC,"margin-left"),kS=e=>e.dom.getBoundingClientRect(),kk=(e,t,r)=>{let n=kE(e),o=kx(e);return t>=0&&r>=0&&t<=n&&r<=o},kN=(e,t,r,n)=>{let o=kS(t),l=e?o.left+t.dom.clientLeft+kw(t):0;return{x:r-l,y:n-(e?o.top+t.dom.clientTop+k_(t):0)}},kR=(e,t,r)=>{let n=rM.fromDom(e.getBody()),o=e.inline?n:rW(n),l=kN(e.inline,o,t,r);return kk(o,l.x,l.y)},kA=e=>et.from(e).map(rM.fromDom),kD=e=>kA(e.inline?e.getBody():e.getContentAreaContainer()).map(na).getOr(!1);var kT=()=>{let e=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};let kO=e=>{let t=[],r=()=>{let t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():kT()},n=()=>et.from(t[0]),o=(e,t)=>e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout,l=()=>{n().each(e=>{e.reposition()})},a=e=>{t.push(e)},i=e=>{ev(t,t=>t===e).each(e=>{t.splice(e,1)})},s=(n,s=!0)=>e.removed||!kD(e)?{}:(s&&e.dispatch("BeforeOpenNotification",{notification:n}),eb(t,e=>o(r().getArgs(e),n)).getOrThunk(()=>{e.editorManager.setActive(e);let t=r().open(n,()=>{i(t)},()=>g3(e));return a(t),l(),e.dispatch("OpenNotification",{notification:{...t}}),t})),d=V(t);return e.on("SkinLoaded",()=>{let t=cA(e);t&&s({text:t,type:"warning",timeout:0},!1),l()}),e.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(l)}),e.on("remove",()=>{ec(t.slice(),e=>{r().close(e)})}),e.on("keydown",e=>{var t;let r=(null===(t=e.key)||void 0===t?void 0:t.toLowerCase())==="f12"||123===e.keyCode;e.altKey&&r&&(e.preventDefault(),n().map(e=>rM.fromDom(e.getEl())).each(e=>gn(e)))}),{open:s,close:()=>{n().each(e=>{r().close(e),i(e),l()})},getNotifications:d}},kB=a5.PluginManager,kP=a5.ThemeManager;var kL=()=>{let e=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};let kM=e=>{let t=[],r=()=>{let t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():kL()},n=(e,t)=>(...r)=>t?t.apply(e,r):void 0,o=t=>{e.dispatch("OpenWindow",{dialog:t})},l=t=>{e.dispatch("CloseWindow",{dialog:t})},a=e=>{t.push(e),o(e)},i=r=>{l(r),0===(t=ef(t,e=>e!==r)).length&&e.focus()},s=()=>et.from(t[t.length-1]),d=t=>{e.editorManager.setActive(e),gk(e),e.ui.show();let r=t();return a(r),r};return e.on("remove",()=>{ec(t,e=>{r().close(e)})}),{open:(e,t)=>d(()=>r().open(e,t,i)),openUrl:e=>d(()=>r().openUrl(e,i)),alert:(e,t,o)=>{let l=r();l.alert(e,n(o||l,t))},confirm:(e,t,o)=>{let l=r();l.confirm(e,n(o||l,t))},close:()=>{s().each(e=>{r().close(e),i(e)})}}},kF=(e,t)=>{e.notificationManager.open({type:"error",text:t})},kI=(e,t)=>{e._skinLoaded?kF(e,t):e.on("SkinLoaded",()=>{kF(e,t)})},kU=(e,t)=>{kI(e,a8.translate(["Failed to upload image: {0}",t]))},kz=(e,t,r)=>{dD(e,t,{message:r}),console.error(r)},kj=(e,t,r)=>r?`Failed to load ${e}: ${r} from url ${t}`:`Failed to load ${e} url: ${t}`,kH=(e,t,r)=>{kz(e,"PluginLoadError",kj("plugin",t,r))},k$=(e,t,r)=>{kz(e,"IconsLoadError",kj("icons",t,r))},kq=(e,t,r)=>{kz(e,"LanguageLoadError",kj("language",t,r))},kV=(e,t,r)=>{kz(e,"ThemeLoadError",kj("theme",t,r))},kW=(e,t,r)=>{kz(e,"ModelLoadError",kj("model",t,r))},kK=(e,t,r)=>{let n=a8.translate(["Failed to initialize plugin: {0}",t]);dD(e,"PluginLoadError",{message:n}),kY(n,r),kI(e,n)},kY=(e,...t)=>{let r=window.console;r&&(r.error?r.error(e,...t):r.log(e,...t))},kG=e=>{et.from(e.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})},kX=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},kZ=(e,t)=>{kX(e,"StyleWithCSS",t),kX(e,"enableInlineTableEditing",t),kX(e,"enableObjectResizing",t)},kQ=e=>{e.selection.setRng(e.selection.getRng())},kJ=(e,t,r)=>{rP(e,t)&&!r?rO(e,t):r&&rD(e,t)},k0=e=>{kJ(rM.fromDom(e.getBody()),"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),kG(e)},k1=e=>{let t=rM.fromDom(e.getBody());kJ(t,"mce-content-readonly",!1),e.hasEditableRoot()&&ny(t,!0),kZ(e,!1),g3(e)&&e.focus(),kQ(e),e.nodeChanged()},k2=e=>mB(e),k3="data-mce-contenteditable",k8=e=>{ec(ot(e,'*[contenteditable="true"]'),e=>{rg(e,k3,"true"),ny(e,!1)})},k5=e=>{ec(ot(e,`*[${k3}="true"]`),e=>{ry(e,k3),ny(e,!0)})},k6=(e,t)=>{let r=rM.fromDom(e.getBody());t?(k0(e),ny(r,!1),k8(r)):(k5(r),k1(e))},k9=e=>{e.serializer?k4(e):e.on("PreInit",()=>{k4(e)})},k4=e=>{e.parser.addAttributeFilter("contenteditable",t=>{k2(e)&&ec(t,e=>{e.attr(k3,e.attr("contenteditable")),e.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(k3,t=>{k2(e)&&ec(t,e=>{e.attr("contenteditable",e.attr(k3))})}),e.serializer.addTempAttr(k3)},k7=e=>"click"===e.type,Ne=["copy"],Nt=e=>ei(Ne,e.type),Nr=(e,t)=>np(t,"a",t=>rH(t,rM.fromDom(e.getBody()))).bind(e=>rb(e,"href")),Nn=(e,t)=>{k7(t)&&!g9.metaKeyPressed(t)?Nr(e,rM.fromDom(t.target)).each(r=>{if(t.preventDefault(),/^#/.test(r)){let t=e.dom.select(`${r},[name="${tl(r,"#")}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}):Nt(t)&&e.dispatch(t.type,t)},No=e=>{e.on("ShowCaret ObjectSelected",t=>{k2(e)&&t.preventDefault()}),e.on("DisabledStateChange",t=>{t.isDefaultPrevented()||k6(e,t.state)})},Nl=e=>{k9(e),No(e)},Na=e=>/^[a-z0-9\-]+$/i.test(e),Ni=e=>"content/"+e+"/content.css",Ns=e=>tinymce.Resource.has(Ni(e)),Nd=e=>Nm(e,cC(e)),Nc=e=>Nm(e,cx(e)),Nm=(e,t)=>{let r=e.editorManager.baseURL+"/skins/content",n=e.editorManager.suffix,o=`content${n}.css`;return ed(t,t=>Ns(t)?t:Na(t)&&!e.inline?`${r}/${t}/${o}`:e.documentBaseURI.toAbsolute(t))},Nu=e=>{e.contentCSS=e.contentCSS.concat(Nd(e),Nc(e))},Nf=e=>e?eA(e.getElementsByTagName("img")):[],Ng=(e,t)=>{let r={};return{findAll:(n,o=ee)=>Promise.all(ed(ef(Nf(n),t=>{let r=t.src;return!(t.hasAttribute("data-mce-bogus")||t.hasAttribute("data-mce-placeholder"))&&!!r&&r!==tY.transparentSrc&&(ti(r,"blob:")?!e.isUploaded(r)&&o(t):!!ti(r,"data:")&&o(t))}),e=>{let n=e.src;if(eq(r,n))return r[n].then(t=>D(t)?t:{image:e,blobInfo:t.blobInfo});{let o=xf(t,n).then(t=>(delete r[n],{image:e,blobInfo:t})).catch(e=>(delete r[n],e));return r[n]=o,o}}))}},Np=()=>{let e={},t=(e,t)=>({status:e,resultUri:t}),r=t=>t in e;return{hasBlobUri:r,getResultUri:t=>{let r=e[t];return r?r.resultUri:null},isPending:t=>!!r(t)&&1===e[t].status,isUploaded:t=>!!r(t)&&2===e[t].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,n)=>{e[r]=t(2,n)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}},Nh=0,Nb=()=>{let e=()=>Math.round(0xffffffff*ib()).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Nv=e=>e+Nh+++Nb(),Ny=()=>{let e=[],t=e=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[e.toLowerCase()]||"dat",r=e=>{if(!e.blob||!e.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let r=e.id||Nv("blobid"),n=e.name||r,o=e.blob;return{id:V(r),name:V(n),filename:V(e.filename||n+"."+t(o.type)),blob:V(o),base64:V(e.base64),blobUri:V(e.blobUri||URL.createObjectURL(o)),uri:V(e.uri)}},n=t=>eb(e,t).getOrUndefined(),o=e=>n(t=>t.id()===e);return{create:(e,t,n,o,l)=>{if(D(e))return r({id:e,name:o,filename:l,blob:t,base64:n});if(T(e))return r(e);throw Error("Unknown input type")},add:t=>{o(t.id())||e.push(t)},get:o,getByUri:e=>n(t=>t.blobUri()===e),getByData:(e,t)=>n(r=>r.base64()===e&&r.blob().type===t),findFirst:n,removeByUri:t=>{e=ef(e,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{ec(e,e=>{URL.revokeObjectURL(e.blobUri())}),e=[]}}},NC=(e,t)=>{let r={},n=(e,t)=>e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t,o=(e,r)=>new Promise((o,l)=>{let a=new XMLHttpRequest;a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=e=>{r(e.loaded/e.total*100)},a.onerror=()=>{l("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=()=>{if(a.status<200||a.status>=300){l("HTTP Error: "+a.status);return}let e=JSON.parse(a.responseText);if(!e||!D(e.location)){l("Invalid JSON: "+a.responseText);return}o(n(t.basePath,e.location))};let i=new FormData;i.append("file",e.blob(),e.filename()),a.send(i)}),l=U(t.handler)?t.handler:o,a=()=>new Promise(e=>{e([])}),i=(e,t)=>({url:t,blobInfo:e,status:!0}),s=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),d=(e,t)=>{tQ.each(r[e],e=>{e(t)}),delete r[e]},c=(t,r,n)=>(e.markPending(t.blobUri()),new Promise(o=>{let l,a;try{let c=()=>{l&&(l.close(),a=H)},m=r=>{c(),e.removeFailed(t.blobUri()),d(t.blobUri(),s(t,r)),o(s(t,r))};a=e=>{!(e<0)&&!(e>100)&&et.from(l).orThunk(()=>et.from(n).map(Z)).each(t=>{l=t,t.progressBar.value(e)})},r(t,a).then(r=>{c(),e.markUploaded(t.blobUri(),r),d(t.blobUri(),i(t,r)),o(i(t,r))},e=>{m(D(e)?{message:e}:e)})}catch(e){o(s(t,e))}})),m=e=>e===o,u=e=>{let t=e.blobUri();return new Promise(e=>{r[t]=r[t]||[],r[t].push(e)})},f=(t,r)=>(t=tQ.grep(t,t=>!e.isUploaded(t.blobUri())),Promise.all(tQ.map(t,t=>e.isPending(t.blobUri())?u(t):c(t,l,r))));return{upload:(e,r)=>!t.url&&m(l)?a():f(e,r)}},NE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Nx=(e,t)=>NC(t,{url:cc(e),basePath:cm(e),credentials:cu(e),handler:cf(e)}),N_=(e,t)=>e.dom.isEmpty(t.dom)&&I(e.schema.getTextBlockElements()[rn(t)]),Nw=e=>t=>{N_(e,t)&&nP(t,rM.fromHtml('<br data-mce-bogus="1" />'))},NS=e=>{let t,r;let n=Ny(),o=Np(),l=[],a=t=>r=>e.selection?t(r):[],i=e=>e+(-1===e.indexOf("?")?"?":"&")+new Date().getTime(),s=(e,t,r)=>{let n=0;do -1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1);while(-1!==n);return e},d=(e,t,r)=>(e=s(e,`src="${t}"`,`src="${r}"${r===tY.transparentSrc?' data-mce-placeholder="1"':""}`),e=s(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')),c=(t,r)=>{ec(e.undoManager.data,e=>{"fragmented"===e.type?e.fragments=ed(e.fragments,e=>d(e,t,r)):e.content=d(e.content,t,r)})},m=(t,r)=>{let n=e.convertURL(r,"src");c(t.src,r),rp(rM.fromDom(t),{src:ca(e)?i(r):r,"data-mce-src":n})},u=()=>(t||(t=Nx(e,o)),p().then(a(r=>{let o=ed(r,e=>e.blobInfo);return t.upload(o,NE(e)).then(a(t=>{let o=[],l=!1,a=ed(t,(t,a)=>{let{blobInfo:i,image:s}=r[a],d=!1;return t.status&&ci(e)?(t.url&&!ta(s.src,t.url)&&(l=!0),n.removeByUri(s.src),w6(e)||m(s,t.url)):t.error&&(t.error.remove&&(c(s.src,tY.transparentSrc),o.push(s),d=!0),kU(e,t.error.message)),{element:s,status:t.status,uploadUri:t.url,blobInfo:i,removed:d}});return o.length>0&&!w6(e)?e.undoManager.transact(()=>{ec(nH(o),t=>{let r=rY(t);nU(t),r.each(Nw(e)),n.removeByUri(t.dom.src)})}):l&&e.undoManager.dispatchChange(),a}))}))),f=()=>cl(e)?u():Promise.resolve([]),g=e=>eE(l,t=>t(e)),p=()=>(r||(r=Ng(o,n)),r.findAll(e.getBody(),g).then(a(t=>{let r=ef(t,t=>D(t)?(kI(e,t),!1):"blob"!==t.uriType);return w6(e)||ec(r,e=>{c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),r}))),h=t=>t.replace(/src="(blob:[^"]+)"/g,(t,r)=>{let l=o.getResultUri(r);if(l)return'src="'+l+'"';let a=n.getByUri(r);return(a||(a=ep(e.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0)),a)?'src="data:'+a.blob().type+";base64,"+a.base64()+'"':t});return e.on("SetContent",()=>{cl(e)?f():p()}),e.on("RawSaveContent",e=>{e.content=h(e.content)}),e.on("GetContent",e=>{!e.source_view&&"raw"!==e.format&&"tree"!==e.format&&(e.content=h(e.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",e=>{ec(e,e=>{let t=e.attr("src");if(!t||n.getByUri(t))return;let r=o.getResultUri(t);r&&e.attr("src",r)})})}),{blobCache:n,addFilter:e=>{l.push(e)},uploadImages:u,uploadImagesAuto:f,scanForImages:p,destroy:()=>{n.destroy(),o.destroy(),r=t=null}}},Nk=e=>{let t=e.dom,r=e.schema.type,n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},n={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==r?[n,e,t]:[e,n,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>oh(e)&&e.hasAttribute("href"),onformat:(e,r,n)=>{tQ.each(n,(r,n)=>{t.setAttrib(e,n,r)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tQ.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),e=>{n[e]={block:e,remove:"all"}}),n},NN={remove_similar:!0,inherit:!1},NR={selector:"td,th",...NN},NA=V({tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...NR},tablecellverticalalign:{styles:{"vertical-align":"%value"},...NR},tablecellbordercolor:{styles:{borderColor:"%value"},...NR},tablecellclass:{classes:["%value"],...NR},tableclass:{selector:"table",classes:["%value"],...NN},tablecellborderstyle:{styles:{borderStyle:"%value"},...NR},tablecellborderwidth:{styles:{borderWidth:"%value"},...NR}}),ND=e=>{let t={},r=(e,n)=>{e&&(D(e)?(B(n)||(n=[n]),ec(n,e=>{M(e.deep)&&(e.deep=!fP(e)),M(e.split)&&(e.split=!fP(e)||fL(e)),M(e.remove)&&fP(e)&&!fL(e)&&(e.remove="none"),fP(e)&&fL(e)&&(e.mixed=!0,e.block_expand=!0),D(e.classes)&&(e.classes=e.classes.split(/\s+/))}),t[e]=n):eP(e,(e,t)=>{r(t,e)}))};return r(Nk(e)),r(NA()),r(cL(e)),{get:e=>I(e)?t[e]:t,has:e=>eq(t,e),register:r,unregister:e=>(e&&t[e]&&delete t[e],t)}},NT=tQ.each,NO=aG.DOM,NB=e=>I(e)&&T(e),NP=(e,t)=>{let r=t&&t.schema||am({}),n=(e,t)=>{t.classes.length>0&&NO.addClass(e,t.classes.join(" ")),NO.setAttribs(e,t.attrs)},o=e=>{let t=D(e)?{name:e,classes:[],attrs:{}}:e,r=NO.create(t.name);return n(r,t),r},l=(e,t)=>{let n=r.getElementRule(e.nodeName.toLowerCase()),o=null==n?void 0:n.parentsRequired;return!!o&&!!o.length&&(t&&ei(o,t)?t:o[0])},a=(e,t,r)=>{let n;let i=t[0],s=NB(i)?i.name:void 0,d=l(e,s);if(d)s===d?(n=i,t=t.slice(1)):n=d;else if(i)n=i,t=t.slice(1);else if(!r)return e;let c=n?o(n):NO.create("div");return c.appendChild(e),r&&tQ.each(r,t=>{let r=o(t);c.insertBefore(r,e)}),a(c,t,NB(n)?n.siblings:void 0)},i=NO.create("div");if(e.length>0){let t=e[0],r=o(t),n=NB(t)?t.siblings:void 0;i.appendChild(a(r,e.slice(1),n))}return i},NL=e=>{e=tQ.trim(e);let t="div",r={name:t,classes:[],attrs:{},selector:e};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,n,o,l)=>{switch(t){case"#":r.attrs.id=n;break;case".":r.classes.push(n);break;case":":-1!==tQ.inArray("checked disabled enabled read-only required".split(" "),n)&&(r.attrs[n]=n)}if("["===o){let e=l.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(r.attrs[e[1]]=e[2])}return""})),r.name=t||"div",r},NM=e=>D(e)?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tQ.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{let t=tQ.map(e.split(/(?:~\+|~|\+)/),NL),r=t.pop();return t.length&&(r.siblings=t),r}).reverse()):[],NF=(e,t)=>{let r,n="",o=cM(e);if(""===o)return"";let l=e=>D(e)?e.replace(/%(\w+)/g,""):"",a=(t,r)=>NO.getStyle(null!=r?r:e.getBody(),t,!0);if(D(t)){let r=e.formatter.get(t);if(!r)return"";t=r[0]}if("preview"in t){let e=t.preview;if(!1===e)return"";o=e||o}let i=t.block||t.inline||"span",s=NM(t.selector);s.length>0?(s[0].name||(s[0].name=i),i=t.selector,r=NP(s,e)):r=NP([i],e);let d=NO.select(i,r)[0]||r.firstChild;NT(t.styles,(e,t)=>{let r=l(e);r&&NO.setStyle(d,t,r)}),NT(t.attributes,(e,t)=>{let r=l(e);r&&NO.setAttrib(d,t,r)}),NT(t.classes,e=>{let t=l(e);NO.hasClass(d,t)||NO.addClass(d,t)}),e.dispatch("PreviewFormats"),NO.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r);let c=a("fontSize"),m=/px$/.test(c)?parseInt(c,10):0;return NT(o.split(" "),e=>{let t=a(e,d);if((!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t))||"#ffffff"!==a_(t=a(e)).toLowerCase())&&("color"!==e||"#000000"!==a_(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===m)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*m+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),e.dispatch("AfterPreviewFormats"),NO.remove(r),n},NI=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},NU=e=>{let t=ND(e),r=o2({});return NI(e),CX(e),w6(e)||EY(r,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,r,n)=>{Sb(e,t,r,n)},remove:(t,r,n,o)=>{Sv(e,t,r,n,o)},toggle:(t,r,n)=>{Sy(e,t,r,n)},match:(t,r,n,o)=>Su(e,t,r,n,o),closest:t=>Sh(e,t),matchAll:(t,r)=>Sf(e,t,r),matchNode:(t,r,n,o)=>Sg(e,t,r,n,o),canApply:t=>Sp(e,t),formatChanged:(t,n,o,l)=>SC(e,r,t,n,o,l),getCssText:Y(NF,e)}},Nz=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Nj=(e,t,r)=>{let n=o2(!1),o=e=>{wH(t,!1,r),t.add({},e)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",e=>{Nz(e.command)||(w$(t,r),t.beforeChange())}),e.on("ExecCommand",e=>{Nz(e.command)||o(e)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",r=>{let l=r.keyCode;if(r.isDefaultPrevented())return;let a=tY.os.isMacOS()&&"Meta"===r.key;(l>=33&&l<=36||l>=37&&l<=40||45===l||r.ctrlKey||a)&&(o(),e.nodeChanged()),(46===l||8===l)&&e.nodeChanged(),n.get()&&t.typing&&!wz(wP(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),n.set(!1),e.nodeChanged())}),e.on("keydown",e=>{let l=e.keyCode;if(e.isDefaultPrevented())return;if(l>=33&&l<=36||l>=37&&l<=40||45===l){t.typing&&o(e);return}let a=e.ctrlKey&&!e.altKey||e.metaKey;if((l<16||l>20)&&224!==l&&91!==l&&!t.typing&&!a){t.beforeChange(),wH(t,!0,r),t.add({},e),n.set(!0);return}(tY.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&t.beforeChange()}),e.on("mousedown",e=>{t.typing&&o(e)});let l=e=>"insertReplacementText"===e.inputType,a=e=>"insertText"===e.inputType&&null===e.data,i=e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType;e.on("input",e=>{e.inputType&&(l(e)||a(e)||i(e))&&o(e)}),e.on("AddUndo Undo Redo ClearUndos",t=>{t.isDefaultPrevented()||e.nodeChanged()})},NH=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},N$=e=>{let t=o5(),r=o2(0),n=o2(0),o={data:[],typing:!1,beforeChange:()=>{St(e,r,t)},add:(l,a)=>Sr(e,o,n,r,t,l,a),dispatchChange:()=>{e.setDirty(!0);let t=wP(e);t.bookmark=dl(e.selection),e.dispatch("change",{level:t,lastLevel:ek(o.data,n.get()).getOrUndefined()})},undo:()=>Sn(e,o,r,n),redo:()=>So(e,n,o.data),clear:()=>{Sl(e,o,n)},reset:()=>{Sa(e,o)},hasUndo:()=>Si(e,o,n),hasRedo:()=>Ss(e,o,n),transact:t=>Sd(e,o,r,t),ignore:t=>{Sc(e,r,t)},extra:(t,r)=>{Sm(e,o,n,t,r)}};return w6(e)||Nj(e,o,r),NH(e),o},Nq=[9,27,g9.HOME,g9.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,g9.DOWN,g9.UP,g9.LEFT,g9.RIGHT].concat(tY.browser.isFirefox()?[224]:[]),NV="data-mce-placeholder",NW=e=>"keydown"===e.type||"keyup"===e.type,NK=e=>{let t=e.keyCode;return t===g9.BACKSPACE||t===g9.DELETE},NY=e=>{if(!NW(e))return!1;{let t=e.keyCode;return!NK(e)&&(g9.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||ei(Nq,t))}},NG=e=>NW(e)&&!(NK(e)||"keyup"===e.type&&229===e.keyCode),NX=(e,t,r)=>{if(!e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0}))return!1;{let n=t.firstElementChild;return!n||!(e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right"))&&r===n.nodeName.toLowerCase()}},NZ=e=>{var t;let r=e.dom,n=d4(e),o=null!==(t=cN(e))&&void 0!==t?t:"",l=(t,a)=>{if(NY(t))return;let i=e.getBody(),s=!NG(t)&&NX(r,i,n);(""!==r.getAttrib(i,NV)!==s||a)&&(r.setAttrib(i,NV,s?o:null),dA(e,s),e.on(s?"keydown":"keyup",l),e.off(s?"keyup":"keydown",l))};tf(o)&&e.on("init",t=>{l(t,!0),e.on("change SetContent ExecCommand",l),e.on("paste",t=>gO.setEditorTimeout(e,()=>l(t)))})},NQ=(e,t)=>({block:e,position:t}),NJ=(e,t)=>({from:e,to:t}),N0=(e,t)=>vw(rM.fromDom(e),rM.fromDom(t.container())).map(e=>NQ(e,t)),N1=e=>!(r$(e.to.block,e.from.block)||r$(e.from.block,e.to.block)),N2=e=>!rH(e.from.block,e.to.block),N3=(e,t)=>nd(t,e=>iz(e)||oL(e.dom),t=>rH(t,e)).filter(rs).getOr(e),N8=(e,t)=>{let r=rM.fromDom(e);return rH(N3(r,t.from.block),N3(r,t.to.block))},N5=e=>!1===oM(e.from.block.dom)&&!1===oM(e.to.block.dom),N6=e=>{let t=e=>iM(e)||lg(e.dom)||iI(e);return t(e.from.block)&&t(e.to.block)},N9=(e,t,r,n)=>oB(n.position.getNode())&&!o0(e,n.block)?uw(!1,n.block.dom).bind(e=>e.isEqual(n.position)?uE(r,t,e).bind(e=>N0(t,e)):et.some(n)).getOr(n):n,N4=(e,t,r,n)=>{let o=N0(t,sF.fromRangeStart(n)),l=o.bind(n=>uE(r,t,n.position).bind(n=>N0(t,n).map(n=>N9(e,t,r,n))));return t2(o,l,NJ).filter(e=>N2(e)&&N8(t,e)&&N5(e)&&N6(e)&&N1(e))},N7=(e,t,r,n)=>n.collapsed?N4(e,t,r,n):et.none(),Re=(e,t)=>{let r=r2(e);return ev(r,e=>t.isBlock(rn(e))).fold(V(r),e=>r.slice(0,e))},Rt=(e,t)=>{let r=Re(e,t);return ec(r,nU),r},Rr=(e,t,r)=>eb(bl(r,t).reverse(),t=>o0(e,t)).each(nU),Rn=(e,t)=>0===ef(r0(t),t=>!o0(e,t)).length,Ro=(e,t,r,n,o)=>{if(o0(n,r))return iV(r),uN(r.dom);Rn(n,o)&&o0(n,t)&&nT(o,rM.fromTag("br"));let l=uk(r.dom,sF.before(o.dom));return ec(Rt(t,n),e=>{nT(o,e)}),Rr(n,e,t),l},Rl=(e,t)=>e.isInline(rn(t)),Ra=(e,t,r,n)=>{if(o0(n,r)){if(o0(n,t)){let e=eg((e=>{let t=(e,r)=>r8(e).fold(()=>r,e=>Rl(n,e)?t(e,r.concat(i_(e))):r);return t(e,[])})(r),(e,t)=>(nL(e,t),t),iq());nI(t),nP(t,e)}return nU(r),uN(t.dom)}let o=uR(r.dom);return ec(Rt(t,n),e=>{nP(r,e)}),Rr(n,e,t),o},Ri=(e,t)=>{let r=bl(t,e);return et.from(r[r.length-1])},Rs=(e,t)=>r$(t,e)?Ri(t,e):et.none(),Rd=(e,t)=>{uw(e,t.dom).bind(e=>et.from(e.getNode())).map(rM.fromDom).filter(iL).each(nU)},Rc=(e,t,r,n)=>(Rd(!0,t),Rd(!1,r),Rs(t,r).fold(Y(Ra,e,t,r,n),Y(Ro,e,t,r,n))),Rm=(e,t,r,n,o)=>t?Rc(e,n,r,o):Rc(e,r,n,o),Ru=(e,t)=>{let r=rM.fromDom(e.getBody());return N7(e.schema,r.dom,t,e.selection.getRng()).map(n=>()=>{Rm(r,t,n.from.block,n.to.block,e.schema).each(t=>{e.selection.setRng(t.toRange())})})},Rf=(e,t,r)=>{let n=t.getRng();return t2(vw(e,rM.fromDom(n.startContainer)),vw(e,rM.fromDom(n.endContainer)),(o,l)=>rH(o,l)?et.none():et.some(()=>{n.deleteContents(),Rm(e,!0,o,l,r).each(e=>{t.setRng(e.toRange())})})).getOr(et.none())},Rg=(e,t)=>ns(rM.fromDom(t),iz,Y(rH,e)).isSome(),Rp=(e,t)=>Rg(e,t.startContainer)||Rg(e,t.endContainer),Rh=(e,t)=>{let r=uk(e.dom,sF.fromRangeStart(t)).isNone(),n=uS(e.dom,sF.fromRangeEnd(t)).isNone();return!Rp(e,t)&&r&&n},Rb=e=>et.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Rv=e=>{let t=rM.fromDom(e.getBody());return Rh(t,e.selection.getRng())?Rb(e):Rf(t,e.selection,e.schema)},Ry=(e,t)=>e.selection.isCollapsed()?et.none():Rv(e),RC=(e,t,r,n,o)=>et.from(t._selectionOverrides.showCaret(e,r,n,o)),RE=e=>{let t=e.ownerDocument.createRange();return t.selectNode(e),t},Rx=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?et.none():et.some(RE(t)),R_=(e,t,r)=>{let n=ue(1,e.getBody(),t),o=sF.fromRangeStart(n),l=o.getNode();if(mY(l))return RC(1,e,l,!o.isAtEnd(),!1);let a=o.getNode(!0);if(mY(a))return RC(1,e,a,!1,!1);let i=yb(e.dom.getRoot(),o.getNode());return mY(i)?RC(1,e,i,!1,r):et.none()},Rw=(e,t,r)=>t.collapsed?R_(e,t,r).getOr(t):t,RS=e=>be(e)||h6(e),Rk=e=>bt(e)||h9(e),RN=(e,t)=>{oN(t)&&0===t.data.length&&e.remove(t)},RR=(e,t,r,n,o,l)=>{RC(n,e,l.getNode(!o),o,!0).each(r=>{if(t.collapsed){let e=t.cloneRange();o?e.setEnd(r.startContainer,r.startOffset):e.setStart(r.endContainer,r.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(r)}),RN(e.dom,r)},RA=(e,t)=>{let r=e.selection.getRng();if(!oN(r.commonAncestorContainer))return et.none();let n=t?1:-1,o=uf(e.getBody()),l=Y(ul,t?o.next:o.prev),a=t?RS:Rk,i=ur(n,e.getBody(),r),s=l(i),d=s?vp(t,s):s;if(!d||!ua(i,d))return et.none();if(a(d))return et.some(()=>RR(e,r,i.getNode(),n,t,d));let c=l(d);return c&&a(c)&&ua(d,c)?et.some(()=>RR(e,r,i.getNode(),n,t,c)):et.none()},RD=(e,t)=>RA(e,t),RT=(e,t)=>{let r=e.getBody();return t?uN(r).filter(be):uR(r).filter(bt)},RO=e=>{let t=e.selection.getRng();return!t.collapsed&&(RT(e,!0).exists(e=>e.isEqual(sF.fromRangeStart(t)))||RT(e,!1).exists(e=>e.isEqual(sF.fromRangeEnd(t))))},RB=e=>I(e)&&(iz(rM.fromDom(e))||iI(rM.fromDom(e))),RP=di([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),RL=(e,t)=>{let r=t.getNode(!e);return oh(r)&&r.getAttribute("data-mce-caret")===(e?"after":"before")},RM=(e,t,r,n,o)=>{let l=t=>o.isInline(t.nodeName.toLowerCase())&&!m3(r,n,e);return ut(!t,r).fold(()=>ut(t,n).fold(J,l),l)},RF=(e,t,r,n,o)=>{let l=o.getNode(!r);return vw(rM.fromDom(t),rM.fromDom(n.getNode())).map(t=>o0(e,t)?RP.remove(t.dom):RP.moveToElement(l)).orThunk(()=>et.some(RP.moveToElement(l)))},RI=(e,t,r,n)=>uE(t,e,r).bind(o=>{if(RB(o.getNode())||RM(e,t,r,o,n))return et.none();if(t&&oM(o.getNode()))return RF(n,e,t,r,o);if(!t&&oM(o.getNode(!0)))return RF(n,e,t,r,o);if(t&&bt(r))return et.some(RP.moveToPosition(o));else if(!t&&be(r))return et.some(RP.moveToPosition(o));else return et.none()}),RU=(e,t)=>F(t)?et.none():e&&oM(t.nextSibling)?et.some(RP.moveToElement(t.nextSibling)):!e&&oM(t.previousSibling)?et.some(RP.moveToElement(t.previousSibling)):et.none(),Rz=(e,t,r)=>r.fold(e=>et.some(RP.remove(e)),e=>et.some(RP.moveToElement(e)),r=>m3(t,r,e)?et.none():et.some(RP.moveToPosition(r))),Rj=(e,t,r,n)=>RL(t,r)?RU(t,r.getNode(!t)).orThunk(()=>RI(e,t,r,n)):RI(e,t,r,n).bind(t=>Rz(e,r,t)),RH=(e,t,r,n)=>{let o=ue(t?1:-1,e,r),l=sF.fromRangeStart(o),a=rM.fromDom(e);return!t&&bt(l)?et.some(RP.remove(l.getNode(!0))):t&&be(l)?et.some(RP.remove(l.getNode())):!t&&be(l)&&bv(a,l,n)?by(a,l,n).map(e=>RP.remove(e.getNode())):t&&bt(l)&&bb(a,l,n)?bC(a,l,n).map(e=>RP.remove(e.getNode())):Rj(e,t,l,n)},R$=(e,t)=>r=>(e._selectionOverrides.hideFakeCaret(),va(e,t,rM.fromDom(r)),!0),Rq=(e,t)=>r=>{let n=t?sF.before(r):sF.after(r);return e.selection.setRng(n.toRange()),!0},RV=e=>t=>(e.selection.setRng(t.toRange()),!0),RW=(e,t)=>et.from(yb(e.getBody(),t)),RK=(e,t)=>{let r=e.selection.getNode();return RW(e,r).filter(oM).fold(()=>RH(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>r.fold(R$(e,t),Rq(e,t),RV(e))),()=>et.some(H))},RY=e=>{ec(ot(e,".mce-offscreen-selection"),nU)},RG=(e,t)=>{let r=e.selection.getNode();return oM(r)&&!oI(r)?RW(e,r.parentNode).filter(oM).fold(()=>et.some(()=>{RY(rM.fromDom(e.getBody())),va(e,t,rM.fromDom(e.selection.getNode())),vS(e)}),()=>et.some(H)):RO(e)?et.some(()=>{vR(e,e.selection.getRng(),rM.fromDom(e.getBody()))}):et.none()},RX=e=>{let t=e.dom,r=e.selection,n=yb(e.getBody(),r.getNode());if(oL(n)&&t.isBlock(n)&&t.isEmpty(n)){let e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(e),r.setRng(sF.before(e).toRange())}return!0},RZ=(e,t)=>e.selection.isCollapsed()?RK(e,t):RG(e,t),RQ=e=>e.hasOwnProperty("text"),RJ=e=>e.hasOwnProperty("marker"),R0=(e,t)=>{let r=(e,r)=>{if(oN(e))return{text:e,offset:r};{let n=t(),o=e.childNodes;return r<o.length?(e.insertBefore(n,o[r]),{marker:n,before:!0}):(e.appendChild(n),{marker:n,before:!1})}},n=r(e.endContainer,e.endOffset);return{start:r(e.startContainer,e.startOffset),end:n}},R1=e=>{var t,r;let{start:n,end:o}=e,l=new window.Range;return RQ(n)?l.setStart(n.text,n.offset):RJ(n)&&(n.before?l.setStartBefore(n.marker):l.setStartAfter(n.marker),null===(t=n.marker.parentNode)||void 0===t||t.removeChild(n.marker)),RQ(o)?l.setEnd(o.text,o.offset):RJ(o)&&(o.before?l.setEndBefore(o.marker):l.setEndAfter(o.marker),null===(r=o.marker.parentNode)||void 0===r||r.removeChild(o.marker)),l},R2=(e,t)=>{var r;let n=e.dom,o=n.getParent(e.selection.getStart(),n.isBlock),l=n.getParent(e.selection.getEnd(),n.isBlock),a=e.getBody();if("div"===(null===(r=null==o?void 0:o.nodeName)||void 0===r?void 0:r.toLowerCase())&&o&&l&&o===a.firstChild&&l===a.lastChild&&!n.isEmpty(a)){let r=o.cloneNode(!1);return et.some(()=>{if(t?vE(e):vC(e),a.firstChild!==o){let t=R0(e.selection.getRng(),()=>document.createElement("span"));Array.from(a.childNodes).forEach(e=>r.appendChild(e)),a.appendChild(r),e.selection.setRng(R1(t))}})}return et.none()},R3=(e,t)=>{let r=sF.fromRangeStart(e.selection.getRng());return uE(t,e.getBody(),r).filter(e=>t?h8(e):h5(e)).bind(e=>m8(t?0:-1,e)).map(t=>()=>e.selection.select(t))},R8=(e,t)=>e.selection.isCollapsed()?R3(e,t):et.none(),R5=e=>oN(e)&&"\uFEFF"===e.data[0],R6=e=>oN(e)&&"\uFEFF"===e.data[e.data.length-1],R9=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode("\uFEFF")},R4=e=>{var t;if(oN(e.previousSibling))return R6(e.previousSibling)||e.previousSibling.appendData("\uFEFF"),e.previousSibling;if(oN(e))return R5(e)||e.insertData(0,"\uFEFF"),e;{let r=R9(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(r,e),r}},R7=e=>{var t,r;if(oN(e.nextSibling))return R5(e.nextSibling)||e.nextSibling.insertData(0,"\uFEFF"),e.nextSibling;if(oN(e))return R6(e)||e.appendData("\uFEFF"),e;{let n=R9(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e.nextSibling):null===(r=e.parentNode)||void 0===r||r.appendChild(n),n}},Ae=(e,t)=>e?R4(t):R7(t),At=Y(Ae,!0),Ar=Y(Ae,!1),An=(e,t)=>oN(e.container())?Ae(t,e.container()):Ae(t,e.getNode()),Ao=(e,t)=>{let r=t.get();return r&&e.container()===r&&iX(r)},Al=(e,t)=>t.fold(t=>{m$(e.get());let r=At(t);return e.set(r),et.some(sF(r,r.length-1))},t=>uN(t).map(t=>{if(Ao(t,e))return sF(e.get(),1);{m$(e.get());let r=An(t,!0);return e.set(r),sF(r,1)}}),t=>uR(t).map(t=>{if(Ao(t,e)){let t=e.get();return sF(t,t.length-1)}{m$(e.get());let r=An(t,!1);return e.set(r),sF(r,r.length-1)}}),t=>{m$(e.get());let r=Ar(t);return e.set(r),et.some(sF(r,1))}),Aa=(e,t)=>{for(let r=0;r<e.length;r++){let n=e[r].apply(null,t);if(n.isSome())return n}return et.none()},Ai=di([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),As=(e,t)=>m2(t,e)||e,Ad=(e,t,r)=>{let n=vh(r),o=As(t,n.container());return vu(e,o,n).fold(()=>uS(o,n).bind(Y(vu,e,o)).map(e=>Ai.before(e)),et.none)},Ac=(e,t)=>null===uT(e,t),Am=(e,t,r)=>vu(e,t,r).filter(Y(Ac,t)),Au=(e,t,r)=>{let n=vb(r);return Am(e,t,n).bind(e=>uk(e,n).isNone()?et.some(Ai.start(e)):et.none())},Af=(e,t,r)=>{let n=vh(r);return Am(e,t,n).bind(e=>uS(e,n).isNone()?et.some(Ai.end(e)):et.none())},Ag=(e,t,r)=>{let n=vb(r),o=As(t,n.container());return vu(e,o,n).fold(()=>uk(o,n).bind(Y(vu,e,o)).map(e=>Ai.after(e)),et.none)},Ap=e=>!vc(Ab(e)),Ah=(e,t,r)=>Aa([Ad,Au,Af,Ag],[e,t,r]).filter(Ap),Ab=e=>e.fold(W,W,W,W),Av=e=>e.fold(V("before"),V("start"),V("end"),V("after")),Ay=e=>e.fold(Ai.before,Ai.before,Ai.after,Ai.after),AC=e=>e.fold(Ai.start,Ai.start,Ai.end,Ai.end),AE=(e,t)=>Av(e)===Av(t)&&Ab(e)===Ab(t),Ax=(e,t,r,n,o,l)=>t2(vu(t,r,n),vu(t,r,o),(t,n)=>t!==n&&vf(r,t,n)?Ai.after(e?t:n):l).getOr(l),A_=(e,t)=>e.fold(ee,e=>!AE(e,t)),Aw=(e,t,r,n,o)=>{let l=vp(e,o);return uE(e,r,l).map(Y(vp,e)).fold(()=>n.map(Ay),o=>Ah(t,r,o).map(Y(Ax,e,t,r,l,o)).filter(Y(A_,n))).filter(Ap)},AS=(e,t)=>e?t.fold($(et.some,Ai.start),et.none,$(et.some,Ai.after),et.none):t.fold(et.none,$(et.some,Ai.before),et.none,$(et.some,Ai.end)),Ak=(e,t,r,n)=>{let o=vp(e,n),l=Ah(t,r,o);return Ah(t,r,o).bind(Y(AS,e)).orThunk(()=>Aw(e,t,r,l,n))},AN=e=>U(e.selection.getSel().modify),AR=(e,t,r)=>(t.setRng(sF(r.container(),r.offset()+(e?1:-1)).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0),AA=(e,t)=>{let r=t.selection.getRng(),n=e?sF.fromRangeEnd(r):sF.fromRangeStart(r);return!!AN(t)&&(e&&i0(n)?AR(!0,t.selection,n):!!(!e&&i1(n))&&AR(!1,t.selection,n))};(s=u||(u={}))[s.Br=0]="Br",s[s.Block=1]="Block",s[s.Wrap=2]="Wrap",s[s.Eol=3]="Eol";let AD=(e,t)=>-1===e?ex(t):t,AT=(e,t,r)=>1===e?t.next(r):t.prev(r),AO=(e,t,r,n)=>oB(n.getNode(1===t))?u.Br:!1===m3(r,n)?u.Block:u.Wrap,AB=(e,t,r,n)=>{let o=uf(r),l=n,a=[];for(;l;){let n=AT(t,o,l);if(!n)break;if(oB(n.getNode(!1))){if(1===t)return{positions:AD(t,a).concat([n]),breakType:u.Br,breakAt:et.some(n)};return{positions:AD(t,a),breakType:u.Br,breakAt:et.some(n)}}if(!n.isVisible()){l=n;continue}if(e(l,n)){let e=AO(r,t,l,n);return{positions:AD(t,a),breakType:e,breakAt:et.some(n)}}a.push(n),l=n}return{positions:AD(t,a),breakType:u.Eol,breakAt:et.none()}},AP=(e,t,r,n)=>t(r,n).breakAt.map(n=>{let o=t(r,n).positions;return -1===e?o.concat(n):[n].concat(o)}).getOr([]),AL=(e,t)=>ep(e,(e,r)=>e.fold(()=>et.some(r),n=>t2(eN(n.getClientRects()),eN(r.getClientRects()),(e,o)=>{let l=Math.abs(t-e.left);return Math.abs(t-o.left)<=l?r:n}).or(e)),et.none()),AM=(e,t)=>eN(t.getClientRects()).bind(t=>AL(e,t.left)),AF=Y(AB,sF.isAbove,-1),AI=Y(AB,sF.isBelow,1),AU=Y(AP,-1,AF),Az=Y(AP,1,AI),Aj=(e,t)=>AF(e,t).breakAt.isNone(),AH=(e,t)=>AI(e,t).breakAt.isNone(),A$=e=>uN(e).map(t=>[t].concat(AI(e,t).positions)).getOr([]),Aq=e=>uR(e).map(t=>AF(e,t).positions.concat(t)).getOr([]),AV=(e,t)=>AM(AU(e,t),t),AW=(e,t)=>AM(Az(e,t),t),AK=(e,t)=>Math.abs(e.left-t),AY=(e,t)=>Math.abs(e.right-t),AG=e=>eV(e,"node"),AX=(e,t)=>eJ(e,(e,r)=>{let n=Math.min(AK(e,t),AY(e,t)),o=Math.min(AK(r,t),AY(r,t));return o===n&&AG(r)&&oM(r.node)||o<n?r:e}),AZ=e=>{let t=t=>ed(t,t=>{let r=i7(t);return r.node=e,r});if(oh(e))return t(e.getClientRects());if(!oN(e))return[];{let r=e.ownerDocument.createRange();return r.setStart(e,0),r.setEnd(e,e.data.length),t(r.getClientRects())}},AQ=e=>eC(e,AZ);(d=f||(f={}))[d.Up=-1]="Up",d[d.Down=1]="Down";let AJ=(e,t,r,n)=>{let o=n;for(;o=m0(o,e,sE,t);)if(r(o))return},A0=(e,t,r,n,o,l)=>{let a=0,i=[],s=n=>{let l=AQ([n]);e===f.Up&&(l=l.reverse());for(let e=0;e<l.length;e++){let n=l[e];if(!r(n,d)){if(i.length>0&&t(n,e1(i))&&a++,n.line=a,o(n))return!0;i.push(n)}}return!1},d=e1(l.getClientRects());if(!d)return i;let c=l.getNode();return c&&(s(c),AJ(e,n,s,c)),i},A1=(e,t)=>t.line>e,A2=(e,t)=>t.line===e,A3=Y(A0,f.Up,sn,so),A8=Y(A0,f.Down,so,sn),A5=e=>e1(e.getClientRects()),A6=(e,t,r,n)=>{let o,l,a,i;let s=uf(t),d=[],c=0;e===f.Down?(o=s.next,l=so,a=sn,i=sF.after(n)):(o=s.prev,l=sn,a=so,i=sF.before(n));let m=A5(i);do{if(!i.isVisible())continue;let e=A5(i);if(a(e,m))continue;d.length>0&&l(e,e1(d))&&c++;let t=i7(e);if(t.position=i,t.line=c,r(t))break;d.push(t)}while(i=o(i));return d},A9=e=>t=>A1(e,t),A4=e=>t=>A2(e,t),A7=(e,t)=>{e.selection.setRng(t),hr(e,e.selection.getRng())},De=(e,t,r)=>et.some(Rw(e,t,r)),Dt=(e,t,r,n,o,l)=>{let a=1===t,i=uf(e.getBody()),s=Y(ul,a?i.next:i.prev),d=a?n:o;if(!r.collapsed){let n=sd(r);if(l(n))return RC(t,e,n,-1===t,!1);if(RO(e)){let e=r.cloneRange();return e.collapse(-1===t),et.from(e)}}let c=ur(t,e.getBody(),r);if(d(c))return Rx(e,c.getNode(!a));let m=s(c),u=i9(r);if(!m)return u?et.some(r):et.none();if(d(m=vp(a,m)))return RC(t,e,m.getNode(!a),a,!1);let f=s(m);return f&&d(f)&&ua(m,f)?RC(t,e,f.getNode(!a),a,!1):u?De(e,m.toRange(),!1):et.none()},Dr=(e,t,r,n,o,l)=>{let a;let i=ur(t,e.getBody(),r),s=e1(i.getClientRects()),d=t===f.Down,c=e.getBody();if(!s)return et.none();if(RO(e)){let e=d?sF.fromRangeEnd(r):sF.fromRangeStart(r);return(d?AW:AV)(c,e).orThunk(()=>et.from(e)).map(e=>e.toRange())}let m=ef((d?A8:A3)(c,A9(1),i),A4(1)),u=s.left,g=AX(m,u);if(g&&l(g.node)){let r=Math.abs(u-g.left),n=Math.abs(u-g.right);return RC(t,e,g.node,r<n,!1)}if(a=n(i)?i.getNode():o(i)?i.getNode(!0):sd(r)){let r=A6(t,c,A9(1),a),n=AX(ef(r,A4(1)),u);if(n||(n=e1(ef(r,A4(0)))))return De(e,n.position.toRange(),!1)}return 0===m.length?Dn(e,d).filter(d?o:n).map(t=>Rw(e,t.toRange(),!1)):et.none()},Dn=(e,t)=>{let r=e.selection.getRng(),n=t?sF.fromRangeEnd(r):sF.fromRangeStart(r),o=m1(n.container(),e.getBody());return t?eR(AI(o,n).positions):eN(AF(o,n).positions)},Do=(e,t,r)=>Dn(e,t).filter(r).exists(t=>(e.selection.setRng(t.toRange()),!0)),Dl=(e,t)=>{let r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},Da=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Di=(e,t,r)=>Al(t,r).map(t=>(Dl(e,t),r)),Ds=(e,t,r)=>{let n=sF.fromRangeStart(e);if(e.collapsed)return n;{let o=sF.fromRangeEnd(e);return r?uk(t,o).getOr(o):uS(t,n).getOr(n)}},Dd=(e,t,r)=>{let n=e.getBody(),o=Ds(e.selection.getRng(),n,r);return Ak(r,Y(vd,e),n,o).bind(r=>Di(e,t,r))},Dc=(e,t,r)=>{let n=ef(ed(ot(rM.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),e),o=ef(r,e);ec(e_(n,o),Y(Da,!1)),ec(e_(o,n),Y(Da,!0))},Dm=(e,t)=>{let r=t.get();if(e.selection.isCollapsed()&&!e.composing&&r){let n=sF.fromRangeStart(e.selection.getRng());sF.isTextPosition(n)&&!vg(n)&&(Dl(e,mH(r,n)),t.set(null))}},Du=(e,t,r,n)=>{t.selection.isCollapsed()&&ec(ef(n,e),n=>{let o=sF.fromRangeStart(t.selection.getRng());Ah(e,t.getBody(),o).bind(e=>Di(t,r,e))})},Df=(e,t,r)=>!!cP(e)&&Dd(e,t,r).isSome(),Dg=(e,t,r)=>!!cP(t)&&AA(e,t),Dp=e=>{let t=o2(null),r=Y(vd,e);return e.on("NodeChange",n=>{cP(e)&&(Dc(r,e.dom,n.parents),Dm(e,t),Du(r,e,t,n.parents))}),t},Dh=Y(Dg,!0),Db=Y(Dg,!1),Dv=(e,t,r)=>{if(!cP(e))return!1;{let n=Dn(e,t).getOrThunk(()=>{let r=e.selection.getRng();return t?sF.fromRangeEnd(r):sF.fromRangeStart(r)});return Ah(Y(vd,e),e.getBody(),n).exists(t=>Al(r,Ay(t)).exists(t=>(Dl(e,t),!0)))}},Dy=(e,t)=>{let r=document.createRange();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r},DC=e=>t2(uN(e),uR(e),(t,r)=>{let n=vp(!0,t),o=vp(!1,r);return uS(e,n).forall(e=>e.isEqual(o))}).getOr(!0),DE=(e,t)=>r=>Al(t,r).map(t=>()=>Dl(e,t)),Dx=(e,t,r,n)=>{let o=e.getBody(),l=Y(vd,e);e.undoManager.ignore(()=>{e.selection.setRng(Dy(r,n)),vC(e),Ah(l,o,sF.fromRangeStart(e.selection.getRng())).map(AC).bind(DE(e,t)).each(Q)}),e.nodeChanged()},D_=(e,t)=>m2(t,e)||e,Dw=(e,t,r,n)=>{let o=D_(e.getBody(),n.container()),l=Y(vd,e),a=Ah(l,o,n);return a.bind(e=>r?e.fold(V(et.some(AC(e))),et.none,V(et.some(Ay(e))),et.none):e.fold(et.none,V(et.some(Ay(e))),et.none,V(et.some(AC(e))))).map(DE(e,t)).getOrThunk(()=>{let i=ux(r,o,n),s=i.bind(e=>Ah(l,o,e));return t2(a,s,()=>vu(l,o,n).bind(t=>DC(t)?et.some(()=>{va(e,r,rM.fromDom(t))}):et.none())).getOrThunk(()=>s.bind(()=>i.map(o=>()=>{r?Dx(e,t,n,o):Dx(e,t,o,n)})))})},DS=(e,t,r)=>{if(e.selection.isCollapsed()&&cP(e)){let n=sF.fromRangeStart(e.selection.getRng());return Dw(e,t,r,n)}return et.none()},Dk=e=>r6(e)>1,DN=(e,t)=>{let r=rM.fromDom(e.getBody()),n=bl(rM.fromDom(e.selection.getStart()),r);return ev(n,t).fold(V(n),e=>n.slice(0,e))},DR=e=>1===r6(e),DA=e=>DN(e,t=>e.schema.isBlock(rn(t))||Dk(t)),DD=e=>DN(e,t=>e.schema.isBlock(rn(t))),DT=(e,t)=>{let r=Y(C0,e);return eC(t,e=>r(e)?[e.dom]:[])},DO=e=>{let t=DD(e);return DT(e,t)},DB=(e,t,r,n)=>{let o=DT(t,n);if(0===o.length)va(t,e,r);else{let e=CQ(r.dom,o);t.selection.setRng(e.toRange())}},DP=(e,t)=>{let r=ef(DA(e),DR);return eR(r).bind(n=>vk(t,sF.fromRangeStart(e.selection.getRng()),n.dom)&&!fz(n)?et.some(()=>DB(t,e,n,r)):et.none())},DL=(e,t)=>{let r=t.parentElement;return oB(t)&&!P(r)&&e.dom.isEmpty(r)},DM=e=>fz(rM.fromDom(e)),DF=(e,t)=>{let r=e.selection.getStart(),n=DL(e,r)||DM(r)?CQ(r,t):CJ(e.selection.getRng(),t);e.selection.setRng(n.toRange())},DI=(e,t)=>{let r=e_(t,DO(e));r.length>0&&DF(e,r)},DU=e=>oN(e.startContainer),Dz=e=>0===e.startOffset&&DU(e),Dj=(e,t)=>{let r=t.startContainer.parentElement;return!P(r)&&C0(e,rM.fromDom(r))},DH=e=>{let t=e.startContainer.parentNode,r=e.endContainer.parentNode;return!P(t)&&!P(r)&&t.isEqualNode(r)},D$=e=>{let t=e.endContainer;return e.endOffset===(oN(t)?t.length:t.childNodes.length)},Dq=e=>DH(e)&&D$(e),DV=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),DW=e=>Dq(e)||DV(e),DK=e=>{let t=e.selection.getRng();return Dz(t)&&Dj(e,t)&&DW(t)},DY=e=>{if(!DK(e))return et.none();{let t=DO(e);return et.some(()=>{vC(e),DI(e,t)})}},DG=(e,t)=>e.selection.isCollapsed()?DP(e,t):DY(e),DX=(e,t)=>or(e,e=>uD(e.dom),e=>t.isBlock(rn(e))),DZ=e=>DX(rM.fromDom(e.selection.getStart()),e.schema),DQ=e=>{let t=e.selection.getRng();return t.collapsed&&(DU(t)||e.dom.isEmpty(t.startContainer))&&!DZ(e)},DJ=e=>(DQ(e)&&DF(e,[]),!0),D0=(e,t,r)=>I(r)?et.some(()=>{e._selectionOverrides.hideFakeCaret(),va(e,t,rM.fromDom(r))}):et.none(),D1=(e,t)=>{let r=t?h6:h9,n=ur(t?1:-1,e.getBody(),e.selection.getRng());return r(n)?D0(e,t,n.getNode(!t)):et.from(vp(t,n)).filter(e=>r(e)&&ua(n,e)).bind(r=>D0(e,t,r.getNode(!t)))},D2=(e,t)=>{let r=e.selection.getNode();return oz(r)?D0(e,t,r):et.none()},D3=(e,t)=>e.selection.isCollapsed()?D1(e,t):D2(e,t),D8=e=>nd(e,e=>oL(e.dom)||oM(e.dom)).exists(e=>oL(e.dom)),D5=e=>th(null!=e?e:"").getOr(0),D6=(e,t)=>(e||iP(t)?"margin":"padding")+("rtl"===nS(t,"direction")?"-right":"-left"),D9=(e,t,r,n,o,l)=>{let a=D6(r,rM.fromDom(l)),i=D5(e.getStyle(l,a));if("outdent"===t){let t=Math.max(0,i-n);e.setStyle(l,a,t?t+o:"")}else e.setStyle(l,a,i+n+o)},D4=(e,t)=>eE(t,t=>{let r=D6(cv(e),t),n=nN(t,r).map(D5).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&n>0}),D7=e=>{let t=Tr(e);return!e.mode.isReadOnly()&&(t.length>1||D4(e,t))},Te=e=>iF(e)||iI(e),Tt=e=>rY(e).exists(Te),Tr=e=>ef(nH(e.selection.getSelectedBlocks()),e=>!Te(e)&&!Tt(e)&&D8(e)),Tn=(e,t)=>{var r,n;if(e.mode.isReadOnly())return;let{dom:o}=e,l=cy(e),a=null!==(n=null===(r=/[a-z%]+$/i.exec(l))||void 0===r?void 0:r[0])&&void 0!==n?n:"px",i=D5(l),s=cv(e);ec(Tr(e),e=>{D9(o,t,s,i,a,e.dom)})},To=e=>Tn(e,"indent"),Tl=e=>Tn(e,"outdent"),Ta=e=>{if(e.selection.isCollapsed()&&D7(e)){let t=e.dom,r=e.selection.getRng(),n=sF.fromRangeStart(r),o=t.getParent(r.startContainer,t.isBlock);if(null!==o&&bm(rM.fromDom(o),n,e.schema))return et.some(()=>Tl(e))}return et.none()},Ti=(e,t,r)=>eD([Ta,RZ,RD,(e,r)=>DS(e,t,r),Ru,yh,R8,D3,Ry,DG,R2],t=>t(e,r)).filter(t=>e.selection.isEditable()),Ts=(e,t)=>{Ti(e,t,!1).fold(()=>{e.selection.isEditable()&&(vC(e),vS(e))},Q)},Td=(e,t)=>{Ti(e,t,!0).fold(()=>{e.selection.isEditable()&&vE(e)},Q)},Tc=(e,t)=>{e.addCommand("delete",()=>{Ts(e,t)}),e.addCommand("forwardDelete",()=>{Td(e,t)})},Tm=e=>void 0===e.touches||1!==e.touches.length?et.none():et.some(e.touches[0]),Tu=(e,t)=>{let r=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return r>5||n>5},Tf=e=>{let t=o5(),r=o2(!1),n=a9(t=>{e.dispatch("longpress",{...t,type:"longpress"}),r.set(!0)},400);e.on("touchstart",e=>{Tm(e).each(o=>{n.cancel();let l={x:o.clientX,y:o.clientY,target:e.target};n.throttle(e),r.set(!1),t.set(l)})},!0),e.on("touchmove",o=>{n.cancel(),Tm(o).each(n=>{t.on(o=>{Tu(n,o)&&(t.clear(),r.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{n.cancel(),"touchcancel"!==o.type&&t.get().filter(e=>e.target.isEqualNode(o.target)).each(()=>{r.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},Tg=(e,t)=>eq(e,t.nodeName),Tp=(e,t)=>!!oN(t)||!!oh(t)&&!Tg(e.getBlockElements(),t)&&!uJ(t)&&!lb(e,t)&&!o4(t),Th=(e,t,r)=>es(bo(rM.fromDom(r),rM.fromDom(t)),t=>Tg(e,t.dom)),Tb=(e,t)=>{if(oN(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Tg(e,t.nextSibling)||o4(t.nextSibling)}return!1},Tv=e=>e.dom.create(d4(e),d7(e)),Ty=e=>{let t,r;let n=e.dom,o=e.selection,l=e.schema,a=l.getBlockElements(),i=o.getStart(),s=e.getBody(),d=null,c=d4(e);if(!i||!oh(i))return;let m=s.nodeName.toLowerCase();if(!l.isValidChild(m,c.toLowerCase())||Th(a,s,i))return;if(s.firstChild===s.lastChild&&oB(s.firstChild)){(t=Tv(e)).appendChild(iq().dom),s.replaceChild(t,s.firstChild),e.selection.setCursorLocation(t,0),e.nodeChanged();return}let u=s.firstChild;for(;u;)if(oh(u)&&lu(l,u),Tp(l,u)){if(Tb(a,u)){r=u,u=u.nextSibling,n.remove(r);continue}if(!t){if(!d&&e.hasFocus()&&(d=R0(e.selection.getRng(),()=>document.createElement("span"))),!u.parentNode){u=null;break}t=Tv(e),s.insertBefore(t,u)}r=u,u=u.nextSibling,t.appendChild(r)}else t=null,u=u.nextSibling;d&&(e.selection.setRng(R1(d)),e.nodeChanged())},TC=(e,t,r)=>{let n=rM.fromDom(Tv(e)),o=iq();nP(n,o),r(t,n);let l=document.createRange();return l.setStartBefore(o.dom),l.setEndBefore(o.dom),l},TE=e=>{e.on("NodeChange",()=>Ty(e))},Tx=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),T_=(e,t,r)=>function(n){let o=arguments,l=o[o.length-2],a=l>0?t.charAt(l-1):"";if('"'===a)return n;if(">"===a){let e=t.lastIndexOf("<",l);if(-1!==e&&-1!==t.substring(e,l).indexOf('contenteditable="false"'))return n}return'<span class="'+r+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},Tw=(e,t,r)=>{let n=t.length,o=r.content;if("raw"!==r.format){for(;n--;)o=o.replace(t[n],T_(e,o,mf(e)));r.content=o}},TS=(e,t)=>eE(e,e=>{let r=t.match(e);return null!==r&&r[0].length===t.length}),Tk=e=>{let t="contenteditable",r=" "+tQ.trim(mg(e))+" ",n=" "+tQ.trim(mf(e))+" ",o=Tx(r),l=Tx(n),a=mp(e);a.length>0&&e.on("BeforeSetContent",t=>{Tw(e,a,t)}),e.parser.addAttributeFilter("class",e=>{let r=e.length;for(;r--;){let n=e[r];o(n)?n.attr(t,"true"):l(n)&&n.attr(t,"false")}}),e.serializer.addAttributeFilter(t,e=>{let r=e.length;for(;r--;){let n=e[r];if(!o(n)&&!l(n))continue;let i=n.attr("data-mce-content");a.length>0&&i?TS(a,i)?(n.name="#text",n.type=3,n.raw=!0,n.value=i):n.remove():n.attr(t,null)}})},TN=e=>ng(rM.fromDom(e.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull(),TR=(e,t)=>{t.hasAttribute("data-mce-caret")&&(i6(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},TA=(e,t)=>{let r=TN(e);if(r){if("compositionstart"===t.type){t.preventDefault(),t.stopPropagation(),TR(e,r);return}iQ(r)&&(TR(e,r),e.undoManager.add())}},TD=e=>{e.on("keyup compositionstart",Y(TA,e))},TT=(e,t,r)=>Dt(t,e,r,be,bt,oM),TO=(e,t,r)=>Dr(t,e,r,e=>be(e)||h4(e),e=>bt(e)||h7(e),oM),TB=e=>{let t=e.dom.create(d4(e));return t.innerHTML='<br data-mce-bogus="1">',t},TP=(e,t,r)=>{let n=uf(e.getBody()),o=Y(ul,1===t?n.next:n.prev);if(r.collapsed){let n=e.dom.getParent(r.startContainer,"PRE");if(!n)return;if(!o(sF.fromRangeStart(r))){let r=rM.fromDom(TB(e));1===t?nO(rM.fromDom(n),r):nT(rM.fromDom(n),r),e.selection.select(r.dom,!0),e.selection.collapse()}}},TL=(e,t)=>{let r=t?1:-1,n=e.selection.getRng();return TT(r,e,n).orThunk(()=>(TP(e,r,n),et.none()))},TM=(e,t)=>{let r=t?1:-1,n=e.selection.getRng();return TO(r,e,n).orThunk(()=>(TP(e,r,n),et.none()))},TF=(e,t)=>vc(t?e.getEnd(!0):e.getStart(!0))?!t:t,TI=(e,t)=>TL(e,TF(e.selection,t)).exists(t=>(A7(e,t),!0)),TU=(e,t)=>TM(e,t).exists(t=>(A7(e,t),!0)),Tz=(e,t)=>Do(e,t,t?bt:be),Tj=(e,t)=>RT(e,!t).map(r=>{let n=r.toRange(),o=e.selection.getRng();return t?n.setStart(o.startContainer,o.startOffset):n.setEnd(o.endContainer,o.endOffset),n}).exists(t=>(A7(e,t),!0)),TH=e=>ei(["figcaption"],rn(e)),T$=(e,t,r)=>{let n=Y(rH,t);return nd(rM.fromDom(e.container()),e=>r.isBlock(rn(e)),n).filter(TH)},Tq=(e,t,r)=>t?AH(e.dom,r):Aj(e.dom,r),TV=(e,t)=>{let r=rM.fromDom(e.getBody()),n=sF.fromRangeStart(e.selection.getRng());return T$(n,r,e.schema).exists(()=>{if(!Tq(r,t,n))return!1;{let n=TC(e,r,t?nP:nB);return e.selection.setRng(n),!0}})},TW=(e,t)=>!!e.selection.isCollapsed()&&TV(e,t),TK=(e,t,r)=>{let n=e.selection.getRng(),o=sF.fromRangeStart(n);return!!(e.getBody().firstChild===t&&Aj(r,o))&&(e.execCommand("InsertNewBlockBefore"),!0)},TY=(e,t)=>{let r=e.selection.getRng(),n=sF.fromRangeStart(r);return!!(e.getBody().lastChild===t&&AH(t,n))&&(e.execCommand("InsertNewBlockAfter"),!0)},TG=(e,t)=>t?et.from(e.dom.getParent(e.selection.getNode(),"details")).map(t=>TY(e,t)).getOr(!1):et.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(t=>et.from(e.dom.getParent(t,"details")).map(r=>TK(e,r,t))).getOr(!1),TX=(e,t)=>TG(e,t),TZ={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},TQ=e=>ed(e,e=>({...TZ,...e})),TJ=e=>ed(e,e=>({...TZ,...e})),T0=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,T1=(e,t)=>eC(TQ(e),e=>T0(e,t)?[e]:[]),T2=(e,t)=>eC(TJ(e),e=>T0(e,t)?[e]:[]),T3=(e,...t)=>()=>e.apply(null,t),T8=(e,t)=>eb(T1(e,t),e=>e.action()),T5=(e,t)=>eD(T2(e,t),e=>e.action()),T6=(e,t)=>{let r=e.selection.getRng();return Dt(e,t?1:-1,r,h6,h9,oz).exists(t=>(A7(e,t),!0))},T9=(e,t)=>{let r=e.selection.getRng();return Dr(e,t?1:-1,r,h6,h9,oz).exists(t=>(A7(e,t),!0))},T4=(e,t)=>Do(e,t,t?h9:h6),T7=di([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Oe={...T7,none:e=>T7.none(e)},Ot=(e,t)=>Or(e,t,ee),Or=(e,t,r)=>eC(r2(e),e=>rI(e,t)?r(e)?[e]:[]:Or(e,t,r)),On=(e,t,r=J)=>r(t)?et.none():ei(e,rn(t))?et.some(t):nf(t,e.join(","),e=>rI(e,"table")||r(e)),Oo=(e,t)=>On(["td","th"],e,t),Ol=e=>Ot(e,"th,td"),Oa=(e,t)=>np(e,"table",t),Oi=(e,t,r,n,o=ee)=>{let l=1===n;if(!l&&r<=0)return Oe.first(e[0]);if(l&&r>=e.length-1)return Oe.last(e[e.length-1]);{let l=r+n,a=e[l];return o(a)?Oe.middle(t,a):Oi(e,t,l,n,o)}},Os=(e,t)=>Oa(e,t).bind(t=>{let r=Ol(t);return ev(r,t=>rH(e,t)).map(e=>({index:e,all:r}))}),Od=(e,t,r)=>Os(e,r).fold(()=>Oe.none(e),r=>Oi(r.all,e,r.index,1,t)),Oc=(e,t,r)=>Os(e,r).fold(()=>Oe.none(),r=>Oi(r.all,e,r.index,-1,t)),Om=e=>iT(e).filter(e=>0!==e.trim().length||e.indexOf("\xa0")>-1).isSome(),Ou=e=>ri(e)&&"false"===rh(e,"contenteditable"),Of=["img","br"],Og=e=>Om(e)||ei(Of,rn(e))||Ou(e),Op=e=>nu(e,Og),Oh=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}),Ob=(e,t)=>eC(t,t=>{let r=Oh(i7(t.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:t},{x:r.right,y:e(r),cell:t}]}),Ov=(e,t,r)=>ep(e,(e,n)=>e.fold(()=>et.some(n),e=>{let o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-r)),l=Math.sqrt(Math.abs(n.x-t)+Math.abs(n.y-r));return et.some(l<o?n:e)}),et.none()),Oy=(e,t,r,n,o)=>Ov(ef(Ob(e,ot(rM.fromDom(r),"td,th,caption").map(e=>e.dom)),e=>t(e,o)),n,o).map(e=>e.cell),OC=Y(Oy,e=>e.bottom,(e,t)=>e.y<t),OE=Y(Oy,e=>e.top,(e,t)=>e.y>t),Ox=(e,t)=>eN(t.getClientRects()).bind(t=>OC(e,t.left,t.top)).bind(e=>AM(Aq(e),t)),O_=(e,t)=>eR(t.getClientRects()).bind(t=>OE(e,t.left,t.top)).bind(e=>AM(A$(e),t)),Ow=(e,t,r)=>r.breakAt.exists(r=>e(t,r).breakAt.isSome()),OS=e=>e.breakType===u.Wrap&&0===e.positions.length,Ok=e=>e.breakType===u.Br&&1===e.positions.length,ON=(e,t,r)=>{let n=e(t,r);return OS(n)||!oB(r.getNode())&&Ok(n)?!Ow(e,t,n):n.breakAt.isNone()},OR=Y(ON,AF),OA=Y(ON,AI),OD=(e,t,r)=>{let n=sF.fromRangeStart(t);return uw(!e,r).exists(e=>e.isEqual(n))},OT=(e,t,r,n)=>{let o=e.selection.getRng();return!!(mK()&&OD(t,o,r))&&(RC(t?1:-1,e,r,!t,!1).each(t=>{A7(e,t)}),!0)},OO=(e,t,r)=>Ox(t,r).orThunk(()=>eN(r.getClientRects()).bind(r=>AL(AU(e,sF.before(t)),r.left))).getOr(sF.before(t)),OB=(e,t,r)=>O_(t,r).orThunk(()=>eN(r.getClientRects()).bind(r=>AL(Az(e,sF.after(t)),r.left))).getOr(sF.after(t)),OP=(e,t)=>{let r=t.getNode(e);return ow(r)?et.some(r):et.none()},OL=(e,t,r)=>{t.undoManager.transact(()=>{let n=TC(t,rM.fromDom(r),e?nO:nT);A7(t,n)})},OM=(e,t,r)=>{let n=t?OP(!0,r):OP(!1,r),o=!1===t;n.fold(()=>A7(e,r.toRange()),n=>uw(o,e.getBody()).filter(e=>e.isEqual(r)).fold(()=>A7(e,r.toRange()),r=>OL(t,e,n)))},OF=(e,t,r,n)=>{let o=e.selection.getRng(),l=sF.fromRangeStart(o),a=e.getBody();return!t&&OR(n,l)?(OM(e,t,OO(a,r,l)),!0):!!(t&&OA(n,l))&&(OM(e,t,OB(a,r,l)),!0)},OI=(e,t,r)=>et.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(n=>et.from(e.dom.getParent(n,"table")).map(o=>r(e,t,o,n))).getOr(!1),OU=(e,t)=>OI(e,t,OT),Oz=(e,t)=>OI(e,t,OF),Oj=e=>px(gg(e,0,e,0)),OH=(e,t,r)=>r.fold(et.none,et.none,(e,t)=>Op(t).map(e=>Oj(e)),r=>e.mode.isReadOnly()||!O$(r)?et.none():(e.execCommand("mceTableInsertRowAfter"),Oq(e,t,r))),O$=e=>nd(e,ru("table")).exists(nb),Oq=(e,t,r)=>OH(e,t,Od(r,OW)),OV=(e,t,r)=>OH(e,t,Oc(r,OW)),OW=e=>nb(e)||oo(e,OK),OK=e=>ri(e)&&nb(e),OY=(e,t)=>{let r=["table","li","dl"],n=rM.fromDom(e.getBody()),o=e=>{let t=rn(e);return rH(e,n)||ei(r,t)},l=e.selection.getRng();return Oo(rM.fromDom(t?l.endContainer:l.startContainer),o).map(r=>(Oa(r,o).each(t=>{e.model.table.clearSelectedCells(t.dom)}),e.selection.collapse(!t),(t?Oq:OV)(e,o,r).each(t=>{e.selection.setRng(t)}),!0)).getOr(!1)},OG=(e,t,r)=>{let n=tY.os.isMacOS()||tY.os.isiOS();T8([{keyCode:g9.RIGHT,action:T3(TI,e,!0)},{keyCode:g9.LEFT,action:T3(TI,e,!1)},{keyCode:g9.UP,action:T3(TU,e,!1)},{keyCode:g9.DOWN,action:T3(TU,e,!0)},...n?[{keyCode:g9.UP,action:T3(Tj,e,!1),metaKey:!0,shiftKey:!0},{keyCode:g9.DOWN,action:T3(Tj,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:g9.RIGHT,action:T3(OU,e,!0)},{keyCode:g9.LEFT,action:T3(OU,e,!1)},{keyCode:g9.UP,action:T3(Oz,e,!1)},{keyCode:g9.DOWN,action:T3(Oz,e,!0)},{keyCode:g9.UP,action:T3(Oz,e,!1)},{keyCode:g9.UP,action:T3(TX,e,!1)},{keyCode:g9.DOWN,action:T3(TX,e,!0)},{keyCode:g9.RIGHT,action:T3(T6,e,!0)},{keyCode:g9.LEFT,action:T3(T6,e,!1)},{keyCode:g9.UP,action:T3(T9,e,!1)},{keyCode:g9.DOWN,action:T3(T9,e,!0)},{keyCode:g9.RIGHT,action:T3(Df,e,t,!0)},{keyCode:g9.LEFT,action:T3(Df,e,t,!1)},{keyCode:g9.RIGHT,ctrlKey:!n,altKey:n,action:T3(Dh,e,t)},{keyCode:g9.LEFT,ctrlKey:!n,altKey:n,action:T3(Db,e,t)},{keyCode:g9.UP,action:T3(TW,e,!1)},{keyCode:g9.DOWN,action:T3(TW,e,!0)}],r).each(e=>{r.preventDefault()})},OX=(e,t)=>{e.on("keydown",r=>{r.isDefaultPrevented()||OG(e,t,r)})},OZ=(e,t)=>({container:e,offset:t}),OQ=aG.DOM,OJ=e=>t=>e===t?-1:0,O0=e=>t=>e.isBlock(t)||ei(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t),O1=(e,t,r)=>{if(oN(e)&&t>=0)return et.some(OZ(e,t));{let n=iR(OQ);return et.from(n.backwards(e,t,OJ(e),r)).map(e=>OZ(e.container,e.container.data.length))}},O2=(e,t,r)=>{if(oN(e)&&t>=e.length)return et.some(OZ(e,t));{let n=iR(OQ);return et.from(n.forwards(e,t,OJ(e),r)).map(e=>OZ(e.container,0))}},O3=(e,t,r)=>{if(!oN(e))return et.none();let n=e.data;if(t>=0&&t<=n.length)return et.some(OZ(e,t));{let n=iR(OQ);return et.from(n.backwards(e,t,OJ(e),r)).bind(e=>{let n=e.container.data;return O3(e.container,t+n.length,r)})}},O8=(e,t,r)=>{if(!oN(e))return et.none();let n=e.data;if(t<=n.length)return et.some(OZ(e,t));{let o=iR(OQ);return et.from(o.forwards(e,t,OJ(e),r)).bind(e=>O8(e.container,t-n.length,r))}},O5=(e,t,r,n,o)=>{let l=iR(e,O0(e));return et.from(l.backwards(t,r,n,o))},O6=e=>e.collapsed&&oN(e.startContainer),O9=e=>iK(e.toString().replace(/\u00A0/g," ")),O4=e=>""!==e&&-1!==" \xa0\uFEFF\f\n\r	\v".indexOf(e),O7=(e,t)=>e.substring(t.length),Be=(e,t,r,n=!1)=>{let o;let l=r.charAt(0);for(o=t-1;o>=0;o--){let a=e.charAt(o);if(!n&&O4(a))return et.none();if(l===a&&ta(e,r,o,t))break}return et.some(o)},Bt=(e,t,r,n=!1)=>{if(!O6(t))return et.none();let o={text:"",offset:0},l=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return O5(e,t.startContainer,t.startOffset,(e,t,l)=>(o.text=l+o.text,o.offset+=t,Be(o.text,o.offset,r,n).getOr(t)),l).bind(e=>{let n=t.cloneRange();if(n.setStart(e.container,e.offset),n.setEnd(t.endContainer,t.endOffset),n.collapsed)return et.none();let o=O9(n);return 0!==o.lastIndexOf(r)?et.none():et.some({text:O7(o,r),range:n,trigger:r})})},Br=e=>3===e.nodeType,Bn=e=>1===e.nodeType,Bo=e=>{if(Br(e))return OZ(e,e.data.length);{let t=e.childNodes;return t.length>0?Bo(t[t.length-1]):OZ(e,t.length)}},Bl=(e,t)=>{let r=e.childNodes;return r.length>0&&t<r.length?Bl(r[t],0):r.length>0&&Bn(e)&&r.length===t?Bo(r[r.length-1]):OZ(e,t)},Ba=(e,t)=>{var r;let n=null!==(r=e.getParent(t.container,e.isBlock))&&void 0!==r?r:e.getRoot();return O5(e,t.container,t.offset,(e,t)=>0===t?-1:t,n).filter(e=>!O4(e.container.data.charAt(e.offset-1))).isSome()},Bi=e=>t=>!Ba(e,Bl(t.startContainer,t.startOffset)),Bs=(e,t,r)=>eD(r.triggers,r=>Bt(e,t,r)),Bd=(e,t)=>{let r=t(),n=e.selection.getRng();return Bs(e.dom,n,r).bind(r=>Bc(e,t,r))},Bc=(e,t,r,n={})=>{var o;let l=t(),a=null!==(o=e.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=ef(l.lookupByTrigger(r.trigger),t=>r.text.length>=t.minChars&&t.matches.getOrThunk(()=>Bi(e.dom))(r.range,a,r.text));if(0===i.length)return et.none();let s=Promise.all(ed(i,e=>e.fetch(r.text,e.maxResults,n).then(t=>({matchText:r.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))));return et.some({lookupData:s,context:r})};(c=g||(g={}))[c.Error=0]="Error",c[c.Value=1]="Value";let Bm=(e,t,r)=>e.stype===g.Error?t(e.serror):r(e.svalue),Bu={toResult:e=>Bm(e,da.error,da.value),svalue:e=>({stype:g.Value,svalue:e}),partition:e=>{let t=[],r=[];return ec(e,e=>{Bm(e,e=>r.push(e),e=>t.push(e))}),{values:t,errors:r}},serror:e=>({stype:g.Error,serror:e}),bindError:(e,t)=>e.stype===g.Error?t(e.serror):e,map:(e,t)=>e.stype===g.Value?{stype:g.Value,svalue:t(e.svalue)}:e,mapError:(e,t)=>e.stype===g.Error?{stype:g.Error,serror:t(e.serror)}:e,fold:Bm},Bf=e=>T(e)&&eO(e).length>100?" removed due to size":JSON.stringify(e,null,2),Bg=e=>ed(e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:V("... (only showing first ten failures)")}]):e,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()),Bp=(e,t)=>Bu.serror([{path:e,getErrorInfo:t}]),Bh=(e,t,r)=>Bp(e,()=>'Could not find valid *required* value for "'+t+'" in '+Bf(r)),Bb=(e,t)=>Bp(e,()=>'Choice schema did not contain choice key: "'+t+'"'),Bv=(e,t,r)=>Bp(e,()=>'The chosen schema: "'+r+'" did not exist in branches: '+Bf(t)),By=(e,t)=>Bp(e,V(t)),BC=(e,t,r,n)=>e$(r,n).fold(()=>Bv(e,r,n),r=>r.extract(e.concat(["branch: "+n]),t)),BE=(e,t)=>({extract:(r,n)=>e$(n,e).fold(()=>Bb(r,e),e=>BC(r,n,t,e)),toString:()=>"chooseOn("+e+"). Possible values: "+eO(t)}),Bx=e=>(...t)=>{if(0===t.length)throw Error("Can't merge zero objects");let r={};for(let n=0;n<t.length;n++){let o=t[n];for(let t in o)eq(o,t)&&(r[t]=e(r[t],o[t]))}return r},B_=Bx((e,t)=>O(e)&&O(t)?B_(e,t):t),Bw=Bx((e,t)=>t),BS=()=>({tag:"required",process:{}}),Bk=e=>({tag:"defaultedThunk",process:e}),BN=e=>Bk(V(e)),BR=()=>({tag:"option",process:{}}),BA=e=>$(Bu.serror,ey)(e),BD=e=>{let t=Bu.partition(e);return t.errors.length>0?BA(t.errors):Bu.svalue(t.values)},BT=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},BO=e=>({extract:(t,r)=>Bu.bindError(e(r),e=>By(t,e)),toString:V("val")}),BB=BO(Bu.svalue),BP=(e,t,r,n)=>e$(t,r).fold(()=>Bh(e,r,t),n),BL=(e,t,r,n)=>n(e$(e,t).getOrThunk(()=>r(e))),BM=(e,t,r)=>r(e$(e,t)),BF=(e,t,r,n)=>n(e$(e,t).map(t=>!0===t?r(e):t)),BI=(e,t,r,n,o)=>{let l=e=>o.extract(t.concat([n]),e),a=e=>e.fold(()=>Bu.svalue(et.none()),e=>{let r=o.extract(t.concat([n]),e);return Bu.map(r,et.some)});switch(e.tag){case"required":return BP(t,r,n,l);case"defaultedThunk":return BL(r,n,e.process,l);case"option":return BM(r,n,a);case"defaultedOptionThunk":return BF(r,n,e.process,a);case"mergeWithThunk":return BL(r,n,V({}),t=>l(B_(e.process(r),t)))}},BU=(e,t,r)=>{let n={},o=[];for(let l of r)BT(l,(r,l,a,i)=>{let s=BI(a,e,t,r,i);Bu.fold(s,e=>{o.push(...e)},e=>{n[l]=e})},(e,r)=>{n[e]=r(t)});return o.length>0?Bu.serror(o):Bu.svalue(n)},Bz=e=>({extract:(t,r)=>BU(t,r,e),toString:()=>"obj{\n"+ed(e,e=>BT(e,(e,t,r,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")")).join("\n")+"}"}),Bj=e=>({extract:(t,r)=>BD(ed(r,(r,n)=>e.extract(t.concat(["["+n+"]"]),r))),toString:()=>"array("+e.toString()+")"}),BH=$(Bj,Bz),B$=e=>BO(t=>e(t).fold(Bu.serror,Bu.svalue)),Bq=(e,t,r)=>{let n=t.extract([e],r);return Bu.mapError(n,e=>({input:r,errors:e}))},BV=(e,t,r)=>Bu.toResult(Bq(e,t,r)),BW=e=>"Errors: \n"+Bg(e.errors).join("\n")+"\n\nInput object: "+Bf(e.input),BK=(e,t)=>BE(e,eL(t,Bz)),BY=V(BB),BG=(e,t)=>BO(r=>{let n=typeof r;return e(r)?Bu.svalue(r):Bu.serror(`Expected type: ${t} but got: ${n}`)}),BX=BG(z,"number"),BZ=BG(D,"string"),BQ=BG(L,"boolean"),BJ=BG(U,"function"),B0=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),B1=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),B2=e=>B$(t=>ei(e,t)?da.value(t):da.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),B3=(e,t)=>B0(e,e,BS(),t),B8=e=>B3(e,BZ),B5=(e,t)=>B0(e,e,BS(),B2(t)),B6=e=>B3(e,BJ),B9=(e,t)=>B0(e,e,BS(),Bj(t)),B4=(e,t)=>B0(e,e,BR(),t),B7=e=>B4(e,BZ),Pe=(e,t,r)=>B0(e,e,BN(t),r),Pt=(e,t)=>Pe(e,t,BX),Pr=(e,t)=>Pe(e,t,BZ),Pn=(e,t,r)=>Pe(e,t,B2(r)),Po=(e,t)=>Pe(e,t,BQ),Pl=(e,t)=>Pe(e,t,BJ),Pa=B8("type"),Pi=B6("fetch"),Ps=B6("onAction"),Pd=Pl("onSetup",()=>H),Pc=B7("text"),Pm=B7("icon"),Pu=B7("tooltip"),Pf=B7("label"),Pg=Po("active",!1),Pp=Po("enabled",!0),Ph=Po("primary",!1),Pb=e=>Pr("type",e),Pv=Bz([Pa,B8("trigger"),Pt("minChars",1),B0(a="columns",a,BN(1),BY()),Pt("maxResults",10),B4("matches",BJ),Pi,Ps,Pe("highlightOn",[],Bj(BZ))]),Py=e=>BV("Autocompleter",Pv,e),PC=[Pp,Pu,Pm,Pc,Pd,Pr("context","mode:design")],PE=[Pg].concat(PC),Px=[Pl("predicate",J),Pn("scope","node",["node","editor"]),Pn("position","selection",["node","selection","line"])],P_=PC.concat([Pb("contextformbutton"),Pr("align","end"),Ph,Ps,B1("original",W)]),Pw=PE.concat([Pb("contextformbutton"),Pr("align","end"),Ph,Ps,B1("original",W)]),PS=PC.concat([Pb("contextformbutton")]),Pk=PE.concat([Pb("contextformtogglebutton")]),PN=[Pf,B9("commands",BK("type",{contextformbutton:P_,contextformtogglebutton:Pw})),B4("launch",BK("type",{contextformbutton:PS,contextformtogglebutton:Pk})),Pl("onInput",H),Pl("onSetup",H)],PR=[...Px,...PN,B5("type",["contextform"]),Pl("initValue",V("")),B7("placeholder")];BK("type",{contextform:PR,contextsliderform:[...Px,...PN,B5("type",["contextsliderform"]),Pl("initValue",V(0)),Pl("min",V(0)),Pl("max",V(100))],contextsizeinputform:[...Px,...PN,B5("type",["contextsizeinputform"]),Pl("initValue",V({width:"",height:""}))]});let PA=PC.concat([Pb("contexttoolbarbutton")]);Bz([Pb("contexttoolbar"),B4("launch",Bz(PA)),B3("items",((e,t)=>{let r=void 0!==t?t:W;return{extract:(t,n)=>{let o=[];for(let l of e){let e=l.extract(t,n);if(e.stype===g.Value)return{stype:g.Value,svalue:r(e.svalue)};o.push(e)}return BD(o)},toString:()=>"oneOf("+ed(e,e=>e.toString()).join(", ")+")"}})([BZ,BH([B7("name"),B7("label"),B9("items",BZ)])]))].concat(Px));let PD=e=>{let t=eL(e.ui.registry.getAll().popups,e=>Py(e).fold(e=>{throw Error(BW(e))},W)),r=eK(ej(t,e=>e.trigger)),n=eH(t);return{dataset:t,triggers:r,lookupByTrigger:e=>ef(n,t=>t.trigger===e)}},PT=(e,t)=>{let r=a9(t.load,50);e.on("input",t=>{("insertCompositionText"!==t.inputType||e.composing)&&r.throttle()}),e.on("keydown",e=>{let n=e.which;8===n?r.throttle():27===n?(r.cancel(),t.cancelIfNecessary()):(38===n||40===n)&&r.cancel()},!0),e.on("remove",r.cancel)},PO=e=>{let t=o5(),r=o2(!1),n=t.isSet,o=()=>{n()&&(dz(e),r.set(!1),t.clear())},l=e=>{n()||t.set({trigger:e.trigger,matchLength:e.text.length})},a=e2(()=>PD(e)),i=r=>t.get().map(t=>Bt(e.dom,e.selection.getRng(),t.trigger,!0).bind(t=>Bc(e,a,t,r))).getOrThunk(()=>Bd(e,a)),s=n=>{i(n).fold(o,n=>{l(n.context),n.lookupData.then(o=>{t.get().map(l=>{let a=n.context;l.trigger===a.trigger&&(t.set({...l,matchLength:a.text.length}),r.get()?(dU(e,{range:a.range}),dI(e,{lookupData:o})):(r.set(!0),dU(e,{range:a.range}),dF(e,{lookupData:o})))})})})},d=(e,t)=>{let r=e.compareBoundaryPoints(window.Range.START_TO_START,t),n=e.compareBoundaryPoints(window.Range.END_TO_END,t);return r>=0&&n<=0},c=()=>t.get().bind(({trigger:t})=>{let n=e.selection.getRng();return Bt(e.dom,n,t,r.get()).filter(({range:e})=>d(n,e)).map(({range:e})=>e)});e.addCommand("mceAutocompleterReload",(e,t)=>{s(T(t)?t.fetchOptions:{})}),e.addCommand("mceAutocompleterClose",o),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{c().each(t=>{dU(e,{range:t})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>c().isSome()),PT(e,{cancelIfNecessary:o,load:s})},PB=tj().browser.isSafari(),PP=e=>iV(rM.fromDom(e)),PL=(e,t)=>{var r;return 0===e.startOffset&&e.endOffset===(null===(r=t.textContent)||void 0===r?void 0:r.length)},PM=(e,t)=>et.from(e.getParent(t.container(),"details")),PF=(e,t)=>PM(e,t).isSome(),PI=(e,t)=>{let r=et.from(e.getParent(t.startContainer,"details")),n=et.from(e.getParent(t.endContainer,"details"));if(!(r.isSome()||n.isSome()))return et.none();{let t=r.bind(t=>et.from(e.select("summary",t)[0]));return et.some({startSummary:t,startDetails:r,endDetails:n})}},PU=(e,t)=>uN(t).exists(t=>t.isEqual(e)),Pz=(e,t)=>uR(t).exists(r=>oB(r.getNode())&&uk(t,r).exists(t=>t.isEqual(e))||r.isEqual(e)),Pj=(e,t)=>t.startSummary.exists(t=>PU(e,t)),PH=(e,t)=>t.startSummary.exists(t=>Pz(e,t)),P$=(e,t)=>t.startDetails.exists(r=>uk(r,e).forall(r=>t.startSummary.exists(t=>!t.contains(e.container())&&t.contains(r.container())))),Pq=(e,t,r)=>r.startDetails.exists(r=>uS(e,t).forall(e=>!r.contains(e.container()))),PV=(e,t)=>{let r=t.getNode();M(r)||e.selection.setCursorLocation(r,t.offset())},PW=(e,t,r)=>{let n=e.dom.getParent(t.container(),"details");if(n&&!n.open){let t=e.dom.select("summary",n)[0];t&&(r?uN(t):uR(t)).each(t=>PV(e,t))}else PV(e,t)},PK=(e,t)=>{let r=t.startSummary.exists(t=>t.contains(e.startContainer)),n=t.startSummary.exists(t=>t.contains(e.endContainer)),o=t.startDetails.forall(e=>t.endDetails.forall(t=>e!==t));return(r||n)&&!(r&&n)||o},PY=(e,t,r)=>{let{dom:n,selection:o}=e,l=e.getBody();if("character"!==r)return!1;{let r=sF.fromRangeStart(o.getRng()),a=n.getParent(r.container(),n.isBlock),i=PM(n,r),s=a&&n.isEmpty(a),d=P(null==a?void 0:a.previousSibling),c=P(null==a?void 0:a.nextSibling);return!!(s&&(t?c:d)&&ux(!t,l,r).exists(e=>PF(n,e)&&!t0(i,PM(n,e))))||ux(t,l,r).fold(J,r=>{let o=PM(n,r);if(!PF(n,r)||t0(i,o))return!1;if(t||PW(e,r,!1),a&&s){if(t&&d||!t&&c)return!0;PW(e,r,t),e.dom.remove(a)}return!0})}},PG=(e,t,r,n)=>{let o=e.selection.getRng(),l=sF.fromRangeStart(o),a=e.getBody();return"selection"===n?PK(o,t):r?PH(l,t)||Pq(a,l,t):Pj(l,t)||P$(l,t)},PX=(e,t,r)=>PI(e.dom,e.selection.getRng()).fold(()=>PY(e,t,r),n=>PG(e,n,t,r)||PY(e,t,r)),PZ=(e,t,r)=>{let n=e.selection,o=n.getNode(),l=n.getRng(),a=sF.fromRangeStart(l);return!!o$(o)&&("selection"===r&&PL(l,o)||vk(t,a,o)?PP(o):e.undoManager.transact(()=>{let l=n.getSel(),{anchorNode:a,anchorOffset:i,focusNode:s,focusOffset:d}=null!=l?l:{},c=()=>{I(a)&&I(i)&&I(s)&&I(d)&&(null==l||l.setBaseAndExtent(a,i,s,d))},m=(e,t)=>{ec(e.childNodes,e=>{fc(e)&&t.appendChild(e)})},u=e.dom.create("span",{"data-mce-bogus":"1"});m(o,u),o.appendChild(u),c(),("word"===r||"line"===r)&&(null==l||l.modify("extend",t?"right":"left",r)),!n.isCollapsed()&&PL(n.getRng(),u)?PP(o):(e.execCommand(t?"ForwardDelete":"Delete"),a=null==l?void 0:l.anchorNode,i=null==l?void 0:l.anchorOffset,s=null==l?void 0:l.focusNode,d=null==l?void 0:l.focusOffset,m(u,o),c()),e.dom.remove(u)}),!0)},PQ=(e,t,r)=>PX(e,t,r)||PB&&PZ(e,t,r)?et.some(H):et.none(),PJ=e=>(t,r,n={})=>{let o=t.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:H,inputType:r},a=aA(new InputEvent(e));return t.dispatch(e,{...a,...l,...n})},P0=PJ("input"),P1=PJ("beforeinput"),P2=tj(),P3=P2.os,P8=P3.isMacOS()||P3.isiOS(),P5=P2.browser.isFirefox(),P6=(e,t,r)=>{let n=r.keyCode===g9.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),l=o?"character":"selection",a=e=>o?e?"word":"line":"selection";T5([{keyCode:g9.BACKSPACE,action:T3(Ta,e)},{keyCode:g9.BACKSPACE,action:T3(RZ,e,!1)},{keyCode:g9.DELETE,action:T3(RZ,e,!0)},{keyCode:g9.BACKSPACE,action:T3(RD,e,!1)},{keyCode:g9.DELETE,action:T3(RD,e,!0)},{keyCode:g9.BACKSPACE,action:T3(DS,e,t,!1)},{keyCode:g9.DELETE,action:T3(DS,e,t,!0)},{keyCode:g9.BACKSPACE,action:T3(yh,e,!1)},{keyCode:g9.DELETE,action:T3(yh,e,!0)},{keyCode:g9.BACKSPACE,action:T3(PQ,e,!1,l)},{keyCode:g9.DELETE,action:T3(PQ,e,!0,l)},...P8?[{keyCode:g9.BACKSPACE,altKey:!0,action:T3(PQ,e,!1,a(!0))},{keyCode:g9.DELETE,altKey:!0,action:T3(PQ,e,!0,a(!0))},{keyCode:g9.BACKSPACE,metaKey:!0,action:T3(PQ,e,!1,a(!1))}]:[{keyCode:g9.BACKSPACE,ctrlKey:!0,action:T3(PQ,e,!1,a(!0))},{keyCode:g9.DELETE,ctrlKey:!0,action:T3(PQ,e,!0,a(!0))}],{keyCode:g9.BACKSPACE,action:T3(R8,e,!1)},{keyCode:g9.DELETE,action:T3(R8,e,!0)},{keyCode:g9.BACKSPACE,action:T3(D3,e,!1)},{keyCode:g9.DELETE,action:T3(D3,e,!0)},{keyCode:g9.BACKSPACE,action:T3(Ry,e,!1)},{keyCode:g9.DELETE,action:T3(Ry,e,!0)},{keyCode:g9.BACKSPACE,action:T3(Ru,e,!1)},{keyCode:g9.DELETE,action:T3(Ru,e,!0)},{keyCode:g9.BACKSPACE,action:T3(DG,e,!1)},{keyCode:g9.DELETE,action:T3(DG,e,!0)},{keyCode:g9.BACKSPACE,action:T3(R2,e,!1)},{keyCode:g9.DELETE,action:T3(R2,e,!0)}],r).filter(t=>e.selection.isEditable()).each(t=>{r.preventDefault(),P1(e,n).isDefaultPrevented()||(t(),P0(e,n))})},P9=(e,t,r)=>T8([{keyCode:g9.BACKSPACE,action:T3(RX,e)},{keyCode:g9.DELETE,action:T3(RX,e)},...P8?[{keyCode:g9.BACKSPACE,altKey:!0,action:T3(DJ,e)},{keyCode:g9.DELETE,altKey:!0,action:T3(DJ,e)},...r?[{keyCode:P5?224:91,action:T3(DJ,e)}]:[]]:[{keyCode:g9.BACKSPACE,ctrlKey:!0,action:T3(DJ,e)},{keyCode:g9.DELETE,ctrlKey:!0,action:T3(DJ,e)}]],t),P4=(e,t)=>{let r=!1;e.on("keydown",n=>{r=n.keyCode===g9.BACKSPACE,n.isDefaultPrevented()||P6(e,t,n)}),e.on("keyup",t=>{t.isDefaultPrevented()||P9(e,t,r),r=!1})},P7=e=>{for(;e;){if(oh(e)||oN(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Le=(e,t)=>{let r=e.dom,n=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){let e=P7(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(r.doc.createTextNode("\xa0"),t.firstChild)}let o=r.createRng();if(t.normalize(),t.hasChildNodes()){let e;let r=new ol(t,t),l=t;for(;e=r.current();){if(oN(e)){o.setStart(e,0),o.setEnd(e,0);break}if(n[e.nodeName.toLowerCase()]){o.setStartBefore(e),o.setEndBefore(e);break}l=e,e=r.next()}e||(o.setStart(l,0),o.setEnd(l,0))}else oB(t)?t.nextSibling&&r.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),hr(e,o)},Lt=(e,t)=>{let r;let n=e.getRoot(),o=t;for(;o!==n&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},Lr=e=>et.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Ln=e=>Lr(e).fold(V(""),e=>e.nodeName.toUpperCase()),Lo=e=>Lr(e).filter(e=>iI(rM.fromDom(e))).isSome(),Ll=e=>{e.innerHTML='<br data-mce-bogus="1">'},La=(e,t,r)=>{let n=e.dom;et.from(r.style).map(n.parseStyle).each(e=>{let r={...nR(rM.fromDom(t)),...e};n.setStyles(t,r)}),t2(et.from(r.class).map(e=>e.split(/\s+/)),et.from(t.className).map(e=>ef(e.split(/\s+/),e=>""!==e)),(e,r)=>{let o=ef(r,t=>!ei(e,t)),l=[...e,...o];n.setAttrib(t,"class",l.join(" "))});let o=["style","class"],l=ez(r,(e,t)=>!ei(o,t));n.setAttribs(t,l)},Li=(e,t)=>{if(d4(e).toLowerCase()===t.tagName.toLowerCase()){let r=d7(e);La(e,t,r)}},Ls=(e,t,r,n,o=!0,l,a)=>{let i;let s=e.dom,d=e.schema,c=d4(e),m=r?r.nodeName.toUpperCase():"",u=t,f=d.getTextInlineElements(),g=i=l||"TABLE"===m||"HR"===m?s.create(l||c,a||{}):r.cloneNode(!1);if(o)do if(f[u.nodeName]){if(uD(u)||uJ(u))continue;let e=u.cloneNode(!1);s.setAttrib(e,"id",""),i.hasChildNodes()?e.appendChild(i.firstChild):g=e,i.appendChild(e)}while((u=u.parentNode)&&u!==n);else s.setAttrib(i,"style",null),s.setAttrib(i,"class",null);return Li(e,i),Ll(g),i},Ld=(e,t)=>e.dom.getParent(t,oH),Lc=(e,t,r)=>{let n=t;for(;n&&n!==e&&P(n.nextSibling);){let e=n.parentElement;if(!e||!r(e))return oH(e);n=e}return!1},Lm=(e,t,r)=>!t&&r.nodeName.toLowerCase()===d4(e)&&e.dom.isEmpty(r)&&Lc(e.getBody(),r,t=>eq(e.schema.getTextBlockElements(),t.nodeName.toLowerCase())),Lu=(e,t,r)=>{var n,o,l;let a=t(d4(e)),i=Ld(e,r);i&&(e.dom.insertAfter(a,i),Le(e,a),(null!==(l=null===(o=null===(n=r.parentElement)||void 0===n?void 0:n.childNodes)||void 0===o?void 0:o.length)&&void 0!==l?l:0)>1&&e.dom.remove(r))},Lf=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,Lg=e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e},Lp=(e,t)=>{let r=null==e?void 0:e.parentNode;return I(r)&&r.nodeName===t},Lh=e=>I(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Lb=e=>I(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Lv=e=>Lh(e)&&Lh(e.parentNode),Ly=e=>{let t=e.parentNode;return Lb(t)?t:e},LC=(e,t,r)=>{let n=e[r?"firstChild":"lastChild"];for(;n&&!oh(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},LE=e=>ep(ej(nR(rM.fromDom(e)),(e,t)=>`${t}: ${e};`),(e,t)=>e+t,""),Lx=(e,t,r,n,o)=>{let l=e.dom,a=e.selection.getRng(),i=r.parentNode;if(r===e.getBody()||!i)return;Lv(r)&&(o="LI");let s=Lb(n)?LE(n):void 0,d=Lb(n)&&s?t(o,{style:LE(n)}):t(o);if(LC(r,n,!0)&&LC(r,n,!1)){if(Lp(r,"LI")){let e=Ly(r);l.insertAfter(d,e),Lg(r)?l.remove(e):l.remove(r)}else l.replace(d,r)}else if(LC(r,n,!0))Lp(r,"LI")?(l.insertAfter(d,Ly(r)),d.appendChild(l.doc.createTextNode(" ")),d.appendChild(r)):i.insertBefore(d,r),l.remove(n);else if(LC(r,n,!1))l.insertAfter(d,Ly(r)),l.remove(n);else{r=Ly(r);let e=a.cloneRange();e.setStartAfter(n),e.setEndAfter(r);let t=e.extractContents();if("LI"===o&&Lf(t,"LI")){let e=ef(ed(d.children,rM.fromDom),G(ru("br")));d=t.firstChild,l.insertAfter(t,r),ec(e,e=>nB(rM.fromDom(d),e)),s&&d.setAttribute("style",s)}else l.insertAfter(t,r),l.insertAfter(d,r);l.remove(n)}Le(e,d)},L_=e=>{ec(oe(rM.fromDom(e),rd),e=>{let t=e.dom;t.nodeValue=iK(t.data)})},Lw=(e,t)=>{let r=e.dom.getParent(t,"ol,ul,dl");return null!==r&&"false"===e.dom.getContentEditableParent(r)},LS=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),Lk=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,LN=(e,t)=>e.nodeName===t||e.nextSibling&&e.nextSibling.nodeName===t,LR=(e,t)=>I(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),LA=(e,t,r)=>{var n;let o=[];if(!r)return;let l=r;for(;l=l.firstChild;){if(e.isBlock(l))return;oh(l)&&!t[l.nodeName.toLowerCase()]&&o.push(l)}let a=o.length;for(;a--;)(l=o[a]).hasChildNodes()&&(l.firstChild!==l.lastChild||(null===(n=l.firstChild)||void 0===n?void 0:n.nodeValue)!=="")?LS(e,l)&&e.remove(l):e.remove(l)},LD=(e,t,r)=>oN(t)?e?1===r&&"\uFEFF"===t.data.charAt(r-1)?0:r:r===t.data.length-1&&"\uFEFF"===t.data.charAt(r)?t.data.length:r:r,LT=e=>{let t=e.cloneRange();return t.setStart(e.startContainer,LD(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,LD(!1,e.endContainer,e.endOffset)),t},LO=e=>{let t=e;do oN(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},LB=(e,t,r,n,o)=>{var l,a;let i=e.dom,s=null!==(l=Lt(i,n))&&void 0!==l?l:i.getRoot(),d=i.getParent(n,i.isBlock);if(!d||!LR(i,d)){let l;if(!(d=d||s).hasChildNodes()){let n=i.create(t);return Li(e,n),d.appendChild(n),r.setStart(n,0),r.setEnd(n,0),n}let c=n;for(;c&&c.parentNode!==d;)c=c.parentNode;for(;c&&!i.isBlock(c);)l=c,c=c.previousSibling;let m=null===(a=null==l?void 0:l.parentElement)||void 0===a?void 0:a.nodeName;if(l&&m&&e.schema.isValidChild(m,t.toLowerCase())){let a=l.parentNode,s=i.create(t);for(Li(e,s),a.insertBefore(s,l),c=l;c&&!i.isBlock(c);){let e=c.nextSibling;s.appendChild(c),c=e}r.setStart(n,o),r.setEnd(n,o)}}return n},LP=(e,t)=>{t.normalize();let r=t.lastChild;(!r||oh(r)&&/^(left|right)$/gi.test(e.getStyle(r,"float",!0)))&&e.add(t,"br")},LL=(e,t)=>{let r=co(e);return!F(t)&&(D(r)?ei(tQ.explode(r),t.nodeName.toLowerCase()):r)},LM={insert:(e,t)=>{let r,n,o,l,a;let i=!1,s=e.dom,d=e.schema.getNonEmptyElements(),c=e.selection.getRng(),m=d4(e),u=rM.fromDom(c.startContainer),f=r3(u,c.startOffset),g=f.exists(e=>ri(e)&&!nb(e)),p=c.collapsed&&g,h=(t,n)=>Ls(e,r,x,E,cn(e),t,n),b=e=>{let t;let o=LD(e,r,n);if(oN(r)&&(e?o>0:o<r.data.length))return!1;if((r.parentNode===x||r===x)&&i&&!e||e&&oh(r)&&r===x.firstChild)return!0;if(Lk(r,"TABLE")||Lk(r,"HR"))return LN(r,"BR")?!e:i&&!e||!i&&e;let l=new ol(r,x);for(oN(r)&&(e&&0===o?l.prev():e||o!==r.data.length||l.next());t=l.current();){if(oh(t)){if(!t.getAttribute("data-mce-bogus")){let e=t.nodeName.toLowerCase();if(d[e]&&"br"!==e)return!1}}else if(oN(t)&&!os(t.data))return!1;e?l.prev():l.next()}return!0},v=()=>{let t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==_?h(m):h(),LL(e,l)&&LR(s,l)&&s.isEmpty(x,void 0,{includeZwsp:!0})?t=s.split(l,x):s.insertAfter(t,x),Le(e,t),t};pL(s,c).each(e=>{c.setStart(e.startContainer,e.startOffset),c.setEnd(e.endContainer,e.endOffset)}),r=c.startContainer,n=c.startOffset;let y=!!(t&&t.shiftKey),C=!!(t&&t.ctrlKey);oh(r)&&r.hasChildNodes()&&!p&&(i=n>r.childNodes.length-1,r=r.childNodes[Math.min(n,r.childNodes.length-1)]||r,n=i&&oN(r)?r.data.length:0);let E=Lt(s,r);if(!E||Lw(e,r))return;y||(r=LB(e,m,c,r,n));let x=s.getParent(r,s.isBlock)||s.getRoot();l=I(null==x?void 0:x.parentNode)?s.getParent(x.parentNode,s.isBlock):null,o=x?x.nodeName.toUpperCase():"";let _=l?l.nodeName.toUpperCase():"";if("LI"===_&&!C){let e=l;x=e,l=e.parentNode,o=_}if(oh(l)&&Lm(e,y,x))return Lu(e,h,x);if(/^(LI|DT|DD)$/.test(o)&&oh(l)&&s.isEmpty(x)){Lx(e,h,l,x,m);return}if(!p&&(x===e.getBody()||!LR(s,x)))return;let w=x.parentNode;if(p)a=h(m),f.fold(()=>{nP(u,rM.fromDom(a))},e=>{nT(e,rM.fromDom(a))}),e.selection.setCursorLocation(a,0);else if(iG(x))a=i6(x),s.isEmpty(x)&&Ll(x),Li(e,a),Le(e,a);else if(b(!1))a=v();else if(b(!0)&&w){let t=sF.fromRangeStart(c),r=h7(t),n=rM.fromDom(x),o=bv(n,t,e.schema)?by(n,t,e.schema).bind(e=>et.from(e.getNode())):et.none();a=w.insertBefore(h(),x),Le(e,Lk(x,"HR")||r?a:o.getOr(x))}else{let t=LT(c).cloneRange();t.setEndAfter(x);let r=t.extractContents();L_(r),LO(r),a=r.firstChild,s.insertAfter(r,x),LA(s,d,a),LP(s,x),s.isEmpty(x)&&Ll(x),a.normalize(),s.isEmpty(a)?(s.remove(a),v()):(Li(e,a),Le(e,a))}s.setAttrib(a,"id",""),e.dispatch("NewBlock",{newBlock:a})},fakeEventName:"insertParagraph"},LF=(e,t,r)=>{let n;let o=new ol(t,r),l=e.getNonEmptyElements();for(;n=o.next();)if(l[n.nodeName.toLowerCase()]||oN(n)&&n.length>0)return!0;return!1},LI=(e,t,r)=>{let n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),hr(e,n)},LU=(e,t)=>{let r;let n=e.selection,o=e.dom,l=n.getRng(),a=!1;pL(o,l).each(e=>{l.setStart(e.startContainer,e.startOffset),l.setEnd(e.endContainer,e.endOffset)});let i=l.startOffset,s=l.startContainer;if(oh(s)&&s.hasChildNodes()){let e=i>s.childNodes.length-1;s=s.childNodes[Math.min(i,s.childNodes.length-1)]||s,i=e&&oN(s)?s.data.length:0}let d=o.getParent(s,o.isBlock),c=d&&d.parentNode?o.getParent(d.parentNode,o.isBlock):null,m=c?c.nodeName.toUpperCase():"",u=!!(t&&t.ctrlKey);"LI"!==m||u||(d=c),oN(s)&&i>=s.data.length&&!LF(e.schema,s,d||o.getRoot())&&(r=o.create("br"),l.insertNode(r),l.setStartAfter(r),l.setEndAfter(r),a=!0),r=o.create("br"),sj(o,l,r),LI(e,r,a),e.undoManager.add()},Lz=(e,t)=>{let r=rM.fromTag("br");nT(rM.fromDom(t),r),e.undoManager.add()},Lj=(e,t)=>{L$(e.getBody(),t)||nO(rM.fromDom(t),rM.fromTag("br"));let r=rM.fromTag("br");nO(rM.fromDom(t),r),LI(e,r.dom,!1),e.undoManager.add()},LH=e=>oB(e.getNode()),L$=(e,t)=>!!LH(sF.after(t))||uS(e,sF.after(t)).map(e=>oB(e.getNode())).getOr(!1),Lq=e=>e&&"A"===e.nodeName&&"href"in e,LV=e=>e.fold(J,Lq,Lq,J),LW=e=>{let t=Y(vd,e),r=sF.fromRangeStart(e.selection.getRng());return Ah(t,e.getBody(),r).filter(LV)},LK=(e,t)=>{t.fold(H,Y(Lz,e),Y(Lj,e),H)},LY={insert:(e,t)=>{let r=LW(e);r.isSome()?r.each(Y(LK,e)):LU(e,t)},fakeEventName:"insertLineBreak"},LG=(e,t)=>Lr(e).filter(e=>t.length>0&&rI(rM.fromDom(e),t)).isSome(),LX=e=>LG(e,ct(e)),LZ=e=>LG(e,cr(e)),LQ=di([{br:[]},{block:[]},{none:[]}]),LJ=(e,t)=>LZ(e),L0=e=>(t,r)=>Lo(t)===e,L1=(e,t)=>(r,n)=>Ln(r)===e.toUpperCase()===t,L2=e=>F(Lt(e.dom,e.selection.getStart())),L3=e=>L1("pre",e),L8=()=>L1("summary",!0),L5=e=>(t,r)=>d9(t)===e,L6=(e,t)=>LX(e),L9=(e,t)=>t,L4=e=>{let t=d4(e),r=Lt(e.dom,e.selection.getStart());return I(r)&&e.schema.isValidChild(r.nodeName,t)},L7=e=>{let t=e.selection.getRng(),r=r3(rM.fromDom(t.startContainer),t.startOffset).map(e=>ri(e)&&!nb(e));return t.collapsed&&r.getOr(!0)},Me=(e,t)=>(r,n)=>ep(e,(e,t)=>e&&t(r,n),!0)?et.some(t):et.none(),Mt=(e,t)=>Aa([Me([LJ],LQ.none()),Me([L3(!0),L2],LQ.none()),Me([L8()],LQ.br()),Me([L3(!0),L5(!1),L9],LQ.br()),Me([L3(!0),L5(!1)],LQ.block()),Me([L3(!0),L5(!0),L9],LQ.block()),Me([L3(!0),L5(!0)],LQ.br()),Me([L0(!0),L9],LQ.br()),Me([L0(!0)],LQ.block()),Me([L6],LQ.br()),Me([L9],LQ.br()),Me([L4],LQ.block()),Me([L7],LQ.block())],[e,!!(t&&t.shiftKey)]).getOr(LQ.none()),Mr=(e,t,r)=>{if(!t.mode.isReadOnly())t.selection.isCollapsed()||vy(t),!(I(r)&&P1(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,r),I(r)&&P0(t,e.fakeEventName))},Mn=(e,t)=>{if(e.mode.isReadOnly())return;let r=()=>Mr(LY,e,t),n=()=>Mr(LM,e,t),o=Mt(e,t);switch(ce(e)){case"linebreak":o.fold(r,r,H);break;case"block":o.fold(n,n,H);break;case"invert":o.fold(n,r,H);break;default:o.fold(r,n,H)}},Mo=tj(),Ml=Mo.os.isiOS()&&Mo.browser.isSafari(),Ma=(e,t)=>{!t.isDefaultPrevented()&&(t.preventDefault(),wq(e.undoManager),e.undoManager.transact(()=>{Mn(e,t)}))},Mi=e=>{if(!e.collapsed)return!1;let t=e.startContainer;if(!oN(t))return!1;{let r=t.data.charAt(e.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(r)}},Ms=e=>{let t=et.none(),r=e=>{t=et.some(e.selection.getBookmark()),e.undoManager.add()},n=(e,r)=>{e.undoManager.undo(),t.fold(H,t=>e.selection.moveToBookmark(t)),Ma(e,r),t=et.none()};e.on("keydown",t=>{t.keyCode===g9.ENTER&&(Ml&&Mi(e.selection.getRng())?r(e):Ma(e,t))}),e.on("keyup",r=>{r.keyCode===g9.ENTER&&t.each(()=>n(e,r))})},Md=(e,t,r)=>{let n=tY.os.isMacOS()||tY.os.isiOS();T8([{keyCode:g9.END,action:T3(Tz,e,!0)},{keyCode:g9.HOME,action:T3(Tz,e,!1)},...n?[]:[{keyCode:g9.HOME,action:T3(Tj,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:g9.END,action:T3(Tj,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:g9.END,action:T3(T4,e,!0)},{keyCode:g9.HOME,action:T3(T4,e,!1)},{keyCode:g9.END,action:T3(Dv,e,!0,t)},{keyCode:g9.HOME,action:T3(Dv,e,!1,t)}],r).each(e=>{r.preventDefault()})},Mc=(e,t)=>{e.on("keydown",r=>{r.isDefaultPrevented()||Md(e,t,r)})},Mm=e=>{e.on("input",t=>{t.isComposing||bK(e)})},Mu=tj(),Mf=(e,t,r)=>{T8([{keyCode:g9.PAGE_UP,action:T3(Dv,e,!1,t)},{keyCode:g9.PAGE_DOWN,action:T3(Dv,e,!0,t)}],r)},Mg=e=>e.stopImmediatePropagation(),Mp=e=>e.keyCode===g9.PAGE_UP||e.keyCode===g9.PAGE_DOWN,Mh=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",Mg,!0):!r&&e.get()&&t.off("NodeChange",Mg),e.set(r)},Mb=(e,t)=>{if(Mu.os.isMacOS())return;let r=o2(!1);e.on("keydown",t=>{Mp(t)&&Mh(r,e,!0)}),e.on("keyup",n=>{n.isDefaultPrevented()||Mf(e,t,n),Mp(n)&&r.get()&&(Mh(r,e,!1),e.nodeChanged())})},Mv=(e,t)=>e===t||e.contains(t),My=(e,t)=>!(Mv(e.getBody(),t.startContainer)&&Mv(e.getBody(),t.endContainer))||hn(e.dom,t),MC=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||es(t.getTargetRanges(),t=>!My(e,t)))&&t.preventDefault()})},ME=(e,t)=>{let r=t.container(),n=t.offset();return oN(r)?(r.insertData(n,e),et.some(sF(r,n+e.length))):un(t).map(r=>{let n=rM.fromText(e);return t.isAtEnd()?nO(r,n):nT(r,n),sF(n.dom,e.length)})},Mx=Y(ME,"\xa0"),M_=Y(ME," "),Mw=(e,t,r)=>bP(e,t,r)?Mx(t):M_(t),MS=e=>t=>t.fold(t=>uk(e.dom,sF.before(t)),e=>uN(e),e=>uR(e),t=>uS(e.dom,sF.after(t))),Mk=(e,t,r)=>n=>bP(e,n,r)?Mx(t):M_(t),MN=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},MR=(e,t)=>e.isEditable(e.getParent(t,"summary")),MA=e=>{let t=sF.fromRangeStart(e.selection.getRng()),r=rM.fromDom(e.getBody());if(!e.selection.isCollapsed())return et.none();{let n=Y(vd,e),o=sF.fromRangeStart(e.selection.getRng());return Ah(n,e.getBody(),o).bind(MS(r)).map(n=>()=>Mk(r,t,e.schema)(n).each(MN(e)))}},MD=e=>t8(tY.browser.isFirefox()&&e.selection.isEditable()&&MR(e.dom,e.selection.getRng().startContainer),()=>{let t=rM.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),Mw(t,sF.fromRangeStart(e.selection.getRng()),e.schema).each(MN(e))}),MT=(e,t)=>{T5([{keyCode:g9.SPACEBAR,action:T3(MA,e)},{keyCode:g9.SPACEBAR,action:T3(MD,e)}],t).each(r=>{t.preventDefault(),P1(e,"insertText",{data:" "}).isDefaultPrevented()||(r(),P0(e,"insertText",{data:" "}))})},MO=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||MT(e,t)})},MB=e=>mS(e)?[{keyCode:g9.TAB,action:T3(OY,e,!0)},{keyCode:g9.TAB,shiftKey:!0,action:T3(OY,e,!1)}]:[],MP=(e,t)=>{T8([...MB(e)],t).each(e=>{t.preventDefault()})},ML=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||MP(e,t)})},MM=e=>{if(e.addShortcut("Meta+P","","mcePrint"),PO(e),w6(e))return o2(null);{let t=Dp(e);return MC(e),TD(e),OX(e,t),P4(e,t),Ms(e),MO(e),Mm(e),ML(e),Mc(e,t),Mb(e,t),t}};class MF{constructor(e){let t;this.lastPath=[],this.editor=e;let r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{let n=e.selection.getRng(),o={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset};"nodechange"!==r.type&&pS(o,t)||e.dispatch("SelectionChange"),t=o}),e.on("contextmenu",()=>{gk(e),e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{let t=e.selection.getStart(!0);t&&fi(e)&&!r.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",t=>{!t.isDefaultPrevented()&&fi(e)&&("IMG"===e.selection.getNode().nodeName?gO.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){let t;let r=this.editor,n=r.selection;if(r.initialized&&n&&!cW(r)&&!mB(r)){let o=r.getBody();(t=n.getStart(!0)||o).ownerDocument===r.getDoc()&&r.dom.isChildOf(t,o)||(t=o);let l=[];r.dom.getParent(t,e=>e===o||(l.push(e),!1)),r.dispatch("NodeChange",{...e,element:t,parents:l})}}isSameElementPath(e){let t;let r=this.editor,n=ex(r.dom.getParents(e,ee,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}let MI=iy("image"),MU=e=>et.from(e[MI]),Mz=(e,t)=>{e[MI]=t},Mj=iy("event"),MH=e=>et.from(e[Mj]),M$=e=>t=>{t[Mj]=e},Mq=(e,t)=>M$(t)(e),MV=M$(0),MW=M$(2),MK=M$(1),MY=e=>et.from(e[Mj]).exists(e=>0===e),MG=()=>Object.freeze({length:0,item:e=>null}),MX=iy("mode"),MZ=e=>et.from(e[MX]),MQ=e=>t=>{t[MX]=e},MJ=(e,t)=>MQ(t)(e),M0=MQ(0),M1=MQ(2),M2=MQ(1),M3=e=>t=>et.from(t[MX]).exists(t=>t===e),M8=M3(0),M5=M3(1),M6=(e,t)=>({...t,get length(){return t.length},add:(r,n)=>{if(M8(e)){if(!D(r))return t.add(r);if(!M(n))return t.add(r,n)}return null},remove:r=>{M8(e)&&t.remove(r)},clear:()=>{M8(e)&&t.clear()}}),M9=["none","copy","link","move"],M4=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],M7=()=>{let e=new window.DataTransfer,t="move",r="all",n={get dropEffect(){return t},set dropEffect(effect){ei(M9,effect)&&(t=effect)},get effectAllowed(){return r},set effectAllowed(allowed){MY(n)&&ei(M4,allowed)&&(r=allowed)},get items(){return M6(n,e.items)},get files(){if(M5(n))return MG();return e.files},get types(){return e.types},setDragImage:(t,r,o)=>{M8(n)&&(Mz(n,{image:t,x:r,y:o}),e.setDragImage(t,r,o))},getData:t=>M5(n)?"":e.getData(t),setData:(t,r)=>{M8(n)&&e.setData(t,r)},clearData:t=>{M8(n)&&e.clearData(t)}};return M0(n),n},Fe=e=>{let t=M7(),r=MZ(e);return M1(e),MV(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,MU(e).each(e=>t.setDragImage(e.image,e.x,e.y)),ec(e.types,r=>{"Files"!==r&&t.setData(r,e.getData(r))}),ec(e.files,e=>t.items.add(e)),MH(e).each(e=>{Mq(t,e)}),r.each(r=>{MJ(e,r),MJ(t,r)}),t},Ft=e=>{let t=e.getData("text/html");return""===t?et.none():et.some(t)},Fr=(e,t)=>e.setData("text/html",t),Fn="x-tinymce/html",Fo=V(Fn),Fl="\x3c!-- "+Fn+" --\x3e",Fa=e=>Fl+e,Fi=e=>e.replace(Fl,""),Fs=e=>-1!==e.indexOf(Fl),Fd=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),Fc=(e,t)=>{let r="<"+e,n=ej(t,(e,t)=>t+'="'+lG.encodeAllRaw(e)+'"');return n.length&&(r+=" "+n.join(" ")),r+">"},Fm=(e,t,r)=>{let n=e.split(/\n\n/),o=Fc(t,r),l="</"+t+">",a=ed(n,e=>e.split(/\n/).join("<br />"));return 1===a.length?a[0]:ed(a,e=>o+e+l).join("")},Fu="%MCEPASTEBIN%",Ff=(e,t)=>{let{dom:r,selection:n}=e,o=e.getBody();t.set(n.getRng());let l=r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Fu);tY.browser.isFirefox()&&r.setStyle(l,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(l,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),l.focus(),n.select(l,!0)},Fg=(e,t)=>{let r=e.dom;if(Fp(e)){let n;let o=t.get();for(;n=Fp(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)},Fp=e=>e.dom.get("mcepastebin"),Fh=e=>I(e)&&"mcepastebin"===e.id,Fb=e=>{let t=e.dom,r=(e,r)=>{e.appendChild(r),t.remove(r,!0)},[n,...o]=ef(e.getBody().childNodes,Fh);ec(o,e=>{r(n,e)});let l=t.select("div[id=mcepastebin]",n);for(let e=l.length-1;e>=0;e--){let o=t.create("div");n.insertBefore(o,l[e]),r(o,l[e])}return n?n.innerHTML:""},Fv=e=>e===Fu,Fy=e=>{let t=o2(null);return{create:()=>Ff(e,t),remove:()=>Fg(e,t),getEl:()=>Fp(e),getHtml:()=>Fb(e),getLastRng:t.get}},FC=(e,t)=>(tQ.each(t,t=>{e=A(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])}),e),FE=e=>{let t=am(),r=_$({},t),n="",o=t.getVoidElements(),l=tQ.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),i=e=>{let r=e.name;if("br"===r){n+="\n";return}if("wbr"!==r){if(o[r]&&(n+=" "),l[r]){n+=" ";return}if(3===e.type&&(n+=e.value),!(e.name in t.getVoidElements())){let t=e.firstChild;if(t)do i(t);while(t=t.next)}a[r]&&e.next&&(n+="\n","p"===r&&(n+="\n"))}};return e=FC(e,[/<!\[[^\]]+\]>/g]),i(r.parse(e)),n},Fx=e=>e=FC(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),F_=e=>{let t=e.toLowerCase(),r={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tQ.hasOwn(r,t)?"image/"+r[t]:"image/"+t},Fw=(e,t)=>{let r=_$({sanitize:mv(e),sandbox_iframes:mR(e),sandbox_iframes_exclusions:mA(e),convert_unsafe_embeds:mD(e)},e.schema);r.addNodeFilter("meta",e=>{tQ.each(e,e=>{e.remove()})});let n=r.parse(t,{forced_root_block:!1,isRootContent:!0});return hU({validate:!0},e.schema).serialize(n)},FS=(e,t)=>({content:e,cancelled:t}),Fk=(e,t,r)=>{let n=e.dom.create("div",{style:"display:none"},t),o=dH(e,n,r);return FS(o.node.innerHTML,o.isDefaultPrevented())},FN=(e,t,r)=>{let n=dj(e,t,r),o=Fw(e,n.content);return e.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()?Fk(e,o,r):FS(o,n.isDefaultPrevented())},FR=(e,t,r)=>FN(e,t,r),FA=(e,t)=>(e.insertContent(t,{merge:ma(e),paste:!0}),!0),FD=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),FT=(e,t)=>FD(t)&&es(mw(e),e=>ts(t.toLowerCase(),`.${e.toLowerCase()}`)),FO=(e,t,r)=>(e.undoManager.extra(()=>{r(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),FB=(e,t,r)=>(e.undoManager.extra(()=>{r(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),FP=(e,t,r)=>!!(!e.selection.isCollapsed()&&FD(t))&&FB(e,t,r),FL=(e,t,r)=>!!FT(e,t)&&FO(e,t,r),FM=(e,t)=>{tQ.each([FP,FL,FA],r=>!r(e,t,FA))},FF=(e,t,r)=>{r||!mi(e)?FA(e,t):FM(e,t)},FI=(l=0,()=>"mceclip"+l++),FU=e=>{let t=M7();return Fr(t,e),M1(t),t},Fz=(e,t,r,n,o)=>{let l=FR(e,t,r);if(!l.cancelled){let t=l.content,r=()=>FF(e,t,n);o?P1(e,"insertFromPaste",{dataTransfer:FU(t)}).isDefaultPrevented()||(r(),P0(e,"insertFromPaste")):r()}},Fj=(e,t,r,n)=>{let o=r||Fs(t);Fz(e,Fi(t),o,!1,n)},FH=(e,t,r)=>{let n=Fm(of(e.dom.encode(t).replace(/\r\n/g,"\n"),md(e)),d4(e),d7(e));Fz(e,n,!1,!0,r)},F$=e=>{let t={};if(e&&e.types)for(let r=0;r<e.types.length;r++){let n=e.types[r];try{t[n]=e.getData(n)}catch(e){t[n]=""}}return t},Fq=(e,t)=>t in e&&e[t].length>0,FV=e=>Fq(e,"text/html")||Fq(e,"text/plain"),FW=(e,t)=>{let r=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return I(r)?e.dom.encode(r[1]):void 0},FK=(e,t,r,n)=>{let o=FI(),l=ca(e)&&I(r.name),a=l?FW(e,r.name):o,i=l?r.name:void 0,s=t.create(o,r,n,a,i);return t.add(s),s},FY=(e,t)=>{xn(t.uri).each(({data:r,type:n,base64Encoded:o})=>{let l=o?r:btoa(r),a=t.file,i=e.editorUpload.blobCache,s=i.getByData(l,n),d=null!=s?s:FK(e,i,a,l);Fj(e,`<img src="${d.blobUri()}">`,!1,!0)})},FG=e=>"paste"===e.type,FX=e=>Promise.all(ed(e,e=>xi(e).then(t=>({file:e,uri:t})))),FZ=e=>{let t=mw(e);return e=>ti(e.type,"image/")&&es(t,t=>F_(t)===e.type)},FQ=(e,t)=>{let r=t.items?eC(eA(t.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],n=t.files?eA(t.files):[];return ef(r.length>0?r:n,FZ(e))},FJ=(e,t,r)=>{let n=FG(t)?t.clipboardData:t.dataTransfer;if(me(e)&&n){let o=FQ(e,n);if(o.length>0)return t.preventDefault(),FX(o).then(t=>{r&&e.selection.setRng(r),ec(t,t=>{FY(e,t)})}),!0}return!1},F0=e=>{var t,r;return tY.os.isAndroid()&&(null===(r=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===r?void 0:r.length)===0},F1=e=>g9.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode,F2=(e,t,r,n,o)=>{let l=Fx(r),a=Fq(t,Fo())||Fs(r),i=!a&&Fd(l),s=FD(l);(Fv(l)||!l.length||i&&!s)&&(n=!0),(n||s)&&(l=Fq(t,"text/plain")&&i?t["text/plain"]:FE(l)),!Fv(l)&&(n?FH(e,l,o):Fj(e,l,a,o))},F3=(e,t,r)=>{let n;let o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",e=>{F1(e)&&!e.isDefaultPrevented()&&(n=e.shiftKey&&86===e.keyCode)}),e.on("paste",l=>{if(l.isDefaultPrevented()||F0(l))return;let a="text"===r.get()||n;n=!1;let i=F$(l.clipboardData);!(!FV(i)&&FJ(e,l,o()))&&(Fq(i,"text/html")?(l.preventDefault(),F2(e,i,i["text/html"],a,!0)):Fq(i,"text/plain")&&Fq(i,"text/uri-list")?(l.preventDefault(),F2(e,i,i["text/plain"],a,!0)):(t.create(),gO.setEditorTimeout(e,()=>{let r=t.getHtml();t.remove(),F2(e,i,r,a,!1)},0)))})},F8=e=>{let t=e=>ti(e,"webkit-fake-url"),r=e=>ti(e,"data:"),n=e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.paste)===!0};e.parser.addNodeFilter("img",(o,l,a)=>{if(!me(e)&&n(a))for(let n of o){let o=n.attr("src");D(o)&&!n.attr("data-mce-object")&&o!==tY.transparentSrc&&(t(o)?n.remove():!mc(e)&&r(o)&&n.remove())}})},F5=(e,t,r)=>{F3(e,t,r),F8(e)},F6=(e,t)=>{"text"===t.get()?(t.set("html"),d$(e,!1)):(t.set("text"),d$(e,!0)),e.focus()},F9=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{F6(e,t)}),e.addCommand("mceInsertClipboardContent",(t,r)=>{r.html&&Fj(e,r.html,r.internal,!1),r.text&&FH(e,r.text,!1)})},F4=(e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(Fo(),t),!0}catch(e){return!1}},F7=(e,t,r,n)=>{F4(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},Ie=e=>(t,r)=>{let{dom:n,selection:o}=e,l=n.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=n.create("div",{contenteditable:"true"},t);n.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(a),n.add(e.getBody(),l);let i=o.getRng();a.focus();let s=n.createRng();s.selectNodeContents(a),o.setRng(s),gO.setEditorTimeout(e,()=>{o.setRng(i),n.remove(l),r()},0)},It=e=>({html:Fa(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Ir=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),In=e=>!e.selection.isCollapsed()||Ir(e),Io=e=>t=>{!t.isDefaultPrevented()&&In(e)&&e.selection.isEditable()&&F7(t,It(e),Ie(e),()=>{if(tY.browser.isChromium()||tY.browser.isFirefox()){let t=e.selection.getRng();gO.setEditorTimeout(e,()=>{e.selection.setRng(t),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},Il=e=>t=>{!t.isDefaultPrevented()&&In(e)&&F7(t,It(e),Ie(e),H)},Ia=e=>{e.on("cut",Io(e)),e.on("copy",Il(e))},Ii=(e,t)=>{var r,n;return pI.getCaretRangeFromPoint(null!==(r=t.clientX)&&void 0!==r?r:0,null!==(n=t.clientY)&&void 0!==n?n:0,e.getDoc())},Is=e=>{let t=e["text/plain"];return!!t&&0===t.indexOf("file://")},Id=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},Ic=e=>es(e.files,e=>/^image\//.test(e.type)),Im=(e,t,r,n)=>{let o=e.getParent(r,e=>lb(t,e));return!P(e.getParent(r,"summary"))||!!(o&&eq(n,"text/html"))&&!P(new DOMParser().parseFromString(n["text/html"],"text/html").body.querySelector(o.nodeName.toLowerCase()))},Iu=e=>{e.on("input",t=>{"deleteByDrag"===t.inputType&&ec(ef(e.dom.select("details"),e=>P(e.querySelector("summary"))),t=>{oB(t.firstChild)&&t.firstChild.remove();let r=e.dom.create("summary");r.appendChild(iq().dom),t.prepend(r)})})},If=(e,t)=>{c7(e)&&e.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),me(e)||e.on("drop",e=>{let t=e.dataTransfer;t&&Ic(t)&&e.preventDefault()}),e.on("drop",r=>{if(r.isDefaultPrevented())return;let n=Ii(e,r);if(F(n))return;let o=F$(r.dataTransfer),l=Fq(o,Fo());if((!FV(o)||Is(o))&&FJ(e,r,n))return;let a=o[Fo()],i=a||o["text/html"]||o["text/plain"],s=Im(e.dom,e.schema,n.startContainer,o),d=t.get();(!d||s)&&i&&(r.preventDefault(),gO.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(a||d&&s)&&e.execCommand("Delete"),Id(e,n);let t=Fx(i);o["text/html"]?Fj(e,t,l,!0):FH(e,t,!0)})}))}),e.on("dragstart",e=>{t.set(!0)}),e.on("dragover dragend",r=>{me(e)&&!t.get()&&(r.preventDefault(),Id(e,Ii(e,r))),"dragend"===r.type&&t.set(!1)}),Iu(e)},Ig=e=>{let t=t=>r=>{t(e,r)},r=mt(e);U(r)&&e.on("PastePreProcess",t(r));let n=mr(e);U(n)&&e.on("PastePostProcess",t(n))},Ip=(e,t)=>{e.on("PastePreProcess",r=>{r.content=t(e,r.content,r.internal)})},Ih=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Ib=e=>tQ.trim(e).replace(Ih,a_).toLowerCase(),Iv=(e,t,r)=>{let n=mo(e);if(r||"all"===n||!ml(e))return t;let o=n?n.split(/[, ]/):[];if(o&&"none"!==n){let r=e.dom,n=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,l,a)=>{let i=r.parseStyle(r.decode(l)),s={};for(let e=0;e<o.length;e++){let t=i[o[e]],l=t,a=r.getStyle(n,o[e],!0);/color/.test(o[e])&&(l=Ib(l),a=Ib(a)),a!==l&&(s[o[e]]=t)}let d=r.serializeStyle(s,"span");return d?t+' style="'+d+'"'+a:t+a})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,r,n)=>t+' style="'+r+'"'+n)},Iy=e=>{(tY.browser.isChromium()||tY.browser.isSafari())&&Ip(e,Iv)},IC=e=>{let t=o2(!1),r=o2(ms(e)?"text":"html"),n=Fy(e);Iy(e),F9(e,r),Ig(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===r.get()),e.on("PreInit",()=>{Ia(e),If(e,t),F5(e,n,r)})},IE=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},Ix=e=>{e.parser.addNodeFilter("details",t=>{let r=mk(e);ec(t,e=>{"expanded"===r?e.attr("open","open"):"collapsed"===r&&e.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{let r=mN(e);ec(t,e=>{"expanded"===r?e.attr("open","open"):"collapsed"===r&&e.attr("open",null)})})},I_=e=>{IE(e),Ix(e)},Iw=e=>oM(e.dom),IS=e=>oL(e.dom),Ik=e=>t=>rH(rM.fromDom(e),t),IN=(e,t,r)=>nd(rM.fromDom(e),e=>IS(e)||r.isBlock(rn(e)),Ik(t)).getOr(rM.fromDom(t)).dom,IR=(e,t)=>nd(rM.fromDom(e),Iw,Ik(t)),IA=(e,t,r)=>{let n=new ol(e,t),o=r?n.next.bind(n):n.prev.bind(n),l=e;for(let t=r?e:o();t&&!oB(t);t=o())sh(t)&&(l=t);return l},ID=(e,t,r)=>{let n=sF.fromRangeStart(e).getNode(),o=IN(n,t,r),l=IA(n,o,!1),a=IA(n,o,!0),i=document.createRange();return IR(l,o).fold(()=>{oN(l)?i.setStart(l,0):i.setStartBefore(l)},e=>i.setStartBefore(e.dom)),IR(a,o).fold(()=>{oN(a)?i.setEnd(a,a.data.length):i.setEndAfter(a)},e=>i.setEndAfter(e.dom)),i},IT=e=>{let t=ID(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(yj(t))},IO=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),IT(e))})};(m=p||(p={})).Before="before",m.After="after";let IB=(e,t)=>Math.abs(e.left-t),IP=(e,t)=>Math.abs(e.right-t),IL=(e,t)=>e>=t.top&&e<=t.bottom,IM=(e,t)=>e.top<t.bottom&&e.bottom>t.top,IF=(e,t)=>{let r=ss(e,t)/Math.min(e.height,t.height);return IM(e,t)&&r>.5},II=(e,t)=>sa(ef(e,e=>IL(t,e))).fold(()=>[[],e],t=>{let{pass:r,fail:n}=eu(e,e=>IF(e,t));return[r,n]}),IU=(e,t)=>({node:e.node,position:IB(e,t)<IP(e,t)?p.Before:p.After}),Iz=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Ij=(e,t,r,n)=>{let o=e=>sh(e.node)?et.some(e):oh(e.node)?Ij(eA(e.node.childNodes),t,r,!1):et.none(),l=(e,n,l)=>o(n).filter(n=>2>Math.abs(l(e,t,r)-l(n,t,r))&&oN(n.node)),a=(e,a)=>{let i=eS(e,(e,n)=>a(e,t,r)-a(n,t,r));return eD(i,o).map(e=>n&&!oN(e.node)&&i.length>1?l(e,i[1],a).getOr(e):e)},[i,s]=II(AQ(e),r),{pass:d,fail:c}=eu(s,e=>e.top<r);return a(i,Iz).orThunk(()=>a(c,si)).orThunk(()=>a(d,si))},IH=(e,t,r,n)=>{let o=(t,l)=>{let a=ef(t.dom.childNodes,G(e=>oh(e)&&e.classList.contains("mce-drag-container")));return l.fold(()=>Ij(a,r,n,!0),e=>Ij(ef(a,t=>t!==e.dom),r,n,!0)).orThunk(()=>(rH(t,e)?et.none():rG(t)).bind(e=>o(e,et.some(t))))};return o(t,et.none())},I$=(e,t,r)=>{let n=rM.fromDom(e),o=rV(n),l=rM.fromPoint(o,t,r).filter(e=>r$(n,e)).getOr(n);return IH(n,l,t,r)},Iq=(e,t,r)=>I$(e,t,r).filter(e=>mG(e.node)).map(e=>IU(e,t)),IV=e=>{var t,r;let n=e.getBoundingClientRect(),o=e.ownerDocument,l=o.documentElement,a=o.defaultView;return{top:n.top+(null!==(t=null==a?void 0:a.scrollY)&&void 0!==t?t:0)-l.clientTop,left:n.left+(null!==(r=null==a?void 0:a.scrollX)&&void 0!==r?r:0)-l.clientLeft}},IW=e=>e.inline?IV(e.getBody()):{left:0,top:0},IK=e=>{let t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},IY=e=>{let t=e.getBody(),r=e.getDoc().documentElement,n={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||r.scrollLeft,top:t.scrollTop||r.scrollTop};return e.inline?n:o},IG=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){let r=IV(e.getContentAreaContainer()),n=IY(e);return{left:t.pageX-r.left+n.left,top:t.pageY-r.top+n.top}}return{left:t.pageX,top:t.pageY}},IX=(e,t,r)=>({pageX:r.left-e.left+t.left,pageY:r.top-e.top+t.top}),IZ=(e,t)=>IX(IW(e),IK(e),IG(e,t)),IQ=e=>({target:e,srcElement:e}),IJ=(e,t,r,n)=>({...t,dataTransfer:n,type:e,...IQ(r)}),I0=(e,t,r)=>{let n=X("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:n,initEvent:n,preventDefault:H,stopImmediatePropagation:H,stopPropagation:H,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:n,initMouseEvent:n,getModifierState:n,dataTransfer:r,...IQ(t)}},I1=(e,t)=>{let r=Fe(e);return"dragstart"===t?(MV(r),M0(r)):"drop"===t?(MW(r),M1(r)):(MK(r),M2(r)),r},I2=(e,t,r,n)=>{let o=I1(r,e);return M(n)?I0(e,t,o):IJ(e,n,t,o)},I3=((...e)=>t=>{for(let r=0;r<e.length;r++)if(e[r](t))return!0;return!1})(oM,oL),I8=(e,t,r)=>oM(r)&&r!==t&&e.isEditable(r.parentElement),I5=(e,t,r)=>!F(t)&&!(t===r||e.dom.isChildOf(t,r))&&e.dom.isEditable(t),I6=(e,t,r,n)=>{let o=e.dom,l=t.cloneNode(!0);o.setStyles(l,{width:r,height:n}),o.setAttrib(l,"data-mce-selected",null);let a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:n}),o.setStyles(l,{margin:0,boxSizing:"border-box"}),a.appendChild(l),a},I9=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},I4=(e,t)=>r=>()=>{let n="left"===e?r.scrollX:r.scrollY;r.scroll({[e]:n+t,behavior:"smooth"})},I7=I4("left",-32),Ue=I4("left",32),Ut=I4("top",-32),Ur=I4("top",32),Un=(e,t,r,n,o,l,a,i,s,d,c,m)=>{let u=0,f=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+r>o&&(u=t.pageX+r-o),t.pageY+n>l&&(f=t.pageY+n-l),e.style.width=r-u+"px",e.style.height=n-f+"px";let g=s.clientHeight,p=s.clientWidth,h=a+s.getBoundingClientRect().top,b=i+s.getBoundingClientRect().left;c.on(e=>{e.intervalId.clear(),e.dragging&&m&&(a+8>=g?e.intervalId.set(Ur(d)):a-8<=0?e.intervalId.set(Ut(d)):i+8>=p?e.intervalId.set(Ue(d)):i-8<=0?e.intervalId.set(I7(d)):h+16>=window.innerHeight?e.intervalId.set(Ur(window)):h-16<=0?e.intervalId.set(Ut(window)):b+16>=window.innerWidth?e.intervalId.set(Ue(window)):b-16<=0&&e.intervalId.set(I7(window)))})},Uo=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Ul=(e,t)=>{let r=e.getParent(t.parentNode,e.isBlock);Uo(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&iV(rM.fromDom(r))},Ua=e=>0===e.button,Ui=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),Us=(e,t)=>r=>{if(Ua(r)){let n=eb(t.dom.getParents(r.target),I3).getOr(null);if(I(n)&&I8(t.dom,t.getBody(),n)){let o=t.dom.getPos(n),l=t.getBody(),a=t.getDoc().documentElement;e.set({element:n,dataTransfer:M7(),dragging:!1,screenX:r.screenX,screenY:r.screenY,maxX:(t.inline?l.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?l.scrollHeight:a.offsetHeight)-2,relX:r.pageX-o.x,relY:r.pageY-o.y,width:n.offsetWidth,height:n.offsetHeight,ghost:I6(t,n,n.offsetWidth,n.offsetHeight),intervalId:o8(100)})}}},Ud=(e,t,r)=>{e._selectionOverrides.hideFakeCaret(),Iq(e.getBody(),t,r).fold(()=>e.selection.placeCaretAt(t,r),n=>{let o=e._selectionOverrides.showCaret(1,n.node,n.position===p.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,r)})},Uc=(e,t,r,n,o)=>{"dragstart"===t&&Fr(n,e.dom.getOuterHTML(r));let l=I2(t,r,n,o);return e.dispatch(t,l)},Um=(e,t)=>{let r=a6((e,r)=>Ud(t,e,r),0);return t.on("remove",r.cancel),n=>e.on(o=>{let l=Math.max(Math.abs(n.screenX-o.screenX),Math.abs(n.screenY-o.screenY));if(!o.dragging&&l>10){let e=Uc(t,"dragstart",o.element,o.dataTransfer,n);if(I(e.dataTransfer)&&(o.dataTransfer=e.dataTransfer),e.isDefaultPrevented())return;o.dragging=!0,t.focus()}if(o.dragging){let l=n.currentTarget===t.getDoc().documentElement,a=Ui(o,IZ(t,n));I9(o.ghost,t.getBody()),Un(o.ghost,a,o.width,o.height,o.maxX,o.maxY,n.clientY,n.clientX,t.getContentAreaContainer(),t.getWin(),e,l),r.throttle(n.clientX,n.clientY)}})},Uu=e=>{let t=e.getSel();if(!I(t))return null;{let e=t.getRangeAt(0).startContainer;return oN(e)?e.parentNode:e}},Uf=(e,t)=>r=>{e.on(e=>{var n;if(e.intervalId.clear(),e.dragging){if(I5(t,Uu(t.selection),e.element)){let o=null!==(n=t.getDoc().elementFromPoint(r.clientX,r.clientY))&&void 0!==n?n:t.getBody();Uc(t,"drop",o,e.dataTransfer,r).isDefaultPrevented()||t.undoManager.transact(()=>{Ul(t.dom,e.element),Ft(e.dataTransfer).each(e=>t.insertContent(e)),t._selectionOverrides.hideFakeCaret()})}Uc(t,"dragend",t.getBody(),e.dataTransfer,r)}}),Uh(e)},Ug=(e,t,r)=>{e.on(e=>{e.intervalId.clear(),e.dragging&&r.fold(()=>Uc(t,"dragend",e.element,e.dataTransfer),r=>Uc(t,"dragend",e.element,e.dataTransfer,r))}),Uh(e)},Up=(e,t)=>r=>Ug(e,t,et.some(r)),Uh=e=>{e.on(e=>{e.intervalId.clear(),Uo(e.ghost)}),e.clear()},Ub=e=>{let t=o5(),r=aG.DOM,n=document,o=Us(t,e),l=Um(t,e),a=Uf(t,e),i=Up(t,e);e.on("mousedown",o),e.on("mousemove",l),e.on("mouseup",a),r.bind(n,"mousemove",l),r.bind(n,"mouseup",i),e.on("remove",()=>{r.unbind(n,"mousemove",l),r.unbind(n,"mouseup",i)}),e.on("keydown",r=>{r.keyCode===g9.ESC&&Ug(t,e,et.none())})},Uv=e=>{let t=t=>{if(!t.isDefaultPrevented()){let r=t.dataTransfer;r&&(ei(r.types,"Files")||r.files.length>0)&&(t.preventDefault(),"drop"===t.type&&kI(e,"Dropped file type is not supported"))}},r=r=>{gj(e,r.target)&&t(r)},n=()=>{let n=aG.DOM,o=e.dom,l=document,a=e.inline?e.getBody():e.getDoc(),i=["drop","dragover"];ec(i,e=>{n.bind(l,e,r),o.bind(a,e,t)}),e.on("remove",()=>{ec(i,e=>{n.unbind(l,e,r),o.unbind(a,e,t)})})};e.on("init",()=>{gO.setEditorTimeout(e,n,0)})},Uy=e=>{Ub(e),cQ(e)&&Uv(e)},UC=e=>{let t=a6(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){let t=e.selection.getRng();if(t.collapsed){let r=Rw(e,t,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},UE=e=>{e.on("init",()=>{e.on("focusin",t=>{let r=t.target;if(oz(r)){let t=yb(e.getBody(),r),n=oM(t)?t:r;e.selection.getNode()!==n&&Rx(e,n).each(t=>e.selection.setRng(t))}})})},Ux=(e,t)=>yb(e.getBody(),t),U_=e=>{let t;let r=e.selection,n=e.dom,o=e.getBody(),l=mW(e,o,n.isBlock,()=>g2(e)),a="sel-"+n.uniqueId(),i="data-mce-selected",s=e=>I(e)&&n.hasClass(e,"mce-offscreen-selection"),d=e=>e!==o&&(oM(e)||oz(e))&&n.isChildOf(e,o)&&n.isEditable(e.parentNode),c=e=>{e&&r.setRng(e)},m=(t,n,o,a=!0)=>e.dispatch("ShowCaret",{target:n,direction:t,before:o}).isDefaultPrevented()?null:(a&&r.scrollIntoView(n,-1===t),l.show(o,n)),u=e=>iZ(e)||i3(e)||i8(e),f=e=>u(e.startContainer)||u(e.endContainer),g=t=>{let r=e.schema.getVoidElements(),o=n.createRng(),l=t.startContainer,a=t.startOffset,i=t.endContainer,s=t.endOffset;return eq(r,l.nodeName.toLowerCase())?0===a?o.setStartBefore(l):o.setStartAfter(l):o.setStart(l,a),eq(r,i.nodeName.toLowerCase())?0===s?o.setEndBefore(i):o.setEndAfter(i):o.setEnd(i,s),o},h=(t,o)=>{let l=rM.fromDom(e.getBody()),i=e.getDoc(),s=ng(l,"#"+a).getOrThunk(()=>{let e=rM.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',i);return rg(e,"id",a),nP(l,e),e}),d=n.createRng();nI(s),nF(s,[rM.fromText("\xa0",i),rM.fromDom(o),rM.fromText("\xa0",i)]),d.setStart(s.dom.firstChild,1),d.setEnd(s.dom.lastChild,0),nw(s,{top:n.getPos(t,e.getBody()).y+"px"}),gn(s);let c=r.getSel();return c&&(c.removeAllRanges(),c.addRange(d)),d},b=r=>{let o=r.cloneNode(!0),l=e.dispatch("ObjectSelected",{target:r,targetClone:o});if(l.isDefaultPrevented())return null;let a=h(r,l.targetClone),s=rM.fromDom(r);return ec(ot(rM.fromDom(e.getBody()),`*[${i}]`),e=>{rH(s,e)||ry(e,i)}),n.getAttrib(r,i)||r.setAttribute(i,"1"),t=r,C(),a},v=(e,t)=>{if(!e)return null;if(e.collapsed){if(!f(e)){let r=t?1:-1,l=ur(r,o,e),a=l.getNode(!t);if(I(a)){if(mG(a))return m(r,a,!!t&&!l.isAtEnd(),!1);if(iX(a)&&oM(a.nextSibling)){let e=n.createRng();return e.setStart(a,0),e.setEnd(a,0),e}}let i=l.getNode(t);if(I(i)){if(mG(i))return m(r,i,!t&&!l.isAtEnd(),!1);if(iX(i)&&oM(i.previousSibling)){let e=n.createRng();return e.setStart(i,1),e.setEnd(i,1),e}}}return null}let r=e.startContainer,l=e.startOffset,a=e.endOffset;if(oN(r)&&0===l&&oM(r.parentNode)&&(r=r.parentNode,l=n.nodeIndex(r),r=r.parentNode),!oh(r))return null;if(a===l+1&&r===e.endContainer){let e=r.childNodes[l];if(d(e))return b(e)}return null},y=()=>{t&&t.removeAttribute(i),ng(rM.fromDom(e.getBody()),"#"+a).each(nU),t=null},C=()=>{l.hide()};return w6(e)||(()=>{e.on("click",t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())}),e.on("blur NewBlock",y),e.on("ResizeWindow FullscreenStateChanged",l.reposition),e.on("tap",t=>{let r=t.target,n=Ux(e,r);oM(n)?(t.preventDefault(),Rx(e,n).each(v)):d(r)&&Rx(e,r).each(v)},!0),e.on("mousedown",t=>{let r=t.target;if(r!==o&&"HTML"!==r.nodeName&&!n.isChildOf(r,o)||!kR(e,t.clientX,t.clientY))return;y(),C();let l=Ux(e,r);oM(l)?(t.preventDefault(),Rx(e,l).each(v)):Iq(o,t.clientX,t.clientY).each(r=>{t.preventDefault(),c(m(1,r.node,r.position===p.Before,!1)),ob(l)?l.focus():e.getBody().focus()})}),e.on("keypress",e=>{!g9.modifierPressed(e)&&oM(r.getNode())&&e.preventDefault()}),e.on("GetSelectionRange",e=>{let r=e.range;if(t){if(!t.parentNode){t=null;return}(r=r.cloneRange()).selectNode(t),e.range=r}}),e.on("SetSelectionRange",e=>{e.range=g(e.range);let t=v(e.range,e.forward);t&&(e.range=t)});let a=e=>oh(e)&&"mcepastebin"===e.id;e.on("AfterSetSelectionRange",e=>{let t=e.range,r=t.startContainer.parentElement;f(t)||a(r)||C(),s(r)||y()}),Uy(e),UC(e),UE(e)})(),{showCaret:m,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(i6(e),r.scrollIntoView(e))},hideFakeCaret:C,destroy:()=>{l.destroy(),t=null}}},Uw=(e,t)=>{let r=t;for(let t=e.previousSibling;oN(t);t=t.previousSibling)r+=t.data.length;return r},US=(e,t,r,n,o)=>{if(oN(r)&&(n<0||n>r.data.length))return[];let l=o&&oN(r)?[Uw(r,n)]:[n],a=r;for(;a!==t&&a.parentNode;)l.push(e.nodeIndex(a,o)),a=a.parentNode;return a===t?l.reverse():[]},Uk=(e,t,r,n,o,l,a=!1)=>({start:US(e,t,r,n,a),end:US(e,t,o,l,a)}),UN=(e,t)=>{let r=t.slice(),n=r.pop();return z(n)?ep(r,(e,t)=>e.bind(e=>et.from(e.childNodes[t])),et.some(e)).bind(e=>oN(e)&&(n<0||n>e.data.length)?et.none():et.some({node:e,offset:n})):et.none()},UR=(e,t)=>UN(e,t.start).bind(({node:r,offset:n})=>UN(e,t.end).map(({node:e,offset:t})=>{let o=document.createRange();return o.setStart(r,n),o.setEnd(e,t),o})),UA=(e,t,r,n=!1)=>Uk(e,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n),UD=(e,t,r)=>{if(t&&e.isEmpty(t)&&!r(t)){let n=t.parentNode;e.remove(t,oN(t.firstChild)&&os(t.firstChild.data)),UD(e,n,r)}},UT=(e,t,r,n=!0)=>{let o=t.startContainer.parentNode,l=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(oN(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),oN(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),UD(e,o,r),o!==l&&UD(e,l,r))},UO=(e,t)=>et.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),UB=(e,t,r)=>{let n=e.dynamicPatternsLookup({text:r,block:t});return{...e,blockPatterns:df(n).concat(e.blockPatterns),inlinePatterns:dg(n).concat(e.inlinePatterns)}},UP=(e,t,r,n)=>{let o=e.createRng();return o.setStart(t,0),o.setEnd(r,n),o.toString()},UL=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),UM=(e,t)=>{let r=e.createRng();return r.setStartAfter(t.start),r.setEndBefore(t.end),r},UF=(e,t,r)=>{let n=UR(e.getRoot(),r).getOrDie("Unable to resolve path range"),o=n.startContainer,l=n.endContainer,a=0===n.endOffset?l:l.splitText(n.endOffset),i=0===n.startOffset?o:o.splitText(n.startOffset),s=i.parentNode;return{prefix:t,end:a.parentNode.insertBefore(UL(e,t+"-end"),a),start:s.insertBefore(UL(e,t+"-start"),i)}},UI=(e,t,r)=>{UD(e,e.get(t.prefix+"-end"),r),UD(e,e.get(t.prefix+"-start"),r)},UU=e=>0===e.start.length,Uz=e=>(t,r)=>{let n=t.data.substring(0,r),o=n.lastIndexOf(e.charAt(e.length-1)),l=n.lastIndexOf(e);return -1!==l?l+e.length:-1!==o?o+1:-1},Uj=(e,t,r,n)=>{let o=t.start;return O5(e,n.container,n.offset,Uz(o),r).bind(n=>{var l,a;let i=null!==(a=null===(l=r.textContent)||void 0===l?void 0:l.indexOf(o))&&void 0!==a?a:-1;if(-1!==i&&n.offset>=i+o.length){let t=e.createRng();return t.setStart(n.container,n.offset-o.length),t.setEnd(n.container,n.offset),et.some(t)}{let l=n.offset-o.length;return O3(n.container,l,r).map(t=>{let r=e.createRng();return r.setStart(t.container,t.offset),r.setEnd(n.container,n.offset),r}).filter(e=>e.toString()===o).orThunk(()=>Uj(e,t,r,OZ(n.container,0)))}})},UH=(e,t,r,n,o,l=!1)=>{if(0===t.start.length&&!l){let t=e.createRng();return t.setStart(r,n),t.setEnd(r,n),et.some(t)}return O1(r,n,o).bind(r=>Uj(e,t,o,r).bind(e=>{var t;return l&&(e.endContainer===r.container&&e.endOffset===r.offset||0===r.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)?et.none():et.some(e)}))},U$=(e,t,r,n)=>{let o=e.dom,l=o.getRoot(),a=r.pattern,i=r.position.container,s=r.position.offset;return O3(i,s-r.pattern.end.length,t).bind(d=>{let c=Uk(o,l,d.container,d.offset,i,s,n);if(UU(a))return et.some({matches:[{pattern:a,startRng:c,endRng:c}],position:d});{let i=Uq(e,r.remainingPatterns,d.container,d.offset,t,n),s=i.getOr({matches:[],position:d}),m=s.position;return UH(o,a,m.container,m.offset,t,i.isNone()).map(e=>{let t=UA(o,l,e,n);return{matches:s.matches.concat([{pattern:a,startRng:t,endRng:c}]),position:OZ(e.startContainer,e.startOffset)}})}})},Uq=(e,t,r,n,o,l)=>{let a=e.dom;return O1(r,n,a.getRoot()).bind(i=>{let s=UP(a,o,r,n);for(let a=0;a<t.length;a++){let d=t[a];if(!ts(s,d.end))continue;let c=t.slice();c.splice(a,1);let m=U$(e,o,{pattern:d,remainingPatterns:c,position:i},l);if(m.isNone()&&n>0)return Uq(e,t,r,n-1,o,l);if(m.isSome())return m}return et.none()})},UV=(e,t,r)=>{e.selection.setRng(r),"inline-format"===t.type?ec(t.format,t=>{e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},UW=(e,t,r,n)=>{let o=UM(e.dom,r);UT(e.dom,o,n),UV(e,t,o)},UK=(e,t,r,n,o)=>{let l=e.dom,a=UM(l,n),i=UM(l,r);UT(l,i,o),UT(l,a,o),UV(e,t,UM(l,{prefix:r.prefix,start:r.end,end:n.start}))},UY=(e,t)=>{let r=iy("mce_textpattern"),n=eg(t,(t,n)=>{let o=UF(e,r+`_end${t.length}`,n.endRng);return t.concat([{...n,endMarker:o}])},[]);return eg(n,(t,o)=>{let l=n.length-t.length-1,a=UU(o.pattern)?o.endMarker:UF(e,r+`_start${l}`,o.startRng);return t.concat([{...o,startMarker:a}])},[])},UG=e=>eS(e,(e,t)=>t.end.length-e.end.length),UX=(e,t)=>{let r=eE(e,e=>es(t,t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end));return e.length===t.length?r?e:t:e.length>t.length?e:t},UZ=(e,t,r,n,o,l)=>UX(Uq(e,o.inlinePatterns,r,n,t,l).fold(()=>[],e=>e.matches),Uq(e,UG(o.inlinePatterns),r,n,t,l).fold(()=>[],e=>e.matches)),UQ=(e,t)=>{if(0===t.length)return;let r=e.dom,n=e.selection.getBookmark();ec(UY(r,t),t=>{let n=r.getParent(t.startMarker.start,r.isBlock),o=e=>e===n;UU(t.pattern)?UW(e,t.pattern,t.endMarker,o):UK(e,t.pattern,t.startMarker,t.endMarker,o),UI(r,t.endMarker,o),UI(r,t.startMarker,o)}),e.selection.moveToBookmark(n)},UJ=(e,t,r)=>O2(t,0,t).map(n=>{let o=n.container;return O8(o,r.start.length,t).each(r=>{let n=e.createRng();n.setStart(o,0),n.setEnd(r.container,r.offset),UT(e,n,e=>e===t)}),o}),U0=e=>(t,r)=>{let n=t.dom,o=r.pattern,l=UR(n.getRoot(),r.range).getOrDie("Unable to resolve path range"),a=(e,t)=>{let r=t.get(e);return B(r)&&eN(r).exists(e=>eq(e,"block"))};return UO(t,l).each(r=>{"block-format"===o.type?a(o.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,r,o),t.formatter.apply(o.format)}):"block-command"===o.type&&t.undoManager.transact(()=>{e(t.dom,r,o),t.execCommand(o.cmd,!1,o.value)})}),!0},U1=e=>eS(e,(e,t)=>t.start.length-e.start.length),U2=e=>(t,r)=>{let n=U1(t),o=r.replace("\xa0"," ");return eb(n,t=>e(t,r,o))},U3=(e,t)=>(r,n,o,l,a)=>{var i;void 0===a&&(a=null!==(i=n.textContent)&&void 0!==i?i:"");let s=r.dom,d=d4(r);return s.is(n,d)?e(o.blockPatterns,a).map(e=>t&&tQ.trim(a).length===e.start.length?[]:[{pattern:e,range:Uk(s,s.getRoot(),n,0,n,0,l)}]).getOr([]):[]},U8=e=>/^\s[^\s]/.test(e),U5=U0((e,t,r)=>{UJ(e,t,r).each(e=>{let t=rM.fromDom(e),r=iD(t);U8(r)&&iO(t,r.slice(1))})}),U6=U3(U2((e,t,r)=>0===t.indexOf(e.start)||0===r.indexOf(e.start)),!0),U9=(e,t)=>{let r=e.selection.getRng();return UO(e,r).map(n=>{var o;let l=Math.max(0,r.startOffset),a=UB(t,n,null!==(o=n.textContent)&&void 0!==o?o:"");return{inlineMatches:UZ(e,n,r.startContainer,l,a,!0),blockMatches:U6(e,n,a,!0)}}).filter(({inlineMatches:e,blockMatches:t})=>t.length>0||e.length>0)},U4=(e,t)=>{if(0===t.length)return;let r=e.selection.getBookmark();ec(t,t=>U5(e,t)),e.selection.moveToBookmark(r)},U7=U0(UJ),ze=U3(U2((e,t,r)=>t===e.start||r===e.start),!1),zt=(e,t)=>{let r=e.selection.getRng();return UO(e,r).map(n=>{let o=Math.max(0,r.startOffset),l=UP(e.dom,n,r.startContainer,o),a=UB(t,n,l);return ze(e,n,a,!1,l)}).filter(e=>e.length>0)},zr=(e,t)=>{ec(t,t=>U7(e,t))},zn=(e,t)=>U9(e,t).fold(J,({inlineMatches:t,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{iY(e),UQ(e,t),U4(e,r);let n=e.selection.getRng(),o=O1(n.startContainer,n.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),o.each(t=>{let r=t.container;"\uFEFF"===r.data.charAt(t.offset-1)&&(r.deleteData(t.offset-1,1),UD(e.dom,r.parentNode,t=>t===e.dom.getRoot()))})}),!0)),zo=(e,t)=>{let r=e.selection.getRng();UO(e,r).map(n=>{let o=Math.max(0,r.startOffset-1),l=UP(e.dom,n,r.startContainer,o),a=UB(t,n,l),i=UZ(e,n,r.startContainer,o,a,!1);i.length>0&&e.undoManager.transact(()=>{UQ(e,i)})})},zl=(e,t)=>zt(e,t).fold(J,t=>(e.undoManager.transact(()=>{zr(e,t)}),!0)),za=(e,t,r)=>{for(let n=0;n<e.length;n++)if(r(e[n],t))return!0;return!1},zi=(e,t)=>za(e,t,(e,t)=>e===t.keyCode&&!g9.modifierPressed(t)),zs=(e,t)=>za(e,t,(e,t)=>e.charCodeAt(0)===t.charCode),zd=e=>{let t=[",",".",";",":","!","?"],r=[32],n=()=>dp(mm(e).filter(t=>"inline-command"!==t.type&&"block-command"!==t.type||e.queryCommandSupported(t.cmd)),mu(e)),o=()=>mC(e);e.on("keydown",t=>{if(13===t.keyCode&&!g9.modifierPressed(t)&&e.selection.isCollapsed()&&e.selection.isEditable()){let r=dh(n(),"enter");(r.inlinePatterns.length>0||r.blockPatterns.length>0||o())&&zn(e,r)&&t.preventDefault()}},!0),e.on("keydown",t=>{if(32===t.keyCode&&e.selection.isCollapsed()&&e.selection.isEditable()){let r=dh(n(),"space");(r.blockPatterns.length>0||o())&&zl(e,r)&&t.preventDefault()}},!0);let l=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){let t=dh(n(),"space");(t.inlinePatterns.length>0||o())&&zo(e,t)}};e.on("keyup",e=>{zi(r,e)&&l()}),e.on("keypress",r=>{zs(t,r)&&gO.setEditorTimeout(e,l)})},zc=e=>{zd(e)},zm=e=>{let t=tQ.each,r=g9.BACKSPACE,n=g9.DELETE,o=e.dom,l=e.selection,a=e.parser,i=tY.browser,s=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=tY.deviceType.isiPhone()||tY.deviceType.isiPad(),m=tY.os.isMacOS()||tY.os.isiOS(),u=(t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},f=e=>e.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},p=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",t=>{let r;if(t.target===e.getDoc().documentElement){if(r=l.getRng(),e.getBody().focus(),"mousedown"===t.type){if(iZ(r.startContainer))return;l.placeCaretAt(t.clientX,t.clientY)}else l.setRng(r)}})},h=()=>{Range.prototype.getClientRects||e.on("mousedown",t=>{if(!f(t)&&"HTML"===t.target.nodeName){let t=e.getBody();t.blur(),gO.setEditorTimeout(e,()=>{t.focus()})}})},b=()=>{let t=c1(e);e.on("click",r=>{let n=r.target;/^(IMG|HR)$/.test(n.nodeName)&&o.isEditable(n)&&(r.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&o.hasClass(n,t)&&0===n.childNodes.length&&o.isEditable(n.parentNode)&&(r.preventDefault(),l.select(n))})},v=()=>{e.on("keydown",e=>{if(!f(e)&&e.keyCode===r&&l.isCollapsed()&&0===l.getRng().startOffset){let t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},y=()=>{cK(e)||e.on("BeforeExecCommand mousedown",()=>{u("StyleWithCSS",!1),u("enableInlineTableEditing",!1),cS(e)||u("enableObjectResizing",!1)})},C=e=>{let t=e.getBody(),r=e.selection.getRng();return r.startContainer===r.endContainer&&r.startContainer===t&&0===r.startOffset&&r.endOffset===t.childNodes.length},E=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},_=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",t=>{let r;"HTML"===t.target.nodeName&&(r=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(r),e.selection.normalize(),e.nodeChanged())}))},w=()=>{m&&e.on("keydown",t=>{g9.metaKeyPressed(t)&&!t.shiftKey&&(37===t.keyCode||39===t.keyCode)&&(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})},S=()=>{e.on("click",e=>{let t=e.target;do if("A"===t.tagName){e.preventDefault();return}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},k=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",e=>{e.preventDefault()})})};return w6(e)?(d&&(p(),b(),k(),g(),c&&(x(),_(),S())),s&&(h(),y(),E(),w())):(e.on("keydown",t=>{if(f(t)||t.keyCode!==g9.BACKSPACE)return;let r=l.getRng(),n=r.startContainer,a=r.startOffset,i=o.getRoot(),s=n;if(r.collapsed&&0===a){for(;s.parentNode&&s.parentNode.firstChild===s&&s.parentNode!==i;)s=s.parentNode;"BLOCKQUOTE"===s.nodeName&&(e.formatter.toggle("blockquote",void 0,s),(r=o.createRng()).setStart(n,0),r.setEnd(n,0),l.setRng(r))}}),(()=>{let t=e=>{let t=o.create("body"),r=e.cloneContents();return t.appendChild(r),l.serializer.serialize(t,{format:"html"})},a=r=>{let n=t(r),l=o.createRng();return l.selectNode(e.getBody()),n===t(l)};e.on("keydown",t=>{let l=t.keyCode;if(!f(t)&&(l===n||l===r)&&e.selection.isEditable()){let r=e.selection.isCollapsed(),n=e.getBody();if(r&&!oJ(e.schema,n)||!r&&!a(e.selection.getRng()))return;t.preventDefault(),e.setContent(""),n.firstChild&&o.isBlock(n.firstChild)?e.selection.setCursorLocation(n.firstChild,0):e.selection.setCursorLocation(n,0),e.nodeChanged()}})})(),tY.windowsPhone||e.on("keyup focusin mouseup",t=>{g9.modifierPressed(t)||C(e)||l.normalize()},!0),d&&(p(),b(),e.on("init",()=>{u("DefaultParagraphSeparator",d4(e))}),k(),v(),a.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),c?(x(),_(),S()):g()),s&&(e.on("keydown",t=>{if(!f(t)&&t.keyCode===r&&e.getBody().getElementsByTagName("hr").length&&l.isCollapsed()&&0===l.getRng().startOffset){let e=l.getNode(),r=e.previousSibling;if("HR"===e.nodeName){o.remove(e),t.preventDefault();return}r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(o.remove(r),t.preventDefault())}}),h(),(()=>{let r=()=>{let r=o.getAttribs(l.getStart().cloneNode(!1));return()=>{let n=l.getStart();n!==e.getBody()&&(o.setAttrib(n,"style",null),t(r,e=>{n.setAttributeNode(e.cloneNode(!0))}))}},n=()=>!l.isCollapsed()&&o.getParent(l.getStart(),o.isBlock)!==o.getParent(l.getEnd(),o.isBlock);e.on("keypress",t=>{let o;return!(!f(t)&&(8===t.keyCode||46===t.keyCode)&&n())||(o=r(),e.getDoc().execCommand("delete",!1),o(),t.preventDefault(),!1)}),o.bind(e.getDoc(),"cut",t=>{if(!f(t)&&n()){let t=r();gO.setEditorTimeout(e,()=>{t()})}})})(),y(),(()=>{let r=()=>{t(o.select("a:not([data-mce-block])"),e=>{var t;let r=e.parentNode,n=o.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!o.isBlock(r);){if((null===(t=r.parentNode)||void 0===t?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}o.add(r,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",e=>{("setcontent"===e.type||"mceInsertLink"===e.command)&&r()})})(),E(),w(),v())),{refreshContentEditable:H,isHidden:()=>{if(!s||e.removed)return!1;let t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},zu=e=>"gpl"===e.toLowerCase(),zf=e=>e.length>=64&&e.length<=255,zg=e=>zu(e)||zf(e)?"VALID":"INVALID",zp=e=>{let t=mT(e);!D(mO(e))&&(M(t)||"INVALID"===zg(t))&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},zh=aG.DOM,zb=(e,t)=>{let r=ne(r7(rM.fromDom(e.getBody()))),n=rM.fromTag("style");rg(n,"type","text/css"),nP(n,rM.fromText(t)),nP(r,n),e.on("remove",()=>{nU(n)})},zv=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,zy=e=>ez(e,e=>!1===M(e)),zC=e=>{let t=e.options.get,r=e.editorUpload.blobCache;return zy({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:zv(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:mA(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:r,document:e.getDoc()})},zE=e=>{let t=e.options.get;return zy({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},zx=e=>{let t=e.options.get;return{...zC(e),...zE(e),...zy({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},z_=e=>{let t=_$(zC(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(t,r)=>{let n=e.dom,o="data-mce-"+r,l=t.length;for(;l--;){let a=t[l],i=a.attr(r);if(i&&!a.attr(o)){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===r?((i=n.serializeStyle(n.parseStyle(i),a.name)).length||(i=null),a.attr(o,i),a.attr(r,i)):"tabindex"===r?(a.attr(o,i),a.attr(r,null)):a.attr(o,e.convertURL(i,r,a.name))}}}),t.addNodeFilter("script",e=>{let t=e.length;for(;t--;){let r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}}),mh(e)&&t.addNodeFilter("#cdata",t=>{var r;let n=t.length;for(;n--;){let o=t[n];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(null!==(r=o.value)&&void 0!==r?r:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",t=>{let r=t.length,n=e.schema.getNonEmptyElements();for(;r--;){let e=t[r];e.isEmpty(n)&&0===e.getAll("br").length&&e.append(new hh("br",1))}}),t},zw=e=>{let t=c6(e);t&&gO.setEditorTimeout(e,()=>{let r;(r=!0===t?e:e.editorManager.get(t))&&!r.destroyed&&(r.focus(),r.selection.scrollIntoView())},100)},zS=e=>{let t=e.dom.getRoot();e.inline||fi(e)&&e.selection.getStart(!0)!==t||uN(t).each(t=>{let r=t.getNode(),n=ow(r)?uN(r).getOr(t):t;e.selection.setRng(n.toRange())})},zk=e=>{e.bindPendingEventDelegates(),e.initialized=!0,dR(e),e.focus(!0),zS(e),e.nodeChanged({initial:!0});let t=c8(e);U(t)&&t.call(e,e),zw(e),k2(e)&&k6(e,!0)},zN=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,zR=(e,t,r)=>{let{pass:n,fail:o}=eu(t,e=>tinymce.Resource.has(Ni(e))),l=[...n.map(t=>{let r=tinymce.Resource.get(Ni(t));return D(r)?Promise.resolve(zN(e).loadRawCss(t,r)):Promise.resolve()}),zN(e).loadAll(o)];return e.inline?l:l.concat([e.ui.styleSheetLoader.loadAll(r)])},zA=e=>{let t=zN(e),r=cx(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},l=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let t="";tQ.each(e.contentStyles,e=>{t+=e+"\r\n"}),e.dom.addStyle(t)}let a=Promise.all(zR(e,n,r)).then(l).catch(l),i=cE(e);return i&&zb(e,i),a},zD=e=>{let t=e.getDoc(),r=e.getBody();dk(e),c9(e)||(t.body.spellcheck=!1,zh.setAttrib(r,"spellcheck","false")),e.quirks=zm(e),dN(e);let n=c_(e);void 0!==n&&(r.dir=n);let o=c4(e);o&&e.on("BeforeSetContent",e=>{tQ.each(o,t=>{e.content=e.content.replace(t,e=>"\x3c!--mce:protected "+escape(e)+"--\x3e")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",t=>{e.composing="compositionstart"===t.type})},zT=e=>{w6(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},zO=e=>{!0!==e.removed&&(zT(e),zk(e))},zB=e=>{let t=!1,r=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(r),t=!0,e.setProgressState(!1)}},zP=e=>{let t=e.getElement(),r=e.getDoc();e.inline&&(zh.addClass(t,"mce-content-body"),e.contentDocument=r=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);let n=e.getBody();n.disabled=!0,e.readonly=cK(e),e._editableRoot=cY(e),!mB(e)&&e.hasEditableRoot()&&(e.inline&&"static"===zh.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable="true"),n.disabled=!1,e.editorUpload=NS(e),e.schema=am(zE(e)),e.dom=aG(r,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:cg(e),referrerPolicy:cp(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=z_(e),e.serializer=S1(zx(e),e),e.selection=Sj(e.dom,e.getWin(),e.serializer,e),e.annotator=f7(e),e.formatter=NU(e),e.undoManager=N$(e),e._nodeChangeDispatcher=new MF(e),e._selectionOverrides=U_(e),Tf(e),I_(e),Tk(e),w6(e)||(IO(e),zc(e));let o=MM(e);Tc(e,o),TE(e),NZ(e),IC(e);let l=w4(e);zD(e),zp(e),l.fold(()=>{let t=zB(e);zA(e).then(()=>{zO(e),t()})},t=>{e.setProgressState(!0),zA(e).then(()=>{t().then(t=>{e.setProgressState(!1),zO(e),Sk(e)},t=>{e.notificationManager.open({type:"error",text:String(t)}),zO(e),Sk(e)})})})},zL=(e,t,r)=>nX(e,t,ee,r),zM=aG.DOM,zF=(e,t,r,n)=>{let o=rM.fromTag("iframe");return n.each(e=>rg(o,"tabindex",e)),rp(o,r),rp(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),rD(o,"tox-edit-area__iframe"),o},zI=e=>{let t=d2(e)+"<html><head>";d3(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let r=d8(e),n=d5(e),o=e.translate(c2(e));return d6(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+d6(e)+'" />'),t+=`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}"><br></body></html>`},zU=(e,t)=>{let r=tY.browser.isFirefox()?c2(e):"Rich Text Area",n=e.translate(r),o=rb(rM.fromDom(e.getElement()),"tabindex").bind(th),l=zF(e.id,n,d1(e),o).dom;l.onload=()=>{l.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=l,e.iframeHTML=zI(e),zM.add(t.iframeContainer,l)},zz=e=>{let t=e.iframeElement,r=()=>{e.contentDocument=t.contentDocument,zP(e)};if(my(e)||tY.browser.isFirefox()){let t=e.getDoc();t.open(),t.write(e.iframeHTML),t.close(),r()}else{let n=zL(rM.fromDom(t),"load",()=>{n.unbind(),r()});t.srcdoc=e.iframeHTML}},zj=(e,t)=>{zU(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=zM.isHidden(t.editorContainer)),e.getElement().style.display="none",zM.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,zz(e)},zH=aG.DOM,z$=(e,t,r)=>{let n=kB.get(r),o=kB.urls[r]||e.documentBaseUrl.replace(/\/$/,"");if(r=tQ.trim(r),n&&-1===tQ.inArray(t,r)){if(e.plugins[r])return;try{let l=n(e,o)||{};e.plugins[r]=l,U(l.init)&&(l.init(e,o),t.push(r))}catch(t){kK(e,r,t)}}},zq=e=>e.replace(/^\-/,""),zV=e=>{let t=[];ec(cX(e),r=>{z$(e,t,zq(r))})},zW=e=>{let t=tQ.trim(cs(e)),r=e.ui.registry.getAll().icons;eP({...kb.get("default").icons,...kb.get(t).icons},(t,n)=>{eq(r,n)||e.ui.registry.addIcon(n,t)})},zK=e=>{let t=cD(e);D(t)?(e.theme=kP.get(t)(e,kP.urls[t])||{},U(e.theme.init)&&e.theme.init(e,kP.urls[t]||e.documentBaseUrl.replace(/\/$/,""))):e.theme={}},zY=e=>{let t=cO(e);e.model=kv.get(t)(e,kv.urls[t])},zG=e=>{let t=e.theme.renderUI;return t?t():zJ(e)},zX=e=>{let t=e.getElement(),r=cD(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r},zZ=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),zQ=e=>{let t=zH.create("div");return zH.insertAfter(t,e),zZ(t,t)},zJ=e=>{let t=e.getElement();return e.inline?zZ(null):zQ(t)},z0=e=>(e.orgDisplay=e.getElement().style.display,D(cD(e)))?zG(e):U(cD(e))?zX(e):zJ(e),z1=(e,t)=>{let r={show:et.from(t.show).getOr(H),hide:et.from(t.hide).getOr(H),isEnabled:et.from(t.isEnabled).getOr(ee),setEnabled:r=>{r&&("readonly"===e.mode.get()||k2(e))||et.from(t.setEnabled).each(e=>e(r))}};e.ui={...e.ui,...r}},z2=async e=>{e.dispatch("ScriptsLoaded"),zW(e),zK(e),zY(e),zV(e);let t=await z0(e);z1(e,et.from(t.api).getOr({})),e.editorContainer=t.editorContainer,Nu(e),e.inline?zP(e):zj(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},z3=aG.DOM,z8=e=>"-"===e.charAt(0),z5=(e,t)=>{let r=ch(t),n=cb(t);if(!a8.hasCode(r)&&"en"!==r){let o=tf(n)?n:`${t.editorManager.baseURL}/langs/${r}.js`;e.add(o).catch(()=>{kq(t,o,r)})}},z6=(e,t)=>{let r=cD(e);if(D(r)&&!z8(r)&&!eq(kP.urls,r)){let n=cT(e),o=n?e.documentBaseURI.toAbsolute(n):`themes/${r}/theme${t}.js`;kP.load(r,o).catch(()=>{kV(e,o,r)})}},z9=(e,t)=>{let r=cO(e);if("plugin"!==r&&!eq(kv.urls,r)){let n=cB(e),o=D(n)?e.documentBaseURI.toAbsolute(n):`models/${r}/model${t}.js`;kv.load(r,o).catch(()=>{kW(e,o,r)})}},z4=e=>et.from(cd(e)).filter(tf).map(e=>({url:e,name:et.none()})),z7=(e,t,r)=>et.from(t).filter(e=>tf(e)&&!kb.has(e)).map(t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${r}.js`,name:et.some(t)})),je=(e,t,r)=>{ec(t1([z7(t,"default",r),z4(t).orThunk(()=>z7(t,cs(t),""))]),r=>{e.add(r.url).catch(()=>{k$(t,r.url,r.name.getOrUndefined())})})},jt=(e,t)=>{let r=(t,r)=>{kB.load(t,r).catch(()=>{kH(e,r,t)})};eP(cZ(e),(t,n)=>{r(n,t),e.options.set("plugins",cX(e).concat(n))}),ec(cX(e),e=>{(e=tQ.trim(e))&&!kB.urls[e]&&!z8(e)&&r(e,`plugins/${e}/plugin${t}.js`)})},jr=e=>{let t=cD(e);return!D(t)||I(kP.get(t))},jn=e=>{let t=cO(e);return I(kv.get(t))},jo=(e,t)=>{let r=aZ.ScriptLoader,n=()=>{!e.removed&&jr(e)&&jn(e)&&z2(e)};z6(e,t),z9(e,t),z5(r,e),je(r,e,t),jt(e,t),r.loadQueue().then(n,n)},jl=(e,t)=>lk.forElement(e,{contentCssCors:cG(t),referrerPolicy:cp(t)}),ja=e=>{let t=e.id;a8.setCode(ch(e));let r=()=>{z3.unbind(window,"ready",r),e.render()};if(!aF.Event.domLoaded){z3.bind(window,"ready",r);return}if(!e.getElement())return;let n=rM.fromDom(e.getElement()),o=rE(n);e.on("remove",()=>{em(n.dom.attributes,e=>ry(n,e.name)),rp(n,o)}),e.ui.styleSheetLoader=jl(n,e),cz(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");let l=e.getElement().form||z3.getParent(t,"form");!l||(e.formElement=l,cj(e)&&!ok(e.getElement())&&(z3.insertAfter(z3.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},z3.bind(l,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!cH(e)||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),l._mceOldSubmit(l)))),e.windowManager=kM(e),e.notificationManager=kO(e),m_(e)&&e.on("GetContent",e=>{e.save&&(e.content=z3.encode(e.content))}),c$(e)&&e.on("submit",()=>{e.initialized&&e.save()}),cq(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),jo(e,e.suffix)},ji=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,k2(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),dq(e,t))},js=e=>e._editableRoot,jd=(e,t)=>({sections:V(e),options:V(t)}),jc=tj().deviceType,jm=jc.isPhone(),ju=jc.isTablet(),jf=e=>F(e)?[]:ef(ed(B(e)?e:e.split(/[ ,]/),tc),tf),jg=(e,t)=>{let r=eU(t,(t,r)=>ei(e,r));return jd(r.t,r.f)},jp=(e,t,r={})=>{let n=e$(e.sections(),t).getOr({});return tQ.extend({},r,n)},jh=(e,t)=>eq(e.sections(),t),jb=(e,t)=>jh(e,t)?e.sections()[t]:{},jv=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:e$(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),jy=(e,t)=>{var r;let n=null!==(r=t.external_plugins)&&void 0!==r?r:{};return e&&e.external_plugins?tQ.extend({},e.external_plugins,n):n},jC=(e,t)=>[...jf(e),...jf(t)],jE=(e,t,r,n)=>e&&jh(t,"mobile")?n:r,jx=(e,t,r,n)=>{let o=jf(r.forced_plugins),l=jf(n.plugins),a=jb(t,"mobile"),i=a.plugins?jf(a.plugins):l,s=jC(o,jE(e,t,l,i));return tQ.extend(n,{forced_plugins:o,plugins:s})},j_=(e,t)=>e&&jh(t,"mobile"),jw=(e,t,r,n,o)=>{var l;let a=jg(["mobile"],B_(e?{mobile:jv(null!==(l=o.mobile)&&void 0!==l?l:{},t)}:{},o)),i=tQ.extend(r,n,a.options(),j_(e,a)?jp(a,"mobile"):{},{external_plugins:jy(n,a.options())});return jx(e,a,n,i)},jS=(e,t)=>{let r=Bw(t);return jw(jm||ju,jm,r,e,r)},jk=(e,t)=>SS(e,t),jN=e=>{let t=(t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()},r=r=>()=>{ec("left,center,right,justify".split(","),t=>{r!==t&&e.formatter.remove("align"+t)}),"none"!==r&&t("align"+r)};e.editorCommands.addCommands({JustifyLeft:r("left"),JustifyCenter:r("center"),JustifyRight:r("right"),JustifyFull:r("justify"),JustifyNone:r("none")})},jR=e=>{let t=t=>()=>{let r=e.selection;return es(r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks(),r=>I(e.formatter.matchNode(r,t)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},jA=e=>{jN(e),jR(e)},jD=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{let r;let n=e.getDoc();try{n.execCommand(t)}catch(e){r=!0}if("paste"!==t||n.queryCommandEnabled(t)||(r=!0),r||!n.queryCommandSupported(t)){let t=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tY.os.isMacOS()||tY.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:t,type:"error"})}}})},jT=(e,t,r,n)=>{let o=rM.fromDom(e.getRoot());return r=bL(o,sF.fromRangeStart(t),n)?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),r=bF(o,sF.fromRangeEnd(t),n)?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")},jO=e=>{if("string"!=typeof e){let t=tQ.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},jB=(e,t)=>{let r=e.selection,n=e.dom;return/^ | $/.test(t)?jT(n,r.getRng(),t,e.schema):t},jP=(e,t)=>{if(e.selection.isEditable()){let{content:r,details:n}=jO(t);_G(e,{...n,content:jB(e,r),format:"html",set:!1,selection:!0}).each(t=>{let r=S_(e,t.content,n);_X(e,r,t),e.addVisual()})}},jL=e=>{e.editorCommands.addCommands({mceCleanup:()=>{let t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,r,n)=>{jP(e,e.dom.createHTML("img",{src:n}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,r,n)=>{jP(e,e.dom.encode(n))},insertHTML:(t,r,n)=>{jP(e,n)},mceInsertContent:(t,r,n)=>{jP(e,n)},mceSetContent:(t,r,n)=>{e.setContent(n)},mceReplaceContent:(t,r,n)=>{e.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(mn(e))}})},jM={"font-size":"size","font-family":"face"},jF=ru("font"),jI=(e,t,r)=>{let n=t=>nN(t,e).orThunk(()=>jF(t)?e$(jM,e).bind(e=>rb(t,e)):et.none());return C_(rM.fromDom(r),e=>n(e),e=>rH(rM.fromDom(t),e))},jU=(e,t)=>et.from(aG.DOM.getStyle(t,e,!0)),jz=e=>(t,r)=>et.from(r).map(rM.fromDom).filter(rs).bind(r=>jI(e,t,r.dom).or(jU(e,r.dom))).getOr(""),jj=jz("font-size"),jH=$(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),jz("font-family")),j$=e=>uN(e.getBody()).bind(e=>{let t=e.container();return et.from(oN(t)?t.parentNode:t)}),jq=e=>et.from(e.selection.getRng()).bind(t=>{let r=e.getBody();return t.startContainer===r&&0===t.startOffset?et.none():et.from(e.selection.getStart(!0))}),jV=(e,t)=>jq(e).orThunk(Y(j$,e)).map(rM.fromDom).filter(rs).bind(t),jW=(e,t)=>jV(e,q(et.some,t)),jK=(e,t)=>{if(!/^[0-9.]+$/.test(t))return t;{let r=parseInt(t,10);if(!(r>=1)||!(r<=7))return t;{let n=mE(e),o=mx(e);return o.length>0?o[r-1]||t:n[r-1]||t}}},jY=e=>ed(e.split(/\s*,\s*/),e=>-1===e.indexOf(" ")||ti(e,'"')||ti(e,"'")?e:`'${e}'`).join(","),jG=(e,t)=>{let r=jK(e,t);e.formatter.toggle("fontname",{value:jY(r)}),e.nodeChanged()},jX=e=>jW(e,t=>jH(e.getBody(),t.dom)).getOr(""),jZ=(e,t)=>{e.formatter.toggle("fontsize",{value:jK(e,t)}),e.nodeChanged()},jQ=e=>jW(e,t=>jj(e.getBody(),t.dom)).getOr(""),jJ=e=>jW(e,t=>C_(t,e=>nN(e,"line-height"),Y(rH,rM.fromDom(e.getBody()))).getOrThunk(()=>String(parseFloat(nS(t,"line-height"))/parseFloat(nS(t,"font-size"))))).getOr(""),j0=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},j1=e=>{let t=(t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,r,n)=>{t(e,{value:n})},BackColor:(e,r,n)=>{t("hilitecolor",{value:n})},FontName:(t,r,n)=>{jG(e,n)},FontSize:(t,r,n)=>{jZ(e,n)},LineHeight:(t,r,n)=>{j0(e,n)},Lang:(e,r,n)=>{var o;t(e,{value:n.code,customValue:null!==(o=n.customCode)&&void 0!==o?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,r,n)=>{t(D(n)?n:"p")},mceToggleFormat:(e,r,n)=>{t(n)}})},j2=e=>{let t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>jX(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>jQ(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>jJ(e))},j3=e=>{j1(e),j2(e)},j8=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},j5=e=>{e.editorCommands.addCommands({Indent:()=>{To(e)},Outdent:()=>{Tl(e)}}),e.editorCommands.addCommands({Outdent:()=>D7(e)},"state")},j6=e=>{let t=(t,r,n)=>{if(e.mode.isReadOnly())return;let o=D(n)?{href:n}:n,l=e.dom.getParent(e.selection.getNode(),"a");T(o)&&D(o.href)&&(o.href=o.href.replace(/ /g,"%20"),l&&o.href||e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,l))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){let t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},j9=(e,t,r,n)=>{let o=e.dom,l=e=>o.isBlock(e)&&e.parentElement===r,a=l(t)?t:o.getParent(n,l,r);return et.from(a).map(rM.fromDom)},j4=(e,t)=>{if(e.mode.isReadOnly())return;let r=e.dom,n=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),l=t?n.startContainer:n.endContainer,a=Lt(r,l);if(!a||!a.isContentEditable)return;let i=t?nT:nO,s=d4(e);j9(e,o,a,l).each(t=>{let r=Ls(e,l,t.dom,a,!1,s);i(t,rM.fromDom(r)),e.selection.setCursorLocation(r,0),e.dispatch("NewBlock",{newBlock:r}),P0(e,"insertParagraph")})},j7=e=>j4(e,!0),He=e=>j4(e,!1),Ht=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{j7(e)},InsertNewBlockAfter:()=>{He(e)}})},Hr=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Mr(LM,e)},mceInsertNewLine:(t,r,n)=>{Mn(e,n)},InsertLineBreak:(t,r,n)=>{Mr(LY,e)}})},Hn=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,r,n)=>{let o=0;e.dom.getParent(e.selection.getNode(),t=>!oh(t)||o++!==n||(e.selection.select(t),!1),e.getBody())},mceSelectNode:(t,r,n)=>{e.selection.select(n)},selectAll:()=>{let t=e.dom.getParent(e.selection.getStart(),oL);if(t){let r=e.dom.createRng();r.selectNodeContents(t),e.selection.setRng(r)}}})},Ho=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,r,n)=>{let o=null!=n?n:e.selection.getNode();if(o!==e.getBody()){let t=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,r,n)=>{g6(e,!0===n)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},Hl=e=>{jA(e),jD(e),j8(e),Hn(e),jL(e),j6(e),j5(e),Ht(e),Hr(e),j3(e),Ho(e)},Ha=["toggleview"],Hi=e=>ei(Ha,e.toLowerCase());class Hs{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,r,n){let o=this.editor,l=e.toLowerCase(),a=null==n?void 0:n.skip_focus;if(o.removed||("mcefocus"!==l&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(l)||a?gR(o):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented()))return!1;let i=this.commands.exec[l];return!!U(i)&&(i(l,t,r),o.dispatch("ExecCommand",{command:e,ui:t,value:r}),!0)}queryCommandState(e){if(!Hi(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let t=e.toLowerCase(),r=this.commands.state[t];return!!U(r)&&r(t)}queryCommandValue(e){if(!Hi(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let t=e.toLowerCase(),r=this.commands.value[t];return U(r)?r(t):""}addCommands(e,t="exec"){let r=this.commands;eP(e,(e,n)=>{ec(n.toLowerCase().split(","),n=>{r[t][n]=e})})}addCommand(e,t,r){let n=e.toLowerCase();this.commands.exec[n]=(e,n,o)=>t.call(null!=r?r:this.editor,n,o)}queryCommandSupported(e){let t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}let Hd=tQ.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Hc{static isNative(e){return!!Hd[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||J}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){let r=e.toLowerCase(),n=aD(r,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(n);let o=this.bindings[r];if(o)for(let e=0,t=o.length;e<t;e++){let t=o[e];if(!t.removed){if(t.once&&this.off(r,t.func),n.isImmediatePropagationStopped())break;if(!1===t.func.call(this.scope,n)){n.preventDefault();break}}}return n}on(e,t,r,n){if(!1===t&&(t=J),t){let o={func:t,removed:!1};n&&tQ.extend(o,n);let l=e.toLowerCase().split(" "),a=l.length;for(;a--;){let e=l[a],t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=r?[o,...t]:[...t,o],this.bindings[e]=t}}return this}off(e,t){if(e){let r=e.toLowerCase().split(" "),n=r.length;for(;n--;){let o=r[n],l=this.bindings[o];if(!o){eP(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]});break}if(l){if(t){let e=eu(l,e=>e.func===t);l=e.fail,this.bindings[o]=l,ec(e.pass,e=>{e.removed=!0})}else l.length=0;l.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}}else eP(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();let t=this.bindings[e];return!(!t||0===t.length)}}let Hm=e=>(e._eventDispatcher||(e._eventDispatcher=new Hc({scope:e,toggleEvent:(t,r)=>{Hc.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,r)}})),e._eventDispatcher),Hu={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(e,t,r){if(this.removed&&"remove"!==e&&"detach"!==e)return aD(e.toLowerCase(),null!=t?t:{},this);let n=Hm(this).dispatch(e,t);if(!1!==r&&this.parent){let t=this.parent();for(;t&&!n.isPropagationStopped();)t.dispatch(e,n,!1),t=t.parent?t.parent():void 0}return n},on(e,t,r){return Hm(this).on(e,t,r)},off(e,t){return Hm(this).off(e,t)},once(e,t){return Hm(this).once(e,t)},hasEventListeners(e){return Hm(this).has(e)}},Hf=aG.DOM,Hg=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;let r=cR(e);return r?(e.eventRoot||(e.eventRoot=Hf.select(r)[0]),e.eventRoot):e.getBody()},Hp=e=>!e.hidden&&!k2(e),Hh=(e,t,r)=>{Hp(e)?e.dispatch(t,r):k2(e)&&Nn(e,r)},Hb=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;let n=Hg(e,t);if(cR(e)){if(r||(r={},e.editorManager.on("removeEditor",()=>{!e.editorManager.activeEditor&&r&&(eP(r,(t,r)=>{e.dom.unbind(Hg(e,r))}),r=null)})),r[t])return;let o=r=>{let n=r.target,o=e.editorManager.get(),l=o.length;for(;l--;){let e=o[l].getBody();(e===n||Hf.isChildOf(n,e))&&Hh(o[l],t,r)}};r[t]=o,Hf.bind(n,t,o)}else{let r=r=>{Hh(e,t,r)};Hf.bind(n,t,r),e.delegates[t]=r}},Hv={...Hu,bindPendingEventDelegates(){let e=this;tQ.each(e._pendingNativeEvents,t=>{Hb(e,t)})},toggleNativeEvent(e,t){"focus"!==e&&"blur"!==e&&!this.removed&&(t?this.initialized?Hb(this,e):this._pendingNativeEvents?this._pendingNativeEvents.push(e):this._pendingNativeEvents=[e]:this.initialized&&this.delegates&&(this.dom.unbind(Hg(this,e),e,this.delegates[e]),delete this.delegates[e]))},unbindAllNativeEvents(){let e=this,t=e.getBody(),r=e.dom;e.delegates&&(eP(e.delegates,(t,r)=>{e.dom.unbind(Hg(e,r),r,t)}),delete e.delegates),!e.inline&&t&&r&&(t.onload=null,r.unbind(e.getWin()),r.unbind(e.getDoc())),r&&(r.unbind(t),r.unbind(e.getContainer()))}},Hy=e=>D(e)?{value:e.split(/[ ,]/),valid:!0}:j(e,D)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},HC=e=>{let t=(()=>{switch(e){case"array":return B;case"boolean":return L;case"function":return U;case"number":return z;case"object":return T;case"string":return D;case"string[]":return Hy;case"object[]":return e=>j(e,T);case"regexp":return e=>A(e,RegExp);default:return ee}})();return r=>Hw(r,t,`The value must be a ${e}.`)},HE=e=>D(e.processor),Hx=(e,t)=>e+(tg(t.message)?"":`. ${t.message}`),H_=e=>e.valid,Hw=(e,t,r="")=>{let n=t(e);return L(n)?n?{value:e,valid:!0}:{valid:!1,message:r}:n},HS=(e,t,r)=>{if(!M(t)){let n=Hw(t,r);if(H_(n))return n.value;console.error(Hx(`Invalid default value passed for the "${e}" option`,n))}},Hk=(e,t,r=t)=>{let n={},o={},l=(e,t,r)=>{let n=Hw(t,r);return H_(n)?(o[e]=n.value,!0):(console.warn(Hx(`Invalid value passed for the ${e} option`,n)),!1)},a=e=>eq(n,e);return{register:(e,r)=>{let a=HE(r)?HC(r.processor):r.processor,i=HS(e,r.default,a);n[e]={...r,default:i,processor:a},e$(o,e).orThunk(()=>e$(t,e)).each(t=>l(e,t,a))},isRegistered:a,get:e=>e$(o,e).orThunk(()=>e$(n,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{if(!a(e))return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1;{let r=n[e];return r.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):l(e,t,r.processor)}},unset:e=>{let t=a(e);return t&&delete o[e],t},isSet:e=>eq(o,e),debug:()=>{try{console.log(JSON.parse(JSON.stringify(r,(e,t)=>L(t)||z(t)||D(t)||P(t)||B(t)||O(t)?t:Object.prototype.toString.call(t))))}catch(e){console.error(e)}}}},HN=(e,t)=>{e.dom.contentEditable=t?"true":"false"},HR=(e,t)=>{let r=rM.fromDom(e.getBody());t?(e.readonly=!0,e.hasEditableRoot()&&HN(r,!0),k0(e)):(e.readonly=!1,k1(e))},HA=e=>e.readonly,HD=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",t=>{HA(e)&&t.preventDefault()}),e.on("BeforeExecCommand",t=>{("Undo"===t.command||"Redo"===t.command)&&HA(e)&&t.preventDefault()}),e.on("input",t=>{!t.isComposing&&HA(e)&&I(e.undoManager.add())&&e.undoManager.undo()}),e.on("compositionend",()=>{HA(e)&&I(e.undoManager.add())&&e.undoManager.undo()})},HT=["design","readonly"],HO=(e,t,r,n)=>{let o=r[t.get()],l=r[n];try{l.activate()}catch(e){console.error(`problem while activating editor mode ${n}:`,e);return}o.deactivate(),o.editorReadOnly!==l.editorReadOnly&&HR(e,l.editorReadOnly),t.set(n),d_(e,n)},HB=(e,t,r,n)=>{if(!(n===r.get()||e.initialized&&k2(e))){if(!eq(t,n))throw Error(`Editor mode '${n}' is invalid`);e.initialized?HO(e,r,t,n):e.on("init",()=>HO(e,r,t,n))}},HP=(e,t,r)=>{if(ei(HT,t))throw Error(`Cannot override default mode ${t}`);return{...e,[t]:{...r,deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}},HL=e=>{let t=o2("design"),r=o2({design:{activate:H,deactivate:H,editorReadOnly:!1},readonly:{activate:H,deactivate:H,editorReadOnly:!0}});return HD(e),Nl(e),{isReadOnly:()=>HA(e),set:n=>HB(e,r.get(),t,n),get:()=>t.get(),register:(e,t)=>{r.set(HP(r.get(),e,t))}}},HM=tQ.each,HF=tQ.explode,HI={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},HU=tQ.makeMap("alt,ctrl,shift,meta,access"),Hz=e=>e in HU,Hj=e=>{let t;let r={},n=tY.os.isMacOS()||tY.os.isiOS();HM(HF(e.toLowerCase(),"+"),e=>{Hz(e)?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=HI[e]||e.toUpperCase().charCodeAt(0))});let o=[r.keyCode];for(t in HU)r[t]?o.push(t):r[t]=!1;return r.id=o.join(","),r.access&&(r.alt=!0,n?r.ctrl=!0:r.shift=!0),r.meta&&(n?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r};class HH{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;let t=this;e.on("keyup keypress keydown",e=>{(t.hasModifier(e)||t.isFunctionKey(e))&&!e.isDefaultPrevented()&&(HM(t.shortcuts,r=>{t.matchShortcut(e,r)&&(t.pendingPatterns=r.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(r))}),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}add(e,t,r,n){let o=this,l=o.normalizeCommandFunc(r);return HM(HF(tQ.trim(e)),e=>{let r=o.createShortcut(e,t,l,n);o.shortcuts[r.id]=r}),!0}remove(e){let t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){let t=this;return"string"==typeof e?()=>{t.editor.execCommand(e,!1,null)}:tQ.isArray(e)?()=>{t.editor.execCommand(e[0],e[1],e[2])}:e}createShortcut(e,t,r,n){let o=tQ.map(HF(e,">"),Hj);return o[o.length-1]=tQ.extend(o[o.length-1],{func:r,scope:n||this.editor}),tQ.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&(e.keyCode===t.keyCode||!!e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}let H$=()=>{let e={},t={},r={},n={},o={},l={},a={},i={},s={},d=(e,t)=>(r,n)=>{e[r.toLowerCase()]={...n,type:t}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(t,"menuitem"),addNestedMenuItem:d(t,"nestedmenuitem"),addToggleMenuItem:d(t,"togglemenuitem"),addAutocompleter:d(r,"autocompleter"),addContextMenu:d(o,"contextmenu"),addContextToolbar:d(l,"contexttoolbar"),addContextForm:(e,t)=>{l[e.toLowerCase()]={type:"contextform",...t}},addSidebar:d(i,"sidebar"),addView:d(s,"views"),addIcon:(e,t)=>n[e.toLowerCase()]=t,addContext:(e,t)=>a[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:l,sidebars:i,views:s,contexts:a})}},Hq=()=>{let e=H$();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},HV=aG.DOM,HW=tQ.extend,HK=tQ.each;class HY{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,HW(this,Hv),this.id=e,this.hidden=!1;let n=jS(r.defaultOptions,t);this.options=Hk(this,n,t),d0(this);let o=this.options.get;o("deprecation_warnings")&&kd(t,n);let l=o("suffix");l&&(r.suffix=l),this.suffix=r.suffix;let a=o("base_url");a&&r._setBaseUrl(a),this.baseUri=r.baseURI;let i=cp(this);i&&(aZ.ScriptLoader._setReferrerPolicy(i),aG.DOM.styleSheetLoader._setReferrerPolicy(i));let s=cG(this);I(s)&&aG.DOM.styleSheetLoader._setContentCssCors(s),a5.languageLoad=o("language_load"),a5.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new _E(d3(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=cz(this),this.hasVisual=cJ(this),this.shortcuts=new HH(this),this.editorCommands=new Hs(this),Hl(this);let d=o("cache_suffix");d&&(tY.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:Hq(),styleSheetLoader:void 0,show:H,hide:H,setEnabled:H,isEnabled:ee},this.mode=HL(this),r.dispatch("SetupEditor",{editor:this});let c=c3(this);U(c)&&c.call(this,this)}render(){ja(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return g2(this)}translate(e){return a8.translate(e)}getParam(e,t,r){let n=this.options;return n.isRegistered(e)||(I(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:ee,default:t})),n.isSet(e)||M(t)?n.get(e):t}hasPlugin(e,t){return!!ei(cX(this),e)&&(!t||void 0!==kB.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(HV.show(this.getContainer()),HV.hide(this.id)),this.load(),this.dispatch("show"))}hide(){this.hidden||(this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(HV.hide(this.getContainer()),HV.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){let t=this.getElement();if(this.removed||!t)return"";{let r={...e,load:!0},n=ok(t)?t.value:t.innerHTML,o=this.setContent(n,r);return r.no_events||this.dispatch("LoadContent",{...r,element:t}),o}}save(e={}){let t=this,r=t.getElement();if(!r||!t.initialized||t.removed)return"";let n={...e,save:!0,element:r},o=t.getContent(n),l={...n,content:o};if(l.no_events||t.dispatch("SaveContent",l),"raw"===l.format&&t.dispatch("RawSaveContent",l),o=l.content,ok(r))r.value=o;else{(e.is_removing||!t.inline)&&(r.innerHTML=o);let n=HV.getParent(t.id,"form");n&&HK(n.elements,e=>e.name!==t.id||(e.value=o,!1))}return l.element=n.element=r=null,!1!==l.set_dirty&&t.setDirty(!1),o}setContent(e,t){return S5(this,e,t)}getContent(e){return S3(this,e)}insertContent(e,t){t&&(e=HW({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?S5(this,this.startContent,{format:"raw"}):S5(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){let t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||HV.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=HV.get(this.id)),this.targetElm}getWin(){if(!this.contentWindow){let e=this.iframeElement;e&&(this.contentWindow=e.contentWindow)}return this.contentWindow}getDoc(){if(!this.contentDocument){let e=this.getWin();e&&(this.contentDocument=e.document)}return this.contentDocument}getBody(){var e,t;let r=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==r?void 0:r.body)&&void 0!==t?t:null}convertURL(e,t,r){let n=this.options.get,o=c5(this);if(U(o))return o.call(this,e,r,!0,t);if(!n("convert_urls")||"link"===r||T(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length)return e;let l=new _E(e);return"http"!==l.protocol&&"https"!==l.protocol&&""!==l.protocol?e:n("relative_urls")?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,n("remove_script_host"))}addVisual(e){jk(this,e)}setEditableRoot(e){ji(this,e)}hasEditableRoot(){return js(this)}remove(){kp(this)}destroy(e){kh(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let HG=aG.DOM,HX=tQ.each,HZ=!1,HQ=[],HJ=e=>{let t=e.type;HX(H8.get(),r=>{switch(t){case"scroll":r.dispatch("ScrollWindow",e);break;case"resize":r.dispatch("ResizeWindow",e)}})},H0=e=>{if(e!==HZ){let t=aG.DOM;e?(t.bind(window,"resize",HJ),t.bind(window,"scroll",HJ)):(t.unbind(window,"resize",HJ),t.unbind(window,"scroll",HJ)),HZ=e}},H1=e=>{let t=HQ;return HQ=ef(HQ,t=>e!==t),H8.activeEditor===e&&(H8.activeEditor=HQ.length>0?HQ[0]:null),H8.focusedEditor===e&&(H8.focusedEditor=null),t.length!==HQ.length},H2=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(H1(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},H3="CSS1Compat"!==document.compatMode,H8={...Hu,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"8.0",releaseDate:"TBD",i18n:a8,activeEditor:null,focusedEditor:null,setup(){let e="",t="",r=_E.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));let n=window.tinymce||window.tinyMCEPreInit;if(n)e=n.base||n.baseURL,t=n.suffix;else{let r=document.getElementsByTagName("script");for(let n=0;n<r.length;n++){let o=r[n].src||"";if(""===o)continue;let l=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==l.indexOf(".min")&&(t=".min"),e=o.substring(0,o.lastIndexOf("/"));break}}if(!e&&document.currentScript){let r=document.currentScript.src;-1!==r.indexOf(".min")&&(t=".min"),e=r.substring(0,r.lastIndexOf("/"))}}this.baseURL=new _E(r).toAbsolute(e),this.documentBaseURL=r,this.baseURI=new _E(this.baseURL),this.suffix=t,gV(this)},overrideDefaults(e){let t=e.base_url;t&&this._setBaseUrl(t);let r=e.suffix;r&&(this.suffix=r),this.defaultOptions=e;let n=e.plugin_base_urls;void 0!==n&&eP(n,(e,t)=>{a5.PluginManager.urls[t]=e})},init(e){let t;let r=this,n=tQ.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(e,t)=>e.inline&&t.tagName.toLowerCase()in n,l=e=>{let t=e.id;return t||(t=e$(e,"name").filter(e=>!HG.get(e)).getOrThunk(HG.uniqueId),e.setAttribute("id",t)),t},a=t=>{let n=e[t];if(n)return n.apply(r,[])},i=e=>tY.browser.isIE()||tY.browser.isEdge()?(kY("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):H3?(kY("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):D(e.selector)?HG.select(e.selector):I(e.target)?[e.target]:[],s=e=>{t=e},d=()=>{let t,n=0,c=[],m=(e,o,l)=>{let a=new HY(e,o,r);c.push(a),a.on("init",()=>{++n===t.length&&s(c)}),a.targetElm=a.targetElm||l,a.render()};HG.unbind(window,"ready",d),a("onpageload"),t=eT(i(e)),tQ.each(t,e=>{H2(r.get(e.id))}),0===(t=tQ.grep(t,e=>!r.get(e.id))).length?s([]):HX(t,t=>{o(e,t)?kY("Could not initialize inline editor on invalid inline target element",t):m(l(t),e,t)})};return HG.bind(window,"ready",d),new Promise(e=>{t?e(t):s=t=>{e(t)}})},get(e){return 0==arguments.length?HQ.slice(0):D(e)?eb(HQ,t=>t.id===e).getOr(null):z(e)?HQ[e]?HQ[e]:null:null},add(e){let t=this,r=t.get(e.id);return r===e||(null===r&&HQ.push(e),H0(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),n||(n=e=>{let r=t.dispatch("BeforeUnload");if(r.returnValue)return e.preventDefault(),e.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",n))),e},createEditor(e,t){return this.add(new HY(e,t,this))},remove(e){let t;let r=this;if(!e){for(let e=HQ.length-1;e>=0;e--)r.remove(HQ[e]);return}if(D(e)){HX(HG.select(e),e=>{(t=r.get(e.id))&&r.remove(t)});return}return(t=e,P(r.get(t.id)))?null:(H1(t)&&r.dispatch("RemoveEditor",{editor:t}),0===HQ.length&&window.removeEventListener("beforeunload",n),t.remove(),H0(HQ.length>0),t)},execCommand(e,t,r){var n;let o=T(r)?null!==(n=r.id)&&void 0!==n?n:r.index:r;switch(e){case"mceAddEditor":return this.get(o)||new HY(o,r.options,this).render(),!0;case"mceRemoveEditor":{let e=this.get(o);return e&&e.remove(),!0}case"mceToggleEditor":{let e=this.get(o);if(!e)return this.execCommand("mceAddEditor",!1,r),!0;return e.isHidden()?e.show():e.hide(),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,r)},triggerSave:()=>{HX(HQ,e=>{e.save()})},addI18n:(e,t)=>{a8.add(e,t)},translate:e=>a8.translate(e),setActive(e){let t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new _E(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new _E(this.baseURL)}};H8.setup();let H5=(()=>{let e=o5();return{FakeClipboardItem:e=>({items:e,types:eO(e),getType:t=>e$(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),H6=Math.min,H9=Math.max,H4=Math.round,H7=(e,t,r)=>{let n=t.x,o=t.y,l=e.w,a=e.h,i=t.w,s=t.h,d=(r||"").split("");return"b"===d[0]&&(o+=s),"r"===d[1]&&(n+=i),"c"===d[0]&&(o+=H4(s/2)),"c"===d[1]&&(n+=H4(i/2)),"b"===d[3]&&(o-=a),"r"===d[4]&&(n-=l),"c"===d[3]&&(o-=H4(a/2)),"c"===d[4]&&(n-=H4(l/2)),$e(n,o,l,a)},$e=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),$t=(e,t,r=1e3)=>{let n=!1,o=null,l=e=>(...t)=>{n||(n=!0,null!==o&&(window.clearTimeout(o),o=null),e.apply(null,t))},a=l(e),i=l(t);return{start:(...e)=>{n||null!==o||(o=window.setTimeout(()=>i.apply(null,e),r))},resolve:a,reject:i}},$r=(()=>{let e={},t={},r={};return{load:(r,n)=>{let o=`Script at URL "${n}" failed to load`,l=`Script at URL "${n}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==e[r])return e[r];{let a=new Promise((e,a)=>{let i=$t(e,a);t[r]=i.resolve,aZ.ScriptLoader.loadScript(n).then(()=>i.start(l),()=>i.reject(o))});return e[r]=a,a}},add:(n,o)=>{void 0!==t[n]&&(t[n](o),delete t[n]),e[n]=Promise.resolve(o),r[n]=o},has:e=>e in r,get:e=>r[e],unload:t=>{delete e[t],delete r[t]}}})();try{let e="__storage_test__";(o=window.localStorage).setItem(e,e),o.removeItem(e)}catch(e){o=(()=>{let e={},t=[],r={getItem:t=>e[t]||null,setItem:(r,n)=>{t.push(r),e[r]=String(n)},key:e=>t[e],removeItem:r=>{t=t.filter(e=>e===r),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),r})()}let $n={geom:{Rect:{inflate:(e,t,r)=>$e(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:H7,findBestRelativePosition:(e,t,r,n)=>{for(let o=0;o<n.length;o++){let l=H7(e,t,n[o]);if(l.x>=r.x&&l.x+l.w<=r.w+r.x&&l.y>=r.y&&l.y+l.h<=r.h+r.y)return n[o]}return null},intersect:(e,t)=>{let r=H9(e.x,t.x),n=H9(e.y,t.y),o=H6(e.x+e.w,t.x+t.w),l=H6(e.y+e.h,t.y+t.h);return o-r<0||l-n<0?null:$e(r,n,o-r,l-n)},clamp:(e,t,r)=>{let n=e.x,o=e.y,l=e.x+e.w,a=e.y+e.h,i=t.x+t.w,s=t.y+t.h,d=H9(0,t.x-n),c=H9(0,t.y-o),m=H9(0,l-i),u=H9(0,a-s);return n+=d,o+=c,r&&(l+=d,a+=c,n-=m,o-=u),$e(n,o,(l-=m)-n,(a-=u)-o)},create:$e,fromClientRect:e=>$e(e.left,e.top,e.width,e.height)}},util:{Delay:gO,Tools:tQ,VK:g9,URI:_E,EventDispatcher:Hc,Observable:Hu,I18n:a8,LocalStorage:o,ImageUploader:e=>{let t=Nx(e,Np());return{upload:(r,n=!0)=>t.upload(r,n?NE(e):void 0)}}},dom:{EventUtils:aF,TreeWalker:ol,TextSeeker:iR,DOMUtils:aG,ScriptLoader:aZ,RangeUtils:pI,Serializer:S1,StyleSheetLoader:lS,ControlSelection:pn,BookmarkManager:ge,Selection:Sj,Event:aF.Event},html:{Styles:aw,Entities:lG,Node:hh,Schema:am,DomParser:_$,Writer:hI,Serializer:hU},Env:tY,AddOnManager:a5,Annotator:f7,Formatter:NU,UndoManager:N$,EditorCommands:Hs,WindowManager:kM,NotificationManager:kO,EditorObservable:Hv,Shortcuts:HH,Editor:HY,FocusManager:gA,EditorManager:H8,DOM:aG.DOM,ScriptLoader:aZ.ScriptLoader,PluginManager:kB,ThemeManager:kP,ModelManager:kv,IconManager:kb,Resource:$r,FakeClipboard:H5,trim:tQ.trim,isArray:tQ.isArray,is:tQ.is,toArray:tQ.toArray,makeMap:tQ.makeMap,each:tQ.each,map:tQ.map,grep:tQ.grep,inArray:tQ.inArray,extend:tQ.extend,walk:tQ.walk,resolve:tQ.resolve,explode:tQ.explode,_addCacheSuffix:tQ._addCacheSuffix},$o=tQ.extend(H8,$n);window.tinymce=$o,window.tinyMCE=$o,(t=>{try{e.exports=t}catch(e){}})($o)}()}}]);
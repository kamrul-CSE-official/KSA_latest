(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{89106:()=>{!function(){"use strict";let e;var t=tinymce.util.Tools.resolve("tinymce.ModelManager");let r=(e,t,r)=>{var o;return!!r(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},o=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&r(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},l=e=>t=>o(t)===e,n=e=>t=>typeof t===e,s=e=>t=>e===t,a=l("string"),i=l("object"),m=l("array"),d=s(null),c=n("boolean"),u=s(void 0),f=e=>null==e,g=e=>!f(e),h=n("function"),p=n("number"),b=()=>{},w=(e,t)=>(...r)=>e(t.apply(null,r)),v=(e,t)=>r=>e(t(r)),y=e=>()=>e,C=e=>e,T=(e,t)=>e===t;function x(e,...t){return(...r)=>{let o=t.concat(r);return e.apply(null,o)}}let S=e=>t=>!e(t),R=e=>()=>{throw Error(e)},D=e=>e(),O=y(!1),k=y(!0);class E{constructor(e,t){this.tag=e,this.value=t}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return g(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);let A=Array.prototype.slice,_=Array.prototype.indexOf,B=Array.prototype.push,N=(e,t)=>_.call(e,t),z=(e,t)=>N(e,t)>-1,j=(e,t)=>{for(let r=0,o=e.length;r<o;r++)if(t(e[r],r))return!0;return!1},W=(e,t)=>{let r=[];for(let o=0;o<e;o++)r.push(t(o));return r},M=(e,t)=>{let r=e.length,o=Array(r);for(let l=0;l<r;l++){let r=e[l];o[l]=t(r,l)}return o},L=(e,t)=>{for(let r=0,o=e.length;r<o;r++)t(e[r],r)},I=(e,t)=>{for(let r=e.length-1;r>=0;r--)t(e[r],r)},P=(e,t)=>{let r=[],o=[];for(let l=0,n=e.length;l<n;l++){let n=e[l];(t(n,l)?r:o).push(n)}return{pass:r,fail:o}},F=(e,t)=>{let r=[];for(let o=0,l=e.length;o<l;o++){let l=e[o];t(l,o)&&r.push(l)}return r},H=(e,t,r)=>(I(e,(e,o)=>{r=t(r,e,o)}),r),$=(e,t,r)=>(L(e,(e,o)=>{r=t(r,e,o)}),r),V=(e,t,r)=>{for(let o=0,l=e.length;o<l;o++){let l=e[o];if(t(l,o))return E.some(l);if(r(l,o))break}return E.none()},q=(e,t)=>V(e,t,O),U=(e,t)=>{for(let r=0,o=e.length;r<o;r++)if(t(e[r],r))return E.some(r);return E.none()},G=e=>{let t=[];for(let r=0,o=e.length;r<o;++r){if(!m(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);B.apply(t,e[r])}return t},K=(e,t)=>G(M(e,t)),Y=(e,t)=>{for(let r=0,o=e.length;r<o;++r)if(!0!==t(e[r],r))return!1;return!0},J=e=>{let t=A.call(e,0);return t.reverse(),t},Q=(e,t)=>{let r={};for(let o=0,l=e.length;o<l;o++){let l=e[o];r[String(l)]=t(l,o)}return r},X=(e,t)=>{let r=A.call(e,0);return r.sort(t),r},Z=(e,t)=>t>=0&&t<e.length?E.some(e[t]):E.none(),ee=e=>Z(e,0),et=e=>Z(e,e.length-1),er=(e,t)=>{for(let r=0;r<e.length;r++){let o=t(e[r],r);if(o.isSome())return o}return E.none()},eo=Object.keys,el=Object.hasOwnProperty,en=(e,t)=>{let r=eo(e);for(let o=0,l=r.length;o<l;o++){let l=r[o];t(e[l],l)}},es=(e,t)=>ea(e,(e,r)=>({k:r,v:t(e,r)})),ea=(e,t)=>{let r={};return en(e,(e,o)=>{let l=t(e,o);r[l.k]=l.v}),r},ei=e=>(t,r)=>{e[r]=t},em=(e,t,r,o)=>{en(e,(e,l)=>{(t(e,l)?r:o)(e,l)})},ed=(e,t)=>{let r={};return em(e,t,ei(r),b),r},ec=(e,t)=>{let r=[];return en(e,(e,o)=>{r.push(t(e,o))}),r},eu=e=>ec(e,C),ef=(e,t)=>eg(e,t)?E.from(e[t]):E.none(),eg=(e,t)=>el.call(e,t),eh=(e,t)=>eg(e,t)&&void 0!==e[t]&&null!==e[t],ep=e=>{for(let t in e)if(el.call(e,t))return!1;return!0},eb="undefined"!=typeof window?window:Function("return this;")(),ew=(e,t)=>{let r=null!=t?t:eb;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},ev=(e,t)=>ew(e.split("."),t),ey=(e,t)=>ev(e,t),eC=(e,t)=>{let r=ey(e,t);if(null==r)throw Error(e+" not available on this browser");return r},eT=Object.getPrototypeOf,ex=e=>eC("HTMLElement",e),eS=e=>{let t=ev("ownerDocument.defaultView",e);return i(e)&&(ex(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(eT(e).constructor.name))},eR=e=>e.dom.nodeName.toLowerCase(),eD=e=>e.dom.nodeType,eO=e=>t=>eD(t)===e,ek=e=>8===eD(e)||"#comment"===eR(e),eE=e=>eA(e)&&eS(e.dom),eA=eO(1),e_=eO(3),eB=eO(9),eN=eO(11),ez=e=>t=>eA(t)&&eR(t)===e,ej=(e,t,r)=>{if(a(r)||c(r)||p(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},eW=(e,t,r)=>{ej(e.dom,t,r)},eM=(e,t)=>{let r=e.dom;en(t,(e,t)=>{ej(r,t,e)})},eL=(e,t)=>{en(t,(t,r)=>{t.fold(()=>{eF(e,r)},t=>{ej(e.dom,r,t)})})},eI=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},eP=(e,t)=>E.from(eI(e,t)),eF=(e,t)=>{e.dom.removeAttribute(t)},eH=e=>$(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),e$=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},eV={fromTag:(e,t)=>e$((t||document).createElement(e)),fromText:(e,t)=>e$((t||document).createTextNode(e)),fromDom:e$,fromPoint:(e,t,r)=>E.from(e.dom.elementFromPoint(t,r)).map(e$)},eq=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);else throw Error("Browser lacks native selectors")},eU=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,eG=(e,t)=>{let r=void 0===t?document:t.dom;return eU(r)?[]:M(r.querySelectorAll(e),eV.fromDom)},eK=(e,t)=>{let r=void 0===t?document:t.dom;return eU(r)?E.none():E.from(r.querySelector(e)).map(eV.fromDom)},eY=(e,t)=>e.dom===t.dom,eJ=(e,t)=>{let r=e.dom,o=t.dom;return r!==o&&r.contains(o)},eQ=e=>eV.fromDom(e.dom.ownerDocument),eX=e=>eB(e)?e:eQ(e),eZ=e=>eV.fromDom(eX(e).dom.documentElement),e0=e=>E.from(e.dom.parentNode).map(eV.fromDom),e1=e=>E.from(e.dom.parentElement).map(eV.fromDom),e9=(e,t)=>{let r=h(t)?t:O,o=e.dom,l=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){let e=o.parentNode,t=eV.fromDom(e);if(l.push(t),!0===r(t))break;o=e}return l},e3=e=>E.from(e.dom.previousSibling).map(eV.fromDom),e2=e=>E.from(e.dom.nextSibling).map(eV.fromDom),e5=e=>M(e.dom.childNodes,eV.fromDom),e7=(e,t)=>{let r=e.dom.childNodes;return E.from(r[t]).map(eV.fromDom)},e4=e=>e7(e,0),e6=(e,t)=>{e0(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},e8=(e,t)=>{e2(e).fold(()=>{e0(e).each(e=>{tt(e,t)})},e=>{e6(e,t)})},te=(e,t)=>{e4(e).fold(()=>{tt(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},tt=(e,t)=>{e.dom.appendChild(t.dom)},tr=(e,t,r)=>{e7(e,r).fold(()=>{tt(e,t)},e=>{e6(e,t)})},to=(e,t)=>{e6(e,t),tt(t,e)},tl=(e,t)=>{L(t,(r,o)=>{e8(0===o?e:t[o-1],r)})},tn=(e,t)=>{L(t,t=>{tt(e,t)})},ts=e=>{e.dom.textContent="",L(e5(e),e=>{ta(e)})},ta=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},ti=e=>{let t=e5(e);t.length>0&&tl(e,t),ta(e)},tm=(e,t)=>eV.fromDom(e.dom.cloneNode(t)),td=e=>tm(e,!1),tc=e=>tm(e,!0),tu=(e,t)=>{let r=eV.fromTag(t);return eM(r,eH(e)),r},tf=(e,t)=>{let r=tu(e,t);return tn(r,e5(tc(e))),r},tg=(e,t)=>{let r=tu(e,t);return e8(e,r),tn(r,e5(e)),ta(e),r},th=["tfoot","thead","tbody","colgroup"],tp=e=>z(th,e),tb=(e,t)=>({rows:e,columns:t}),tw=(e,t)=>({row:e,column:t}),tv=(e,t,r)=>({element:e,rowspan:t,colspan:r}),ty=(e,t,r,o)=>({element:e,rowspan:t,colspan:r,isNew:o}),tC=(e,t,r,o,l,n)=>({element:e,rowspan:t,colspan:r,row:o,column:l,isLocked:n}),tT=(e,t,r)=>({element:e,cells:t,section:r}),tx=(e,t,r,o)=>({element:e,cells:t,section:r,isNew:o}),tS=(e,t,r)=>({element:e,isNew:t,isLocked:r}),tR=(e,t,r,o)=>({element:e,cells:t,section:r,isNew:o}),tD=(e,t,r,o)=>({startRow:e,startCol:t,finishRow:r,finishCol:o}),tO=(e,t,r)=>({element:e,colspan:t,column:r}),tk=(e,t)=>({element:e,columns:t}),tE=e=>eN(e)&&g(e.dom.host),tA=e=>eV.fromDom(e.dom.getRootNode()),t_=e=>tE(e)?e:eV.fromDom(eX(e).dom.body),tB=e=>{let t=tA(e);return tE(t)?E.some(t):E.none()},tN=e=>eV.fromDom(e.dom.host),tz=e=>{if(g(e.target)){let t=eV.fromDom(e.target);if(eA(t)&&tj(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return ee(t)}}return E.from(e.target)},tj=e=>g(e.dom.shadowRoot),tW=e=>{let t=e_(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return tB(eV.fromDom(t)).fold(()=>r.body.contains(t),v(tW,tN))},tM=()=>tL(eV.fromDom(document)),tL=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return eV.fromDom(t)},tI=(e,t,r)=>F(e9(e,r),t),tP=(e,t)=>F(e5(e),t),tF=(e,t)=>{let r=[];return L(e5(e),e=>{t(e)&&(r=r.concat([e])),r=r.concat(tF(e,t))}),r},tH=(e,t,r)=>tI(e,e=>eq(e,t),r),t$=(e,t)=>tP(e,e=>eq(e,t)),tV=(e,t)=>eG(t,e);var tq=(e,t,r,o,l)=>e(r,o)?E.some(r):h(l)&&l(r)?E.none():t(r,o,l);let tU=(e,t,r)=>{let o=e.dom,l=h(r)?r:O;for(;o.parentNode;){o=o.parentNode;let e=eV.fromDom(o);if(t(e))return E.some(e);if(l(e))break}return E.none()},tG=(e,t,r)=>tq((e,t)=>t(e),tU,e,t,r),tK=(e,t)=>q(e.dom.childNodes,e=>t(eV.fromDom(e))).map(eV.fromDom),tY=(e,t)=>{let r=e=>{for(let o=0;o<e.childNodes.length;o++){let l=eV.fromDom(e.childNodes[o]);if(t(l))return E.some(l);let n=r(e.childNodes[o]);if(n.isSome())return n}return E.none()};return r(e.dom)},tJ=(e,t,r)=>tU(e,e=>eq(e,t),r),tQ=(e,t)=>tK(e,e=>eq(e,t)),tX=(e,t)=>eK(t,e),tZ=(e,t,r)=>tq((e,t)=>eq(e,t),tJ,e,t,r),t0=(e,t,r=T)=>e.exists(e=>r(e,t)),t1=e=>{let t=[],r=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(r);return t},t9=(e,t)=>null!=e?t(e):E.none(),t3=(e,t)=>e?E.some(t):E.none(),t2=(e,t)=>e.substring(t),t5=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,t7=(e,t)=>t6(e,t)?t2(e,t.length):e,t4=(e,t,r=0,o)=>{let l=e.indexOf(t,r);return -1!==l&&(!!u(o)||l+t.length<=o)},t6=(e,t)=>t5(e,t,0),t8=(e,t)=>t5(e,t,e.length-t.length),re=(e=/^\s+|\s+$/g,t=>t.replace(e,"")),rt=e=>e.length>0,rr=e=>{let t=parseFloat(e);return isNaN(t)?E.none():E.some(t)},ro=e=>void 0!==e.style&&h(e.style.getPropertyValue),rl=(e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);ro(e)&&e.style.setProperty(t,r)},rn=(e,t)=>{ro(e)&&e.style.removeProperty(t)},rs=(e,t,r)=>{rl(e.dom,t,r)},ra=(e,t)=>{let r=e.dom;en(t,(e,t)=>{rl(r,t,e)})},ri=(e,t)=>{let r=e.dom,o=window.getComputedStyle(r).getPropertyValue(t);return""!==o||tW(e)?o:rm(r,t)},rm=(e,t)=>ro(e)?e.style.getPropertyValue(t):"",rd=(e,t)=>{let r=rm(e.dom,t);return E.from(r).filter(e=>e.length>0)},rc=(e,t)=>{rn(e.dom,t),t0(eP(e,"style").map(re),"")&&eF(e,"style")},ru=(e,t)=>{let r=e.dom,o=t.dom;ro(r)&&ro(o)&&(o.style.cssText=r.style.cssText)},rf=(e,t,r=0)=>eP(e,t).map(e=>parseInt(e,10)).getOr(r),rg=(e,t)=>rf(e,t,1),rh=e=>ez("col")(e)?rf(e,"span",1)>1:rg(e,"colspan")>1,rp=e=>rg(e,"rowspan")>1,rb=(e,t)=>parseInt(ri(e,t),10),rw=y(10),rv=y(10),ry=(e,t)=>rC(e,t,k),rC=(e,t,r)=>K(e5(e),e=>eq(e,t)?r(e)?[e]:[]:rC(e,t,r)),rT=(e,t,r=O)=>r(t)?E.none():z(e,eR(t))?E.some(t):tJ(t,e.join(","),e=>eq(e,"table")||r(e)),rx=(e,t)=>rT(["td","th"],e,t),rS=e=>ry(e,"th,td"),rR=e=>eq(e,"colgroup")?t$(e,"col"):K(rk(e),e=>t$(e,"col")),rD=(e,t)=>tZ(e,"table",t),rO=e=>ry(e,"tr"),rk=e=>rD(e).fold(y([]),e=>t$(e,"colgroup")),rE=(e,t)=>M(e,e=>{if("colgroup"===eR(e)){let t=M(rR(e),e=>{let t=rf(e,"span",1);return tv(e,1,t)});return tT(e,t,"colgroup")}{let r=M(rS(e),e=>{let t=rf(e,"rowspan",1),r=rf(e,"colspan",1);return tv(e,t,r)});return tT(e,r,t(e))}}),rA=e=>e0(e).map(e=>{let t=eR(e);return tp(t)?t:"tbody"}).getOr("tbody"),r_=e=>{let t=rO(e);return rE([...rk(e),...t],rA)},rB=(e,t)=>rE(e,()=>t),rN=e=>{let t,r=!1;return(...o)=>(r||(r=!0,t=e.apply(null,o)),t)},rz=(e,t,r,o)=>{let l=e.isiOS()&&!0===/ipad/i.test(r),n=e.isiOS()&&!l,s=e.isiOS()||e.isAndroid(),a=s||o("(pointer:coarse)"),i=l||!n&&s&&o("(min-device-width:768px)"),m=n||s&&!i,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:y(l),isiPhone:y(n),isTablet:y(i),isPhone:y(m),isTouch:y(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:y(d),isDesktop:y(!m&&!i&&!d)}},rj=(e,t)=>{for(let r=0;r<e.length;r++){let o=e[r];if(o.test(t))return o}},rW=(e,t)=>{let r=rj(e,t);if(!r)return{major:0,minor:0};let o=e=>Number(t.replace(r,"$"+e));return rL(o(1),o(2))},rM=()=>rL(0,0),rL=(e,t)=>({major:e,minor:t}),rI=(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?rM():rW(e,r)},rP=(e,t)=>er(t.brands,t=>{let r=t.brand.toLowerCase();return q(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:rL(parseInt(t.version,10),0)}))}),rF=(e,t)=>{let r=String(t).toLowerCase();return q(e,e=>e.search(r))},rH=(e,t)=>rF(e,t).map(e=>{let r=rI(e.versionRegexes,t);return{current:e.name,version:r}}),r$=(e,t)=>rF(e,t).map(e=>{let r=rI(e.versionRegexes,t);return{current:e.name,version:r}}),rV=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rq=e=>t=>t4(t,e),rU=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>t4(e,"edge/")&&t4(e,"chrome")&&t4(e,"safari")&&t4(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rV],search:e=>t4(e,"chrome")&&!t4(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>t4(e,"msie")||t4(e,"trident")},{name:"Opera",versionRegexes:[rV,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rq("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rq("firefox")},{name:"Safari",versionRegexes:[rV,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(t4(e,"safari")||t4(e,"mobile/"))&&t4(e,"applewebkit")}],rG=[{name:"Windows",search:rq("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>t4(e,"iphone")||t4(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rq("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rq("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rq("linux"),versionRegexes:[]},{name:"Solaris",search:rq("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rq("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rq("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rK={browsers:y(rU),oses:y(rG)},rY="Edge",rJ="Chromium",rQ="Opera",rX="Firefox",rZ="Safari",r0=e=>{let t=e.current,r=e.version,o=e=>()=>t===e;return{current:t,version:r,isEdge:o(rY),isChromium:o(rJ),isIE:o("IE"),isOpera:o(rQ),isFirefox:o(rX),isSafari:o(rZ)}},r1={unknown:()=>r0({current:void 0,version:rM()}),nu:r0,edge:y(rY),chromium:y(rJ),ie:y("IE"),opera:y(rQ),firefox:y(rX),safari:y(rZ)},r9="Windows",r3="Android",r2="Linux",r5="macOS",r7="Solaris",r4="FreeBSD",r6="ChromeOS",r8=e=>{let t=e.current,r=e.version,o=e=>()=>t===e;return{current:t,version:r,isWindows:o(r9),isiOS:o("iOS"),isAndroid:o(r3),isMacOS:o(r5),isLinux:o(r2),isSolaris:o(r7),isFreeBSD:o(r4),isChromeOS:o(r6)}},oe={unknown:()=>r8({current:void 0,version:rM()}),nu:r8,windows:y(r9),ios:y("iOS"),android:y(r3),linux:y(r2),macos:y(r5),solaris:y(r7),freebsd:y(r4),chromeos:y(r6)},ot=(e,t,r)=>{let o=rK.browsers(),l=rK.oses(),n=t.bind(e=>rP(o,e)).orThunk(()=>rH(o,e)).fold(r1.unknown,r1.nu),s=r$(l,e).fold(oe.unknown,oe.nu),a=rz(s,n,e,r);return{browser:n,os:s,deviceType:a}},or=e=>window.matchMedia(e).matches,oo=rN(()=>ot(window.navigator.userAgent,E.from(window.navigator.userAgentData),or)),ol=()=>oo(),on=(e,t)=>{let r=r=>{let o=t(r);return o<=0||null===o?parseFloat(ri(r,e))||0:o},o=(e,t)=>$(t,(t,r)=>{let o=ri(e,r),l=void 0===o?0:parseInt(o,10);return isNaN(l)?t:t+l},0);return{set:(t,r)=>{if(!p(r)&&!r.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+r);let o=t.dom;ro(o)&&(o.style[e]=r+"px")},get:r,getOuter:r,aggregate:o,max:(e,t,r)=>{let l=o(e,r);return t>l?t-l:0}}},os=(e,t)=>rr(e).getOr(t),oa=(e,t,r)=>os(ri(e,t),r),oi=(e,t,r,o)=>{let l=oa(e,`padding-${r}`,0),n=oa(e,`padding-${o}`,0);return t-l-n-oa(e,`border-${r}-width`,0)-oa(e,`border-${o}-width`,0)},om=(e,t)=>{let r=e.dom,o=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?o:oi(e,o,"left","right")},od=on("width",e=>e.dom.offsetWidth),oc=e=>od.get(e),ou=e=>od.getOuter(e),of=e=>om(e,"content-box"),og=e=>oa(e,"width",e.dom.offsetWidth),oh=(e,t,r)=>{let o=e.cells,l=o.slice(0,t),n=o.slice(t);return ow(e,l.concat(r).concat(n))},op=(e,t,r)=>oh(e,t,[r]),ob=(e,t,r)=>{e.cells[t]=r},ow=(e,t)=>tR(e.element,t,e.section,e.isNew),ov=(e,t)=>{let r=M(e.cells,t);return tR(e.element,r,e.section,e.isNew)},oy=(e,t)=>e.cells[t],oC=(e,t)=>oy(e,t).element,oT=e=>e.cells.length,ox=e=>{let t=P(e,e=>"colgroup"===e.section);return{rows:t.fail,cols:t.pass}},oS=(e,t,r)=>{let o=M(e.cells,r);return tR(t(e.element),o,e.section,!0)},oR="data-snooker-locked-cols",oD=e=>eP(e,oR).bind(e=>E.from(e.match(/\d+/g))).map(e=>Q(e,k)),oO=e=>X(ec($(ox(e).rows,(e,t)=>(L(t.cells,(t,r)=>{t.isLocked&&(e[r]=!0)}),e),{}),(e,t)=>parseInt(t,10))),ok=(e,t)=>e+","+t,oE=(e,t)=>F(K(e.all,e=>e.cells),t),oA=e=>{let t={},r=0;return L(e.cells,e=>{let o=e.colspan;W(o,l=>{let n=r+l;t[n]=tO(e.element,o,n)}),r+=o}),t},o_=e=>{let t={},r=[],o=ee(e).map(e=>e.element).bind(rD).bind(oD).getOr({}),l=0,n=0,s=0,{pass:a,fail:i}=P(e,e=>"colgroup"===e.section);L(i,e=>{let a=[];L(e.cells,e=>{let r=0;for(;void 0!==t[ok(s,r)];)r++;let l=eh(o,r.toString()),i=tC(e.element,e.rowspan,e.colspan,s,r,l);for(let o=0;o<e.colspan;o++)for(let l=0;l<e.rowspan;l++){let e=r+o;t[ok(s+l,e)]=i,n=Math.max(n,e+1)}a.push(i)}),l++,r.push(tT(e.element,a,e.section)),s++});let{columns:m,colgroups:d}=et(a).map(e=>{let t=oA(e);return{colgroups:[tk(e.element,eu(t))],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:tb(l,n),access:t,all:r,columns:m,colgroups:d}},oB={fromTable:e=>o_(r_(e)),generate:o_,getAt:(e,t,r)=>E.from(e.access[ok(t,r)]),findItem:(e,t,r)=>{let o=oE(e,e=>r(t,e.element));return o.length>0?E.some(o[0]):E.none()},filterItems:oE,justCells:e=>K(e.all,e=>e.cells),justColumns:e=>eu(e.columns),hasColumns:e=>eo(e.columns).length>0,getColumnAt:(e,t)=>E.from(e.columns[t])},oN=(e,t=k)=>{let r=e.grid,o=W(r.columns,C),l=W(r.rows,C);return M(o,r=>oz(()=>K(l,t=>oB.getAt(e,t,r).filter(e=>e.column===r).toArray()),e=>1===e.colspan&&t(e.element),()=>oB.getAt(e,0,r)))},oz=(e,t,r)=>{let o=e();return q(o,t).orThunk(()=>E.from(o[0]).orThunk(r)).map(e=>e.element)},oj=e=>{let t=e.grid,r=W(t.rows,C),o=W(t.columns,C);return M(r,t=>oz(()=>K(o,r=>oB.getAt(e,t,r).filter(e=>e.row===t).fold(y([]),e=>[e])),e=>1===e.rowspan,()=>oB.getAt(e,t,0)))},oW=(e,t)=>{if(t<0||t>=e.length-1)return E.none();let r=e[t].fold(()=>er(J(e.slice(0,t)),(e,t)=>e.map(e=>({value:e,delta:t+1}))),e=>E.some({value:e,delta:0})),o=e[t+1].fold(()=>er(e.slice(t+1),(e,t)=>e.map(e=>({value:e,delta:t+1}))),e=>E.some({value:e,delta:1}));return r.bind(e=>o.map(t=>{let r=t.delta+e.delta;return Math.abs(t.value-e.value)/r}))},oM=(e,t)=>r=>"rtl"===oL(r)?t:e,oL=e=>"rtl"===ri(e,"direction")?"rtl":"ltr",oI=on("height",e=>{let t=e.dom;return tW(e)?t.getBoundingClientRect().height:t.offsetHeight}),oP=e=>oI.get(e),oF=e=>oI.getOuter(e),oH=e=>oa(e,"height",e.dom.offsetHeight),o$=(e,t)=>({left:e,top:t,translate:(r,o)=>o$(e+r,t+o)}),oV=e=>{let t=e.getBoundingClientRect();return o$(t.left,t.top)},oq=(e,t)=>void 0!==e?e:void 0!==t?t:0,oU=e=>{let t=e.dom.ownerDocument,r=t.body,o=t.defaultView,l=t.documentElement;if(r===e.dom)return o$(r.offsetLeft,r.offsetTop);let n=oq(null==o?void 0:o.pageYOffset,l.scrollTop),s=oq(null==o?void 0:o.pageXOffset,l.scrollLeft),a=oq(l.clientTop,r.clientTop),i=oq(l.clientLeft,r.clientLeft);return oG(e).translate(s-i,n-a)},oG=e=>{let t=e.dom,r=t.ownerDocument.body;return r===t?o$(r.offsetLeft,r.offsetTop):tW(e)?oV(t):o$(0,0)},oK=(e,t)=>({row:e,y:t}),oY=(e,t)=>({col:e,x:t}),oJ=e=>oU(e).left+ou(e),oQ=e=>oU(e).left,oX=(e,t)=>oY(e,oQ(t)),oZ=(e,t)=>oY(e,oJ(t)),o0=e=>oU(e).top,o1=(e,t)=>oK(e,o0(t)),o9=(e,t)=>oK(e,o0(t)+oF(t)),o3=(e,t,r)=>{if(0===r.length)return[];let o=M(r.slice(1),(t,r)=>t.map(t=>e(r,t))),l=r[r.length-1].map(e=>t(r.length-1,e));return o.concat([l])},o2={delta:C,positions:e=>o3(o1,o9,e),edge:o0},o5=oM({delta:C,edge:oQ,positions:e=>o3(oX,oZ,e)},{delta:e=>-e,edge:oJ,positions:e=>o3(oZ,oX,e)}),o7={delta:(e,t)=>o5(t).delta(e,t),positions:(e,t)=>o5(t).positions(e,t),edge:e=>o5(e).edge(e)},o4={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},o6=(()=>{let e="[0-9]+",t="[eE][+-]?"+e,r=e=>`(?:${e})?`,o=["Infinity",e+"\\."+r(e)+r(t),"\\."+e+r(t),e+r(t)].join("|"),l=`[+-]?(?:${o})`;return RegExp(`^(${l})(.*)$`)})(),o8=(e,t)=>j(t,t=>j(o4[t],t=>e===t)),le=(e,t)=>E.from(o6.exec(e)).bind(e=>{let r=Number(e[1]),o=e[2];return o8(o,t)?E.some({value:r,unit:o}):E.none()}),lt=/(\d+(\.\d+)?)%/,lr=/(\d+(\.\d+)?)px|em/,lo=ez("col"),ll=ez("tr"),ln=(e,t,r)=>{let o=e1(e).getOrThunk(()=>tL(eQ(e)));return t(e)/r(o)*100},ls=(e,t)=>{rs(e,"width",t+"px")},la=(e,t)=>{rs(e,"width",t+"%")},li=(e,t)=>{rs(e,"height",t+"px")},lm=e=>{rc(e,"height")},ld=e=>oH(e)+"px",lc=(e,t,r,o)=>{let l=rD(e).map(e=>Math.floor(t/100*r(e))).getOr(t);return o(e,l),l},lu=(e,t,r,o)=>{let l=parseFloat(e);return t8(e,"%")&&"table"!==eR(t)?lc(t,l,r,o):l},lf=e=>{let t=ld(e);return t?lu(t,e,oP,li):oP(e)},lg=(e,t,r)=>r(e)/rg(e,t),lh=(e,t)=>rd(e,t).orThunk(()=>eP(e,t).map(e=>e+"px")),lp=e=>lh(e,"width"),lb=e=>lh(e,"height"),lw=e=>ln(e,oc,of),lv=e=>lo(e)?oc(e):og(e),ly=e=>ll(e)?oP(e):lg(e,"rowspan",lf),lC=e=>lp(e).bind(e=>le(e,["fixed","relative","empty"])),lT=(e,t,r)=>{rs(e,"width",t+r)},lx=e=>oc(e)+"px",lS=e=>oP(e)+"px",lR=e=>ln(e,oc,of)+"%",lD=y(lt),lO=ez("col"),lk=e=>lp(e).getOrThunk(()=>lv(e)+"px"),lE=e=>lb(e).getOrThunk(()=>ly(e)+"px"),lA=e=>M(oB.justColumns(e),e=>E.from(e.element)),l_=e=>{let t=ol().browser,r=t.isChromium()||t.isFirefox();return!lO(e)||r},lB=(e,t,r,o,l,n)=>e.filter(o).fold(()=>n(oW(r,t)),e=>l(e)),lN=(e,t,r,o)=>{let l=oN(e),n=oB.hasColumns(e)?lA(e):l,s=[E.some(o7.edge(t))].concat(M(o7.positions(l,t),e=>e.map(e=>e.x))),a=S(rh);return M(n,(e,t)=>lB(e,t,s,a,e=>l_(e)?r(e):lB(t9(l[t],C),t,s,a,e=>o(E.some(oc(e))),o),o))},lz=e=>e.map(e=>e+"px").getOr(""),lj=(e,t)=>lN(e,t,lk,lz),lW=(e,t,r)=>lN(e,t,lw,e=>e.fold(()=>r.minCellWidth(),e=>e/r.pixelWidth()*100)),lM=(e,t,r)=>lN(e,t,lv,e=>e.getOrThunk(r.minCellWidth)),lL=(e,t,r,o)=>{let l=oj(e),n=M(e.all,e=>E.some(e.element)),s=[E.some(o2.edge(t))].concat(M(o2.positions(l,t),e=>e.map(e=>e.y)));return M(n,(e,t)=>lB(e,t,s,k,r,o))},lI=(e,t)=>lL(e,t,ly,e=>e.getOrThunk(rv)),lP=(e,t)=>lL(e,t,lE,lz),lF=(e,t)=>()=>tW(e)?t(e):parseFloat(rd(e,"width").getOr("0")),lH=e=>{let t=lF(e,oc),r=y(0);return{width:t,pixelWidth:t,getWidths:(t,r)=>lM(t,e,r),getCellDelta:r,singleColumnWidth:y([0]),minCellWidth:r,setElementWidth:b,adjustTableWidth:b,isRelative:!0,label:"none"}},l$=e=>{let t=lF(e,e=>parseFloat(lR(e))),r=lF(e,oc);return{width:t,pixelWidth:r,getWidths:(t,r)=>lW(t,e,r),getCellDelta:e=>e/r()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>rw()/r()*100,setElementWidth:la,adjustTableWidth:r=>{let o=t();la(e,o+r/100*o)},isRelative:!0,label:"percent"}},lV=e=>{let t=lF(e,oc);return{width:t,pixelWidth:t,getWidths:(t,r)=>lM(t,e,r),getCellDelta:C,singleColumnWidth:(e,t)=>[Math.max(rw(),e+t)-e],minCellWidth:rw,setElementWidth:ls,adjustTableWidth:r=>{ls(e,t()+r)},isRelative:!1,label:"pixel"}},lq=(e,t)=>null!==lD().exec(t)?l$(e):lV(e),lU={getTableSize:e=>lp(e).fold(()=>lH(e),t=>lq(e,t)),pixelSize:lV,percentageSize:l$},lG=(e,t,r,o,l,n)=>({minRow:e,minCol:t,maxRow:r,maxCol:o,allCells:l,selectedCells:n}),lK=(e,t)=>{let r=e.grid.columns,o=e.grid.rows,l=r,n=0,s=0,a=[],i=[];return en(e.access,e=>{if(a.push(e),t(e)){i.push(e);let t=e.row,r=t+e.rowspan-1,a=e.column,m=a+e.colspan-1;t<o?o=t:r>n&&(n=r),a<l?l=a:m>s&&(s=m)}}),lG(o,l,n,s,a,i)},lY=(e,t,r)=>{let o=e[r].element,l=eV.fromTag("td");tt(l,eV.fromTag("br")),(t?tt:te)(o,l)},lJ=(e,t,r,o)=>{let l=F(e,e=>"colgroup"!==e.section),n=t.grid.columns,s=t.grid.rows;for(let e=0;e<s;e++){let s=!1;for(let a=0;a<n;a++)e<r.minRow||e>r.maxRow||a<r.minCol||a>r.maxCol||(oB.getAt(t,e,a).filter(o).isNone()?lY(l,s,e):s=!0)}},lQ=(e,t,r,o)=>{en(r.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&ta(e.element)}),L(F(ry(e,"tr"),e=>0===e.dom.childElementCount),ta),(t.minCol===t.maxCol||t.minRow===t.maxRow)&&L(ry(e,"th,td"),e=>{eF(e,"rowspan"),eF(e,"colspan")}),eF(e,oR),eF(e,"data-snooker-col-series"),lU.getTableSize(e).adjustTableWidth(o)},lX=(e,t,r,o)=>{if(0===o.minCol&&t.grid.columns===o.maxCol+1)return 0;let l=lM(t,e,r),n=$(l,(e,t)=>e+t,0),s=$(l.slice(o.minCol,o.maxCol+1),(e,t)=>e+t,0)/n*r.pixelWidth()-r.pixelWidth();return r.getCellDelta(s)},lZ=(e,t)=>{let r=e=>eq(e.element,t),o=tc(e),l=r_(o),n=lU.getTableSize(e),s=oB.generate(l),a=lK(s,r),i="th:not("+t+"),td:not("+t+")";L(rC(o,"th,td",e=>eq(e,i)),ta),lJ(l,s,a,r);let m=oB.fromTable(e),d=lX(e,m,n,a);return lQ(o,a,s,d),o},l0=((e,t)=>{let r=t=>e(t)?E.from(t.dom.nodeValue):E.none();return{get:o=>{if(!e(o))throw Error("Can only get "+t+" value of a "+t+" node");return r(o).getOr("")},getOption:r,set:(r,o)=>{if(!e(r))throw Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=o}}})(e_,"text"),l1=e=>l0.get(e),l9=e=>l0.getOption(e),l3=(e,t)=>l0.set(e,t),l2=e=>"img"===eR(e)?1:l9(e).fold(()=>e5(e).length,e=>e.length),l5=e=>l9(e).filter(e=>0!==e.trim().length||e.indexOf("\xa0")>-1).isSome(),l7=e=>eE(e)&&"false"===eI(e,"contenteditable"),l4=["img","br"],l6=e=>l5(e)||z(l4,eR(e))||l7(e),l8=e=>tY(e,l6),ne=e=>nt(e,l6),nt=(e,t)=>{let r=e=>{let o=e5(e);for(let e=o.length-1;e>=0;e--){let l=o[e];if(t(l))return E.some(l);let n=r(l);if(n.isSome())return n}return E.none()};return r(e)},nr={scope:["row","col"]},no=e=>()=>{let t=eV.fromTag("td",e.dom);return tt(t,eV.fromTag("br",e.dom)),t},nl=e=>()=>eV.fromTag("col",e.dom),nn=e=>()=>eV.fromTag("colgroup",e.dom),ns=e=>()=>eV.fromTag("tr",e.dom),na=(e,t,r)=>{let o=tf(e,t);return en(r,(e,t)=>{null===e?eF(o,t):eW(o,t,e)}),o},ni=e=>e,nm=(e,t,r)=>l8(e).map(o=>H(tH(o,r.join(","),t=>eY(t,e)),(e,t)=>{let r=td(t);return tt(e,r),r},t)).getOr(t),nd=(e,t)=>{en(nr,(r,o)=>eP(e,o).filter(e=>z(r,e)).each(e=>eW(t,o,e)))},nc=(e,t,r)=>{let o=(e,t)=>{ru(e.element,t),rc(t,"height"),1!==e.colspan&&rc(t,"width")};return{col:r=>{let l=eV.fromTag(eR(r.element),t.dom);return o(r,l),e(r.element,l),l},colgroup:nn(t),row:ns(t),cell:l=>{let n=eV.fromTag(eR(l.element),t.dom),s=r.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]);return tt(s.length>0?nm(l.element,n,s):n,eV.fromTag("br")),o(l,n),nd(l.element,n),e(l.element,n),n},replace:na,colGap:nl(t),gap:no(t)}},nu=e=>({col:nl(e),colgroup:nn(e),row:ns(e),cell:no(e),replace:ni,colGap:nl(e),gap:no(e)}),nf=(e,t)=>{let r=(t||document).createElement("div");return r.innerHTML=e,e5(eV.fromDom(r))},ng=e=>M(e,eV.fromDom),nh=e=>t=>t.options.get(e),np="100%",nb=e=>{var t;let r=e.dom,o=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return of(eV.fromDom(o))+"px"},nw=(e,t)=>nA(e)||!nB(e)?t:nE(e)?{...t,width:nb(e)}:{...t,width:np},nv=(e,t)=>nA(e)||nB(e)?t:nE(e)?{...t,width:nb(e)}:{...t,width:np},ny=e=>{let t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{let t=z(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{let t=z(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})},nC=e=>E.from(e.options.get("table_clone_elements")),nT=e=>z(e.options.get("object_resizing").split(","),"table"),nx=nh("table_header_type"),nS=nh("table_column_resizing"),nR=e=>"preservetable"===nS(e),nD=e=>"resizetable"===nS(e),nO=nh("table_sizing_mode"),nk=e=>"relative"===nO(e),nE=e=>"fixed"===nO(e),nA=e=>"responsive"===nO(e),n_=nh("table_resize_bars"),nB=nh("table_style_by_css"),nN=nh("table_merge_content_on_paste"),nz=e=>{let t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:nv(e,r)},nj=e=>{let t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:nw(e,r)},nW=nh("table_use_colgroups"),nM=nh("fixed_toolbar_container"),nL=nh("fixed_toolbar_container_target"),nI=e=>{var t;if(!e.inline)return E.none();let r=null!==(t=nM(e))&&void 0!==t?t:"";if(r.length>0)return tX(tM(),r);let o=nL(e);return g(o)?E.some(eV.fromDom(o)):E.none()},nP=e=>e.inline&&nI(e).isSome(),nF=nh("ui_mode"),nH=e=>!nP(e)&&"split"===nF(e),n$=e=>tZ(e,"[contenteditable]"),nV=(e,t=!1)=>tW(e)?e.dom.isContentEditable:n$(e).fold(y(t),e=>"true"===nq(e)),nq=e=>e.dom.contentEditable,nU=e=>eV.fromDom(e.getBody()),nG=e=>t=>eY(t,nU(e)),nK=e=>{eF(e,"data-mce-style");let t=e=>eF(e,"data-mce-style");L(rS(e),t),L(rR(e),t),L(rO(e),t)},nY=e=>eV.fromDom(e.selection.getStart()),nJ=e=>e.getBoundingClientRect().width,nQ=e=>e.getBoundingClientRect().height,nX=e=>(t,r)=>{let o=t.dom.getStyle(r,e)||t.dom.getAttrib(r,e);return E.from(o).filter(rt)},nZ=nX("width"),n0=nX("height"),n1=e=>/^(\d+(\.\d+)?)%$/.test(e),n9=e=>/^(\d+(\.\d+)?)px$/.test(e),n3=e=>tG(e,ez("table")).exists(nV),n2=(e,t)=>{let r=t.column,o=t.column+t.colspan-1,l=t.row,n=t.row+t.rowspan-1;return r<=e.finishCol&&o>=e.startCol&&l<=e.finishRow&&n>=e.startRow},n5=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,n7=(e,t)=>{let r=!0,o=x(n5,t);for(let l=t.startRow;l<=t.finishRow;l++)for(let n=t.startCol;n<=t.finishCol;n++)r=r&&oB.getAt(e,l,n).exists(o);return r?E.some(t):E.none()},n4=(e,t)=>tD(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),n6=(e,t,r)=>{let o=oB.findItem(e,t,eY),l=oB.findItem(e,r,eY);return o.bind(e=>l.map(t=>n4(e,t)))},n8=(e,t,r)=>n6(e,t,r).bind(t=>n7(e,t)),se=(e,t,r,o)=>oB.findItem(e,t,eY).bind(t=>{let l=r>0?t.row+t.rowspan-1:t.row,n=o>0?t.column+t.colspan-1:t.column;return oB.getAt(e,l+r,n+o).map(e=>e.element)}),st=(e,t,r)=>n6(e,t,r).map(t=>M(oB.filterItems(e,x(n2,t)),e=>e.element)),sr=(e,t)=>oB.findItem(e,t,(e,t)=>eJ(t,e)).map(e=>e.element),so=(e,t,r)=>rD(e).bind(o=>se(sa(o),e,t,r)),sl=(e,t,r)=>st(sa(e),t,r),sn=(e,t,r,o,l)=>{let n=sa(e),s=eY(e,r)?E.some(t):sr(n,t),a=eY(e,l)?E.some(o):sr(n,o);return s.bind(e=>a.bind(t=>st(n,e,t)))},ss=(e,t,r)=>n8(sa(e),t,r),sa=oB.fromTable;var si=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],sm=()=>({up:y({selector:tJ,closest:tZ,predicate:tU,all:e9}),down:y({selector:tV,predicate:tF}),styles:y({get:ri,getRaw:rd,set:rs,remove:rc}),attrs:y({get:eI,set:eW,remove:eF,copyTo:(e,t)=>{eM(t,eH(e))}}),insert:y({before:e6,after:e8,afterAll:tl,append:tt,appendAll:tn,prepend:te,wrap:to}),remove:y({unwrap:ti,remove:ta}),create:y({nu:eV.fromTag,clone:e=>eV.fromDom(e.dom.cloneNode(!1)),text:eV.fromText}),query:y({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e3,nextSibling:e2}),property:y({children:e5,name:eR,parent:e0,document:e=>eX(e).dom,isText:e_,isComment:ek,isElement:eA,isSpecial:e=>z(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],eR(e)),getLanguage:e=>eA(e)?eP(e,"lang"):E.none(),getText:l1,setText:l3,isBoundary:e=>!!eA(e)&&("body"===eR(e)||z(si,eR(e))),isEmptyTag:e=>!!eA(e)&&z(["br","img","hr","input"],eR(e)),isNonEditable:e=>eA(e)&&"false"===eI(e,"contenteditable")}),eq:eY,is:eq});let sd=(e,t,r,o)=>o(e,t,r[0],r.slice(1)),sc=(e,t,r,o)=>H(o,(r,o)=>{let l=t(e,o);return su(e,r,l)},t(e,r)),su=(e,t,r)=>t.bind(t=>r.filter(x(e.eq,t))),sf=(e,t)=>x(e.eq,t),sg=(e,t,r)=>r.length>0?sd(e,t,r,sc):E.none(),sh=(e,t,r,o=O)=>{let l=[t].concat(e.up().all(t)),n=[r].concat(e.up().all(r)),s=e=>U(e,o).fold(()=>e,t=>e.slice(0,t+1)),a=s(l),i=s(n),m=q(a,t=>j(i,sf(e,t)));return{firstpath:a,secondpath:i,shared:m}},sp=sm(),sb=(e,t)=>sg(sp,(t,r)=>e(r),t),sw=(e,t,r)=>sh(sp,e,t,r),sv=e=>tJ(e,"table"),sy=(e,t,r)=>{let o=e=>t=>void 0!==r&&r(t)||eY(t,e);return eY(e,t)?E.some({boxes:E.some([e]),start:e,finish:t}):sv(e).bind(l=>sv(t).bind(n=>{if(eY(l,n))return E.some({boxes:sl(l,e,t),start:e,finish:t});if(eJ(l,n)){let r=tH(t,"td,th",o(l)),s=r.length>0?r[r.length-1]:t;return E.some({boxes:sn(l,e,l,t,n),start:e,finish:s})}if(!eJ(n,l))return sw(e,t).shared.bind(s=>tZ(s,"table",r).bind(r=>{let s=tH(t,"td,th",o(r)),a=s.length>0?s[s.length-1]:t,i=tH(e,"td,th",o(r)),m=i.length>0?i[i.length-1]:e;return E.some({boxes:sn(r,e,l,t,n),start:m,finish:a})}));{let r=tH(e,"td,th",o(n)),s=r.length>0?r[r.length-1]:e;return E.some({boxes:sn(n,e,l,t,n),start:e,finish:s})}}))},sC=(e,t)=>{let r=tV(e,t);return r.length>0?E.some(r):E.none()},sT=(e,t)=>q(e,e=>eq(e,t)),sx=(e,t,r)=>tX(e,t).bind(t=>tX(e,r).bind(e=>sb(sv,[t,e]).map(r=>({first:t,last:e,table:r})))),sS=(e,t)=>tJ(e,"table").bind(r=>tX(r,t).bind(t=>sy(t,e).bind(e=>e.boxes.map(t=>({boxes:t,start:e.start,finish:e.finish}))))),sR=(e,t,r,o,l)=>sT(e,l).bind(e=>so(e,t,r).bind(e=>sS(e,o))),sD=(e,t)=>sC(e,t),sO=(e,t,r)=>sx(e,t,r).bind(t=>{let r=t=>eY(e,t),o="thead,tfoot,tbody,table",l=tJ(t.first,o,r),n=tJ(t.last,o,r);return l.bind(e=>n.bind(r=>eY(e,r)?ss(t.table,t.first,t.last):E.none()))}),sk=e=>{let t=(e,t)=>eP(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&Y(e,e=>t(e,"rowspan")||t(e,"colspan"))?E.some(e):E.none()},sE=(e,t,r)=>t.length<=1?E.none():sO(e,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>({bounds:e,cells:t})),sA="data-mce-selected",s_="data-mce-first-selected",sB="data-mce-last-selected",sN="["+sA+"]",sz={selected:sA,selectedSelector:"td["+sA+"],th["+sA+"]",firstSelected:s_,firstSelectedSelector:"td["+s_+"],th["+s_+"]",lastSelected:sB,lastSelectedSelector:"td["+sB+"],th["+sB+"]"},sj=(e,t,r)=>({element:r,mergable:sE(t,e,sz),unmergable:sk(e),selection:C(e)}),sW=(e,t,r)=>({element:e,clipboard:t,generators:r}),sM=(e,t,r,o)=>({selection:C(e),clipboard:r,generators:o}),sL=e=>rD(e).bind(e=>sD(e,sz.firstSelectedSelector)).fold(y(e),e=>e[0]),sI=e=>(t,r)=>{let o=eR(t);return tZ("col"===o||"colgroup"===o?sL(t):t,e,r)},sP=sI("th,td,caption"),sF=sI("th,td"),sH=e=>ng(e.model.table.getSelectedCells()),s$=e=>F(sH(e),e=>eq(e,sz.selectedSelector)),sV=e=>rD(e[0]).map(e=>{let t=lZ(e,sN);return nK(t),[t]}),sq=(e,t)=>M(t,t=>e.selection.serializer.serialize(t.dom,{})).join(""),sU=(e,t)=>{let r=e.getDoc(),o=tA(eV.fromDom(e.getBody())),l=eV.fromTag("div",r);eW(l,"data-mce-bogus","all"),ra(l,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});let n=t_(o);tn(l,t),tt(n,l);let s=l.dom.innerText;return ta(l),s},sG=(e,t)=>{e.on("BeforeGetContent",t=>{if(!0===t.selection){let r=s$(e);if(r.length>=1)t.preventDefault(),sV(r).each(r=>{t.content="text"===t.format?sU(e,r):sq(e,r)})}}),e.on("BeforeSetContent",r=>{!0===r.selection&&!0===r.paste&&ee(sH(e)).each(o=>{rD(o).each(l=>{let n=F(nf(r.content),e=>"meta"!==eR(e)),s=ez("table");if(nN(e)&&1===n.length&&s(n[0])){r.preventDefault();let s=nu(eV.fromDom(e.getDoc())),a=sW(o,n[0],s);t.pasteCells(l,a).each(()=>{e.focus()})}})})})},sK=(e,t)=>({element:e,offset:t}),sY=(e,t,r)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?r(t).bind(t=>sY(e,t,r).orThunk(()=>E.some(t))):E.none(),sJ=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,sQ=(e,t)=>{let r=sY(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(r))return sK(r,sJ(e,r));let o=e.property().children(r);return o.length>0?sQ(e,o[o.length-1]):sK(r,sJ(e,r))},sX=sm(),sZ=e=>sQ(sX,e),s0=(e,t)=>{rh(e)||lC(e).each(r=>{let o=r.value/2;lT(e,o,r.unit),lT(t,o,r.unit)})},s1=e=>M(e,y(0)),s9=(e,t,r,o,l)=>l(e.slice(0,t)).concat(o).concat(l(e.slice(r))),s3=e=>(t,r,o,l)=>{if(!e(o))return o;{let e=Math.abs(Math.max(l,t[r]-Math.abs(o))-t[r]);return o>=0?e:-e}},s2=s3(e=>e<0),s5=s3(k),s7=()=>{let e=(e,t,r,o,l)=>{let n=s2(e,t,o,l);return s9(e,t,r+1,[n,0],s1)},t=(e,t,r,o)=>{let l=(100+r)/100,n=Math.max(o,(e[t]+r)/l);return M(e,(e,r)=>(r===t?n:e/l)-e)},r=(r,o,l,n,s,a)=>a?t(r,o,n,s):e(r,o,l,n,s);return{resizeTable:(e,t)=>e(t),clampTableDelta:s2,calcLeftEdgeDeltas:r,calcMiddleDeltas:(e,t,o,l,n,s,a)=>r(e,o,l,n,s,a),calcRightEdgeDeltas:(e,r,o,l,n,s)=>{if(s)return t(e,o,l,n);{let t=s2(e,o,l,n);return s1(e.slice(0,o)).concat([t])}},calcRedestributedWidths:(e,t,r,o)=>{if(!o)return{delta:r,newSizes:e};{let o=(t+r)/t,l=M(e,e=>e/o);return{delta:100*o-100,newSizes:l}}}}},s4=()=>{let e=(e,t,r,o,l)=>{let n=s5(e,o>=0?r:t,o,l);return s9(e,t,r+1,[n,-n],s1)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(e,t,r,o,l)=>l?r>=0?r:Math.max(-$(e,(e,t)=>e+t-o,0),r):s2(e,t,r,o),calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,r,o,l,n,s)=>e(t,o,l,n,s),calcRightEdgeDeltas:(e,t,r,o,l,n)=>{if(n)return s1(e);{let t=o/e.length;return M(e,y(t))}},calcRedestributedWidths:(e,t,r,o)=>({delta:0,newSizes:e})}},s6=e=>oB.fromTable(e).grid,s8=ez("th"),ae=e=>Y(e,e=>s8(e.element)),at=(e,t)=>e&&t?"sectionCells":e?"section":"cells",ar=e=>{let t="thead"===e.section,r=t0(ao(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:at(t,r)}:{type:"body"}},ao=e=>{let t=F(e,e=>s8(e.element));return 0===t.length?E.some("td"):t.length===e.length?E.some("th"):E.none()},al=e=>{let t=M(e,e=>ar(e).type),r=z(t,"header"),o=z(t,"footer");if(!r&&!o)return E.some("body");{let e=z(t,"body");return!r||e||o?r||e||!o?E.none():E.some("footer"):E.some("header")}},an=e=>er(e.all,e=>{let t=ar(e);return"header"===t.type?E.from(t.subType):E.none()}),as=(e,t,r)=>tS(r(e.element,t),!0,e.isLocked),aa=(e,t)=>e.section!==t?tR(e.element,e.cells,t,e.isNew):e,ai=()=>({transformRow:aa,transformCell:(e,t,r)=>{let o=r(e.element,t);return tS("td"!==eR(o)?tg(o,"td"):o,e.isNew,e.isLocked)}}),am=()=>({transformRow:aa,transformCell:as}),ad=()=>({transformRow:(e,t)=>aa(e,"thead"===t?"tbody":t),transformCell:as}),ac={getTableSectionType:(e,t)=>{switch(an(oB.fromTable(e)).getOr(t)){case"section":return ai();case"sectionCells":return am();case"cells":return ad()}},section:ai,sectionCells:am,cells:ad,fallback:()=>({transformRow:C,transformCell:as})},au=(e,t,r,o)=>{r===o?eF(e,t):eW(e,t,r)},af=(e,t,r)=>{et(t$(e,t)).fold(()=>te(e,r),e=>e8(e,r))},ag=(e,t)=>{let r=tQ(e,t).getOrThunk(()=>{let r=eV.fromTag(t,eQ(e).dom);return"thead"===t?af(e,"caption,colgroup",r):"colgroup"===t?af(e,"caption",r):tt(e,r),r});return ts(r),r},ah=(e,t)=>{let r=[],o=[],l=e=>M(e,e=>{e.isNew&&r.push(e.element);let t=e.element;return ts(t),L(e.cells,e=>{e.isNew&&o.push(e.element),au(e.element,"colspan",e.colspan,1),au(e.element,"rowspan",e.rowspan,1),tt(t,e.element)}),t}),n=e=>K(e,e=>M(e.cells,e=>(au(e.element,"span",e.colspan,1),e.element))),s=(t,r)=>{tn(ag(e,r),("colgroup"===r?n:l)(t))},a=t=>{tQ(e,t).each(ta)},i=(e,t)=>{e.length>0?s(e,t):a(t)},m=[],d=[],c=[],u=[];return L(t,e=>{switch(e.section){case"thead":m.push(e);break;case"tbody":d.push(e);break;case"tfoot":c.push(e);break;case"colgroup":u.push(e)}}),i(u,"colgroup"),i(m,"thead"),i(d,"tbody"),i(c,"tfoot"),{newRows:r,newCells:o}},ap=e=>M(e,e=>{let t=td(e.element);return L(e.cells,e=>{let r=tc(e.element);au(r,"colspan",e.colspan,1),au(r,"rowspan",e.rowspan,1),tt(t,r)}),t}),ab=(e,t)=>M(e,e=>oy(e,t)),aw=(e,t)=>e[t],av=(e,t)=>{if(0===e.length)return 0;let r=e[0];return U(e,e=>!t(r.element,e.element)).getOr(e.length)},ay=(e,t,r,o)=>{let l=aw(e,t),n="colgroup"===l.section;return{colspan:av(l.cells.slice(r),o),rowspan:n?1:av(ab(e.slice(t),r),o)}},aC=(e,t)=>{let r=M(e,e=>M(e.cells,O)),o=(e,t,o,l)=>{for(let n=e;n<e+o;n++)for(let e=t;e<t+l;e++)r[n][e]=!0};return M(e,(l,n)=>{let s=K(l.cells,(l,s)=>{if(!1!==r[n][s])return[];{let r=ay(e,n,s,t);return o(n,s,r.rowspan,r.colspan),[ty(l.element,r.rowspan,r.colspan,l.isNew)]}});return tx(l.element,s,l.section,l.isNew)})},aT=(e,t,r)=>{let o=[];L(e.colgroups,l=>{let n=[];for(let o=0;o<e.grid.columns;o++){let l=oB.getColumnAt(e,o).map(e=>tS(e.element,r,!1)).getOrThunk(()=>tS(t.colGap(),!0,!1));n.push(l)}o.push(tR(l.element,n,"colgroup",r))});for(let l=0;l<e.grid.rows;l++){let n=[];for(let o=0;o<e.grid.columns;o++){let s=oB.getAt(e,l,o).map(e=>tS(e.element,r,e.isLocked)).getOrThunk(()=>tS(t.gap(),!0,!1));n.push(s)}let s=e.all[l],a=tR(s.element,n,s.section,r);o.push(a)}return o},ax=(e,t)=>aT(e,t,!1),aS=e=>aC(e,eY),aR=(e,t)=>er(e.all,e=>q(e.cells,e=>eY(t,e.element))),aD=(e,t,r)=>{let o=t1(M(t.selection,t=>rx(t).bind(t=>aR(e,t)).filter(r)));return t3(o.length>0,o)},aO=(e,t,r,o,l)=>(n,s,a,i)=>{let m=oB.fromTable(n),d=E.from(null==i?void 0:i.section).getOrThunk(ac.fallback);return t(m,s).map(t=>{let r=e(ax(m,a),t,eY,l(a),d),o=oO(r.grid);return{info:t,grid:aS(r.grid),cursor:r.cursor,lockedColumns:o}}).bind(e=>{let t=ah(n,e.grid),l=E.from(null==i?void 0:i.sizing).getOrThunk(()=>lU.getTableSize(n)),s=E.from(null==i?void 0:i.resize).getOrThunk(s4);return r(n,e.grid,e.info,{sizing:l,resize:s,section:d}),o(n),eF(n,oR),e.lockedColumns.length>0&&eW(n,oR,e.lockedColumns.join(",")),E.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},ak=(e,t)=>aD(e,t,k).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),aE=(e,t)=>t.mergable,aA=(e,t)=>t.unmergable,a_=(e,t)=>aD(e,t,k),aB=(e,t)=>aD(e,t,e=>!e.isLocked),aN=(e,t)=>aR(e,t).exists(e=>!e.isLocked),az=(e,t)=>Y(t,t=>aN(e,t)),aj=(e,t,r,o)=>{let l=ox(e).rows;if(0===l.length)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let r=t.startCol;r<=t.finishCol;r++){let t=l[e],n=oy(t,r).isLocked;ob(t,r,tS(o(),!1,n))}return e},aW=(e,t,r,o)=>{let l=ox(e).rows,n=!0;for(let e=0;e<l.length;e++)for(let s=0;s<oT(l[0]);s++){let a=l[e],i=oy(a,s),m=r(i.element,t);m&&!n?ob(a,s,tS(o(),!0,i.isLocked)):m&&(n=!1)}return e},aM=(e,t)=>$(e,(e,r)=>j(e,e=>t(e.element,r.element))?e:e.concat([r]),[]),aL=(e,t,r,o)=>(t>0&&t<e[0].cells.length&&L(e,e=>{let l=e.cells[t-1],n=0,s=o();for(;e.cells.length>t+n&&r(l.element,e.cells[t+n].element);)ob(e,t+n,tS(s,!0,e.cells[t+n].isLocked)),n++}),e),aI=(e,t,r,o)=>{let l=ox(e).rows;return t>0&&t<l.length&&L(aM(l[t-1].cells,r),e=>{let n=E.none();for(let s=t;s<l.length;s++)for(let t=0;t<oT(l[0]);t++){let a=l[s],i=oy(a,t);r(i.element,e.element)&&(n.isNone()&&(n=E.some(o())),n.each(e=>{ob(a,t,tS(e,!0,i.isLocked))}))}}),e},aP={value:e=>{let t=t=>t(e),r=y(e),o=()=>l,l={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:k,isError:O,map:t=>aP.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:r,or:o,getOrThunk:r,orThunk:o,getOrDie:r,each:t=>{t(e)},toOptional:()=>E.some(e)};return l},error:e=>{let t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:O,isError:k,map:t,mapError:t=>aP.error(t(e)),bind:t,exists:O,forall:k,getOr:C,or:C,getOrThunk:D,orThunk:D,getOrDie:R(String(e)),each:b,toOptional:E.none};return r}},aF=(e,t,r)=>{if(e.row>=t.length||e.column>oT(t[0]))return aP.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);let o=t.slice(e.row),l=o[0].cells.slice(e.column),n=oT(r[0]),s=r.length;return aP.value({rowDelta:o.length-s,colDelta:l.length-n})},aH=(e,t)=>({rowDelta:0,colDelta:oT(e[0])-oT(t[0])}),a$=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),aV=(e,t,r,o)=>{let l="colgroup"===t.section?r.col:r.cell;return W(e,e=>tS(l(),!0,o(e)))},aq=(e,t,r,o)=>{let l=e[e.length-1];return e.concat(W(t,()=>{let e="colgroup"===l.section?r.colgroup:r.row,t=oS(l,e,C),n=aV(t.cells.length,t,r,e=>eg(o,e.toString()));return ow(t,n)}))},aU=(e,t,r,o)=>M(e,e=>{let l=aV(t,e,r,O);return oh(e,o,l)}),aG=(e,t,r)=>M(e,e=>$(r,(r,o)=>op(r,o,aV(1,e,t,k)[0]),e)),aK=(e,t,r)=>{let o=t.colDelta<0?aU:C,l=t.rowDelta<0?aq:C,n=oO(e),s=oT(e[0]),a=j(n,e=>e===s-1),i=o(e,Math.abs(t.colDelta),r,a?s-1:s),m=oO(i);return l(i,Math.abs(t.rowDelta),r,Q(m,k))},aY=(e,t,r,o)=>{let l=x(o,oy(e[t],r).element),n=e[t];return e.length>1&&oT(n)>1&&(r>0&&l(oC(n,r-1))||r<n.cells.length-1&&l(oC(n,r+1))||t>0&&l(oC(e[t-1],r))||t<e.length-1&&l(oC(e[t+1],r)))},aJ=(e,t,r,o,l,n)=>{let s=e.row,a=e.column,i=r.length,m=oT(r[0]),d=s+i,c=a+m+n.length,u=Q(n,k);for(let e=s;e<d;e++){let n=0;for(let i=a;i<c;i++){if(u[i]){n++;continue}aY(t,e,i,l)&&aW(t,oC(t[e],i),l,o.cell);let m=i-a-n,d=oy(r[e-s],m),c=d.element,f=o.replace(c);ob(t[e],i,tS(f,!0,d.isLocked))}}return t},aQ=(e,t,r)=>{let o=oT(t[0]);return{row:ox(t).cols.length+e.row,column:q(W(o-e.column,t=>t+e.column),e=>Y(r,t=>t!==e)).getOr(o-1)}},aX=(e,t,r)=>F(r,r=>r>=e.column&&r<=oT(t[0])+e.column),aZ=(e,t,r,o,l)=>{let n=oO(t),s=aQ(e,t,n),a=ox(r).rows,i=aX(s,a,n);return aF(s,t,a).map(e=>{let r=aK(t,{...e,colDelta:e.colDelta-i.length},o),n=aX(s,a,oO(r));return aJ(s,r,a,o,l,n)})},a0=(e,t,r,o,l)=>{aL(t,e,l,o.cell);let n=a$(r,t),s=aK(r,n,o),a=a$(t,s);return M(aK(t,a,o),(t,r)=>oh(t,e,s[r].cells))},a1=(e,t,r,o,l)=>{aI(t,e,l,o.cell);let n=oO(t),s=aH(t,r),a=aK(t,{...s,colDelta:s.colDelta-n.length},o),{cols:i,rows:m}=ox(a),d=oO(a),c=aH(r,t),u={...c,colDelta:c.colDelta+d.length},f=aK(aG(r,o,d),u,o);return[...i,...m.slice(0,e),...f,...m.slice(e,m.length)]},a9=(e,t,r,o)=>oS(e,e=>o(e,r),t),a3=(e,t,r,o,l)=>{let{rows:n,cols:s}=ox(e),a=n.slice(0,t),i=n.slice(t);return[...s,...a,a9(n[r],(e,r)=>t>0&&t<n.length&&o(oC(n[t-1],r),oC(n[t],r))?oy(n[t],r):tS(l(e.element,o),!0,e.isLocked),o,l),...i]},a2=(e,t,r,o,l,n,s)=>"colgroup"!==r&&o?oy(e,t):tS(s(oy(e,l).element,n),!0,!1),a5=(e,t,r,o,l)=>M(e,e=>{let n=t>0&&t<oT(e)&&o(oC(e,t-1),oC(e,t)),s=a2(e,t,e.section,n,r,o,l);return op(e,t,s)}),a7=(e,t)=>K(e,e=>{let r=H(t,(e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,e.cells);return r.length>0?[tR(e.element,r,e.section,e.isNew)]:[]}),a4=(e,t,r)=>{let{rows:o,cols:l}=ox(e);return[...l,...o.slice(0,t),...o.slice(r+1)]},a6=(e,t,r,o)=>void 0!==oC(e[t],r)&&t>0&&o(oC(e[t-1],r),oC(e[t],r)),a8=(e,t,r)=>t>0&&r(oC(e,t-1),oC(e,t)),ie=(e,t,r,o)=>a6(e,t,r,o)||a8(e[t],r,o),it=(e,t)=>Y(t,C)&&ae(e.cells)?k:(e,r,o)=>!("th"===eR(e.element)&&t[o]),ir=(e,t)=>Y(t,C)&&ae(e)?k:(e,r,o)=>!("th"===eR(e.element)&&t[r]),io=(e,t,r,o)=>{let l=e=>"row"===e?rp(t):rh(t),n=e=>l(e)?`${e}group`:e;return e?s8(t)?n(r):null:o&&s8(t)?n("row"===r?"col":"row"):null},il=(e,t)=>(r,o,l)=>E.some(io(e,r.element,"col",t[l])),is=(e,t)=>(r,o)=>E.some(io(e,r.element,"row",t[o])),ia=(e,t,r)=>tS(r(e.element,t),!0,e.isLocked),ii=(e,t,r,o,l,n,s)=>{let a=e=>j(t,t=>r(e.element,t.element));return M(e,(e,t)=>ov(e,(e,i)=>{if(!a(e))return e;{let a=s(e,t,i)?l(e,r,o):e;return n(a,t,i).each(e=>{eL(a.element,{scope:E.from(e)})}),a}}))},im=(e,t,r)=>K(e,(o,l)=>ie(e,l,t,r)?[]:[oy(o,t)]),id=(e,t,r)=>K(e[t].cells,(o,l)=>ie(e,t,l,r)?[]:[o]),ic=(e,t,r,o,l)=>{let n=ox(e).rows,s=K(t,e=>im(n,e,o)),a=M(n,e=>ae(e.cells)),i=ir(s,a);return ii(e,s,o,l,ia,is(r,a),i)},iu=(e,t,r,o,l,n,s)=>{let{cols:a,rows:i}=ox(e),m=i[t[0]],d=K(t,e=>id(i,e,l)),c=M(m.cells,(e,t)=>ae(im(i,t,l))),u=[...i];L(t,e=>{u[e]=s.transformRow(i[e],r)});let f=[...a,...u],g=it(m,c),h=il(o,c);return ii(f,d,l,n,s.transformCell,h,g)},ig=(e,t,r,o)=>{let l=ox(e).rows;return ii(e,M(t,e=>oy(l[e.row],e.column)),r,o,ia,E.none,k)},ih=e=>{if(!m(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],r={};return L(e,(o,l)=>{let n=eo(o);if(1!==n.length)throw Error("one and only one name per case");let s=n[0],a=o[s];if(void 0!==r[s])throw Error("duplicate key detected:"+s);if("cata"===s)throw Error("cannot have a case named cata (sorry)");if(!m(a))throw Error("case arguments must be an array");t.push(s),r[s]=(...r)=>{let o=r.length;if(o!==a.length)throw Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[l].apply(null,r)},match:e=>{let o=eo(e);if(t.length!==o.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!Y(t,e=>z(o,e)))throw Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,r)},log:e=>{console.log(e,{constructors:t,constructor:s,params:r})}}}}),r},ip={...ih([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},ib=(e,t)=>0===e.length?ip.none():1===e.length?ip.only(0):0===t?ip.left(0,1):t===e.length-1?ip.right(t-1,t):t>0&&t<e.length-1?ip.middle(t-1,t,t+1):ip.none(),iw=(e,t,r,o,l)=>{let n=e.slice(0),s=ib(e,t),a=y(M(n,y(0)));return s.fold(a,e=>o.singleColumnWidth(n[e],r),(e,t)=>l.calcLeftEdgeDeltas(n,e,t,r,o.minCellWidth(),o.isRelative),(e,t,s)=>l.calcMiddleDeltas(n,e,t,s,r,o.minCellWidth(),o.isRelative),(e,t)=>l.calcRightEdgeDeltas(n,e,t,r,o.minCellWidth(),o.isRelative))},iv=(e,t,r)=>{let o=0;for(let l=e;l<t;l++)o+=void 0!==r[l]?r[l]:0;return o},iy=(e,t)=>M(oB.justCells(e),e=>{let r=iv(e.column,e.column+e.colspan,t);return{element:e.element,width:r,colspan:e.colspan}}),iC=(e,t)=>M(oB.justColumns(e),(e,r)=>({element:e.element,width:t[r],colspan:e.colspan})),iT=(e,t)=>M(e.all,(e,r)=>({element:e.element,height:t[r]})),ix=e=>H(e,(e,t)=>e+t,0),iS=(e,t)=>oB.hasColumns(e)?iC(e,t):iy(e,t),iR=(e,t,r)=>{L(iS(e,t),e=>{r.setElementWidth(e.element,e.width)})},iD=(e,t,r,o,l)=>{let n=oB.fromTable(e),s=l.getCellDelta(t),a=l.getWidths(n,l),i=r===n.grid.columns-1,m=o.clampTableDelta(a,r,s,l.minCellWidth(),i);iR(n,M(iw(a,r,m,l,o),(e,t)=>e+a[t]),l),o.resizeTable(l.adjustTableWidth,m,i)},iO=(e,t,r)=>{let o=oB.fromTable(e),l=M(lI(o,e),(e,o)=>r===o?Math.max(t+e,rv()):e);L(iT(o,l),e=>{li(e.element,e.height)}),L(oB.justCells(o),e=>{lm(e.element)}),li(e,ix(l))},ik=(e,t,r,o,l)=>{let n=oB.generate(t),s=o.getWidths(n,o),a=o.pixelWidth(),{newSizes:i,delta:m}=l.calcRedestributedWidths(s,a,r.pixelDelta,o.isRelative);iR(n,i,o),o.adjustTableWidth(m)},iE=(e,t,r,o)=>{let l=oB.generate(t),n=o.getWidths(l,o);iR(l,n,o)},iA=e=>$(e,(e,t)=>j(e,e=>e.column===t.column)?e:e.concat([t]),[]).sort((e,t)=>e.column-t.column),i_=ez("col"),iB=ez("colgroup"),iN=e=>"tr"===eR(e)||iB(e),iz=e=>{let t=rf(e,"colspan",1),r=rf(e,"rowspan",1);return{element:e,colspan:t,rowspan:r}},ij=e=>eP(e,"scope").map(e=>e.substr(0,3)),iW=(e,t=iz)=>{let r=t=>i_(t.element)?e.col(t):e.cell(t),o=t=>iB(t.element)?e.colgroup(t):e.row(t),l=e=>{if(iN(e))return o({element:e});{let o=r(t(e));return n=E.some({item:e,replacement:o}),o}},n=E.none();return{getOrInit:(e,t)=>n.fold(()=>l(e),r=>t(e,r.item)?r.replacement:l(e))}},iM=e=>t=>{let r=[],o=(e,t)=>q(r,r=>t(r.item,e)),l=o=>{let l=t.replace(o,e,"td"===e?{scope:null}:{});return r.push({item:o,sub:l}),l};return{replaceOrInit:(e,t)=>iN(e)||i_(e)?e:o(e,t).fold(()=>l(e),r=>t(e,r.item)?r.sub:l(e))}},iL=e=>({unmerge:t=>{let r=ij(t);return r.each(e=>eW(t,"scope",e)),()=>{let o=e.cell({element:t,colspan:1,rowspan:1});return rc(o,"width"),rc(t,"width"),r.each(e=>eW(o,"scope",e)),o}},merge:e=>(rc(e[0],"width"),(()=>{let t=t1(M(e,ij));if(0===t.length)return E.none();{let e=t[0],r=["row","col"];return j(t,t=>t!==e&&z(r,t))?E.none():E.from(e)}})().fold(()=>eF(e[0],"scope"),t=>eW(e[0],"scope",t+"group")),y(e[0]))}),iI=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],iP=(e,t)=>z(["ol","ul"],e.property().name(t)),iF=(e,t)=>z(iI,e.property().name(t)),iH=(e,t)=>z(["br","img","hr","input"],e.property().name(t)),i$=sm(),iV=e=>iF(i$,e),iq=e=>iP(i$,e),iU=e=>iH(i$,e),iG=e=>{let t=ez("br"),r=e=>Y(e,e=>t(e)||e_(e)&&0===l1(e).trim().length),o=e=>"li"===eR(e)||tU(e,iq).isSome(),l=e=>e2(e).map(e=>!!iV(e)||!!iU(e)&&"img"!==eR(e)).getOr(!1),n=e=>ne(e).bind(r=>{let n=l(r);return e0(r).map(l=>!0===n||o(l)||t(r)||iV(l)&&!eY(e,l)?[]:[eV.fromTag("br")])}).getOr([]),s=(()=>{let t=K(e,e=>{let t=e5(e);return r(t)?[]:t.concat(n(e))});return 0===t.length?[eV.fromTag("br")]:t})();ts(e[0]),tn(e[0],s)},iK=e=>nV(e,!0),iY=e=>{0===rS(e).length&&ta(e)},iJ=(e,t)=>({grid:e,cursor:t}),iQ=e=>er(e,e=>er(e.cells,e=>{let t=e.element;return t3(iK(t),t)})),iX=(e,t,r)=>{var o,l;let n=ox(e).rows;return E.from(null===(l=null===(o=n[t])||void 0===o?void 0:o.cells[r])||void 0===l?void 0:l.element).filter(iK).orThunk(()=>iQ(n))},iZ=(e,t,r)=>{let o=iX(e,t,r);return iJ(e,o)},i0=e=>$(e,(e,t)=>j(e,e=>e.row===t.row)?e:e.concat([t]),[]).sort((e,t)=>e.row-t.row),i1=(e,t)=>(r,o,l,n,s)=>iZ(iu(r,M(i0(o),e=>e.row),e,t,l,n.replaceOrInit,s),o[0].row,o[0].column),i9=i1("thead",!0),i3=i1("tbody",!1),i2=i1("tfoot",!1),i5=(e,t,r)=>{let o=rB(e,r.section);return aT(oB.generate(o),t,!0)},i7=(e,t,r,o)=>iE(e,t,r,o.sizing),i4=(e,t,r,o)=>ik(e,t,r,o.sizing,o.resize),i6=(e,t)=>j(t,e=>0===e.column&&e.isLocked),i8=(e,t)=>j(t,t=>t.column+t.colspan>=e.grid.columns&&t.isLocked),me=(e,t)=>{let r=oN(e);return $(iA(t),(e,t)=>e+r[t.column].map(ou).getOr(0),0)},mt=e=>(t,r)=>a_(t,r).filter(r=>!(e?i6:i8)(t,r)).map(e=>({details:e,pixelDelta:me(t,e)})),mr=e=>(t,r)=>ak(t,r).filter(r=>!(e?i6:i8)(t,r.cells)),mo=iM("th"),ml=iM("td"),mn=aO((e,t,r,o)=>{let l=t[0].row;return iZ(H(i0(t),(e,t)=>({grid:a3(e.grid,l,t.row+e.delta,r,o.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid,l,t[0].column)},a_,b,b,iW),ms=aO((e,t,r,o)=>{let l=i0(t),n=l[l.length-1],s=n.row+n.rowspan;return iZ(H(l,(e,t)=>a3(e,s,t.row,r,o.getOrInit),e),s,t[0].column)},a_,b,b,iW),ma=aO((e,t,r,o)=>{let l=t.details,n=iA(l),s=n[0].column;return iZ(H(n,(e,t)=>({grid:a5(e.grid,s,t.column+e.delta,r,o.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid,l[0].row,s)},mt(!0),i4,b,iW),mi=aO((e,t,r,o)=>{let l=t.details,n=l[l.length-1],s=n.column+n.colspan;return iZ(H(iA(l),(e,t)=>a5(e,s,t.column,r,o.getOrInit),e),l[0].row,s)},mt(!1),i4,b,iW),mm=aO((e,t,r,o)=>{let l=iA(t.details),n=a7(e,M(l,e=>e.column)),s=n.length>0?n[0].cells.length-1:0;return iZ(n,l[0].row,Math.min(l[0].column,s))},(e,t)=>aB(e,t).map(t=>({details:t,pixelDelta:-me(e,t)})),i4,iY,iW),md=aO((e,t,r,o)=>{let l=i0(t),n=a4(e,l[0].row,l[l.length-1].row),s=Math.max(ox(n).rows.length-1,0);return iZ(n,Math.min(t[0].row,s),t[0].column)},a_,b,iY,iW),mc=aO((e,t,r,o)=>iZ(ic(e,M(iA(t),e=>e.column),!0,r,o.replaceOrInit),t[0].row,t[0].column),aB,b,b,mo),mu=aO((e,t,r,o)=>iZ(ic(e,M(iA(t),e=>e.column),!1,r,o.replaceOrInit),t[0].row,t[0].column),aB,b,b,ml),mf=aO(i9,a_,b,b,mo),mg=aO(i3,a_,b,b,ml),mh=aO(i2,a_,b,b,ml),mp=aO((e,t,r,o)=>iZ(ig(e,t,r,o.replaceOrInit),t[0].row,t[0].column),aB,b,b,mo),mb=aO((e,t,r,o)=>iZ(ig(e,t,r,o.replaceOrInit),t[0].row,t[0].column),aB,b,b,ml),mw=aO((e,t,r,o)=>{let l=t.cells;return iG(l),iJ(aj(e,t.bounds,r,o.merge(l)),E.from(l[0]))},(e,t)=>aE(e,t).filter(t=>az(e,t.cells)),i7,b,iL),mv=aO((e,t,r,o)=>iJ(H(t,(e,t)=>aW(e,t,r,o.unmerge(t)),e),E.from(t[0])),(e,t)=>aA(e,t).filter(t=>az(e,t)),i7,b,iL),my=aO((e,t,r,o)=>{var l,n;let s=(l=t.clipboard,n=t.generators,aT(oB.fromTable(l),n,!0));return aZ(tw(t.row,t.column),e,s,t.generators,r).fold(()=>iJ(e,E.some(t.element)),e=>iZ(e,t.row,t.column))},(e,t)=>rx(t.element).bind(r=>aR(e,r).map(e=>({...e,generators:t.generators,clipboard:t.clipboard}))),i7,b,iW),mC=aO((e,t,r,o)=>{let l=ox(e).rows,n=t.cells[0].column,s=l[t.cells[0].row];return iZ(a0(n,e,i5(t.clipboard,t.generators,s),t.generators,r),t.cells[0].row,t.cells[0].column)},mr(!0),b,b,iW),mT=aO((e,t,r,o)=>{let l=ox(e).rows,n=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,s=l[t.cells[0].row];return iZ(a0(n,e,i5(t.clipboard,t.generators,s),t.generators,r),t.cells[0].row,n)},mr(!1),b,b,iW),mx=aO((e,t,r,o)=>{let l=ox(e).rows,n=t.cells[0].row,s=l[n];return iZ(a1(n,e,i5(t.clipboard,t.generators,s),t.generators,r),t.cells[0].row,t.cells[0].column)},ak,b,b,iW),mS=aO((e,t,r,o)=>{let l=ox(e).rows,n=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,s=l[t.cells[0].row];return iZ(a1(n,e,i5(t.clipboard,t.generators,s),t.generators,r),n,t.cells[0].column)},ak,b,b,iW),mR=(e,t)=>{let r=oB.fromTable(e);return a_(r,t).bind(e=>{let t=e[e.length-1],o=e[0].column,l=t.column+t.colspan;return ao(G(M(r.all,e=>F(e.cells,e=>e.column>=o&&e.column<l))))}).getOr("")},mD=(e,t)=>a_(oB.fromTable(e),t).bind(ao).getOr(""),mO=(e,t)=>{let r=oB.fromTable(e);return a_(r,t).bind(e=>{let t=e[e.length-1],o=e[0].row,l=t.row+t.rowspan;return al(r.all.slice(o,l))}).getOr("")},mk=(e,t)=>e.dispatch("NewRow",{node:t}),mE=(e,t)=>e.dispatch("NewCell",{node:t}),mA=(e,t,r)=>{e.dispatch("TableModified",{...r,table:t})},m_=(e,t,r,o,l)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:o,otherCells:l})},mB=e=>{e.dispatch("TableSelectionClear")},mN=(e,t,r,o,l)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:o,origin:l})},mz=(e,t,r,o,l)=>{e.dispatch("ObjectResized",{target:t,width:r,height:o,origin:l})},mj={structure:!1,style:!0},mW={structure:!0,style:!1},mM={structure:!0,style:!0},mL=(e,t)=>nk(e)?lU.percentageSize(t):nE(e)?lU.pixelSize(t):lU.getTableSize(t),mI=(e,t,r)=>{let o=e=>"table"===eR(nU(e)),l=nC(e),n=nD(e)?b:s0,s=t=>{switch(nx(e)){case"section":return ac.section();case"sectionCells":return ac.sectionCells();case"cells":return ac.cells();default:return ac.getTableSectionType(t,"section")}},a=(t,o)=>o.cursor.fold(()=>ee(rS(t)).filter(tW).map(o=>{r.clearSelectedCells(t.dom);let l=e.dom.createRng();return l.selectNode(o.dom),e.selection.setRng(l),eW(o,"data-mce-selected","1"),l}),o=>{let l=sZ(o),n=e.dom.createRng();return n.setStart(l.element.dom,l.offset),n.setEnd(l.element.dom,l.offset),e.selection.setRng(n),r.clearSelectedCells(t.dom),E.some(n)}),i=(r,o,n,i)=>(m,d,c=!1)=>{nK(m);let u=nc(n,eV.fromDom(e.getDoc()),l),f={sizing:mL(e,m),resize:nD(e)?s7():s4(),section:s(m)};return o(m)?r(m,d,u,f).bind(r=>{t.refresh(m.dom),L(r.newRows,t=>{mk(e,t.dom)}),L(r.newCells,t=>{mE(e,t.dom)});let o=a(m,r);return tW(m)&&(nK(m),c||mA(e,m.dom,i)),o.map(e=>({rng:e,effect:i}))}):E.none()},m=i(md,t=>!o(e)||s6(t).rows>1,b,mW),d=i(mm,t=>!o(e)||s6(t).columns>1,b,mW),c=i(mn,k,b,mW),u=i(ms,k,b,mW),f=i(ma,k,n,mW),g=i(mi,k,n,mW),h=i(mw,k,b,mW),p=i(mv,k,b,mW),w=i(mC,k,b,mW),v=i(mT,k,b,mW),y=i(mx,k,b,mW),C=i(mS,k,b,mW),T=i(my,k,b,mM),x=i(mp,k,b,mW),S=i(mb,k,b,mW),R=i(mc,k,b,mW),D=i(mu,k,b,mW),O=i(mf,k,b,mW),A=i(mg,k,b,mW);return{deleteRow:m,deleteColumn:d,insertRowsBefore:c,insertRowsAfter:u,insertColumnsBefore:f,insertColumnsAfter:g,mergeCells:h,unmergeCells:p,pasteColsBefore:w,pasteColsAfter:v,pasteRowsBefore:y,pasteRowsAfter:C,pasteCells:T,makeCellsHeader:x,unmakeCellsHeader:S,makeColumnsHeader:R,unmakeColumnsHeader:D,makeRowsHeader:O,makeRowsBody:A,makeRowsFooter:i(mh,k,b,mW),getTableRowType:mO,getTableCellType:mD,getTableColType:mR}},mP=(e,t,r)=>{let o=rf(e,t,1);1===r||o<=1?eF(e,t):eW(e,t,Math.min(r,o))},mF=(e,t)=>r=>{let o=r.column+r.colspan-1,l=r.column;return o>=e&&l<t},mH=(e,t,r)=>{if(!oB.hasColumns(e))return[];{let o=M(F(oB.justColumns(e),mF(t,r)),e=>{let o=tc(e.element);return mP(o,"span",r-t),o}),l=eV.fromTag("colgroup");return tn(l,o),[l]}},m$=(e,t,r)=>M(e.all,e=>{let o=M(F(e.cells,mF(t,r)),e=>{let o=tc(e.element);return mP(o,"colspan",r-t),o}),l=eV.fromTag("tr");return tn(l,o),l}),mV=(e,t)=>{let r=oB.fromTable(e);return aB(r,t).map(e=>{let t=e[e.length-1],o=e[0].column,l=t.column+t.colspan;return[...mH(r,o,l),...m$(r,o,l)]})},mq=(e,t,r)=>{let o=oB.fromTable(e);return a_(o,t).bind(e=>{let t=aS(K(ox(aT(o,r,!1)).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),e=>{let t=F(e.cells,e=>!e.isLocked);return t.length>0?[{...e,cells:t}]:[]}));return t3(t.length>0,t)}).map(e=>ap(e))},mU=ih([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),mG=(e,t,r)=>{let o=r.substring(0,r.length-e.length),l=parseFloat(o);return o===l.toString()?t(l):mU.invalid(r)},mK={...mU,from:e=>t8(e,"%")?mG("%",mU.percent,e):t8(e,"px")?mG("px",mU.pixels,e):mU.invalid(e)},mY=(e,t)=>M(e,e=>mK.from(e).fold(()=>e,e=>e/t*100+"%",e=>e+"%")),mJ=(e,t,r)=>{let o=r/t;return M(e,e=>mK.from(e).fold(()=>e,e=>e*o+"px",e=>e/100*r+"px"))},mQ=(e,t)=>{let r=e.fold(()=>y(""),e=>y(e/t+"px"),()=>y(100/t+"%"));return W(t,r)},mX=(e,t,r)=>e.fold(()=>t,e=>mJ(t,r,e),e=>mY(t,r)),mZ=(e,t,r)=>{let o=mK.from(r);return m3(Y(e,e=>"0px"===e)?mQ(o,e.length):mX(o,e,t))},m0=(e,t)=>0===e.length?t:H(e,(e,t)=>mK.from(t).fold(y(0),C,C)+e,0),m1=(e,t)=>{let r=Math.floor(e);return{value:r+t,remainder:e-r}},m9=(e,t)=>mK.from(e).fold(y(e),e=>e+t+"px",e=>e+t+"%"),m3=e=>{if(0===e.length)return e;let t=H(e,(e,t)=>{let r=mK.from(t).fold(()=>({value:t,remainder:0}),e=>m1(e,"px"),e=>({value:e+"%",remainder:0}));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}},{output:[],remainder:0}),r=t.output;return r.slice(0,r.length-1).concat([m9(r[r.length-1],Math.round(t.remainder))])},m2=mK.from,m5=(e,t,r)=>{L(t,t=>{let o=m0(e.slice(t.column,t.colspan+t.column),rw());rs(t.element,"width",o+r)})},m7=(e,t,r)=>{L(t,(t,o)=>{let l=m0([e[o]],rw());rs(t.element,"width",l+r)})},m4=(e,t,r)=>{L(r,e=>{rc(e.element,"height")}),L(t,(t,r)=>{rs(t.element,"height",e[r])})},m6=e=>m2(e).fold(y("px"),y("px"),y("%")),m8=(e,t,r)=>{let o=oB.fromTable(e),l=o.all,n=oB.justCells(o),s=oB.justColumns(o);t.each(t=>{let r=m6(t),l=oc(e),a=mZ(lj(o,e),l,t);oB.hasColumns(o)?m7(a,s,r):m5(a,n,r),rs(e,"width",t)}),r.each(t=>{let r=oP(e);m4(mZ(lP(o,e),r,t),l,n),rs(e,"height",t)})},de=e=>lp(e).exists(e=>lt.test(e)),dt=e=>lp(e).exists(e=>lr.test(e)),dr=e=>lp(e).isNone(),dl=e=>{eF(e,"width"),eF(e,"height")},dn=e=>{let t=lR(e);m8(e,E.some(t),E.none()),dl(e)},ds=e=>{let t=lx(e);m8(e,E.some(t),E.none()),dl(e)},da=e=>{let t=lS(e);m8(e,E.none(),E.some(t)),dl(e)},di=e=>{rc(e,"width");let t=rR(e);L(t.length>0?t:rS(e),e=>{rc(e,"width"),dl(e)}),dl(e)},dm={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},dd=()=>eV.fromTag("th"),dc=()=>eV.fromTag("td"),du=()=>eV.fromTag("col"),df=(e,t,r,o)=>{let l=eV.fromTag("tr");for(let n=0;n<e;n++){let e=o<t||n<r?dd():dc();n<r&&eW(e,"scope","row"),o<t&&eW(e,"scope","col"),tt(e,eV.fromTag("br")),tt(l,e)}return l},dg=e=>{let t=eV.fromTag("colgroup");return W(e,()=>tt(t,du())),t},dh=(e,t,r,o)=>W(e,e=>df(t,r,o,e)),dp=(e,t,r,o,l,n=dm)=>{let s=eV.fromTag("table"),a="cells"!==l;ra(s,n.styles),eM(s,n.attributes),n.colGroups&&tt(s,dg(t));let i=Math.min(e,r);if(a&&r>0){let e=eV.fromTag("thead");tt(s,e),tn(e,dh(r,t,"sectionCells"===l?i:0,o))}let m=eV.fromTag("tbody");tt(s,m);let d=a?0:r;return tn(m,dh(a?e-i:e,t,d,o)),s},db=e=>e.dom.innerHTML,dw=e=>{let t=eV.fromTag("div");return tt(t,eV.fromDom(e.dom.cloneNode(!0))),db(t)},dv=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},dy=(e,t)=>{tX(t,"td,th").each(x(dv,e))},dC=(e,t)=>{L(tV(t,"tr"),t=>{mk(e,t.dom),L(tV(t,"th,td"),t=>{mE(e,t.dom)})})},dT=e=>a(e)&&-1!==e.indexOf("%"),dx=(e,t,r,o,l)=>{let n=nj(e),s={styles:n,attributes:nz(e),colGroups:nW(e)};return e.undoManager.ignore(()=>{let n=dp(r,t,l,o,nx(e),s);eW(n,"data-mce-id","__mce");let a=dw(n);e.insertContent(a),e.addVisual()}),tX(nU(e),'table[data-mce-id="__mce"]').map(t=>(nE(e)?ds(t):nA(e)?di(t):(nk(e)||dT(n.width))&&dn(t),nK(t),eF(t,"data-mce-id"),dC(e,t),dy(e,t),t.dom)).getOrNull()},dS=(e,t,r,o={})=>{let l=e=>p(e)&&e>0;if(!(l(t)&&l(r)))return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null;{let l=o.headerRows||0;return dx(e,r,t,o.headerColumns||0,l)}};var dR=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let dD="x-tinymce/dom-table-",dO=dD+"rows",dk=dD+"columns",dE=e=>{let t=dR.FakeClipboardItem(e);dR.write([t])},dA=e=>{var t;return er(null!==(t=dR.read())&&void 0!==t?t:[],t=>E.from(t.getType(e)))},d_=e=>{dA(e).isSome()&&dR.clear()},dB=e=>{e.fold(dz,e=>dE({[dO]:e}))},dN=()=>dA(dO),dz=()=>d_(dO),dj=e=>{e.fold(dM,e=>dE({[dk]:e}))},dW=()=>dA(dk),dM=()=>d_(dk),dL=e=>sP(nY(e),nG(e)).filter(n3),dI=e=>sF(nY(e),nG(e)).filter(n3),dP=(e,t)=>{let r=nG(e),o=t=>dL(e).each(o=>{nA(e)||nE(e)||nk(e)||rD(o,r).each(r=>{"relative"!==t||de(r)?"fixed"!==t||dt(r)?"responsive"!==t||dr(r)||di(r):ds(r):dn(r),nK(r),mA(e,r.dom,mW)})}),l=e=>rD(e,r),n=t=>dI(e).bind(e=>l(e).map(r=>t(r,e))),s=t=>{e.focus()},m=(t,r=!1)=>n((o,l)=>{let n=sj(sH(e),o,l);t(o,n,r).each(s)}),d=()=>n((t,r)=>{let o=sj(sH(e),t,r);return mq(t,o,nc(b,eV.fromDom(e.getDoc()),E.none()))}),c=()=>n((t,r)=>{let o=sj(sH(e),t,r);return mV(t,o)}),u=(t,r)=>r().each(r=>{let o=M(r,e=>tc(e));n((r,l)=>{let n=nu(eV.fromDom(e.getDoc()));t(r,sM(sH(e),l,o,n)).each(s)})}),f=e=>(t,r)=>ef(r,"type").each(t=>{m(e(t),r.no_events)});en({mceTableSplitCells:()=>m(t.unmergeCells),mceTableMergeCells:()=>m(t.mergeCells),mceTableInsertRowBefore:()=>m(t.insertRowsBefore),mceTableInsertRowAfter:()=>m(t.insertRowsAfter),mceTableInsertColBefore:()=>m(t.insertColumnsBefore),mceTableInsertColAfter:()=>m(t.insertColumnsAfter),mceTableDeleteCol:()=>m(t.deleteColumn),mceTableDeleteRow:()=>m(t.deleteRow),mceTableCutCol:()=>c().each(e=>{dj(e),m(t.deleteColumn)}),mceTableCutRow:()=>d().each(e=>{dB(e),m(t.deleteRow)}),mceTableCopyCol:()=>c().each(e=>dj(e)),mceTableCopyRow:()=>d().each(e=>dB(e)),mceTablePasteColBefore:()=>u(t.pasteColsBefore,dW),mceTablePasteColAfter:()=>u(t.pasteColsAfter,dW),mceTablePasteRowBefore:()=>u(t.pasteRowsBefore,dN),mceTablePasteRowAfter:()=>u(t.pasteRowsAfter,dN),mceTableDelete:()=>dL(e).each(t=>{rD(t,r).filter(S(r)).each(t=>{let r=eV.fromText("");if(e8(t,r),ta(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{let t=e.dom.createRng();t.setStart(r.dom,0),t.setEnd(r.dom,0),e.selection.setRng(t),e.nodeChanged()}})}),mceTableCellToggleClass:(t,r)=>{n(t=>{let o=sH(e),l=Y(o,t=>e.formatter.match("tablecellclass",{value:r},t.dom))?e.formatter.remove:e.formatter.apply;L(o,e=>l("tablecellclass",{value:r},e.dom)),mA(e,t.dom,mj)})},mceTableToggleClass:(t,r)=>{n(t=>{e.formatter.toggle("tableclass",{value:r},t.dom),mA(e,t.dom,mj)})},mceTableToggleCaption:()=>{dL(e).each(t=>{rD(t,r).each(r=>{tQ(r,"caption").fold(()=>{let t=eV.fromTag("caption");tt(t,eV.fromText("Caption")),tr(r,t,0),e.selection.setCursorLocation(t.dom,0)},o=>{ez("caption")(t)&&eK("td",r).each(t=>e.selection.setCursorLocation(t.dom,0)),ta(o)}),mA(e,r.dom,mW)})})},mceTableSizingMode:(e,t)=>o(t),mceTableCellType:f(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:f(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:f(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(t,r)=>e.addCommand(r,t)),e.addCommand("mceInsertTable",(t,r)=>{dS(e,r.rows,r.columns,r.options)}),e.addCommand("mceTableApplyCellStyle",(t,r)=>{let o=e=>"tablecell"+e.toLowerCase().replace("-","");if(!i(r))return;let n=F(sH(e),n3);if(0===n.length)return;let s=ed(r,(t,r)=>e.formatter.has(o(r))&&a(t));!ep(s)&&(en(s,(t,r)=>{let l=o(r);L(n,r=>{""===t?e.formatter.remove(l,{value:null},r.dom,!0):e.formatter.apply(l,{value:t},r.dom)})}),l(n[0]).each(t=>mA(e,t.dom,mj)))})},dF=(e,t)=>{let r=nG(e),o=t=>sF(nY(e)).bind(o=>rD(o,r).map(r=>{let l=sj(sH(e),r,o);return t(r,l)})).getOr("");en({mceTableRowType:()=>o(t.getTableRowType),mceTableCellType:()=>o(t.getTableCellType),mceTableColType:()=>o(t.getTableColType)},(t,r)=>e.addQueryValueHandler(r,t))},dH=ih([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),d$=dH.before,dV={before:d$,on:dH.on,after:dH.after,getStart:e=>e.fold(C,C,C)},dq={create:(e,t)=>({selection:e,kill:t})},dU=(e,t)=>{let r=e.document.createRange();return r.selectNode(t.dom),r},dG=(e,t)=>{let r=e.document.createRange();return dK(r,t),r},dK=(e,t)=>e.selectNodeContents(t.dom),dY=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,r)=>{e.setStart(t.dom,r)},t=>{e.setStartAfter(t.dom)})},dJ=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,r)=>{e.setEnd(t.dom,r)},t=>{e.setEndAfter(t.dom)})},dQ=(e,t,r)=>{let o=e.document.createRange();return dY(o,t),dJ(o,r),o},dX=(e,t,r,o,l)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(o.dom,l),n},dZ=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),d0=e=>{let t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?E.some(r).map(dZ):E.none()},d1=ih([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),d9=(e,t,r)=>t(eV.fromDom(r.startContainer),r.startOffset,eV.fromDom(r.endContainer),r.endOffset),d3=(e,t)=>t.match({domRange:e=>({ltr:y(e),rtl:E.none}),relative:(t,r)=>({ltr:rN(()=>dQ(e,t,r)),rtl:rN(()=>E.some(dQ(e,r,t)))}),exact:(t,r,o,l)=>({ltr:rN(()=>dX(e,t,r,o,l)),rtl:rN(()=>E.some(dX(e,o,l,t,r)))})}),d2=(e,t)=>{let r=t.ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>d1.rtl(eV.fromDom(e.endContainer),e.endOffset,eV.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>d9(e,d1.ltr,r)):d9(e,d1.ltr,r)},d5=(e,t)=>{let r=d3(e,t);return d2(e,r)},d7=(e,t)=>d5(e,t).match({ltr:(t,r,o,l)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(o.dom,l),n},rtl:(t,r,o,l)=>{let n=e.document.createRange();return n.setStart(o.dom,l),n.setEnd(t.dom,r),n}});d1.ltr,d1.rtl;let d4={create:(e,t,r,o)=>({start:e,soffset:t,finish:r,foffset:o})},d6=(e,t,r,o)=>({start:dV.on(e,t),finish:dV.on(r,o)}),d8=(e,t)=>{let r=d7(e,t);return d4.create(eV.fromDom(r.startContainer),r.startOffset,eV.fromDom(r.endContainer),r.endOffset)},ce=(e,t,r,o,l,n,s)=>eY(r,l)&&o===n?E.none():tZ(r,"td,th",t).bind(r=>tZ(l,"td,th",t).bind(o=>ct(e,t,r,o,s))),ct=(e,t,r,o,l)=>eY(r,o)?E.none():sy(r,o,t).bind(t=>{let o=t.boxes.getOr([]);return o.length>1?(l(e,o,t.start,t.finish),E.some(dq.create(E.some(d6(r,0,r,l2(r))),!0))):E.none()}),cr=(e,t,r,o,l)=>sR(o,e,t,l.firstSelectedSelector,l.lastSelectedSelector).map(e=>(l.clearBeforeUpdate(r),l.selectRange(r,e.boxes,e.start,e.finish),e.boxes)),co=(e,t)=>({item:e,mode:t}),cl=(e,t,r,o=cn)=>e.property().parent(t).map(e=>co(e,o)),cn=(e,t,r,o=cs)=>r.sibling(e,t).map(e=>co(e,o)),cs=(e,t,r,o=cs)=>{let l=e.property().children(t);return r.first(l).map(e=>co(e,o))},ca=[{current:cl,next:cn,fallback:E.none()},{current:cn,next:cs,fallback:E.some(cl)},{current:cs,next:cs,fallback:E.some(cn)}],ci=(e,t,r,o,l=ca)=>q(l,e=>e.current===r).bind(r=>r.current(e,t,o,r.next).orThunk(()=>r.fallback.bind(r=>ci(e,t,r,o)))),cm=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?E.some(e[e.length-1]):E.none()}),cd=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?E.some(e[0]):E.none()}),cc=(e,t,r,o,l,n)=>ci(e,t,o,l).bind(t=>n(t.item)?E.none():r(t.item)?E.some(t.item):cc(e,t.item,r,t.mode,l,n)),cu=e=>t=>0===e.property().children(t).length,cf=(e,t,r)=>ch(e,t,cu(e),r),cg=(e,t,r)=>cp(e,t,cu(e),r),ch=(e,t,r,o)=>cc(e,t,r,cn,cm(),o),cp=(e,t,r,o)=>cc(e,t,r,cn,cd(),o),cb=sm(),cw=(e,t)=>cf(cb,e,t),cv=(e,t)=>cg(cb,e,t),cy=(e,t,r)=>ch(cb,e,t,r),cC=(e,t,r)=>cp(cb,e,t,r),cT=(e,t,r)=>tU(e,t,r).isSome(),cx=ih([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),cS=(e,t,r)=>{let o=e.getRect(t),l=e.getRect(r);return l.right>o.left&&l.left<o.right},cR=e=>tZ(e,"tr"),cD={...cx,verify:(e,t,r,o,l,n,s)=>tZ(o,"td,th",s).bind(r=>tZ(t,"td,th",s).map(t=>eY(r,t)?eY(o,r)&&l2(r)===l?n(t):cx.none("in same cell"):sb(cR,[r,t]).fold(()=>cS(e,t,r)?cx.success():n(t),e=>n(t)))).getOr(cx.none("default")),cata:(e,t,r,o,l)=>e.fold(t,r,o,l)},cO=(e,t,r,o)=>({parent:e,children:t,element:r,index:o}),ck=e=>e0(e).bind(t=>{let r=e5(t);return cE(r,e).map(o=>cO(t,r,e,o))}),cE=(e,t)=>U(e,x(eY,t)),cA=ez("br"),c_=(e,t,r)=>t(e,r).bind(e=>e_(e)&&0===l1(e).trim().length?c_(e,t,r):E.some(e)),cB=(e,t,r)=>r.traverse(t).orThunk(()=>c_(t,r.gather,e)).map(r.relative),cN=(e,t)=>e7(e,t).filter(cA).orThunk(()=>e7(e,t-1).filter(cA)),cz=(e,t,r,o)=>cN(t,r).bind(t=>o.traverse(t).fold(()=>c_(t,o.gather,e).map(o.relative),e=>ck(e).map(e=>dV.on(e.parent,e.index)))),cj=(e,t,r,o)=>(cA(t)?cB(e,t,o):cz(e,t,r,o)).map(e=>({start:e,finish:e})),cW=e=>cD.cata(e,e=>E.none(),()=>E.none(),e=>E.some(sK(e,0)),e=>E.some(sK(e,l2(e)))),cM=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),cL=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),cI=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),cP=(e,t,r)=>r>=0&&r<l2(t)?e.getRangedRect(t,r,t,r+1):r>0?e.getRangedRect(t,r-1,t,r):E.none(),cF=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),cH=(e,t)=>E.some(e.getRect(t)),c$=(e,t,r)=>eA(t)?cH(e,t).map(cF):e_(t)?cP(e,t,r).map(cF):E.none(),cV=(e,t)=>eA(t)?cH(e,t).map(cF):e_(t)?e.getRangedRect(t,0,t,l2(t)).map(cF):E.none(),cq=ih([{none:[]},{retry:["caret"]}]),cU=(e,t)=>e.left<t.left||1>Math.abs(t.right-e.left)||e.left>t.right,cG=(e,t,r)=>tG(t,iV).fold(O,t=>cV(e,t).exists(e=>cU(r,e))),cK=(e,t,r)=>e.elementFromPoint(t,r).filter(e=>"table"===eR(e)).isSome(),cY=(e,t,r,o,l)=>cJ(e,t,r,t.move(o,5),l),cJ=(e,t,r,o,l)=>0===l?E.some(o):cK(e,o.left,t.point(o))?cY(e,t,r,o,l-1):e.situsFromPoint(o.left,t.point(o)).bind(n=>n.start.fold(E.none,n=>cV(e,n).bind(s=>t.adjuster(e,n,s,r,o).fold(E.none,o=>cJ(e,t,r,o,l-1))).orThunk(()=>E.some(o)),E.none)),cQ=(e,t,r)=>e.point(t)>r.getInnerHeight()?E.some(e.point(t)-r.getInnerHeight()):0>e.point(t)?E.some(-e.point(t)):E.none(),cX=(e,t,r)=>{let o=e.move(r,5),l=cJ(t,e,r,o,100).getOr(o);return cQ(e,l,t).fold(()=>t.situsFromPoint(l.left,e.point(l)),r=>(t.scrollBy(0,r),t.situsFromPoint(l.left,e.point(l)-r)))},cZ={tryUp:x(cX,{point:e=>e.top,adjuster:(e,t,r,o,l)=>{let n=cL(l,5);return 1>Math.abs(r.top-o.top)||r.bottom<l.top?cq.retry(n):r.bottom===l.top?cq.retry(cL(l,1)):cG(e,t,l)?cq.retry(cI(n,5,0)):cq.none()},move:cL,gather:cw}),tryDown:x(cX,{point:e=>e.bottom,adjuster:(e,t,r,o,l)=>{let n=cM(l,5);return 1>Math.abs(r.bottom-o.bottom)||r.top>l.bottom?cq.retry(n):r.top===l.bottom?cq.retry(cM(l,1)):cG(e,t,l)?cq.retry(cI(n,5,0)):cq.none()},move:cM,gather:cv}),getJumpSize:y(5)},c0=(e,t,r)=>e.getSelection().bind(o=>cj(t,o.finish,o.foffset,r).fold(()=>E.some(sK(o.finish,o.foffset)),l=>{let n=e.fromSitus(l);return cW(cD.verify(e,o.finish,o.foffset,n.finish,n.foffset,r.failure,t))})),c1=(e,t,r,o,l,n)=>0===n?E.none():c2(e,t,r,o,l).bind(s=>{let a=e.fromSitus(s),i=cD.verify(e,r,o,a.finish,a.foffset,l.failure,t);return cD.cata(i,()=>E.none(),()=>E.some(s),s=>eY(r,s)&&0===o?c9(e,r,o,cL,l):c1(e,t,s,0,l,n-1),s=>eY(r,s)&&o===l2(s)?c9(e,r,o,cM,l):c1(e,t,s,l2(s),l,n-1))}),c9=(e,t,r,o,l)=>c$(e,t,r).bind(t=>c3(e,l,o(t,cZ.getJumpSize()))),c3=(e,t,r)=>{let o=ol().browser;return o.isChromium()||o.isSafari()||o.isFirefox()?t.retry(e,r):E.none()},c2=(e,t,r,o,l)=>c$(e,r,o).bind(t=>c3(e,l,t)),c5=(e,t,r)=>c0(e,t,r).bind(o=>c1(e,t,o.element,o.offset,r,20).map(e.fromSitus)),c7=(e,t)=>cT(e,e=>e0(e).exists(e=>eY(e,t))),c4=(e,t,r,o,l)=>tZ(o,"td,th",t).bind(o=>tZ(o,"table",t).bind(n=>c7(l,n)?c5(e,t,r).bind(e=>tZ(e.finish,"td,th",t).map(t=>({start:o,finish:t,range:e}))):E.none())),c6=(e,t,r,o,l,n)=>n(o,t).orThunk(()=>c4(e,t,r,o,l).map(e=>{let t=e.range;return dq.create(E.some(d6(t.start,t.soffset,t.finish,t.foffset)),!0)})),c8=(e,t)=>tZ(e,"tr",t).bind(e=>tZ(e,"table",t).bind(r=>eY(e,tV(r,"tr")[0])?cy(r,e=>ne(e).isSome(),t).map(e=>{let t=l2(e);return dq.create(E.some(d6(e,t,e,t)),!0)}):E.none())),ue=(e,t)=>tZ(e,"tr",t).bind(e=>tZ(e,"table",t).bind(r=>{let o=tV(r,"tr");return eY(e,o[o.length-1])?cC(r,e=>l8(e).isSome(),t).map(e=>dq.create(E.some(d6(e,0,e,0)),!0)):E.none()})),ut=(e,t,r,o,l,n,s)=>c4(e,r,o,l,n).bind(e=>ct(t,r,e.start,e.finish,s)),ur=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},uo=e=>{let t=ur(E.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(E.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(E.some(e))}}},ul=()=>{let e=uo(b);return{...e,on:t=>e.get().each(t)}},un=(e,t)=>tZ(e,"td,th",t),us=e=>e1(e).exists(nV),ua=(e,t,r,o)=>{let l=ul(),n=l.clear,s=n=>{l.on(l=>{o.clearBeforeUpdate(t),un(n.target,r).each(s=>{sy(l,s,r).each(r=>{let l=r.boxes.getOr([]);if(1===l.length){let e=l[0],r="false"===nq(e),s=t0(n$(n.target),e,eY);r&&s&&o.selectRange(t,l,e,e)}else l.length>1&&(o.selectRange(t,l,r.start,r.finish),e.selectContents(s))})})})};return{clearstate:n,mousedown:e=>{o.clear(t),un(e.target,r).filter(us).each(l.set)},mouseover:e=>{s(e)},mouseup:e=>{s(e),n()}}},ui={traverse:e2,gather:cv,relative:dV.before,retry:cZ.tryDown,failure:cD.failedDown},um={traverse:e3,gather:cw,relative:dV.before,retry:cZ.tryUp,failure:cD.failedUp},ud=e=>t=>t===e,uc=ud(38),uu=ud(40),uf=e=>e>=37&&e<=40,ug={isBackward:ud(37),isForward:ud(39)},uh={isBackward:ud(39),isForward:ud(37)},up=e=>{let t=void 0!==e?e.dom:document;return o$(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},ub=(e,t,r)=>{let o=(void 0!==r?r.dom:document).defaultView;o&&o.scrollBy(e,t)},uw=ih([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),uv=(uw.domRange,uw.relative),uy=uw.exact,uC=(d4.create,(e,t,r)=>{var o;return E.from(null===(o=e.caretPositionFromPoint)||void 0===o?void 0:o.call(e,t,r)).bind(t=>{if(null===t.offsetNode)return E.none();let r=e.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),E.some(r)})}),uT=(e,t,r)=>{var o;return E.from(null===(o=e.caretRangeFromPoint)||void 0===o?void 0:o.call(e,t,r))},ux=(e,t,r)=>e.caretPositionFromPoint?uC(e,t,r):e.caretRangeFromPoint?uT(e,t,r):E.none(),uS=(e,t,r)=>ux(e.document,t,r).map(e=>d4.create(eV.fromDom(e.startContainer),e.startOffset,eV.fromDom(e.endContainer),e.endOffset)),uR=(e,t)=>{let r=eR(e);return"input"===r?dV.after(e):z(["br","img"],r)?0===t?dV.before(e):dV.after(e):dV.on(e,t)},uD=(e,t)=>{let r=e.fold(dV.before,uR,dV.after);return uv(r,t.fold(dV.before,uR,dV.after))},uO=(e,t,r,o)=>{let l=uR(e,t);return uv(l,uR(r,o))},uk=(e,t,r,o)=>{let l=eQ(e).dom.createRange();return l.setStart(e.dom,t),l.setEnd(r.dom,o),l},uE=(e,t,r,o)=>{let l=uk(e,t,r,o),n=eY(e,r)&&t===o;return l.collapsed&&!n},uA=e=>E.from(e.getSelection()),u_=(e,t)=>{uA(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},uB=(e,t,r,o,l)=>{let n=dX(e,t,r,o,l);u_(e,n)},uN=(e,t,r,o,l,n)=>{t.collapse(r.dom,o),t.extend(l.dom,n)},uz=(e,t)=>d5(e,t).match({ltr:(t,r,o,l)=>{uB(e,t,r,o,l)},rtl:(t,r,o,l)=>{uA(e).each(n=>{if(n.setBaseAndExtent)n.setBaseAndExtent(t.dom,r,o.dom,l);else if(n.extend)try{uN(e,n,t,r,o,l)}catch(n){uB(e,o,l,t,r)}else uB(e,o,l,t,r)})}}),uj=(e,t,r,o,l)=>{uz(e,uO(t,r,o,l))},uW=(e,t,r)=>{uz(e,uD(t,r))},uM=e=>{if(!(e.rangeCount>0))return E.none();{let t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return E.some(d4.create(eV.fromDom(t.startContainer),t.startOffset,eV.fromDom(r.endContainer),r.endOffset))}},uL=e=>{if(null===e.anchorNode||null===e.focusNode)return uM(e);{let t=eV.fromDom(e.anchorNode),r=eV.fromDom(e.focusNode);return uE(t,e.anchorOffset,r,e.focusOffset)?E.some(d4.create(t,e.anchorOffset,r,e.focusOffset)):uM(e)}},uI=(e,t,r=!0)=>{let o=(r?dG:dU)(e,t);u_(e,o)},uP=e=>uA(e).filter(e=>e.rangeCount>0).bind(uL),uF=e=>uP(e).map(e=>uy(e.start,e.soffset,e.finish,e.foffset)),uH=(e,t)=>d0(d7(e,t)),u$=(e,t,r)=>uS(e,t,r),uV=e=>{uA(e).each(e=>e.removeAllRanges())},uq=e=>({elementFromPoint:(t,r)=>eV.fromPoint(eV.fromDom(e.document),t,r),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,r,o,l)=>uH(e,uy(t,r,o,l)),getSelection:()=>uF(e).map(t=>d8(e,t)),fromSitus:t=>d8(e,uv(t.start,t.finish)),situsFromPoint:(t,r)=>u$(e,t,r).map(e=>d6(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{uV(e)},collapseSelection:(t=!1)=>{uF(e).each(r=>r.fold(e=>e.collapse(t),(r,o)=>{let l=t?r:o;uW(e,l,l)},(r,o,l,n)=>{let s=t?r:l,a=t?o:n;uj(e,s,a,s,a)}))},setSelection:t=>{uj(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,r)=>{uW(e,t,r)},selectNode:t=>{uI(e,t,!1)},selectContents:t=>{uI(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>up(eV.fromDom(e.document)).top,scrollBy:(t,r)=>{ub(t,r,eV.fromDom(e.document))}}),uU=(e,t)=>({rows:e,cols:t}),uG=(e,t,r,o)=>{let l=ua(uq(e),t,r,o);return{clearstate:l.clearstate,mousedown:l.mousedown,mouseover:l.mouseover,mouseup:l.mouseup}},uK=e=>tG(e,eE).exists(nV),uY=(e,t)=>uK(e)||uK(t),uJ=(e,t,r,o)=>{let l=uq(e),n=()=>(o.clear(t),E.none());return{keydown:(e,s,a,i,m,d)=>{let c=e.raw,u=c.which,f=!0===c.shiftKey;return sC(t,o.selectedSelector).fold(()=>{if(uf(u)&&!f&&o.clearBeforeUpdate(t),uf(u)&&f&&!uY(s,i))return E.none;if(uu(u)&&f)return x(ut,l,t,r,ui,i,s,o.selectRange);if(uc(u)&&f)return x(ut,l,t,r,um,i,s,o.selectRange);if(uu(u))return x(c6,l,r,ui,i,s,ue);if(uc(u))return x(c6,l,r,um,i,s,c8);else return E.none},e=>{let r=r=>()=>er(r,r=>cr(r.rows,r.cols,t,e,o)).fold(()=>sx(t,o.firstSelectedSelector,o.lastSelectedSelector).map(e=>{let r=uu(u)||d.isForward(u)?dV.after:dV.before;return l.setRelativeSelection(dV.on(e.first,0),r(e.table)),o.clear(t),dq.create(E.none(),!0)}),e=>E.some(dq.create(E.none(),!0)));if(uf(u)&&f&&!uY(s,i))return E.none;if(uu(u)&&f)return r([uU(1,0)]);if(uc(u)&&f)return r([uU(-1,0)]);if(d.isBackward(u)&&f)return r([uU(0,-1),uU(-1,0)]);if(d.isForward(u)&&f)return r([uU(0,1),uU(1,0)]);else if(uf(u)&&!f)return n;else return E.none})()},keyup:(e,l,n,s,a)=>sC(t,o.selectedSelector).fold(()=>{let i=e.raw,m=i.which;return!0!==i.shiftKey?E.none():uf(m)&&uY(l,s)?ce(t,r,l,n,s,a,o.selectRange):E.none()},E.none)}},uQ=(e,t,r,o)=>{let l=uq(e);return(e,n)=>{o.clearBeforeUpdate(t),sy(e,n,r).each(e=>{let r=e.boxes.getOr([]);o.selectRange(t,r,e.start,e.finish),l.selectContents(n),l.collapseSelection()})}},uX=(e,t)=>{let r=eI(e,t);return void 0===r||""===r?[]:r.split(" ")},uZ=(e,t,r)=>{let o=uX(e,t).concat([r]);return eW(e,t,o.join(" ")),!0},u0=(e,t,r)=>{let o=F(uX(e,t),e=>e!==r);return o.length>0?eW(e,t,o.join(" ")):eF(e,t),!1},u1=e=>void 0!==e.dom.classList,u9=e=>uX(e,"class"),u3=(e,t)=>uZ(e,"class",t),u2=(e,t)=>u0(e,"class",t),u5=(e,t)=>{u1(e)?e.dom.classList.add(t):u3(e,t)},u7=e=>{0===(u1(e)?e.dom.classList:u9(e)).length&&eF(e,"class")},u4=(e,t)=>{u1(e)?e.dom.classList.remove(t):u2(e,t),u7(e)},u6=(e,t)=>u1(e)&&e.dom.classList.contains(t),u8=(e,t)=>{L(t,t=>{u4(e,t)})},fe=(e,t,r)=>{let o=t=>{eF(t,e.selected),eF(t,e.firstSelected),eF(t,e.lastSelected)},l=t=>{eW(t,e.selected,"1")},n=e=>{s(e),r()},s=t=>{L(tV(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`),o)};return{clearBeforeUpdate:s,clear:n,selectRange:(r,o,s,a)=>{n(r),L(o,l),eW(s,e.firstSelected,"1"),eW(a,e.lastSelected,"1"),t(o,s,a)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},ft=(e,t,r,o)=>{switch(e.tag){case"none":return t();case"single":return o(e.element);case"multiple":return r(e.elements)}},fr=()=>({tag:"none"}),fo=e=>({tag:"multiple",elements:e}),fl=e=>({tag:"single",element:e}),fn=(e,t,r)=>({get:()=>sD(e(),r).fold(()=>t().fold(fr,fl),fo)}),fs=(e,t)=>K(aS(e.slice(0,t[t.length-1].row+1)),e=>M(e.cells.slice(0,t[t.length-1].column+1),e=>e.element)),fa=(e,t)=>K(aS(e.slice(t[0].row+t[0].rowspan-1,e.length)),e=>M(e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length),e=>e.element)),fi=(e,t,r)=>{let o=oB.fromTable(e);return a_(o,t).map(e=>{let{rows:t}=ox(aT(o,r,!1));return{upOrLeftCells:fs(t,e),downOrRightCells:fa(t,e)}})},fm=(e,t,r,o,l,n,s)=>({target:e,x:t,y:r,stop:o,prevent:l,kill:n,raw:s}),fd=e=>{let t=eV.fromDom(tz(e).getOr(e.target)),r=()=>e.stopPropagation(),o=()=>e.preventDefault(),l=w(o,r);return fm(t,e.clientX,e.clientY,r,o,l,e)},fc=(e,t)=>r=>{e(r)&&t(fd(r))},fu=(e,t,r,o,l)=>{let n=fc(r,o);return e.dom.addEventListener(t,n,l),{unbind:x(fg,e,t,n,l)}},ff=(e,t,r,o)=>fu(e,t,r,o,!1),fg=(e,t,r,o)=>{e.dom.removeEventListener(t,r,o)},fh=(e,t,r)=>ff(e,t,k,r),fp=e=>!u6(eV.fromDom(e.target),"ephox-snooker-resizer-bar"),fb=(e,t)=>{let r=fn(()=>eV.fromDom(e.getBody()),()=>sF(nY(e),nG(e)),sz.selectedSelector),o=fe(sz,(t,r,o)=>{rD(r).each(l=>{let n=M(t,e=>e.dom),s=nC(e),a=nc(b,eV.fromDom(e.getDoc()),s),i=fi(l,{selection:sH(e)},a).map(e=>es(e,e=>M(e,e=>e.dom))).getOrUndefined();m_(e,n,r.dom,o.dom,i)})},()=>mB(e));return e.on("init",r=>{let l=e.getWin(),n=nU(e),s=nG(e),a=uG(l,n,s,o),i=uJ(l,n,s,o),m=uQ(l,n,s,o),d=e=>!0===e.raw.shiftKey;e.on("TableSelectorChange",e=>m(e.start,e.finish));let c=(t,r)=>{d(t)&&(r.kill&&t.kill(),r.selection.each(t=>{let r=d7(l,uv(t.start,t.finish));e.selection.setRng(r)}))},u=e=>0===e.button,f=e=>void 0===e.buttons||(1&e.buttons)!=0,g=(()=>{let e=ur(eV.fromDom(n)),t=ur(0);return{touchEnd:r=>{let o=eV.fromDom(r.target);if(ez("td")(o)||ez("th")(o)){let l=e.get(),n=t.get();eY(l,o)&&r.timeStamp-n<300&&(r.preventDefault(),m(o,o))}e.set(o),t.set(r.timeStamp)}}})();e.on("dragstart",e=>{a.clearstate()}),e.on("mousedown",e=>{u(e)&&fp(e)&&a.mousedown(fd(e))}),e.on("mouseover",e=>{f(e)&&fp(e)&&a.mouseover(fd(e))}),e.on("mouseup",e=>{u(e)&&fp(e)&&a.mouseup(fd(e))}),e.on("touchend",g.touchEnd),e.on("keyup",t=>{let r=fd(t);if(r.raw.shiftKey&&uf(r.raw.which)){let t=e.selection.getRng(),o=eV.fromDom(t.startContainer),l=eV.fromDom(t.endContainer);i.keyup(r,o,t.startOffset,l,t.endOffset).each(e=>{c(r,e)})}}),e.on("keydown",r=>{let o=fd(r);t.hide();let l=e.selection.getRng(),n=eV.fromDom(l.startContainer),s=eV.fromDom(l.endContainer),a=oM(ug,uh)(eV.fromDom(e.selection.getStart()));i.keydown(o,n,l.startOffset,s,l.endOffset,a).each(e=>{c(o,e)}),t.show()}),e.on("NodeChange",()=>{let t=e.selection;sb(rD,[eV.fromDom(t.getStart()),eV.fromDom(t.getEnd())]).fold(()=>o.clear(n),b)})}),e.on("PreInit",()=>{e.serializer.addTempAttr(sz.firstSelected),e.serializer.addTempAttr(sz.lastSelected)}),{getSelectedCells:()=>ft(r.get(),y([]),e=>M(e,e=>e.dom),e=>[e.dom]),clearSelectedCells:e=>o.clear(eV.fromDom(e))}},fw=e=>{let t=[];return{bind:e=>{if(void 0===e)throw Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=F(t,t=>t!==e)},trigger:(...r)=>{let o={};L(e,(e,t)=>{o[e]=r[t]}),L(t,e=>{e(o)})}}},fv=e=>({registry:es(e,e=>({bind:e.bind,unbind:e.unbind})),trigger:es(e,e=>e.trigger)}),fy=(e,t)=>{let r=null,o=()=>{d(r)||(clearTimeout(r),r=null)};return{cancel:o,throttle:(...l)=>{o(),r=setTimeout(()=>{r=null,e.apply(null,l)},t)}}},fC=e=>e.slice(0).sort(),fT=(e,t)=>{throw Error("All required keys ("+fC(e).join(", ")+") were not specified. Specified keys were: "+fC(t).join(", ")+".")},fx=e=>{throw Error("Unsupported keys for object: "+fC(e).join(", "))},fS=(e,t)=>{if(!m(t))throw Error("The "+e+" fields must be an array. Was: "+t+".");L(t,t=>{if(!a(t))throw Error("The value "+t+" in the "+e+" fields was not a string.")})},fR=(e,t)=>{throw Error("All values need to be of type: "+t+". Keys ("+fC(e).join(", ")+") were not.")},fD=e=>{let t=fC(e);q(t,(e,r)=>r<t.length-1&&e===t[r+1]).each(e=>{throw Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},fO=(e,t)=>fk(e,t,{validate:h,label:"function"}),fk=(e,t,r)=>{if(0===t.length)throw Error("You must specify at least one required field.");return fS("required",t),fD(t),o=>{let l=eo(o);Y(t,e=>z(l,e))||fT(t,l),e(t,l);let n=F(t,e=>!r.validate(o[e],e));return n.length>0&&fR(n,r.label),o}},fE=(e,t)=>{let r=F(t,t=>!z(e,t));r.length>0&&fx(r)},fA=e=>fO(fE,e),f_=fA(["compare","extract","mutate","sink"]),fB=fA(["element","start","stop","destroy"]),fN=fA(["forceDrop","drop","move","delayDrop"]),fz=()=>{let e=E.none(),t=(t,r)=>{let o=e.map(e=>t.compare(e,r));return e=E.some(r),o},r=fv({move:fw(["info"])});return{onEvent:(e,o)=>{o.extract(e).each(e=>{t(o,e).each(e=>{r.trigger.move(e)})})},reset:()=>{e=E.none()},events:r.registry}},fj=()=>({onEvent:b,reset:b,events:fv({move:fw(["info"])}).registry}),fW=()=>{let e=fj(),t=fz(),r=e;return{on:()=>{r.reset(),r=t},off:()=>{r.reset(),r=e},isOn:()=>r===t,onEvent:(e,t)=>{r.onEvent(e,t)},events:t.events}},fM=(e,t,r)=>{let o=!1,l=fv({start:fw([]),stop:fw([])}),n=fW(),s=()=>{m.stop(),n.isOn()&&(n.off(),l.trigger.stop())},a=fy(s,200);n.events.move.bind(r=>{t.mutate(e,r.info)});let i=e=>(...t)=>{o&&e.apply(null,t)},m=t.sink(fN({forceDrop:s,drop:i(s),move:i(e=>{a.cancel(),n.onEvent(e,t)}),delayDrop:i(a.throttle)}),r);return{element:m.element,go:e=>{m.start(e),n.on(),l.trigger.start()},on:()=>{o=!0},off:()=>{o=!1},isActive:()=>o,destroy:()=>{m.destroy()},events:l.registry}},fL=e=>{let t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},fI=fL("ephox-dragster").resolve,fP=e=>{let t={layerClass:fI("blocker"),...e},r=eV.fromTag("div");return eW(r,"role","presentation"),ra(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),u5(r,fI("blocker")),u5(r,t.layerClass),{element:y(r),destroy:()=>{ta(r)}}};var fF=f_({compare:(e,t)=>o$(t.left-e.left,t.top-e.top),extract:e=>E.some(o$(e.x,e.y)),sink:(e,t)=>{let r=fP(t),o=fh(r.element(),"mousedown",e.forceDrop),l=fh(r.element(),"mouseup",e.drop),n=fh(r.element(),"mousemove",e.move),s=fh(r.element(),"mouseout",e.delayDrop);return fB({element:r.element,start:e=>{tt(e,r.element())},stop:()=>{ta(r.element())},destroy:()=>{r.destroy(),l.unbind(),n.unbind(),s.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});let fH=(e,t={})=>{var r;return fM(e,null!==(r=t.mode)&&void 0!==r?r:fF,t)},f$=fL("ephox-snooker").resolve,fV=()=>{let e=fv({drag:fw(["xDelta","yDelta"])});return{mutate:(t,r)=>{e.trigger.drag(t,r)},events:e.registry}},fq=()=>{let e=fv({drag:fw(["xDelta","yDelta","target"])}),t=E.none(),r=fV();return r.events.drag.bind(r=>{t.each(t=>{e.trigger.drag(r.xDelta,r.yDelta,t)})}),{assign:e=>{t=E.some(e)},get:()=>t,mutate:r.mutate,events:e.registry}},fU=(e,t,r,o,l)=>{let n=eV.fromTag("div");return ra(n,{position:"absolute",left:t-o/2+"px",top:r+"px",height:l+"px",width:o+"px"}),eM(n,{"data-column":e,role:"presentation"}),n},fG=(e,t,r,o,l)=>{let n=eV.fromTag("div");return ra(n,{position:"absolute",left:t+"px",top:r-l/2+"px",height:l+"px",width:o+"px"}),eM(n,{"data-row":e,role:"presentation"}),n},fK=f$("resizer-bar"),fY=f$("resizer-rows"),fJ=f$("resizer-cols"),fQ=(e,t)=>K(e.all,(e,r)=>t(e.element)?[r]:[]),fX=(e,t)=>{let r=[];return W(e.grid.columns,o=>{oB.getColumnAt(e,o).map(e=>e.element).forall(t)&&r.push(o)}),F(r,r=>Y(oB.filterItems(e,e=>e.column===r),e=>t(e.element)))},fZ=e=>{L(tV(e.parent(),"."+fK),ta)},f0=(e,t,r)=>{let o=e.origin();L(t,t=>{t.each(t=>{let l=r(o,t);u5(l,fK),tt(e.parent(),l)})})},f1=(e,t,r,o)=>{f0(e,t,(e,t)=>{let l=fU(t.col,t.x-e.left,r.top-e.top,7,o);return u5(l,fJ),l})},f9=(e,t,r,o)=>{f0(e,t,(e,t)=>{let l=fG(t.row,r.left-e.left,t.y-e.top,o,7);return u5(l,fY),l})},f3=(e,t,r,o,l)=>{let n=oU(r),s=t.isResizable,a=o.length>0?o2.positions(o,r):[],i=a.length>0?fQ(e,s):[];f9(t,F(a,(e,t)=>j(i,e=>t===e)),n,ou(r));let m=l.length>0?o7.positions(l,r):[],d=m.length>0?fX(e,s):[];f1(t,F(m,(e,t)=>j(d,e=>t===e)),n,oF(r))},f2=(e,t)=>{if(fZ(e),e.isResizable(t)){let r=oB.fromTable(t),o=oj(r),l=oN(r);f3(r,e,t,o,l)}},f5=(e,t)=>{L(tV(e.parent(),"."+fK),t)},f7=e=>{f5(e,e=>{rs(e,"display","none")})},f4=e=>{f5(e,e=>{rs(e,"display","block")})},f6=e=>u6(e,fY),f8=e=>u6(e,fJ),ge=f$("resizer-bar-dragging"),gt=e=>{let t=fq(),r=fH(t,{}),o=E.none(),l=(e,t)=>E.from(eI(e,t));t.events.drag.bind(e=>{l(e.target,"data-row").each(t=>{let r=rb(e.target,"top");rs(e.target,"top",r+e.yDelta+"px")}),l(e.target,"data-column").each(t=>{let r=rb(e.target,"left");rs(e.target,"left",r+e.xDelta+"px")})});let n=(e,t)=>rb(e,t)-rf(e,"data-initial-"+t,0);r.events.stop.bind(()=>{t.get().each(t=>{o.each(r=>{l(t,"data-row").each(e=>{let o=n(t,"top");eF(t,"data-initial-top"),c.trigger.adjustHeight(r,o,parseInt(e,10))}),l(t,"data-column").each(e=>{let o=n(t,"left");eF(t,"data-initial-left"),c.trigger.adjustWidth(r,o,parseInt(e,10))}),f2(e,r)})})});let s=(o,l)=>{c.trigger.startAdjust(),t.assign(o),eW(o,"data-initial-"+l,rb(o,l)),u5(o,ge),rs(o,"opacity","0.2"),r.go(e.dragContainer())},a=fh(e.parent(),"mousedown",e=>{f6(e.target)&&s(e.target,"top"),f8(e.target)&&s(e.target,"left")}),i=t=>eY(t,e.view()),m=e=>tZ(e,"table",i).filter(nV),d=fh(e.view(),"mouseover",t=>{m(t.target).fold(()=>{tW(t.target)&&fZ(e)},t=>{r.isActive()&&(o=E.some(t),f2(e,t))})}),c=fv({adjustHeight:fw(["table","delta","row"]),adjustWidth:fw(["table","delta","column"]),startAdjust:fw([])});return{destroy:()=>{a.unbind(),d.unbind(),r.destroy(),fZ(e)},refresh:t=>{f2(e,t)},on:r.on,off:r.off,hideBars:x(f7,e),showBars:x(f4,e),events:c.registry}},gr={create:(e,t,r)=>{let o=gt(e),l=fv({beforeResize:fw(["table","type"]),afterResize:fw(["table","type"]),startDrag:fw([])});return o.events.adjustHeight.bind(e=>{let t=e.table;l.trigger.beforeResize(t,"row");let r=o2.delta(e.delta,t);iO(t,r,e.row),l.trigger.afterResize(t,"row")}),o.events.startAdjust.bind(e=>{l.trigger.startDrag()}),o.events.adjustWidth.bind(e=>{let o=e.table;l.trigger.beforeResize(o,"col");let n=o7.delta(e.delta,o),s=r(o);iD(o,n,e.column,t,s),l.trigger.afterResize(o,"col")}),{on:o.on,off:o.off,refreshBars:o.refresh,hideBars:o.hideBars,showBars:o.showBars,destroy:o.destroy,events:l.registry}}},go=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/0xffffffff,gl=0,gn=e=>{let t=new Date().getTime();return e+"_"+Math.floor(1e9*go())+ ++gl+String(t)},gs={only:(e,t)=>{let r=eB(e)?eZ(e):e;return{parent:y(r),view:y(e),dragContainer:y(r),origin:y(o$(0,0)),isResizable:t}},body:(e,t,r)=>({parent:y(t),view:y(e),dragContainer:y(t),origin:y(o$(0,0)),isResizable:r}),scrollable:(e,t,r,o)=>({parent:y(t),view:y(e),dragContainer:y(r),origin:()=>oU(t),isResizable:o})},ga=e=>{let t=gn("resizer-container"),r=eV.fromTag("div");return eW(r,"id",t),ra(r,{position:e,height:"0",width:"0",padding:"0",margin:"0",border:"0"}),r},gi=(e,t)=>{let r=nH(e),o=eV.fromDom(e.getBody()),l=ga(r?"relative":"static"),n=tM();return r?(e8(o,l),gs.scrollable(o,l,n,t)):(tt(n,l),gs.body(o,l,t))},gm=(e,t)=>e.inline?gi(e,t):gs.only(eV.fromDom(e.getDoc()),t),gd=(e,t)=>{e.inline&&ta(t.parent())},gc=e=>g(e)&&"TABLE"===e.nodeName,gu="bar-",gf=e=>"false"!==eI(e,"data-mce-resize"),gg=e=>{let t=oB.fromTable(e);oB.hasColumns(t)||L(rS(e),e=>{let t=ri(e,"width");rs(e,"width",t),eF(e,"width")})},gh=e=>t6(e,"corner-"),gp=e=>t7(e,"corner-"),gb=e=>{let t,r,o,l;let n=ul(),s=ul(),a=ul(),i=t=>mL(e,t),m=()=>nR(e)?s4():s7(),d=e=>s6(e).columns,c=e=>s6(e).rows,u=(n,s,a,u)=>{let f=gp(s),g=t8(f,"e"),h=t6(f,"n");if(""===r&&dn(n),""===l&&da(n),a!==t&&""!==r){rs(n,"width",r);let o=m(),l=i(n),s=nR(e)||g?d(n)-1:0;iD(n,a-t,s,o,l)}else n1(r)&&rs(n,"width",a*parseFloat(r.replace("%",""))/t+"%");if(n9(r)&&gg(n),u!==o&&""!==l){rs(n,"height",l);let e=h?0:c(n)-1;iO(n,u-o,e)}},f=()=>{s.on(e=>{e.destroy()}),a.on(t=>{gd(e,t)})};e.on("init",()=>{let t=gm(e,gf);if(a.set(t),nT(e)&&n_(e)){let r=m(),o=gr.create(t,r,i);e.mode.isReadOnly()||o.on(),o.events.startDrag.bind(t=>{n.set(e.selection.getRng())}),o.events.beforeResize.bind(t=>{let r=t.table.dom;mN(e,r,nJ(r),nQ(r),gu+t.type)}),o.events.afterResize.bind(t=>{let r=t.table,o=r.dom;nK(r),n.on(t=>{e.selection.setRng(t),e.focus()}),mz(e,o,nJ(o),nQ(o),gu+t.type),e.undoManager.add()}),s.set(o)}}),e.on("ObjectResizeStart",n=>{let s=n.target;if(gc(s)&&!e.mode.isReadOnly()){let a=eV.fromDom(s);L(e.dom.select(".mce-clonedresizable"),t=>{e.dom.addClass(t,"mce-"+nS(e)+"-columns")}),!dt(a)&&nE(e)?ds(a):!de(a)&&nk(e)&&dn(a),dr(a)&&t6(n.origin,gu)&&dn(a),t=n.width,r=nA(e)?"":nZ(e,s).getOr(""),o=n.height,l=n0(e,s).getOr("")}}),e.on("ObjectResized",t=>{let r=t.target;if(gc(r)){let o=eV.fromDom(r),l=t.origin;gh(l)&&u(o,l,t.width,t.height),nK(o),mA(e,o.dom,mj)}});let g=()=>{s.on(e=>{e.on(),e.showBars()})},h=()=>{s.on(e=>{e.off(),e.hideBars()})};return e.on("DisabledStateChange",e=>{e.state?h():g()}),e.on("SwitchMode",()=>{e.mode.isReadOnly()?h():g()}),e.on("dragstart dragend",e=>{"dragstart"===e.type?h():g()}),e.on("remove",()=>{f()}),{refresh:e=>{s.on(t=>t.refreshBars(eV.fromDom(e)))},hide:()=>{s.on(e=>e.hideBars())},show:()=>{s.on(e=>e.showBars())}}},gw=e=>{ny(e);let t=gb(e),r=fb(e,t),o=mI(e,t,r);return dP(e,o),dF(e,o),sG(e,o),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}};t.add("dom",e=>({table:gw(e)}))}()}}]);